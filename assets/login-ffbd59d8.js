import{h as k,y as u,u as I,de as K,G as q,D as B,o as S,l as b,m as i,a,w as t,n as r,aw as y,b as z,X as C,A as m,B as U,E as F,J as Q,K as R,_ as A}from"./index-bce8d3cc.js";import{a as D,E as G}from"./el-form-item-c23d70bb.js";const v=n=>(Q("data-v-70100481"),n=n(),R(),n),J={class:"login-container"},L={class:"main"},M=v(()=>i("span",{class:"i-icon-park-outline-user"},null,-1)),O=v(()=>i("span",{class:"i-icon-park-outline-lock"},null,-1)),P={class:"btn-wrapper"},T=k({__name:"login",setup(n){const s=u({userName:"",password:""}),f=u(),g=u({}),c=u(!1),w=I(),h=K(),x=q();B(h,function(o){const e=o.query;e&&(typeof e.redirect=="string"&&(f.value=e.redirect),g.value=E(e))},{immediate:!0});async function d(){if(!navigator.onLine){m.warning("已离线！");return}if(s.value.userName!=null&&s.value.password!=null){c.value=!0;try{await x.login({userName:s.value.userName,password:s.value.password}),m.success("登录成功！"),w.push({path:f.value||"/",query:g.value})}catch(o){o instanceof Error&&m.error(o.message)}c.value=!1}}function E(o){const{redirect:e,...l}=o;return l}return(o,e)=>{const l=U,p=D,N=F,V=G;return S(),b("div",J,[i("div",L,[a(V,C({layout:"horizontal",model:r(s)},{wrapperCol:{span:24}}),{default:t(()=>[a(p,{required:""},{default:t(()=>[a(l,{modelValue:r(s).userName,"onUpdate:modelValue":e[0]||(e[0]=_=>r(s).userName=_),placeholder:"账户",size:"large",onKeypress:y(d,["enter"])},{prefix:t(()=>[M]),_:1},8,["modelValue","onKeypress"])]),_:1}),a(p,{required:""},{default:t(()=>[a(l,{modelValue:r(s).password,"onUpdate:modelValue":e[1]||(e[1]=_=>r(s).password=_),type:"password",placeholder:"密码",size:"large","show-password":"",onKeypress:y(d,["enter"])},{prefix:t(()=>[O]),_:1},8,["modelValue","onKeypress"])]),_:1}),a(p,null,{default:t(()=>[i("div",P,[a(N,{type:"primary",block:"",size:"large",loading:r(c),onClick:d},{default:t(()=>[z(" 登录 ")]),_:1},8,["loading"])])]),_:1})]),_:1},16,["model"])])])}}});const H=A(T,[["__scopeId","data-v-70100481"]]);export{H as default};
