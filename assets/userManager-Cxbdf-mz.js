import{h as C,aT as j,_ as z,k as y,aU as S,u as N,R as F,T as L,E as A,r as p,s as $,x as r,v as b,I as q,j as G,l as O,a8 as U,F as J,q as v,w as _,y as Q,aP as W,H as B,b8 as X,z as Z,K as s,bz as x,L as h,N as u,Y as ee,at as te,a4 as T,bA as I,aA as m,G as ae,a0 as se}from"./index-DdH6q6SV.js";import"./el-empty-BPJWrEEI.js";import{F as re,a as ne,E as le}from"./el-table-v2-BGVRD9ET.js";/* empty css               */import{E as oe}from"./el-popover-Bz8jdwYv.js";import"./el-popper-B_12Myl_.js";import{E as k}from"./index-PvysGUtG.js";import"./castArray-DfJK8VnQ.js";import"./raf-BV4aVOg6.js";import"./memoize-one.esm-BdPwpGay.js";import"./index--kSuBU8m.js";import"./index-ukcMG_GO.js";const P=Symbol("breadcrumbKey"),ce=C({separator:{type:String,default:"/"},separatorIcon:{type:j}}),ue=y({name:"ElBreadcrumb"}),ie=y({...ue,props:ce,setup(a){const e=a,{t:i}=S(),n=N("breadcrumb"),c=F();return q(P,e),L(()=>{const o=c.value.querySelectorAll(`.${n.e("item")}`);o.length&&o[o.length-1].setAttribute("aria-current","page")}),(o,E)=>(p(),A("div",{ref_key:"breadcrumb",ref:c,class:b(r(n).b()),"aria-label":r(i)("el.breadcrumb.label"),role:"navigation"},[$(o.$slots,"default")],10,["aria-label"]))}});var de=z(ie,[["__file","breadcrumb.vue"]]);const me=C({to:{type:G([String,Object]),default:""},replace:Boolean}),pe=y({name:"ElBreadcrumbItem"}),fe=y({...pe,props:me,setup(a){const e=a,i=U(),n=O(P,void 0),c=N("breadcrumb"),o=i.appContext.config.globalProperties.$router,E=F(),w=()=>{!e.to||!o||(e.replace?o.replace(e.to):o.push(e.to))};return(g,D)=>{var l,t;return p(),A("span",{class:b(r(c).e("item"))},[J("span",{ref_key:"link",ref:E,class:b([r(c).e("inner"),r(c).is("link",!!g.to)]),role:"link",onClick:w},[$(g.$slots,"default")],2),(l=r(n))!=null&&l.separatorIcon?(p(),v(r(W),{key:0,class:b(r(c).e("separator"))},{default:_(()=>[(p(),v(Q(r(n).separatorIcon)))]),_:1},8,["class"])):(p(),A("span",{key:1,class:b(r(c).e("separator")),role:"presentation"},B((t=r(n))==null?void 0:t.separator),3))],2)}}});var R=z(fe,[["__file","breadcrumb-item.vue"]]);const be=Z(de,{BreadcrumbItem:R}),_e=X(R);var f=function(a){return a[a.DEACTIVATED=0]="DEACTIVATED",a[a.ENABLED=1]="ENABLED",a[a.DISABLED=2]="DISABLED",a}(f||{});function ye(a){return[{key:"userId",dataKey:"userId",width:150,hidden:!0},{key:"userName",dataKey:"userName",title:"用户名",width:150,align:"center"},{key:"nickName",dataKey:"nickName",title:"昵称",width:150,align:"center"},{key:"email",dataKey:"email",title:"邮箱",width:150,align:"center"},{key:"roles",title:"角色",width:150,align:"center",cellRenderer:({rowData:e})=>{const i=e.roles?.map(n=>n.name).join(", ")||"";return s("span",null,[i])}},{key:"status",title:"状态",width:100,align:"center",cellRenderer:({rowData:e})=>{switch(e.status){case f.ENABLED:return s(k,{type:"success"},{default:()=>[u("正常")]});case f.DISABLED:return s(k,{type:"info"},{default:()=>[u("禁用")]});case f.DEACTIVATED:return s(k,{type:"info"},{default:()=>[u("待激活")]});default:return s(k,{type:"warning"},{default:()=>[u("未知")]})}}},{key:"createdAt",title:"创建时间",width:200,align:"center",cellRenderer:({rowData:e})=>s("span",null,[x(e.createdAt).format("YYYY-MM-DD HH:mm:ss")])},{key:"updatedAt",title:"更新时间",width:200,align:"center",cellRenderer:({rowData:e})=>s("span",null,[x(e.updatedAt).format("YYYY-MM-DD HH:mm:ss")])},{key:"operations",title:"操作",width:200,fixed:re.RIGHT,cellRenderer:({rowData:e})=>s(ee,null,[s(h,{size:"small",plain:!0,onClick:()=>a(e,"edit")},{default:()=>[u("修改")]}),e.status===f.DEACTIVATED||e.status===f.DISABLED?s(h,{size:"small",plain:!0,onClick:()=>a(e,"activate")},{default:()=>[u("启用")]}):s(h,{size:"small",plain:!0,onClick:()=>a(e,"disable")},{default:()=>[u("禁用")]}),s(oe,{title:"确定要删除吗？",onConfirm:()=>a(e,"delete")},{reference:()=>s(h,{size:"small",plain:!0,type:"danger"},{default:()=>[u("删除")]})})])}]}const Ee={"h-full":"","w-full":"",flex:"","flex-col":"","gap-4":"","pa-4":""},ge=y({__name:"userManager",setup(a){const e=te(),i=T([]),n=T({index:1,size:10}),c=ye(E);L(()=>{o(1,n.size)});async function o(l,t){try{const d=await I.get("/user/list",{params:{pageIndex:l,pageSize:t}});if(d.success)i.splice(0,i.length,...d.data);else throw new Error(d.message)}catch(d){m.error(d.message)}}function E(l,t){switch(t){case"edit":break;case"disable":w(l);break;case"activate":g(l);break;case"delete":D(l);break}}async function w(l){try{const t=await I.put("/user/ban",null,{params:{id:l.userId}});if(t.success)m.success(t.message),await o(n.index,n.size);else throw new Error(t.message)}catch(t){m.error(t.message)}}async function g(l){try{const t=await I.put("/user/activate",null,{params:{id:l.userId}});if(t.success)m.success(t.message),await o(n.index,n.size);else throw new Error(t.message)}catch(t){m.error(t.message)}}async function D(l){try{const t=await I.delete(`/user/${l.userId}`);if(t.success)m.success(t.message),await o(n.index,n.size);else throw new Error(t.message)}catch(t){m.error(t.message)}}return(l,t)=>{const d=_e,V=be,Y=ne,M=le;return p(),A("div",Ee,[r(e).meta.parentInfo?(p(),v(V,{key:0},{default:_(()=>[s(d,{to:r(e).meta.parentInfo.link},{default:_(()=>[u(B(r(e).meta.parentInfo.name),1)]),_:1},8,["to"]),s(d,null,{default:_(()=>[u(B(r(e).name),1)]),_:1})]),_:1})):ae("",!0),s(M,{"flex-1":""},{default:_(({width:K,height:H})=>[s(Y,{columns:r(c),data:r(i),width:K,height:H,fixed:""},null,8,["columns","data","width","height"])]),_:1})])}}}),Ne=se(ge,[["__scopeId","data-v-2a17d7f3"]]);export{Ne as default};
