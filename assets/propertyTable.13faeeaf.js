import{_ as f,d as g,k as C,o as r,c as d,w as k,m as p,z as n,y as w,q as c,$ as b,bR as E}from"./index.82f4337f.js";/* empty css              */import{_ as y}from"./index.e0256bdb.js";import"./index.fdaca038.js";import"./index.95488799.js";import"./index.a71478f0.js";import"./index.1f71f2e3.js";import"./index.6b5a3d7e.js";import"./index.1763e14a.js";import"./index.839a5a74.js";import"./css.b1edd3c8.js";import"./useState.3bd5c012.js";import"./toArray.90044492.js";import"./DownOutlined.9b6a2dc0.js";import"./index.347c1c3e.js";import"./index.9f458682.js";import"./Menu.8d7795fb.js";import"./shallowequal.6d661cee.js";import"./_arrayIncludesWith.91d14080.js";import"./_baseFindIndex.10ef1a58.js";import"./Overflow.eae5b426.js";import"./collapseMotion.72f7dd5b.js";import"./SearchOutlined.d8f8237a.js";import"./index.8a179fe7.js";import"./Password.a694d5f6.js";import"./EyeOutlined.89a34815.js";import"./Checkbox.6cf58b21.js";import"./debounce.e2258692.js";import"./responsiveObserve.e6e652ae.js";import"./isMobile.6491fde5.js";const M=g({name:"PropertyTable",props:{geoJsonLayer:{type:Object,default:void 0}},data:()=>({editableData:{}}),computed:{features(){if(this.geoJsonLayer)try{return this.geoJsonLayer.toGeoJSON().features}catch{return null}return null},propertyList(){return this.features?this.features.map(e=>e.properties):null},tableColumns(){if(this.propertyList&&this.propertyList.length>0){const t=Object.keys(this.propertyList[0]).map(s=>({title:s,dataIndex:s,key:s,slots:{customRender:"property"}}));return t.push({title:"\u64CD\u4F5C",dataIndex:"operation",width:40,fixed:"right",slots:{customRender:"operation"}}),t}else return null}},methods:{saveToEditableData(e,t,s){if(e instanceof InputEvent&&t&&s)try{t[s]=JSON.parse(e.currentTarget.value)}catch{t[s]=e.currentTarget.value}},edit(e){this.editableData[e]=C(this.propertyList[e])},save(e){Object.assign(this.propertyList[e],this.editableData[e]),delete this.editableData[e],this.$eventBus.emit("updateEditor")},cancel(e){delete this.editableData[e]},rowEvents(e,t){return{onClick:()=>{this.$eventBus.emit("locationGeo",this.features[t])}}}}}),_={key:0,class:"editable-cell-input-wrapper"},D={key:1,class:"editable-cell-text-wrapper"},I={key:0},z=["onClick"],x=["onClick"],L={key:1},H=["onClick"];function B(e,t,s,u,Z,A){const m=b,v=y,h=E;return e.tableColumns?(r(),d(v,{key:0,class:"ant-table-striped",columns:e.tableColumns,"data-source":e.propertyList,"row-key":(o,a)=>a,pagination:!1,bordered:"",size:"small",scroll:{x:!0},"row-class-name":(o,a)=>a%2===1?"table-striped":null,"custom-row":e.rowEvents},{property:k(({text:o,column:a,index:i})=>[e.editableData[i]?(r(),p("div",_,[typeof e.editableData[i][a.dataIndex]=="string"?(r(),d(m,{key:0,value:e.editableData[i][a.dataIndex],"onUpdate:value":l=>e.editableData[i][a.dataIndex]=l,onClick:t[0]||(t[0]=n(()=>{},["stop"]))},null,8,["value","onUpdate:value"])):typeof e.editableData[i][a.dataIndex]=="number"?(r(),d(m,{key:1,value:e.editableData[i][a.dataIndex],"onUpdate:value":l=>e.editableData[i][a.dataIndex]=l,valueModifiers:{number:!0},onClick:t[1]||(t[1]=n(()=>{},["stop"]))},null,8,["value","onUpdate:value"])):(r(),d(m,{key:2,value:JSON.stringify(e.editableData[i][a.dataIndex]),onClick:t[2]||(t[2]=n(()=>{},["stop"])),onChange:l=>e.saveToEditableData(l,e.editableData[i],a.dataIndex)},null,8,["value","onChange"]))])):(r(),p("div",D,w(typeof o=="object"?JSON.stringify(o):o),1))]),operation:k(({index:o})=>[e.editableData[o]?(r(),p("span",I,[c("a",{onClick:n(a=>e.save(o),["stop"])}," \u4FDD\u5B58\u5C5E\u6027 ",8,z),c("a",{onClick:n(a=>e.cancel(o),["stop"])}," \u53D6\u6D88\u7F16\u8F91 ",8,x)])):(r(),p("span",L,[c("a",{onClick:n(a=>e.edit(o),["stop"])}," \u7F16\u8F91\u5C5E\u6027 ",8,H)]))]),_:1},8,["columns","data-source","row-key","row-class-name","custom-row"])):(r(),d(h,{key:1}))}var me=f(M,[["render",B],["__scopeId","data-v-13846fc8"]]);export{me as default};
