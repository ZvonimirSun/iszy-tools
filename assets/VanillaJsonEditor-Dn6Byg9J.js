import{a4 as z,a5 as xe,a6 as Oe,a7 as eo,a8 as oo,a9 as Fe,P as no,e as to}from"./Router-wjsfmgt-.js";import{_ as W,D as j,E as U,r as C,C as le,G as B,o as Ke,u as v,q as be,A as me,j as Y,k as P,af as lo,a9 as re,w as he,b9 as so,av as N,H as M,Z as x,$ as a,V as r,bP as ao,bQ as ro,ae as Ae,a7 as G,aN as io,ba as uo,ar as we,bK as co,b5 as Ge,bR as po,F as Ie,bb as fo,bS as mo,bq as vo,I as X,bo as go,a0 as ie,J as fe,a1 as te,m as Ve,ao as _,ai as _o,ay as _e,Q as bo,bT as ho,K as wo,a6 as Io,bH as ze,bU as Re,bJ as Be,aF as yo,aq as A,ah as Pe,aw as ce,L as oe,aa as ne,az as Co,aA as Eo,aB as To,aC as $o}from"./index-tHblRTxj.js";import{c as Ue,E as ko}from"./el-dialog-D2E7GeHM.js";import{E as So}from"./el-space-COobc8k7.js";import{H as No,w as pe}from"./jse-theme-dark-Che-B912.js";import{c as De}from"./createFile-B7PSLqv0.js";import{f as Oo}from"./formatBytes-aAslYXQD.js";import{c as Fo}from"./castArray-DNtjWPNh.js";const Ro=j({inheritAttrs:!1});function Bo(e,o,b,t,m,h){return U(e.$slots,"default")}var Po=W(Ro,[["render",Bo],["__file","collection.vue"]]);const Do=j({name:"ElCollectionItem",inheritAttrs:!1});function Lo(e,o,b,t,m,h){return U(e.$slots,"default")}var Mo=W(Do,[["render",Lo],["__file","collection-item.vue"]]);const Je="data-el-collection-item",Ye=e=>{const o=`El${e}Collection`,b=`${o}Item`,t=Symbol(o),m=Symbol(b),h={...Po,name:o,setup(){const i=C(null),y=new Map;le(t,{itemMap:y,getItems:()=>{const w=v(i);if(!w)return[];const d=Array.from(w.querySelectorAll(`[${Je}]`));return[...y.values()].sort((n,g)=>d.indexOf(n.ref)-d.indexOf(g.ref))},collectionRef:i})}},u={...Mo,name:b,setup(i,{attrs:y}){const s=C(null),w=B(t,void 0);le(m,{collectionItemRef:s}),Ke(()=>{const d=v(s);d&&w.itemMap.set(d,{ref:d,...y})}),be(()=>{const d=v(s);w.itemMap.delete(d)})}};return{COLLECTION_INJECTION_KEY:t,COLLECTION_ITEM_INJECTION_KEY:m,ElCollection:h,ElCollectionItem:u}},Ko=me({style:{type:Y([String,Array,Object])},currentTabId:{type:Y(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:Y(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:Ao,ElCollectionItem:Go,COLLECTION_INJECTION_KEY:ye,COLLECTION_ITEM_INJECTION_KEY:Vo}=Ye("RovingFocusGroup"),Ce=Symbol("elRovingFocusGroup"),je=Symbol("elRovingFocusGroupItem"),zo={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},Uo=(e,o)=>e,Jo=(e,o,b)=>{const t=Uo(e.key);return zo[t]},Yo=(e,o)=>e.map((b,t)=>e[(t+o)%e.length]),Ee=e=>{const{activeElement:o}=document;for(const b of e)if(b===o||(b.focus(),o!==document.activeElement))return},Le="currentTabIdChange",Me="rovingFocusGroup.entryFocus",jo={bubbles:!1,cancelable:!0},Ho=j({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:Ko,emits:[Le,"entryFocus"],setup(e,{emit:o}){var b;const t=C((b=e.currentTabId||e.defaultCurrentTabId)!=null?b:null),m=C(!1),h=C(!1),u=C(null),{getItems:i}=B(ye,void 0),y=P(()=>[{outline:"none"},e.style]),s=f=>{o(Le,f)},w=()=>{m.value=!0},d=z(f=>{var I;(I=e.onMousedown)==null||I.call(e,f)},()=>{h.value=!0}),T=z(f=>{var I;(I=e.onFocus)==null||I.call(e,f)},f=>{const I=!v(h),{target:O,currentTarget:k}=f;if(O===k&&I&&!v(m)){const J=new Event(Me,jo);if(k==null||k.dispatchEvent(J),!J.defaultPrevented){const S=i().filter(D=>D.focusable),F=S.find(D=>D.active),R=S.find(D=>D.id===v(t)),H=[F,R,...S].filter(Boolean).map(D=>D.ref);Ee(H)}}h.value=!1}),n=z(f=>{var I;(I=e.onBlur)==null||I.call(e,f)},()=>{m.value=!1}),g=(...f)=>{o("entryFocus",...f)};le(Ce,{currentTabbedId:lo(t),loop:re(e,"loop"),tabIndex:P(()=>v(m)?-1:0),rovingFocusGroupRef:u,rovingFocusGroupRootStyle:y,orientation:re(e,"orientation"),dir:re(e,"dir"),onItemFocus:s,onItemShiftTab:w,onBlur:n,onFocus:T,onMousedown:d}),he(()=>e.currentTabId,f=>{t.value=f??null}),so(u,Me,g)}});function Wo(e,o,b,t,m,h){return U(e.$slots,"default")}var qo=W(Ho,[["render",Wo],["__file","roving-focus-group-impl.vue"]]);const Qo=j({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:Ao,ElRovingFocusGroupImpl:qo}});function Zo(e,o,b,t,m,h){const u=N("el-roving-focus-group-impl"),i=N("el-focus-group-collection");return M(),x(i,null,{default:a(()=>[r(u,ao(ro(e.$attrs)),{default:a(()=>[U(e.$slots,"default")]),_:3},16)]),_:3})}var Xo=W(Qo,[["render",Zo],["__file","roving-focus-group.vue"]]);const xo=j({components:{ElRovingFocusCollectionItem:Go},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:o}){const{currentTabbedId:b,loop:t,onItemFocus:m,onItemShiftTab:h}=B(Ce,void 0),{getItems:u}=B(ye,void 0),i=Ae(),y=C(null),s=z(n=>{o("mousedown",n)},n=>{e.focusable?m(v(i)):n.preventDefault()}),w=z(n=>{o("focus",n)},()=>{m(v(i))}),d=z(n=>{o("keydown",n)},n=>{const{key:g,shiftKey:f,target:I,currentTarget:O}=n;if(g===G.tab&&f){h();return}if(I!==O)return;const k=Jo(n);if(k){n.preventDefault();let S=u().filter(F=>F.focusable).map(F=>F.ref);switch(k){case"last":{S.reverse();break}case"prev":case"next":{k==="prev"&&S.reverse();const F=S.indexOf(O);S=t.value?Yo(S,F+1):S.slice(F+1);break}}io(()=>{Ee(S)})}}),T=P(()=>b.value===v(i));return le(je,{rovingFocusGroupItemRef:y,tabIndex:P(()=>v(T)?0:-1),handleMousedown:s,handleFocus:w,handleKeydown:d}),{id:i,handleKeydown:d,handleFocus:w,handleMousedown:s}}});function en(e,o,b,t,m,h){const u=N("el-roving-focus-collection-item");return M(),x(u,{id:e.id,focusable:e.focusable,active:e.active},{default:a(()=>[U(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var on=W(xo,[["render",en],["__file","roving-focus-item.vue"]]);const nn=me({trigger:xe.trigger,effect:{...Oe.effect,default:"light"},type:{type:Y(String)},placement:{type:Y(String),default:"bottom"},popperOptions:{type:Y(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:Y([Number,String]),default:0},maxHeight:{type:Y([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:Y(Object)},teleported:Oe.teleported}),He=me({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:uo}}),tn=me({onKeydown:{type:Y(Function)}}),ln=[G.down,G.pageDown,G.home],We=[G.up,G.pageUp,G.end],sn=[...ln,...We],{ElCollection:an,ElCollectionItem:rn,COLLECTION_INJECTION_KEY:un,COLLECTION_ITEM_INJECTION_KEY:dn}=Ye("Dropdown"),ve=Symbol("elDropdown"),{ButtonGroup:cn}=we,pn=j({name:"ElDropdown",components:{ElButton:we,ElButtonGroup:cn,ElScrollbar:co,ElDropdownCollection:an,ElTooltip:eo,ElRovingFocusGroup:Xo,ElOnlyChild:oo,ElIcon:Ge,ArrowDown:po},props:nn,emits:["visible-change","click","command"],setup(e,{emit:o}){const b=Ve(),t=Ie("dropdown"),{t:m}=fo(),h=C(),u=C(),i=C(null),y=C(null),s=C(null),w=C(null),d=C(!1),T=[G.enter,G.space,G.down],n=P(()=>({maxHeight:mo(e.maxHeight)})),g=P(()=>[t.m(F.value)]),f=P(()=>Fo(e.trigger)),I=Ae().value,O=P(()=>e.id||I);he([h,f],([c,L],[l])=>{var p,E,$;(p=l==null?void 0:l.$el)!=null&&p.removeEventListener&&l.$el.removeEventListener("pointerenter",V),(E=c==null?void 0:c.$el)!=null&&E.removeEventListener&&c.$el.removeEventListener("pointerenter",V),($=c==null?void 0:c.$el)!=null&&$.addEventListener&&L.includes("hover")&&c.$el.addEventListener("pointerenter",V)},{immediate:!0}),be(()=>{var c,L;(L=(c=h.value)==null?void 0:c.$el)!=null&&L.removeEventListener&&h.value.$el.removeEventListener("pointerenter",V)});function k(){J()}function J(){var c;(c=i.value)==null||c.onClose()}function S(){var c;(c=i.value)==null||c.onOpen()}const F=vo();function R(...c){o("command",...c)}function V(){var c,L;(L=(c=h.value)==null?void 0:c.$el)==null||L.focus()}function H(){}function D(){const c=v(y);f.value.includes("hover")&&(c==null||c.focus()),w.value=null}function ue(c){w.value=c}function q(c){d.value||(c.preventDefault(),c.stopImmediatePropagation())}function Q(){o("visible-change",!0)}function de(c){(c==null?void 0:c.type)==="keydown"&&y.value.focus()}function ge(){o("visible-change",!1)}return le(ve,{contentRef:y,role:P(()=>e.role),triggerId:O,isUsingKeyboard:d,onItemEnter:H,onItemLeave:D}),le("elDropdown",{instance:b,dropdownSize:F,handleClick:k,commandHandler:R,trigger:re(e,"trigger"),hideOnClick:re(e,"hideOnClick")}),{t:m,ns:t,scrollbar:s,wrapStyle:n,dropdownTriggerKls:g,dropdownSize:F,triggerId:O,triggerKeys:T,currentTabId:w,handleCurrentTabIdChange:ue,handlerMainButtonClick:c=>{o("click",c)},handleEntryFocus:q,handleClose:J,handleOpen:S,handleBeforeShowTooltip:Q,handleShowTooltip:de,handleBeforeHideTooltip:ge,onFocusAfterTrapped:c=>{var L,l;c.preventDefault(),(l=(L=y.value)==null?void 0:L.focus)==null||l.call(L,{preventScroll:!0})},popperRef:i,contentRef:y,triggeringElementRef:h,referenceElementRef:u}}});function fn(e,o,b,t,m,h){var u;const i=N("el-dropdown-collection"),y=N("el-roving-focus-group"),s=N("el-scrollbar"),w=N("el-only-child"),d=N("el-tooltip"),T=N("el-button"),n=N("arrow-down"),g=N("el-icon"),f=N("el-button-group");return M(),X("div",{class:fe([e.ns.b(),e.ns.is("disabled",e.disabled)])},[r(d,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":(u=e.referenceElementRef)==null?void 0:u.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-after":e.trigger==="hover"?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"",persistent:"",onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},go({content:a(()=>[r(s,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:a(()=>[r(y,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:a(()=>[r(i,null,{default:a(()=>[U(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:a(()=>[r(w,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:a(()=>[U(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(M(),x(f,{key:0},{default:a(()=>[r(T,ie({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:a(()=>[U(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),r(T,ie({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:a(()=>[r(g,{class:fe(e.ns.e("icon"))},{default:a(()=>[r(n)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):te("v-if",!0)],2)}var mn=W(pn,[["render",fn],["__file","dropdown.vue"]]);const vn=j({name:"DropdownItemImpl",components:{ElIcon:Ge},props:He,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:o}){const b=Ie("dropdown"),{role:t}=B(ve,void 0),{collectionItemRef:m}=B(dn,void 0),{collectionItemRef:h}=B(Vo,void 0),{rovingFocusGroupItemRef:u,tabIndex:i,handleFocus:y,handleKeydown:s,handleMousedown:w}=B(je,void 0),d=Ue(m,h,u),T=P(()=>t.value==="menu"?"menuitem":t.value==="navigation"?"link":"button"),n=z(g=>{const{code:f}=g;if(f===G.enter||f===G.space)return g.preventDefault(),g.stopImmediatePropagation(),o("clickimpl",g),!0},s);return{ns:b,itemRef:d,dataset:{[Je]:""},role:T,tabIndex:i,handleFocus:y,handleKeydown:n,handleMousedown:w}}}),gn=["aria-disabled","tabindex","role"];function _n(e,o,b,t,m,h){const u=N("el-icon");return M(),X(bo,null,[e.divided?(M(),X("li",ie({key:0,role:"separator",class:e.ns.bem("menu","item","divided")},e.$attrs),null,16)):te("v-if",!0),_("li",ie({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:o[0]||(o[0]=i=>e.$emit("clickimpl",i)),onFocus:o[1]||(o[1]=(...i)=>e.handleFocus&&e.handleFocus(...i)),onKeydown:o[2]||(o[2]=_e((...i)=>e.handleKeydown&&e.handleKeydown(...i),["self"])),onMousedown:o[3]||(o[3]=(...i)=>e.handleMousedown&&e.handleMousedown(...i)),onPointermove:o[4]||(o[4]=i=>e.$emit("pointermove",i)),onPointerleave:o[5]||(o[5]=i=>e.$emit("pointerleave",i))}),[e.icon?(M(),x(u,{key:0},{default:a(()=>[(M(),x(_o(e.icon)))]),_:1})):te("v-if",!0),U(e.$slots,"default")],16,gn)],64)}var bn=W(vn,[["render",_n],["__file","dropdown-item-impl.vue"]]);const qe=()=>{const e=B("elDropdown",{}),o=P(()=>e==null?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:o}},hn=j({name:"ElDropdownItem",components:{ElDropdownCollectionItem:rn,ElRovingFocusItem:on,ElDropdownItemImpl:bn},inheritAttrs:!1,props:He,emits:["pointermove","pointerleave","click"],setup(e,{emit:o,attrs:b}){const{elDropdown:t}=qe(),m=Ve(),h=C(null),u=P(()=>{var n,g;return(g=(n=v(h))==null?void 0:n.textContent)!=null?g:""}),{onItemEnter:i,onItemLeave:y}=B(ve,void 0),s=z(n=>(o("pointermove",n),n.defaultPrevented),Fe(n=>{if(e.disabled){y(n);return}const g=n.currentTarget;g===document.activeElement||g.contains(document.activeElement)||(i(n),n.defaultPrevented||g==null||g.focus())})),w=z(n=>(o("pointerleave",n),n.defaultPrevented),Fe(n=>{y(n)})),d=z(n=>{if(!e.disabled)return o("click",n),n.type!=="keydown"&&n.defaultPrevented},n=>{var g,f,I;if(e.disabled){n.stopImmediatePropagation();return}(g=t==null?void 0:t.hideOnClick)!=null&&g.value&&((f=t.handleClick)==null||f.call(t)),(I=t.commandHandler)==null||I.call(t,e.command,m,n)}),T=P(()=>({...e,...b}));return{handleClick:d,handlePointerMove:s,handlePointerLeave:w,textContent:u,propsAndAttrs:T}}});function wn(e,o,b,t,m,h){var u;const i=N("el-dropdown-item-impl"),y=N("el-roving-focus-item"),s=N("el-dropdown-collection-item");return M(),x(s,{disabled:e.disabled,"text-value":(u=e.textValue)!=null?u:e.textContent},{default:a(()=>[r(y,{focusable:!e.disabled},{default:a(()=>[r(i,ie(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:a(()=>[U(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var Qe=W(hn,[["render",wn],["__file","dropdown-item.vue"]]);const In=j({name:"ElDropdownMenu",props:tn,setup(e){const o=Ie("dropdown"),{_elDropdownSize:b}=qe(),t=b.value,{focusTrapRef:m,onKeydown:h}=B(ho,void 0),{contentRef:u,role:i,triggerId:y}=B(ve,void 0),{collectionRef:s,getItems:w}=B(un,void 0),{rovingFocusGroupRef:d,rovingFocusGroupRootStyle:T,tabIndex:n,onBlur:g,onFocus:f,onMousedown:I}=B(Ce,void 0),{collectionRef:O}=B(ye,void 0),k=P(()=>[o.b("menu"),o.bm("menu",t==null?void 0:t.value)]),J=Ue(u,s,m,d,O),S=z(R=>{var V;(V=e.onKeydown)==null||V.call(e,R)},R=>{const{currentTarget:V,code:H,target:D}=R;if(V.contains(D),G.tab===H&&R.stopImmediatePropagation(),R.preventDefault(),D!==v(u)||!sn.includes(H))return;const q=w().filter(Q=>!Q.disabled).map(Q=>Q.ref);We.includes(H)&&q.reverse(),Ee(q)});return{size:t,rovingFocusGroupRootStyle:T,tabIndex:n,dropdownKls:k,role:i,triggerId:y,dropdownListWrapperRef:J,handleKeydown:R=>{S(R),h(R)},onBlur:g,onFocus:f,onMousedown:I}}}),yn=["role","aria-labelledby"];function Cn(e,o,b,t,m,h){return M(),X("ul",{ref:e.dropdownListWrapperRef,class:fe(e.dropdownKls),style:wo(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onBlur:o[0]||(o[0]=(...u)=>e.onBlur&&e.onBlur(...u)),onFocus:o[1]||(o[1]=(...u)=>e.onFocus&&e.onFocus(...u)),onKeydown:o[2]||(o[2]=_e((...u)=>e.handleKeydown&&e.handleKeydown(...u),["self"])),onMousedown:o[3]||(o[3]=_e((...u)=>e.onMousedown&&e.onMousedown(...u),["self"]))},[U(e.$slots,"default")],46,yn)}var Ze=W(In,[["render",Cn],["__file","dropdown-menu.vue"]]);const En=Io(mn,{DropdownItem:Qe,DropdownMenu:Ze}),Tn=ze(Qe),$n=ze(Ze),K=e=>(Eo("data-v-7c1e8b7d"),e=e(),To(),e),kn={key:0,class:"json-editor-menu"},Sn={key:0,class:"editorTitle"},Nn=K(()=>_("span",{class:"buttonWithIcon"},[_("span",{class:"i-icon-park-outline-file-addition-one"}),A(" 新建")],-1)),On=K(()=>_("span",{class:"buttonWithIcon"},[_("span",{class:"i-icon-park-outline-history"}),A(" 打开最近记录")],-1)),Fn=K(()=>_("span",{class:"buttonWithIcon"},[_("span",{class:"i-icon-park-outline-computer"}),A(" 打开本地文件")],-1)),Rn=K(()=>_("span",{class:"buttonWithIcon"},[_("span",{class:"i-icon-park-outline-folder-open"}),A(" 打开"),_("span",{class:"i-icon-park-outline-down"})],-1)),Bn=K(()=>_("span",{class:"buttonWithIcon"},[_("span",{class:"i-icon-park-outline-save"}),A(" 保存")],-1)),Pn={class:"buttonWithIcon"},Dn=K(()=>_("span",{class:"i-icon-park-outline-indent-right"},null,-1)),Ln=K(()=>_("span",{class:"buttonWithIcon"},[_("span",{class:"i-icon-park-outline-info"}),A(" 文档属性")],-1)),Mn=K(()=>_("span",{class:"buttonWithIcon"},[_("span",{class:"i-icon-park-outline-delete"}),A(" 删除文档")],-1)),Kn=K(()=>_("span",{class:"buttonWithIcon"},[_("span",{class:"i-icon-park-outline-setting-two"}),A(" 选项"),_("span",{class:"i-icon-park-outline-down"})],-1)),An={class:"dialog-footer"},Gn=K(()=>_("strong",null,"名称：",-1)),Vn=K(()=>_("strong",null,"存储：",-1)),zn=K(()=>_("strong",null,"更新：",-1)),Un=K(()=>_("strong",null,"内容：",-1)),Jn=K(()=>_("strong",null,"大小：",-1)),Yn=j({__name:"VanillaJsonEditor",props:{content:{default:void 0},config:{default:()=>({mode:"text"})},showMenuBar:{type:Boolean,default:!1},name:{default:""}},emits:["change","create","changeName","open","openRecent","delete"],setup(e,{expose:o,emit:b}){const t=e,m=b,h=["content","mode","mainMenuBar","navigationBar","statusBar","readOnly","indentation","tabSize","escapeControlCharacters","escapeUnicodeCharacters","validator","onError","onChange","onChangeMode","onClassName","onRenderValue","onRenderMenu","queryLanguages","queryLanguageId","onChangeQueryLanguage","onFocus","onBlur"],u=C(),i=C(),y=C();let s;const w=C(""),d=C(2),T=C(!1),n=C(!1),g=C(!1),f=C(""),I=P(()=>{if(n.value){const l=s.get();let p,E;return pe(l)?E=l.json:E=l.text,typeof E=="string"?p="字符串类型":Array.isArray(E)?p=`数组类型，包含 ${E.length} 个对象`:E&&typeof E=="object"?p=`对象类型，包含 ${Object.keys(E).length} 个属性`:p="其他类型",{name:w.value,storage:w.value?"浏览器本地":"",updated:"",content:p,size:Oo(typeof E=="string"?E.length:JSON.stringify(E,null,d.value).length)}}else return{}});let O=!1;o({container:i,update:R,set:V,refresh:D,get:H});let k={};Ke(()=>{u.value&&(k=Re(t.config),s=new No({target:u.value,props:{content:{json:{}},onChange:l=>{O||(pe(l)?m("change",l.json):m("change",l.text))},indentation:d.value,...L(k,h)}}),t.config.indentation&&(d.value=t.config.indentation))}),be(()=>{s==null||s.destroy()}),he(()=>Be().isDark,()=>{s==null||s.refresh()}),yo(()=>{let l=!1;for(const p in t.config)if(t.config[p]!==k[p]){l=!0;break}l&&(k=Re(t.config),s==null||s.updateProps(L(k,h))),t.content!=null&&R(t.content),w.value=t.name,s==null||s.refresh()});function J(){s.set({json:{}}),m("create")}function S(l){var p;switch(l){case"file":(p=y.value)==null||p.click();break;case"recent":m("openRecent");break}}function F(l){const p=l.target;if(p.files&&p.files.length){const E=p.files[0],$=new FileReader;$.onload=()=>{$.result&&m("open",{name:E.name,content:$.result})},$.readAsText(E)}p.value=""}function R(l){O=!0;let p;l!=null&&(typeof l=="string"?p=l:p=JSON.stringify(l,null,d.value),s.update({text:p})),setTimeout(()=>{O=!1},0)}function V(l){O=!0,l!=null&&(typeof l=="string"?s.set({text:l}):s.set({json:l})),setTimeout(()=>{O=!1},0)}function H(){const l=s.get();return pe(l)?l.json:l.text}function D(){s==null||s.refresh()}function ue(){const l=s.get(),p=w.value?`${w.value}.json`:"未命名.json";pe(l)?De(JSON.stringify(l.json),p):De(l.text,p)}let q=d.value;function Q(l){switch(l){case"indentation":q=d.value,T.value=!0;break;case"properties":n.value=!0;break;case"delete":m("delete");break}}function de(){d.value=q,T.value=!1}function ge(){s.updateProps({indentation:d.value}),T.value=!1}function Te(){f.value=w.value,g.value=!0}function $e(){g.value=!1}function c(){f.value&&m("changeName",f.value),g.value=!1}function L(l,p){const E={};for(const $ of p)l[$]!==void 0&&(E[$]=l[$]);return E}return(l,p)=>{const E=Co,$=we,se=Tn,ke=$n,Se=En,Xe=So,ee=no,Ne=ko,ae=to;return M(),X("div",{ref_key:"container",ref:i,class:"json-editor-wrapper"},[l.showMenuBar?(M(),X("div",kn,[v(w)&&!v(g)?(M(),X("div",Sn,[A(Pe(v(w))+" ",1),_("i",{class:"i-icon-park-outline-edit",onClick:Te})])):te("",!0),v(g)?(M(),x(E,{key:1,modelValue:v(f),"onUpdate:modelValue":p[0]||(p[0]=Z=>ce(f)?f.value=Z:null),class:"name-editor",placeholder:"请输入名称"},{suffix:a(()=>[_("i",{class:"i-icon-park-outline-close",onClick:$e}),_("i",{class:"i-icon-park-outline-check",onClick:c})]),_:1},8,["modelValue"])):te("",!0),r(Xe,{class:"editorControlButtons"},{default:a(()=>[r($,{size:"small",type:"primary",onClick:J},{default:a(()=>[Nn]),_:1}),r(Se,{onCommand:S},{dropdown:a(()=>[r(ke,null,{default:a(()=>[r(se,{command:"recent"},{default:a(()=>[On]),_:1}),r(se,{command:"file"},{default:a(()=>[Fn]),_:1})]),_:1})]),default:a(()=>[r($,{size:"small",type:"primary"},{default:a(()=>[Rn]),_:1})]),_:1}),r($,{size:"small",type:"primary",onClick:ue},{default:a(()=>[Bn]),_:1}),r(Se,{onCommand:Q},{dropdown:a(()=>[r(ke,null,{default:a(()=>[r(se,{command:"indentation"},{default:a(()=>[_("span",Pn,[Dn,A(" 缩进("+Pe(v(d))+")",1)])]),_:1}),r(se,{command:"properties"},{default:a(()=>[Ln]),_:1}),r(se,{command:"delete"},{default:a(()=>[Mn]),_:1})]),_:1})]),default:a(()=>[r($,{size:"small",type:"primary"},{default:a(()=>[Kn]),_:1})]),_:1})]),_:1})])):te("",!0),_("div",{ref_key:"jsonEditorDiv",ref:u,class:fe(["json-editor",{"jse-theme-dark":("useGlobalStore"in l?l.useGlobalStore:v(Be))().isDark}])},null,2),oe(_("input",{ref_key:"uploader",ref:y,type:"file",accept:".json,.geojson,.txt",onChange:F},null,544),[[ne,!1]]),r(Ne,{modelValue:v(T),"onUpdate:modelValue":p[2]||(p[2]=Z=>ce(T)?T.value=Z:null),title:"设置缩进","before-close":de},{footer:a(()=>[_("span",An,[r($,{onClick:de},{default:a(()=>[A("取消")]),_:1}),r($,{type:"primary",onClick:ge},{default:a(()=>[A(" 确定 ")]),_:1})])]),default:a(()=>[r(ee,null,{default:a(()=>[A("配置代码模式下用于缩进的空格数。 缩进同时应用于两个面板。")]),_:1}),r(E,{modelValue:v(d),"onUpdate:modelValue":p[1]||(p[1]=Z=>ce(d)?d.value=Z:null),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1},8,["modelValue"]),r(Ne,{modelValue:v(n),"onUpdate:modelValue":p[3]||(p[3]=Z=>ce(n)?n.value=Z:null),title:"文档属性",class:"documentProperties"},{default:a(()=>[r(ee,null,{default:a(()=>[Gn,oe(r(ae,{content:v(I).name},null,8,["content"]),[[ne,v(I).name]])]),_:1}),r(ee,null,{default:a(()=>[Vn,oe(r(ae,{content:v(I).storage},null,8,["content"]),[[ne,v(I).storage]])]),_:1}),r(ee,null,{default:a(()=>[zn,oe(r(ae,{content:v(I).updated},null,8,["content"]),[[ne,v(I).updated]])]),_:1}),r(ee,null,{default:a(()=>[Un,oe(r(ae,{content:v(I).content},null,8,["content"]),[[ne,v(I).content]])]),_:1}),r(ee,null,{default:a(()=>[Jn,oe(r(ae,{content:v(I).size},null,8,["content"]),[[ne,v(I).size]])]),_:1})]),_:1},8,["modelValue"])],512)}}}),et=$o(Yn,[["__scopeId","data-v-7c1e8b7d"]]);export{et as V};
