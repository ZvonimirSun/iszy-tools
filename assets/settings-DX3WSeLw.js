import{k as N,Q as D,aw as S,E,r as w,q as P,G as U,x as n,w as l,N as d,K as t,F as f,a0 as b,J as M,n as q,s as J,aB as K,R as B,a4 as F,H as C,L as j,X as L,W as Q,aA as I,P as W,at as X,Y,bl as z}from"./index-D2w8s5Xq.js";import{E as G}from"./el-divider-DMGR8R1n.js";import{E as T}from"./el-space-BGIXkIMi.js";import{E as h}from"./el-checkbox-DeRW3Oux.js";import{T as x,u as Z}from"./Router-Du2K2Fnd.js";import{E as ee}from"./el-popover-Kf4hH7tp.js";import"./el-popper-ZnA3azy_.js";import{E as te}from"./el-dialog-D2M68-7M.js";import{a as oe,E as le}from"./el-form-item-D3-GqCTJ.js";import{E as se,a as ne}from"./el-radio-group-CpblrsPp.js";/* empty css                 */import"./index-Cio5mJ7W.js";import"./isUndefined-DCTLXrZ8.js";import"./castArray-z7ARntb0.js";import"./clone-BvX2sM9W.js";const ae=N({__name:"jsonEditor",setup(c){const a=D(),p=S(),u=a.modules.jsonEditor;return(s,o)=>{const g=x,_=h,y=T;return w(),E("div",null,[n(p).logged?(w(),P(g,{key:0,level:5},{default:l(()=>o[1]||(o[1]=[d(" JSON 编辑器 ")])),_:1})):U("",!0),n(p).logged?(w(),P(y,{key:1},{default:l(()=>[t(_,{modelValue:n(u).syncCloud,"onUpdate:modelValue":o[0]||(o[0]=i=>n(u).syncCloud=i)},{default:l(()=>o[2]||(o[2]=[d(" 从云端获取 ")])),_:1},8,["modelValue"])]),_:1})):U("",!0)])}}}),re={"w-full":"","overflow-auto":""},ie={"gap-4":"",class:"settings-wrapper"},ue=N({__name:"toolSettings",setup(c){return(a,p)=>{const u=x;return w(),E("div",re,[t(u,{level:4},{default:l(()=>p[0]||(p[0]=[d(" 应用设置 ")])),_:1}),f("div",ie,[t(ae)])])}}}),de=b(ue,[["__scopeId","data-v-730637d2"]]),pe=N({inheritAttrs:!1,__name:"HaveAccess",props:{auth:{type:[Boolean,Object],default:!1},link:{default:""}},setup(c){const a=c,p=S(),u=Z(),s=M(),o=q(()=>a.auth?typeof a.auth=="boolean"?p.logged:p.checkAccess(a.auth):a.link?p.checkAccess(u.getAuth(a.link)):!0);function g(){a.link&&s.push(a.link)}return(_,y)=>n(o)?J(_.$slots,"default",K({key:0},_.$attrs,{goto:g})):U("",!0)}}),me={flex:"","flex-col":"","items-start":"","gap-4":"","text-7":""},fe={flex:""},_e={flex:""},ce={flex:""},ge={class:"dialog-footer"},we=N({__name:"personalInfo",setup(c){const a=S(),p=B(!1),u=B(),s=F({userName:"",nickName:"",email:"",passwd:"",rePasswd:"",oldPasswd:""}),o=F({userName:[{trigger:"change",validator:(i,e,r)=>{e&&!e.trim()?r(new Error("用户名无效")):r()}}],nickName:[{trigger:"change",validator:(i,e,r)=>{e&&!e.trim()?r(new Error("昵称无效")):r()}}],rePasswd:[{trigger:"change",validator:(i,e,r)=>{e&&e!==s.passwd?r(new Error("两次输入的密码不一致")):r()}}]});function g(){s.userName=a.profile.userName??"",s.nickName=a.profile.nickName??"",s.email=a.profile.email??"",s.passwd="",s.rePasswd="",s.oldPasswd="",p.value=!0}function _(){p.value=!1}async function y(i){i&&await i.validate(async e=>{if(e){const r={};if(s.userName&&(r.userName=s.userName),s.nickName&&(r.nickName=s.nickName),s.email&&(r.email=s.email),s.passwd&&(r.passwd=s.passwd,s.oldPasswd&&(r.oldPasswd=s.oldPasswd)),Object.keys(r).length===0){I.warning("没有需要修改的信息");return}try{await a.updateUser(r)}catch(v){I.error(v.message)}p.value=!1}else I.warning("请检查输入")})}return(i,e)=>{var R,A,O;const r=x,v=j,V=Q,k=le,$=oe,H=te;return w(),E("div",null,[t(r,{level:4},{default:l(()=>e[8]||(e[8]=[d(" 账户信息 ")])),_:1}),f("div",me,[f("div",fe,[e[9]||(e[9]=f("div",{"w-32":""}," 昵称: ",-1)),f("div",null,C(n(a).profile.nickName),1)]),f("div",_e,[e[10]||(e[10]=f("div",{"w-32":""}," 邮箱: ",-1)),f("div",null,C(n(a).profile.email),1)]),f("div",ce,[e[11]||(e[11]=f("div",{"w-32":""}," 角色 ",-1)),f("div",null,C(((O=(A=(R=n(a).profile)==null?void 0:R.roles)==null?void 0:A[0])==null?void 0:O.alias)??"注册用户"),1)]),t(v,{onClick:g},{default:l(()=>e[12]||(e[12]=[d(" 修改信息 ")])),_:1})]),t(H,{modelValue:n(p),"onUpdate:modelValue":e[7]||(e[7]=m=>L(p)?p.value=m:null),title:"修改信息","before-close":_},{footer:l(()=>[f("span",ge,[t(v,{onClick:_},{default:l(()=>e[13]||(e[13]=[d("取消")])),_:1}),t(v,{type:"primary",onClick:e[6]||(e[6]=m=>y(n(u)))},{default:l(()=>e[14]||(e[14]=[d(" 保存 ")])),_:1})])]),default:l(()=>[t($,{ref_key:"ruleFormRef",ref:u,model:n(s),rules:n(o),"label-width":"8rem","label-position":"left"},{default:l(()=>[t(k,{label:"用户名",prop:"userName"},{default:l(()=>[t(V,{modelValue:n(s).userName,"onUpdate:modelValue":e[0]||(e[0]=m=>n(s).userName=m)},null,8,["modelValue"])]),_:1}),t(k,{label:"昵称",prop:"nickName"},{default:l(()=>[t(V,{modelValue:n(s).nickName,"onUpdate:modelValue":e[1]||(e[1]=m=>n(s).nickName=m)},null,8,["modelValue"])]),_:1}),t(k,{label:"邮箱",prop:"email"},{default:l(()=>[t(V,{modelValue:n(s).email,"onUpdate:modelValue":e[2]||(e[2]=m=>n(s).email=m)},null,8,["modelValue"])]),_:1}),t(k,{label:"旧密码",prop:"oldPasswd"},{default:l(()=>[t(V,{modelValue:n(s).oldPasswd,"onUpdate:modelValue":e[3]||(e[3]=m=>n(s).oldPasswd=m),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(k,{label:"新密码",prop:"passwd"},{default:l(()=>[t(V,{modelValue:n(s).passwd,"onUpdate:modelValue":e[4]||(e[4]=m=>n(s).passwd=m),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(k,{label:"确认密码",prop:"rePasswd"},{default:l(()=>[t(V,{modelValue:n(s).rePasswd,"onUpdate:modelValue":e[5]||(e[5]=m=>n(s).rePasswd=m),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}}),ve=b(we,[["__scopeId","data-v-c8ef758d"]]),Ve=W("main",{persist:!0,state:()=>({_cache:{},clearOfflineCacheTag:!1}),getters:{getData:c=>a=>{if(a)return(c._cache||{})[a]}},actions:{setData({key:c,val:a}={}){c&&(this._cache=this._cache||{},this._cache[c]=a)},clear(){this._cache={}},clearOfflineCache(){console.log("clearOfflineCache"),this.clearOfflineCacheTag=!0}}}),ke={flex:"","items-center":"","gap-4":""},ye=N({__name:"authInfo",setup(c){const a=M(),p=X(),u=S(),s=()=>Ve().clearOfflineCache();function o(){a.push({path:"/login",query:{redirect:p.fullPath}})}function g(){a.push("/register")}function _(){a.push("/logout")}return(y,i)=>{const e=j,r=pe,v=ee,V=G,k=T;return n(u).logged?(w(),E(Y,{key:0},[f("div",ke,[t(e,{type:"primary",onClick:_},{default:l(()=>i[0]||(i[0]=[d(" 登出 ")])),_:1}),t(r,{link:"/userManager"},{default:l(({goto:$})=>[t(e,{onClick:$},{default:l(()=>i[1]||(i[1]=[d(" 用户权限中心 ")])),_:2},1032,["onClick"])]),_:1}),t(v,{title:"您是否确定要清空本地缓存？","confirm-button-text":"清空",onConfirm:s},{reference:l(()=>[t(e,{type:"danger",plain:""},{default:l(()=>i[2]||(i[2]=[d(" 清空本地缓存 ")])),_:1})]),_:1})]),t(V),t(ve)],64)):(w(),P(k,{key:1,"mt-4":""},{default:l(()=>[t(e,{type:"primary",onClick:o},{default:l(()=>i[3]||(i[3]=[d(" 登录 ")])),_:1}),t(e,{onClick:g},{default:l(()=>i[4]||(i[4]=[d(" 注册 ")])),_:1}),t(v,{title:"您是否确定要清空本地缓存？","confirm-button-text":"清空",onConfirm:s},{reference:l(()=>[t(e,{type:"danger",plain:""},{default:l(()=>i[5]||(i[5]=[d(" 清空本地缓存 ")])),_:1})]),_:1})]),_:1}))}}}),Ne=b(ye,[["__scopeId","data-v-304747f8"]]),Ee={class:"settings-wrapper"},Se=N({__name:"globalSettings",setup(c){const a=D(),p=z(),u=a.general;return(s,o)=>{const g=x,_=ne,y=se,i=T,e=h;return w(),E("div",Ee,[t(g,{level:4},{default:l(()=>o[5]||(o[5]=[d(" 全局设置 ")])),_:1}),t(g,{level:5},{default:l(()=>o[6]||(o[6]=[d(" 外观 ")])),_:1}),t(i,null,{default:l(()=>[t(y,{"model-value":n(u).theme.mode,onChange:n(p).setTheme},{default:l(()=>[t(_,{value:"auto",label:"跟随系统"}),t(_,{value:"light",label:"浅色"}),t(_,{value:"dark",label:"深色"})]),_:1},8,["model-value","onChange"])]),_:1}),t(g,{level:5},{default:l(()=>o[7]||(o[7]=[d(" 访问统计 ")])),_:1}),t(i,null,{default:l(()=>[t(e,{modelValue:n(u).showMost,"onUpdate:modelValue":o[0]||(o[0]=r=>n(u).showMost=r)},{default:l(()=>o[8]||(o[8]=[d(" 最常访问 ")])),_:1},8,["modelValue"]),t(e,{modelValue:n(u).showRecent,"onUpdate:modelValue":o[1]||(o[1]=r=>n(u).showRecent=r)},{default:l(()=>o[9]||(o[9]=[d(" 最近访问 ")])),_:1},8,["modelValue"])]),_:1}),t(g,{level:5},{default:l(()=>o[10]||(o[10]=[d(" 其他设置 ")])),_:1}),t(i,null,{default:l(()=>[t(e,{modelValue:n(u).showSearch,"onUpdate:modelValue":o[2]||(o[2]=r=>n(u).showSearch=r)},{default:l(()=>o[11]||(o[11]=[d(" 显示搜索 ")])),_:1},8,["modelValue"]),t(e,{modelValue:n(u).showType,"onUpdate:modelValue":o[3]||(o[3]=r=>n(u).showType=r)},{default:l(()=>o[12]||(o[12]=[d(" 显示分类 ")])),_:1},8,["modelValue"]),t(e,{modelValue:n(u).openInNewTab,"onUpdate:modelValue":o[4]||(o[4]=r=>n(u).openInNewTab=r)},{default:l(()=>o[13]||(o[13]=[d(" 新标签页打开工具 ")])),_:1},8,["modelValue"])]),_:1})])}}}),be=b(Se,[["__scopeId","data-v-f2fa67ef"]]),xe={flex:"","flex-wrap":"","items-start":"","gap-4":""},Ce=N({__name:"settings",setup(c){const a=S();return(p,u)=>{const s=x,o=G;return w(),E("div",null,[n(a).logged?(w(),P(s,{key:0,level:3},{default:l(()=>[d(C(n(a).profile.nickName)+" 欢迎你~ ",1)]),_:1})):U("",!0),t(Ne),t(o),f("div",xe,[t(be),t(de,{"flex-1":""})])])}}}),He=b(Ce,[["__scopeId","data-v-0add9d51"]]);export{He as default};
