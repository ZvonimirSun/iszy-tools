import{k as J,a4 as P,R as g,E as V,r as D,K as l,F as c,w as n,W as M,x as i,N as y,L as G,H as z,a0 as K}from"./index-1Gxk3gC0.js";import{E as L,a as W}from"./el-form-item-BA9m_iSK.js";import{E as X,c as $}from"./Router-CiqySeZu.js";import{E as j}from"./el-input-number-D2zDgR__.js";/* empty css               */import{a as q,E as A}from"./el-select-CYigT38h.js";import"./el-popper-DjvKtvrr.js";import"./castArray-DBVHyqGx.js";import"./clone-w3GeqvcT.js";import"./index-B-HGK4de.js";import"./index-Bpqh6KRo.js";import"./strings-Dmi5H2Ef.js";import"./_baseIteratee-Bq0P7U2O.js";import"./index-D_yFxWID.js";import"./index-CkJlwJox.js";import"./index-MINv3kSx.js";const _=.0254,E=111194.872221777;function C(p,o,e="meter"){const r=p/_*o;return e==="degree"?r*E:r}function k(p,o,e){const r=p/o*_;return e==="degree"?r/E:r}function w(p,o,e){const r=p/o*_;return e==="degree"?r/E:r}function Q(p){return _/p}function Y(p){return _/p}const Z={"h-full":"","w-full":"",flex:"","flex-col":"","gap-2":"","overflow-hidden":""},ee={key:0,class:"i-icon-park-outline-edit"},oe={key:1,class:"i-icon-park-outline-lock-one"},te={flex:"","flex-1":"","gap-2":"","overflow-auto":""},le={"h-full":"","flex-1":"","overflow-auto":""},ne={"h-full":"","flex-1":"","overflow-auto":""},ie=J({__name:"lodCalculator",setup(p){const o=P({ppi:"96",pixelSize:"0.26",scaleDomination:"295497598.570834",resolution:"0.703125013115789",unit:"degree"}),e=P({ppi:96,pixelSize:.26,count:21,scaleDomination:295497598570834e-6,resolution:.703125013115789,lod:0}),r=g(""),S=g(""),d=g(!0);function x(a){if(!a)return;const t=Number.parseFloat(a);Number.isNaN(t)||(e.ppi=t,o.pixelSize=(Y(e.ppi)*1e3).toFixed(2),e.pixelSize=Number.parseFloat(o.pixelSize),d.value&&(o.scaleDomination?b(o.scaleDomination):o.resolution&&N(o.resolution)))}function U(a){if(!a)return;const t=Number.parseFloat(a);Number.isNaN(t)||(e.pixelSize=t,o.ppi=Q(e.pixelSize/1e3).toFixed(3),e.ppi=Number.parseFloat(o.ppi),d.value&&(o.scaleDomination?b(o.scaleDomination):o.resolution&&N(o.resolution)))}function b(a){if(!a)return;const t=Number.parseFloat(a);Number.isNaN(t)||(e.scaleDomination=t,d.value?(o.resolution=k(e.scaleDomination,e.ppi,o.unit).toPrecision(11),e.resolution=Number.parseFloat(o.resolution)):(o.ppi=w(e.scaleDomination,e.resolution,o.unit).toFixed(3),x(o.ppi)))}function N(a){if(!a)return;const t=Number.parseFloat(a);Number.isNaN(t)||(e.resolution=t,d.value?(o.scaleDomination=C(e.resolution,e.ppi,o.unit).toPrecision(11),e.scaleDomination=Number.parseFloat(o.scaleDomination)):(o.ppi=w(e.scaleDomination,e.resolution,o.unit).toFixed(3),x(o.ppi)))}function R(a){o.resolution=k(e.scaleDomination,e.resolution,a).toPrecision(11),e.resolution=Number.parseFloat(o.resolution)}function h(){e.count&&(e.count<1?e.count=1:e.count<e.lod+1&&(e.lod=e.count-1))}function B(){let a;e.lod===0?a=e.resolution:a=e.resolution*2**e.lod;const t=[];for(let u=0;u<e.count;u++){const m=a/2**u;t.push({level:u,resolution:Number.parseFloat(m.toPrecision(11)),scale:Number.parseFloat(C(m,e.ppi,o.unit).toPrecision(11))})}r.value=JSON.stringify(t,null,2),S.value=JSON.stringify(t.map(u=>u.resolution),null,2)}return(a,t)=>{const u=M,m=L,f=$,F=G,v=A,O=q,I=j,T=X,H=W;return D(),V("div",Z,[l(H,{"label-width":130},{default:n(()=>[l(T,{gutter:8},{default:n(()=>[l(f,{xl:8,lg:12,sm:12},{default:n(()=>[l(m,{label:"地图分辨率",class:"form-item"},{default:n(()=>[l(u,{modelValue:i(o).resolution,"onUpdate:modelValue":t[0]||(t[0]=s=>i(o).resolution=s),onInput:N},{prepend:n(()=>[...t[8]||(t[8]=[y(" 1 : ",-1)])]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(f,{xl:8,lg:12,sm:12},{default:n(()=>[l(m,{label:"地图比例尺",class:"form-item"},{default:n(()=>[l(u,{modelValue:i(o).scaleDomination,"onUpdate:modelValue":t[1]||(t[1]=s=>i(o).scaleDomination=s),onInput:b},null,8,["modelValue"])]),_:1})]),_:1}),l(f,{xl:4,lg:12,sm:12},{default:n(()=>[l(m,{label:"屏幕分辨率(ppi)",class:"form-item"},{default:n(()=>[l(u,{modelValue:i(o).ppi,"onUpdate:modelValue":t[3]||(t[3]=s=>i(o).ppi=s),readonly:!i(d),onInput:x},{append:n(()=>[l(F,{class:"edit-btn",onClick:t[2]||(t[2]=s=>d.value=!i(d))},{default:n(()=>[i(d)?(D(),V("i",oe)):(D(),V("i",ee))]),_:1})]),_:1},8,["modelValue","readonly"])]),_:1})]),_:1}),l(f,{xl:4,lg:12,sm:12},{default:n(()=>[l(m,{label:"像元大小(mm)",class:"form-item"},{default:n(()=>[l(u,{modelValue:i(o).pixelSize,"onUpdate:modelValue":t[4]||(t[4]=s=>i(o).pixelSize=s),readonly:!i(d),onInput:U},null,8,["modelValue","readonly"])]),_:1})]),_:1}),l(f,{xl:4,lg:6,sm:12},{default:n(()=>[l(m,{label:"单位",class:"form-item"},{default:n(()=>[l(O,{modelValue:i(o).unit,"onUpdate:modelValue":t[5]||(t[5]=s=>i(o).unit=s),onChange:R},{default:n(()=>[l(v,{label:"度",value:"degree"}),l(v,{label:"米",value:"meter"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),l(f,{xl:4,md:6,sm:12},{default:n(()=>[l(m,{label:"当前层级",class:"form-item"},{default:n(()=>[l(I,{modelValue:i(e).lod,"onUpdate:modelValue":t[6]||(t[6]=s=>i(e).lod=s),modelModifiers:{number:!0},"controls-position":"right",min:0,max:i(e).count,step:1},null,8,["modelValue","max"])]),_:1})]),_:1}),l(f,{xl:4,md:6,sm:12},{default:n(()=>[l(m,{label:"切片层级数",class:"form-item"},{default:n(()=>[l(I,{modelValue:i(e).count,"onUpdate:modelValue":t[7]||(t[7]=s=>i(e).count=s),modelModifiers:{number:!0},"controls-position":"right",min:0,step:1,onChange:h},null,8,["modelValue"])]),_:1})]),_:1}),l(f,{md:24,sm:12},{default:n(()=>[l(m,{class:"form-item"},{default:n(()=>[l(F,{type:"primary",onClick:B},{default:n(()=>[...t[9]||(t[9]=[y(" 生成 ",-1)])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),c("div",te,[c("div",le,[c("pre",null,z(i(r)),1)]),c("div",ne,[c("pre",null,z(i(S)),1)])])])}}}),Ee=K(ie,[["__scopeId","data-v-c271b4b5"]]);export{Ee as default};
