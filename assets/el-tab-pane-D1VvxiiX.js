import{Z as se,a as H,a5 as Me,b3 as U,J as Ne,b4 as Le,S as We,b5 as De,b as Z,m as le,d as Y,_ as Ce,i as ce,b6 as ue,u as q,I as w,c as T,ax as D,X as L,b7 as oe,a0 as _e,t as we,x as Se,o as Te,n as He,h as Ee,y as j,aa as J,b8 as Ke,b9 as Ue,ba as pe,V as je,C as y,aF as X,bb as Xe,bc as Ye,aI as re,aJ as V,bd as Je,az as Ze,e as qe,r as ie,be as Ge,bf as xe,Y as Pe,A as Qe,bg as et,U as tt,bh as at,a7 as nt,ad as st,b1 as lt,k as ot}from"./index-COHXkc47.js";import{V as rt,H as it}from"./el-empty-BRZ-95yi.js";import{c as ct,r as Re}from"./raf-SxW_Pnhi.js";import{c as z}from"./strings-8Vh-Zbas.js";import{c as ut}from"./clamp-Yw3E1DAE.js";import{o as dt}from"./omit-CECI4Eyb.js";const vt=(e,c,u)=>Le(e.subTree).filter(n=>{var N;return We(n)&&((N=n.type)==null?void 0:N.name)===c&&!!n.component}).map(n=>n.component.uid).map(n=>u[n]).filter(n=>!!n),bt=(e,c)=>{const u=se({}),f=se([]),t=new WeakMap,n=d=>{u.value[d.uid]=d,U(u),Ne(()=>{const v=d.getVnode().el,o=v.parentNode;if(!t.has(o)){t.set(o,[]);const a=o.insertBefore.bind(o);o.insertBefore=(C,s)=>(t.get(o).some(E=>C===E||s===E)&&U(u),a(C,s))}t.get(o).push(v)})},N=d=>{delete u.value[d.uid],U(u);const v=d.getVnode().el,o=v.parentNode,a=t.get(o),C=a.indexOf(v);a.splice(C,1)},p=()=>{f.value=vt(e,c,u.value)},h=d=>d.render(),m=H({setup(d,{slots:v}){return()=>(p(),v.default?Me(h,{render:v.default}):null)}});return{children:f,addChild:n,removeChild:N,ChildrenSorter:m}},ft={[it]:"deltaX",[rt]:"deltaY"},mt=({atEndEdge:e,atStartEdge:c,layout:u},f)=>{let t,n=0;const N=h=>h<0&&c.value||h>0&&e.value;return{hasReachedEdge:N,onWheel:h=>{ct(t);const m=h[ft[u.value]];N(n)&&N(n+m)||(n+=m,De()||h.preventDefault(),t=Re(()=>{f(n),n=0}))}}},G=Symbol("tabsRootContextKey"),pt=Z({tabs:{type:Y(Array),default:()=>le([])},tabRefs:{type:Y(Object),default:()=>le({})}}),he="ElTabBar",ht=H({name:he,__name:"tab-bar",props:pt,setup(e,{expose:c}){const u=e,f=ce(G);f||ue(he,"<el-tabs><el-tab-bar /></el-tabs>");const t=q("tabs"),n=w(),N=w(),p=T(()=>{var a;return D(f.props.defaultValue)||!!((a=N.value)!=null&&a.transform)}),h=()=>{let a=0,C=0;const s=["top","bottom"].includes(f.props.tabPosition)?"width":"height",k=s==="width"?"x":"y",E=k==="x"?"left":"top";return u.tabs.every(x=>{if(D(x.paneName))return!1;const l=u.tabRefs[x.paneName];if(!l)return!1;if(!x.active)return!0;a=l[`offset${z(E)}`],C=l[`client${z(s)}`];const _=window.getComputedStyle(l);return s==="width"&&(C-=Number.parseFloat(_.paddingLeft)+Number.parseFloat(_.paddingRight),a+=Number.parseFloat(_.paddingLeft)),!1}),{[s]:`${C}px`,transform:`translate${z(k)}(${a}px)`}},m=()=>N.value=h(),d=[],v=()=>{d.forEach(a=>a.stop()),d.length=0,Object.values(u.tabRefs).forEach(a=>{d.push(oe(a,m))})};L(()=>u.tabs,async()=>{await J(),m(),v()},{immediate:!0});const o=oe(n,()=>m());return _e(()=>{d.forEach(a=>a.stop()),d.length=0,o.stop()}),c({ref:n,update:m}),(a,C)=>p.value?(Te(),we("div",{key:0,ref_key:"barRef",ref:n,class:Ee([j(t).e("active-bar"),j(t).is(j(f).props.tabPosition)]),style:He(N.value)},null,6)):Se("v-if",!0)}});var gt=Ce(ht,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-bar.vue"]]);const yt=Z({panes:{type:Y(Array),default:()=>le([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean,tabindex:{type:[String,Number],default:void 0}}),Nt={tabClick:(e,c,u)=>u instanceof Event,tabRemove:(e,c)=>c instanceof Event},ge="ElTabNav",Ct=H({name:ge,props:yt,emits:Nt,setup(e,{expose:c,emit:u}){const f=ce(G);f||ue(ge,"<el-tabs><tab-nav /></el-tabs>");const t=q("tabs"),n=Ke(),N=Ue(),p=w(),h=w(),m=w(),d=w({}),v=w(),o=w(!1),a=w(0),C=w(!1),s=w(!0),k=se(),E=T(()=>["top","bottom"].includes(f.props.tabPosition)),x=T(()=>E.value?"width":"height"),l=T(()=>({transform:`translate${x.value==="width"?"X":"Y"}(-${a.value}px)`})),{width:_,height:P}=pe(p),{width:A,height:M}=pe(h,{width:0,height:0},{box:"border-box"}),W=T(()=>E.value?_.value:P.value),F=T(()=>E.value?A.value:M.value),{onWheel:I}=mt({atStartEdge:T(()=>a.value<=0),atEndEdge:T(()=>F.value-a.value<=W.value),layout:T(()=>E.value?"horizontal":"vertical")},r=>{a.value=ut(a.value+r,0,F.value-W.value)}),Q=()=>{if(!p.value)return;const r=p.value[`offset${z(x.value)}`],g=a.value;if(!g)return;const i=g>r?g-r:0;a.value=i},Be=()=>{if(!p.value||!h.value)return;const r=h.value[`offset${z(x.value)}`],g=p.value[`offset${z(x.value)}`],i=a.value;if(r-i<=g)return;const b=r-i>g*2?i+g:r-g;a.value=b},de=async()=>{const r=h.value;if(!o.value||!m.value||!p.value||!r)return;await J();const g=d.value[e.currentName];if(!g)return;const i=p.value,b=g.getBoundingClientRect(),S=i.getBoundingClientRect(),R=E.value?r.offsetWidth-S.width:r.offsetHeight-S.height,$=a.value;let B=$;E.value?(b.left<S.left&&(B=$-(S.left-b.left)),b.right>S.right&&(B=$+b.right-S.right)):(b.top<S.top&&(B=$-(S.top-b.top)),b.bottom>S.bottom&&(B=$+(b.bottom-S.bottom))),B=Math.max(B,0),a.value=Math.min(B,R)},ve=()=>{var r;if(!h.value||!p.value)return;e.stretch&&((r=v.value)==null||r.update());const g=h.value[`offset${z(x.value)}`],i=p.value[`offset${z(x.value)}`],b=a.value;i<g?(o.value=o.value||{},o.value.prev=b,o.value.next=b+i<g,g-b<i&&(a.value=g-i)):(o.value=!1,b>0&&(a.value=0))},$e=r=>{const g=re(r);let i=0;switch(g){case V.left:case V.up:i=-1;break;case V.right:case V.down:i=1;break;default:return}const b=Array.from(r.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let R=b.indexOf(r.target)+i;R<0?R=b.length-1:R>=b.length&&(R=0),b[R].focus({preventScroll:!0}),b[R].click(),be()},be=()=>{s.value&&(C.value=!0)},ee=()=>C.value=!1,Oe=(r,g)=>{d.value[g]=r},Ve=async()=>{await J();const r=d.value[e.currentName];r?.focus({preventScroll:!0})};return L(n,r=>{r==="hidden"?s.value=!1:r==="visible"&&setTimeout(()=>s.value=!0,50)}),L(N,r=>{r?setTimeout(()=>s.value=!0,50):s.value=!1}),oe(m,()=>{Re(ve)}),Ne(()=>setTimeout(()=>de(),0)),je(()=>ve()),c({scrollToActiveTab:de,removeFocus:ee,focusActiveTab:Ve,tabListRef:h,tabBarRef:v,scheduleRender:()=>U(k)}),()=>{const r=o.value?[y("span",{class:[t.e("nav-prev"),t.is("disabled",!o.value.prev)],onClick:Q},[y(X,null,{default:()=>[y(Xe,null,null)]})]),y("span",{class:[t.e("nav-next"),t.is("disabled",!o.value.next)],onClick:Be},[y(X,null,{default:()=>[y(Ye,null,null)]})])]:null,g=e.panes.map((i,b)=>{var S,R,$,B,fe;const ze=i.uid,te=i.props.disabled,K=(R=(S=i.props.name)!=null?S:i.index)!=null?R:`${b}`,ae=!te&&(i.isClosable||i.props.closable!==!1&&e.editable);i.index=`${b}`;const Ae=ae?y(X,{class:"is-icon-close",onClick:O=>u("tabRemove",i,O)},{default:()=>[y(Je,null,null)]}):null,Fe=((B=($=i.slots).label)==null?void 0:B.call($))||i.props.label,Ie=!te&&i.active?(fe=e.tabindex)!=null?fe:f.props.tabindex:-1;return y("div",{ref:O=>Oe(O,K),class:[t.e("item"),t.is(f.props.tabPosition),t.is("active",i.active),t.is("disabled",te),t.is("closable",ae),t.is("focus",C.value)],id:`tab-${K}`,key:`tab-${ze}`,"aria-controls":`pane-${K}`,role:"tab","aria-selected":i.active,tabindex:Ie,onFocus:()=>be(),onBlur:()=>ee(),onClick:O=>{ee(),u("tabClick",i,K,O)},onKeydown:O=>{const me=re(O);ae&&(me===V.delete||me===V.backspace)&&u("tabRemove",i,O)}},[Fe,Ae])});return k.value,y("div",{ref:m,class:[t.e("nav-wrap"),t.is("scrollable",!!o.value),t.is(f.props.tabPosition)]},[r,y("div",{class:t.e("nav-scroll"),ref:p},[e.panes.length>0?y("div",{class:[t.e("nav"),t.is(f.props.tabPosition),t.is("stretch",e.stretch&&["top","bottom"].includes(f.props.tabPosition))],ref:h,style:l.value,role:"tablist",onKeydown:$e,onWheel:I},[e.type?null:y(gt,{ref:v,tabs:[...e.panes],tabRefs:d.value},null),g]):null])])}}}),_t=Z({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},defaultValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:Y(Function),default:()=>!0},stretch:Boolean,tabindex:{type:[String,Number],default:0}}),ne=e=>Ze(e)||qe(e),wt={[xe]:e=>ne(e),tabClick:(e,c)=>c instanceof Event,tabChange:e=>ne(e),edit:(e,c)=>["remove","add"].includes(c),tabRemove:e=>ne(e),tabAdd:()=>!0},St=H({name:"ElTabs",props:_t,emits:wt,setup(e,{emit:c,slots:u,expose:f}){var t;const n=q("tabs"),N=T(()=>["left","right"].includes(e.tabPosition)),{children:p,addChild:h,removeChild:m,ChildrenSorter:d}=bt(Pe(),"ElTabPane"),v=w(),o=w((t=D(e.modelValue)?e.defaultValue:e.modelValue)!=null?t:"0"),a=async(l,_=!1)=>{var P,A,M,W;if(!(o.value===l||D(l)))try{let F;if(e.beforeLeave){const I=e.beforeLeave(l,o.value);F=I instanceof Promise?await I:I}else F=!0;if(F!==!1){const I=(P=p.value.find(Q=>Q.paneName===o.value))==null?void 0:P.isFocusInsidePane();o.value=l,_&&(c(xe,l),c("tabChange",l)),(M=(A=v.value)==null?void 0:A.removeFocus)==null||M.call(A),I&&((W=v.value)==null||W.focusActiveTab())}}catch{}},C=(l,_,P)=>{l.props.disabled||(c("tabClick",l,P),a(_,!0))},s=(l,_)=>{l.props.disabled||D(l.props.name)||(_.stopPropagation(),c("edit",l.props.name,"remove"),c("tabRemove",l.props.name))},k=()=>{c("edit",void 0,"add"),c("tabAdd")},E=l=>{const _=re(l);[V.enter,V.numpadEnter].includes(_)&&k()},x=l=>{const _=l.el.firstChild,P=["bottom","right"].includes(e.tabPosition)?l.children[0].el:l.children[1].el;_!==P&&_.before(P)};return L(()=>e.modelValue,l=>a(l)),L(o,async()=>{var l;await J(),(l=v.value)==null||l.scrollToActiveTab()}),Qe(G,{props:e,currentName:o,registerPane:h,unregisterPane:m,nav$:v}),f({currentName:o,get tabNavRef(){return dt(v.value,["scheduleRender"])}}),()=>{const l=u["add-icon"],_=e.editable||e.addable?y("div",{class:[n.e("new-tab"),N.value&&n.e("new-tab-vertical")],tabindex:e.tabindex,onClick:k,onKeydown:E},[l?ie(u,"add-icon"):y(X,{class:n.is("icon-plus")},{default:()=>[y(Ge,null,null)]})]):null,P=()=>y(Ct,{ref:v,currentName:o.value,editable:e.editable,type:e.type,panes:p.value,stretch:e.stretch,onTabClick:C,onTabRemove:s},null),A=y("div",{class:[n.e("header"),N.value&&n.e("header-vertical"),n.is(e.tabPosition)]},[y(d,null,{default:P,$stable:!0}),_]),M=y("div",{class:n.e("content")},[ie(u,"default")]);return y("div",{class:[n.b(),n.m(e.tabPosition),{[n.m("card")]:e.type==="card",[n.m("border-card")]:e.type==="border-card"}],onVnodeMounted:x,onVnodeUpdated:x},[M,A])}}}),Tt=Z({label:{type:String,default:""},name:{type:[String,Number]},closable:{type:Boolean,default:void 0},disabled:Boolean,lazy:Boolean}),Et=["id","aria-hidden","aria-labelledby"],ye="ElTabPane",xt=H({name:ye,__name:"tab-pane",props:Tt,setup(e){const c=e,u=Pe(),f=et(),t=ce(G);t||ue(ye,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const n=q("tab-pane"),N=w(),p=w(),h=T(()=>{var s;return(s=c.closable)!=null?s:t.props.closable}),m=T(()=>{var s;return t.currentName.value===((s=c.name)!=null?s:p.value)}),d=w(m.value),v=T(()=>{var s;return(s=c.name)!=null?s:p.value}),o=T(()=>!c.lazy||d.value||m.value),a=()=>{var s;return(s=N.value)==null?void 0:s.contains(document.activeElement)};L(m,s=>{s&&(d.value=!0)});const C=tt({uid:u.uid,getVnode:()=>u.vnode,slots:f,props:c,paneName:v,active:m,index:p,isClosable:h,isFocusInsidePane:a});return t.registerPane(C),_e(()=>{t.unregisterPane(C)}),at(()=>{var s;f.label&&((s=t.nav$.value)==null||s.scheduleRender())}),(s,k)=>o.value?nt((Te(),we("div",{key:0,id:`pane-${v.value}`,ref_key:"paneRef",ref:N,class:Ee(j(n).b()),role:"tabpanel","aria-hidden":!m.value,"aria-labelledby":`tab-${v.value}`},[ie(s.$slots,"default")],10,Et)),[[st,m.value]]):Se("v-if",!0)}});var ke=Ce(xt,[["__file","/home/runner/work/element-plus/element-plus/packages/components/tabs/src/tab-pane.vue"]]);const Vt=ot(St,{TabPane:ke}),zt=lt(ke);export{zt as E,Vt as a};
