import{d as h,al as k,b4 as C,a6 as D,i as g,r as c,o as r,u as p,w as b,c as d,a2 as i,g as _,a as y}from"./vendor.35262576.js";/* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css                *//* empty css                *//* empty css                *//* empty css               */import{_ as I}from"./index.ff65c294.js";const j=h({name:"propertyTable",components:{Table:k,Empty:C,Input:D},props:{geoJsonLayer:Object},data:()=>({editableData:{}}),computed:{features(){if(this.geoJsonLayer)try{return this.geoJsonLayer.toGeoJSON().features}catch{return null}return null},propertyList(){return this.features?this.features.map(e=>e.properties):null},tableColumns(){if(this.propertyList&&this.propertyList.length>0){const t=Object.keys(this.propertyList[0]).map(n=>({title:n,dataIndex:n,key:n,slots:{customRender:"property"}}));return t.push({title:"\u64CD\u4F5C",dataIndex:"operation",width:40,fixed:"right",slots:{customRender:"operation"}}),t}else return null}},methods:{saveToEditableData(e,t,n){if(e instanceof InputEvent&&t&&n)try{t[n]=JSON.parse(e.currentTarget.value)}catch{t[n]=e.currentTarget.value}},edit(e){this.editableData[e]=g(this.propertyList[e])},save(e){Object.assign(this.propertyList[e],this.editableData[e]),delete this.editableData[e],this.$eventBus.emit("updateEditor")},cancel(e){delete this.editableData[e]},rowEvents(e,t){return{onClick:()=>{this.$eventBus.emit("locationGeo",this.features[t])}}}}}),w={key:0,class:"editable-cell-input-wrapper"},E={key:1,class:"editable-cell-text-wrapper"},L={key:0},T=["onClick"],$=["onClick"],J={key:1},N=["onClick"];function O(e,t,n,m,B,S){const u=c("Input"),v=c("Table"),f=c("Empty");return e.tableColumns?(r(),p(v,{key:0,class:"ant-table-striped",columns:e.tableColumns,"data-source":e.propertyList,rowKey:(s,a)=>a,pagination:!1,bordered:"",size:"small",scroll:{x:!0},rowClassName:(s,a)=>a%2==1?"table-striped":null,customRow:e.rowEvents},{property:b(({text:s,column:a,index:o})=>[e.editableData[o]?(r(),d("div",w,[typeof e.editableData[o][a.dataIndex]=="string"?(r(),p(u,{key:0,value:e.editableData[o][a.dataIndex],"onUpdate:value":l=>e.editableData[o][a.dataIndex]=l,onClick:t[0]||(t[0]=i(()=>{},["stop"]))},null,8,["value","onUpdate:value"])):typeof e.editableData[o][a.dataIndex]=="number"?(r(),p(u,{key:1,value:e.editableData[o][a.dataIndex],"onUpdate:value":l=>e.editableData[o][a.dataIndex]=l,valueModifiers:{number:!0},onClick:t[1]||(t[1]=i(()=>{},["stop"]))},null,8,["value","onUpdate:value"])):(r(),p(u,{key:2,value:JSON.stringify(e.editableData[o][a.dataIndex]),onClick:t[2]||(t[2]=i(()=>{},["stop"])),onChange:l=>e.saveToEditableData(l,e.editableData[o],a.dataIndex)},null,8,["value","onChange"]))])):(r(),d("div",E,_(typeof s=="object"?JSON.stringify(s):s),1))]),operation:b(({index:s})=>[e.editableData[s]?(r(),d("span",L,[y("a",{onClick:i(a=>e.save(s),["stop"])}," \u4FDD\u5B58\u5C5E\u6027 ",8,T),y("a",{onClick:i(a=>e.cancel(s),["stop"])}," \u53D6\u6D88\u7F16\u8F91 ",8,$)])):(r(),d("span",J,[y("a",{onClick:i(a=>e.edit(s),["stop"])}," \u7F16\u8F91\u5C5E\u6027 ",8,N)]))]),_:1},8,["columns","data-source","rowKey","rowClassName","customRow"])):(r(),p(f,{key:1}))}var H=I(j,[["render",O],["__scopeId","data-v-c56d89a4"]]);export{H as default};
