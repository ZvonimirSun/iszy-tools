import{k as V,R as p,n as U,E as f,r as i,K as r,G as c,w as l,q as _,L as b,N as u,x as o,X as C,W as N,Y as T,F as W,t as F,aA as m,aW as L,a0 as z}from"./index-CcNCYF5M.js";import{E as A}from"./el-space-C4pkRtrR.js";import{E as I}from"./el-upload-C_k3CnZf.js";import"./el-progress-CvwykDqD.js";import{T as P}from"./Router-D-wErm8Y.js";const S={class:"wrapper"},D=["src"],$=V({__name:"imageBase64",setup(q){const t=p(""),n=p(),s=p({width:"",height:""}),w=U(()=>t.value&&(t.value.startsWith("http://")||t.value.startsWith("https://")));function v(a){const e=new FileReader;return e.onloadend=()=>{t.value=e.result},e.readAsDataURL(a),!1}async function g(){try{await window.navigator.clipboard.writeText(t.value),m.success("复制成功")}catch(a){m.error(a==null?void 0:a.message)}}async function h(){try{const a=await L.get(t.value,{responseType:"blob"}),e=new FileReader;e.onloadend=()=>{t.value=e.result},e.readAsDataURL(a.data)}catch(a){m.error(a==null?void 0:a.message)}}function y(){n.value&&(s.value.height=`${n.value.naturalHeight}px`,s.value.width=`${n.value.naturalWidth}px`)}return(a,e)=>{const d=b,x=I,k=A,B=N,E=P;return i(),f("div",S,[r(k,null,{default:l(()=>[r(x,{"file-list":[],"show-file-list":!1,accept:"image/*","before-upload":v},{default:l(()=>[r(d,{type:"primary"},{default:l(()=>e[1]||(e[1]=[u(" 点击上传图片 ")])),_:1})]),_:1}),o(w)?(i(),_(d,{key:0,onClick:h},{default:l(()=>e[2]||(e[2]=[u(" 转换为Base64 ")])),_:1})):c("",!0),o(t)?(i(),_(d,{key:1,onClick:g},{default:l(()=>e[3]||(e[3]=[u(" 复制内容 ")])),_:1})):c("",!0)]),_:1}),r(B,{modelValue:o(t),"onUpdate:modelValue":e[0]||(e[0]=R=>C(t)?t.value=R:null),type:"textarea","allow-clear":"",autosize:{minRows:5,maxRows:10},placeholder:"请输入 图片地址 或 Base64格式的图片"},null,8,["modelValue"]),o(t)?(i(),f(T,{key:0},[r(E,{level:4},{default:l(()=>e[4]||(e[4]=[u(" 预览 ")])),_:1}),W("img",{ref_key:"imgPreview",ref:n,class:"preview",src:o(t),alt:"preview",style:F({width:o(s).width?o(s).width:"",height:o(s).height?o(s).height:""}),onLoad:y},null,44,D)],64)):c("",!0)])}}}),Y=z($,[["__scopeId","data-v-2834f940"]]);export{Y as default};
