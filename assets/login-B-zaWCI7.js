import{D as q,aE as x,r as f,ap as z,aU as C,aV as B,w as S,o as U,H as K,I as F,ao as h,V as o,$ as s,u as t,bI as v,aq as V,a0 as M,a$ as g,az as Q,ar as R,aA as $,aB as A,aC as D}from"./index-AbLOts5N.js";import{a as H,E as L}from"./el-form-item-B51anhTH.js";import"./castArray-CUQkfLHh.js";const b=n=>($("data-v-ababdcc1"),n=n(),A(),n),O={class:"login-container"},P={class:"main"},T=b(()=>h("span",{class:"i-icon-park-outline-user"},null,-1)),j=b(()=>h("span",{class:"i-icon-park-outline-lock"},null,-1)),G=q({__name:"login",setup(n){const a=x({userName:"",password:""}),i=f(),c=f({}),l=f(!1),d=z(),k=C(),w=B();S(k,r=>{const e=r.query;e&&(typeof e.redirect=="string"&&(i.value=e.redirect),c.value=N(e))},{immediate:!0}),U(()=>{w.logged&&d.push({path:i.value||"/",query:c.value})});async function p(){if(!navigator.onLine){g.warning("已离线！");return}if(a.userName!=null&&a.password!=null){l.value=!0;try{await w.login({userName:a.userName,password:a.password}),g.success("登录成功！"),d.push({path:i.value||"/",query:c.value})}catch(r){r instanceof Error&&g.error(r.message)}l.value=!1}}function E(){d.push("/register")}function N(r){const{redirect:e,...u}=r;return u}return(r,e)=>{const u=Q,m=H,y=R,I=L;return K(),F("div",O,[h("div",P,[o(I,M({layout:"horizontal",model:t(a)},{wrapperCol:{span:24}}),{default:s(()=>[o(m,{required:""},{default:s(()=>[o(u,{modelValue:t(a).userName,"onUpdate:modelValue":e[0]||(e[0]=_=>t(a).userName=_),placeholder:"账户",size:"large",onKeypress:v(p,["enter"])},{prefix:s(()=>[T]),_:1},8,["modelValue"])]),_:1}),o(m,{required:""},{default:s(()=>[o(u,{modelValue:t(a).password,"onUpdate:modelValue":e[1]||(e[1]=_=>t(a).password=_),type:"password",placeholder:"密码",size:"large","show-password":"",onKeypress:v(p,["enter"])},{prefix:s(()=>[j]),_:1},8,["modelValue"])]),_:1}),o(m,null,{default:s(()=>[o(y,{type:"primary",block:"",size:"large",loading:t(l),onClick:p},{default:s(()=>[V(" 登录 ")]),_:1},8,["loading"]),o(y,{block:"",size:"large",disabled:t(l),onClick:E},{default:s(()=>[V(" 注册 ")]),_:1},8,["disabled"])]),_:1})]),_:1},16,["model"])])])}}}),Y=D(G,[["__scopeId","data-v-ababdcc1"]]);export{Y as default};
