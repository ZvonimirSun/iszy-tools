var N=Object.defineProperty;var y=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var C=(e,t,o)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,g=(e,t)=>{for(var o in t||(t={}))S.call(t,o)&&C(e,o,t[o]);if(y)for(var o of y(t))L.call(t,o)&&C(e,o,t[o]);return e};import{ac as O,as as R,at as B,au as M,av as T,aw as q,ax as J,i as E,ay as v,az as U,aA as V,aB as W,aC as A,r as f,o as F,c as P,a as _,f as s,y as c,A as H,aD as $,D as h}from"./vendor.9bb798a0.js";import{J as b}from"./jsoneditor.min.21c5b379.js";import{c as z}from"./createFile.f783c569.js";/* empty css                *//* empty css                */import{_ as G}from"./index.382ba815.js";let n,i,d={Array:[1,2,3],Boolean:!0,Null:null,Number:123,Object:{a:"b",c:"d"},String:"Hello World"},l={Array:[1,2,3],Boolean:!0,Null:null,Number:123,Object:{a:"b",c:"d"},String:"Hello World"};const I={name:"JsonEditor",components:{Button:O,Space:R,Checkbox:B,Right:M,Left:T,CodeDownload:q},data:()=>({diff:!1}),computed:g({},J(["getData"])),mounted(){this.init()},methods:g({init(){this.getData("jsonEditor")&&(this.getData("jsonEditor").left&&(d=this.getData("jsonEditor").left),this.getData("jsonEditor").right&&(l=this.getData("jsonEditor").right)),n=new b(this.$refs.jsonEditorLeft,{mode:"code",modes:["code","tree","text","preview"],onClassName:this.onClassName,onChangeText:e=>{try{d=JSON.parse(e),i.refresh(),this.save()}catch{}},autocomplete:{applyTo:["value"],filter:"contain",trigger:"focus",getOptions:(e,t,o,p)=>new Promise((u,a)=>{const r=this.extractUniqueWords(p.get());r.length>0?u(r):a(new Error("noOptions"))})}},d),i=new b(this.$refs.jsonEditorRight,{mode:"tree",modes:["code","tree","text","preview"],onClassName:this.onClassName,onChangeText:e=>{try{l=JSON.parse(e),n.refresh(),this.save()}catch{}},autocomplete:{applyTo:["value"],filter:"contain",trigger:"focus",getOptions:(e,t,o,p)=>new Promise((u,a)=>{const r=this.extractUniqueWords(p.get());r.length>0?u(r):a(new Error("noOptions"))})}},l)},copyRight(){l=E(d),i.update(l),n.refresh(),this.save()},copyLeft(){d=E(l),n.update(d),i.refresh(),this.save()},async save(){try{await this.setData({key:"jsonEditor",val:{left:n.get(),right:i.get()}})}catch{}},download(){z(n.getText(),"left.json")},changeDiff(){this.diff&&(n.getMode()!=="tree"||i.getMode()!=="tree")&&this.$msg.warn("\u5BF9\u6BD4\u6A21\u5F0F\u4EC5\u5728\u300C\u6811\u300D\u6A21\u5F0F\u4E0B\u751F\u6548\uFF0C\u8BF7\u5207\u6362\u4E3A\u6811\u6A21\u5F0F"),n.refresh(),i.refresh()},onClassName({path:e}){const t=v(d,e),o=v(l,e);return this.diff?U(t,o)?"":"differentElement":""},extractUniqueWords(e){return V(W(e,function(t,o){return $(t)?[o]:[o,String(t)]}))}},A(["setData"])),beforeUnmount(){n&&n.destroy(),i&&i.destroy()}},K={class:"editorPanel"},Q={ref:"jsonEditorLeft",class:"jsonEditor jsonEditorLeft"},X={class:"controller noShowMobile"},Y=h(" \u590D\u5236 "),Z=h(" \u590D\u5236 "),ee=h(" \u4E0B\u8F7D "),te=h("\u5BF9\u6BD4"),oe={ref:"jsonEditorRight",class:"jsonEditor jsonEditorRight noShowMobile"},se=h(" \u4E0B\u8F7D ");function ne(e,t,o,p,u,a){const r=f("Right"),m=f("Button"),w=f("Left"),x=f("CodeDownload"),k=f("Checkbox"),j=f("Space");return F(),P(H,null,[_("div",K,[_("div",Q,null,512),_("div",X,[s(j,{direction:"vertical"},{default:c(()=>[s(m,{type:"primary",onClick:a.copyRight,block:""},{default:c(()=>[s(r,{theme:"outline"}),Y]),_:1},8,["onClick"]),s(m,{type:"primary",onClick:a.copyLeft,block:""},{default:c(()=>[s(w,{theme:"outline"}),Z]),_:1},8,["onClick"]),s(m,{type:"primary",onClick:a.download,block:""},{default:c(()=>[s(x,{theme:"outline"}),ee]),_:1},8,["onClick"]),s(k,{checked:e.diff,"onUpdate:checked":t[0]||(t[0]=D=>e.diff=D),onChange:a.changeDiff},{default:c(()=>[te]),_:1},8,["checked","onChange"])]),_:1})]),_("div",oe,null,512)]),s(j,{class:"showMobile",align:"center"},{default:c(()=>[s(m,{type:"primary",onClick:a.download},{default:c(()=>[se]),_:1},8,["onClick"])]),_:1})],64)}var he=G(I,[["render",ne],["__scopeId","data-v-06a86748"]]);export{he as default};
