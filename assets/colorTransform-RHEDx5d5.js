import{a3 as k,j as H,o as E,c as L,a as g,b as u,n as S,aH as I,aI as B,al as K,be as N,B as _,x as J,l as Q,az as V,y as l,aM as q,aF as Z,W as D,X as O,aA as ee,aL as oe,b7 as ne}from"./vendor-nejBBORZ.js";import{_ as R}from"./colorTransform-5v-iPVsK.js";import{c as le}from"./ant-design-vue-Ll8WdPLM.js";import{t as y}from"./tinycolor2-qD0D-p7n.js";const se=H({name:"AlphaPicker",components:{Checkerboard:R},props:{value:{type:Object,default:void 0}},emits:["change"],data:()=>({checkerboardBackground:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAADBJREFUOE9jfPbs2X8GPEBSUhKfNAPjqAHDIgz+//+PNx08f/4cfzoYNYCBceiHAQC5flV5JzgrxQAAAABJRU5ErkJggg=="}),computed:{colors(){return this.value},gradientColor(){const{rgba:n}=this.colors,t=[n.r,n.g,n.b].join(",");return`linear-gradient(to right, rgba(${t}, 0) 0%, rgba(${t}, 1) 100%)`}},methods:{handleChange(n,t){!t&&n.preventDefault();const{container:f}=this.$refs;if(!f)return;const p=f.clientWidth,d=f.getBoundingClientRect().left+window.pageXOffset,r=(n.pageX||(n.touches?n.touches[0].pageX:0))-d;let h;r<0?h=0:r>p?h=1:h=Math.round(r*100/p)/100,this.colors.a!==h&&this.$emit("change",{h:this.colors.hsl.h,s:this.colors.hsl.s,l:this.colors.hsl.l,a:h,source:"rgba"})},handleMouseDown(n){this.handleChange(n,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}}),te=n=>(I("data-v-b89967fc"),n=n(),B(),n),re={class:"alphaContainer"},ie={class:"alphaCheckerboardWrap"},ae=te(()=>g("div",{class:"alphaPicker"},null,-1)),ue=[ae];function de(n,t,f,p,d,v){const r=R;return E(),L("div",re,[g("div",ie,[u(r)]),g("div",{class:"alphaGradient",style:S({background:n.gradientColor})},null,4),g("div",{ref:"container",class:"alpha",onMousedown:t[0]||(t[0]=(...h)=>n.handleMouseDown&&n.handleMouseDown(...h)),onTouchmove:t[1]||(t[1]=(...h)=>n.handleChange&&n.handleChange(...h)),onTouchstart:t[2]||(t[2]=(...h)=>n.handleChange&&n.handleChange(...h))},[g("div",{class:"alphaPointer",style:S({left:n.colors.a*100+"%"})},ue,4)],544)])}const he=k(se,[["render",de],["__scopeId","data-v-b89967fc"]]),pe=H({name:"HuePicker",props:{value:{type:Object,default:void 0}},emits:["change"],data(){return{oldHue:0,pullDirection:""}},computed:{colors(){return this.value},pointerLeft(){return this.colors.hsl.h===0&&this.pullDirection==="right"?"100%":`${this.colors.hsl.h*100/360}%`}},watch:{colors:function(n){const{h:t}=n.hsl;t!==0&&t-this.oldHue>0&&(this.pullDirection="right"),t!==0&&t-this.oldHue<0&&(this.pullDirection="left"),this.oldHue=t}},methods:{handleChange(n,t){!t&&n.preventDefault();const{container:f}=this.$refs;if(!f)return;const p=f.clientWidth,d=f.getBoundingClientRect().left+window.pageXOffset,r=(n.pageX||(n.touches?n.touches[0].pageX:0))-d;let h,M;r<0?h=0:r>p?h=360:(M=r*100/p,h=360*M/100),this.colors.hsl.h!==h&&this.$emit("change",{h,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"})},handleMouseDown(n){this.handleChange(n,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}}),me=n=>(I("data-v-9b07e7eb"),n=n(),B(),n),fe={class:"hueContainer"},ge=["aria-valuenow"],ve=me(()=>g("div",{class:"huePicker"},null,-1)),ce=[ve];function be(n,t,f,p,d,v){return E(),L("div",fe,[g("div",{ref:"container",class:"hue","aria-valuemin":"0","aria-valuemax":"360","aria-valuenow":n.colors.hsl.h,onMousedown:t[0]||(t[0]=(...r)=>n.handleMouseDown&&n.handleMouseDown(...r)),onTouchmove:t[1]||(t[1]=(...r)=>n.handleChange&&n.handleChange(...r)),onTouchstart:t[2]||(t[2]=(...r)=>n.handleChange&&n.handleChange(...r))},[g("div",{class:"huePointer",style:S({top:0,left:n.pointerLeft}),role:"presentation"},ce,4)],40,ge)])}const we=k(pe,[["render",be],["__scopeId","data-v-9b07e7eb"]]),$e=H({name:"SaturationPicker",props:{value:{type:Object,default:void 0}},emits:["change"],computed:{colors(){return this.value},bgColor(){return`hsl(${this.colors.hsv.h}, 100%, 50%)`},pointerTop(){return`${-(this.colors.hsv.v*100)+1+100}%`},pointerLeft(){return`${this.colors.hsv.s*100}%`}},methods:{throttle:K((n,t)=>{n(t)},20,{leading:!0,trailing:!1}),handleChange(n,t){!t&&n.preventDefault();const{container:f}=this.$refs;if(!f)return;const p=f.clientWidth,d=f.clientHeight,v=f.getBoundingClientRect().left+window.pageXOffset,r=f.getBoundingClientRect().top+window.pageYOffset,h=n.pageX||(n.touches?n.touches[0].pageX:0),M=n.pageY||(n.touches?n.touches[0].pageY:0),b=N(h-v,0,p),C=N(M-r,0,d),x=b/p,A=N(-(C/d)+1,0,1);this.throttle(this.onChange,{h:this.colors.hsv.h,s:x,v:A,a:this.colors.hsv.a,source:"hsva"})},onChange(n){this.$emit("change",n)},handleMouseDown(){window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}}),X=n=>(I("data-v-d7b26fd4"),n=n(),B(),n),Ce={class:"saturationContainer"},Ve=X(()=>g("div",{class:"saturationWhite"},null,-1)),xe=X(()=>g("div",{class:"saturationBlack"},null,-1)),Ae=X(()=>g("div",{class:"saturationCircle"},null,-1)),ye=[Ae];function _e(n,t,f,p,d,v){return E(),L("div",Ce,[g("div",{ref:"container",class:"saturation",style:S({background:n.bgColor}),onMousedown:t[0]||(t[0]=(...r)=>n.handleMouseDown&&n.handleMouseDown(...r)),onTouchmove:t[1]||(t[1]=(...r)=>n.handleChange&&n.handleChange(...r)),onTouchstart:t[2]||(t[2]=(...r)=>n.handleChange&&n.handleChange(...r))},[Ve,xe,g("div",{class:"saturationPointer",style:S({top:n.pointerTop,left:n.pointerLeft})},ye,4)],36)])}const Me=k($e,[["render",_e],["__scopeId","data-v-d7b26fd4"]]),Se={"max-w-full":"","h-full":"","overflow-auto":"",flex:"","flex-row":"","flex-wrap":"","justify-around":"","mx-auto":"","my-0":"",class:"p-3.2 gap-3.2"},Ue={flex:"","flex-1":"","flex-col":"","h-fit":"","w-xl":"","max-w-full":""},ke={flex:"","w-full":"","justify-between":"","overflow-auto":"",class:"gap-3.2"},Ee={flex:"","w-full":"","justify-between":"","overflow-auto":"",class:"gap-3.2"},Le={flex:"","w-full":"","justify-between":"","overflow-auto":"",class:"gap-3.2"},Ne={flex:"","w-full":"","justify-between":"","overflow-auto":"",class:"gap-3.2"},De={"w-xl":"","h-fit":"","max-w-full":""},He={"w-full":"","h-sm":"","b-2":"","b-solid":""},Ie={"w-full":"","h-4":""},Be={"w-full":"","h-4":""},Xe={flex:"","flex-col":"","h-fit":"","w-xl":"","max-w-full":""},Fe={__name:"colorTransform",setup(n){const t=_("#16b0f6"),f=_(""),p=_({r:void 0,g:void 0,b:void 0,a:void 0}),d=_({c:void 0,m:void 0,y:void 0,k:void 0}),v=_({h:void 0,s:void 0,l:void 0,a:void 0}),r=_({h:void 0,s:void 0,v:void 0,a:void 0}),h=_(j("16b0f6")),M=J(()=>{const{rgba:o}=h.value;return`rgba(${[o.r,o.g,o.b,o.a].join(",")})`});Q(()=>{b({cssString:t.value})});function b(o){if(o)if(o.hex)U(o.hex)&&C({hex:o.hex,from:"hex"});else if(o.rgba)U(o.rgba)&&C({r:o.rgba.r||h.value.rgba.r,g:o.rgba.g||h.value.rgba.g,b:o.rgba.b||h.value.rgba.b,a:o.rgba.a||h.value.rgba.a,from:"rgba"});else if(o.hsla){const e=`hsla(${o.hsla.h},${(o.hsla.s*100).toFixed(0)}%,${(o.hsla.l*100).toFixed(0)}%,${o.hsla.a}`;U(e)&&C({hsl:e,from:"hsla"})}else if(o.hsva){const e=`hsva(${o.hsva.h},${(o.hsva.s*100).toFixed(0)}%,${(o.hsva.v*100).toFixed(0)}%,${o.hsva.a}`;U(e)&&C({hsv:e,from:"hsva"})}else o.cssString?U(o.cssString)&&C({cssString:o.cssString,from:"cssString"}):o.cmyk&&C({cmyk:o.cmyk,from:"cmyk"})}function C(o){if(o.from==="cmyk"){const w=Y(d.value.c,d.value.m,d.value.y,d.value.k);if(w)o.rgba=`rgb(${w[0]},${w[1]},${w[2]})`;else return}const{rgba:e,hex:c,hex8:i,a:m,hsl:a,hsv:$}=h.value=j(o,h.value.hsl.h);if(o.from!=="rgba"&&(p.value.r=e.r,p.value.g=e.g,p.value.b=e.b,p.value.a=e.a),o.from!=="hsla"&&(v.value.h=a.h,v.value.s=a.s,v.value.l=a.l,v.value.a=m),o.from!=="hsva"&&(r.value.h=$.h,r.value.s=$.s,r.value.v=$.v,r.value.a=m),o.from!=="cmyk"){const w=T(e.r,e.g,e.b);w&&(d.value.c=w[0],d.value.m=w[1],d.value.y=w[2],d.value.k=w[3])}m===1?f.value=c.replace("#",""):f.value=i.replace("#",""),o.from!=="cssString"&&(m===1?t.value="#"+f.value.toLowerCase():t.value=`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`)}function x(o){return`${(o*100).toFixed(0)}%`}function A(o){return parseFloat((parseInt(o.replace("%",""))/100).toFixed(2))}function F(o){return`${parseFloat(parseFloat(o).toFixed(2))}°`}function P(o){return parseFloat(o.replace("°",""))}function U(o){return y(o).isValid()}function j(o,e){const c=o&&o.a;let i;o&&o.hsl?i=y(o.hsl):o&&o.hex&&o.hex.length>0?i=y(o.hex):o&&o.hsv?i=y(o.hsv):o&&o.rgba?i=y(o.rgba):o&&o.rgb?i=y(o.rgb):o&&o.cssString?i=y(o.cssString):i=y(o),i&&(i._a===void 0||i._a===null)&&i.setAlpha(c||1);const m=i.toHsl(),a=i.toHsv();return m.s===0&&(a.h=m.h=o.h||o.hsl&&o.hsl.h||e||0),{hsl:m,hex:i.toHexString(),hex8:i.toHex8String(),rgba:i.toRgb(),hsv:a,oldHue:o.h||e||m.h,from:o.from,a:o.a||i.getAlpha()}}function T(o,e,c){let i=0,m=0,a=0,$=0;if(o=parseInt((""+o).replace(/\s/g,""),10),e=parseInt((""+e).replace(/\s/g,""),10),c=parseInt((""+c).replace(/\s/g,""),10),o==null||e==null||c==null||isNaN(o)||isNaN(e)||isNaN(c)||o<0||e<0||c<0||o>255||e>255||c>255)return;if(o===0&&e===0&&c===0)return[0,0,0,1];i=1-o/255,m=1-e/255,a=1-c/255;const w=Math.min(i,Math.min(m,a));return i=(i-w)/(1-w),m=(m-w)/(1-w),a=(a-w)/(1-w),$=w,[i,m,a,$]}function Y(o,e,c,i){if(o==null||e==null||c==null||i==null||isNaN(o)||isNaN(e)||isNaN(c)||isNaN(i)||o<0||e<0||c<0||i<0||o>1||e>1||c>1||i>1)return;let m,a,$;return m=255*(1-o)*(1-i),a=255*(1-e)*(1-i),$=255*(1-c)*(1-i),m=Math.round(m),a=Math.round(a),$=Math.round($),[m,a,$]}return(o,e)=>{const c=le,i=ee,m=oe,a=ne,$=q,w=Me,W=we,z=he,G=Z;return E(),L("div",Se,[g("div",Ue,[u(c,{level:4},{default:V(()=>[D(" 颜色 ")]),_:1}),u($,{"label-width":100},{default:V(()=>[u(m,{label:"CSS 字符串"},{default:V(()=>[u(i,{modelValue:l(t),"onUpdate:modelValue":e[0]||(e[0]=s=>O(t)?t.value=s:null),onChange:e[1]||(e[1]=s=>b({cssString:l(t)}))},null,8,["modelValue"])]),_:1}),u(m,{label:"HEX",class:"hex"},{default:V(()=>[u(i,{modelValue:l(f),"onUpdate:modelValue":e[2]||(e[2]=s=>O(f)?f.value=s:null),onChange:e[3]||(e[3]=s=>b({hex:l(f)}))},null,8,["modelValue"])]),_:1}),u(m,{label:"RGBA",class:"rgba"},{default:V(()=>[g("div",ke,[u(a,{modelValue:l(p).r,"onUpdate:modelValue":e[4]||(e[4]=s=>l(p).r=s),"controls-position":"right",placeholder:"R",max:255,min:0,step:1,precision:0,onChange:e[5]||(e[5]=s=>b({rgba:l(p)}))},null,8,["modelValue"]),u(a,{modelValue:l(p).g,"onUpdate:modelValue":e[6]||(e[6]=s=>l(p).g=s),"controls-position":"right",placeholder:"G",max:255,min:0,step:1,precision:0,onChange:e[7]||(e[7]=s=>b({rgba:l(p)}))},null,8,["modelValue"]),u(a,{modelValue:l(p).b,"onUpdate:modelValue":e[8]||(e[8]=s=>l(p).b=s),"controls-position":"right",placeholder:"B",max:255,min:0,step:1,precision:0,onChange:e[9]||(e[9]=s=>b({rgba:l(p)}))},null,8,["modelValue"]),u(a,{modelValue:l(p).a,"onUpdate:modelValue":e[10]||(e[10]=s=>l(p).a=s),"controls-position":"right",placeholder:"A",max:1,min:0,step:.01,precision:2,onChange:e[11]||(e[11]=s=>b({rgba:l(p)}))},null,8,["modelValue"])])]),_:1}),u(m,{label:"CMYK",class:"cmyk"},{default:V(()=>[g("div",Ee,[u(a,{modelValue:l(d).c,"onUpdate:modelValue":e[12]||(e[12]=s=>l(d).c=s),"controls-position":"right",placeholder:"C",max:1,min:0,step:.01,formatter:x,parser:A,precision:2,onChange:e[13]||(e[13]=s=>b({cmyk:l(d)}))},null,8,["modelValue"]),u(a,{modelValue:l(d).m,"onUpdate:modelValue":e[14]||(e[14]=s=>l(d).m=s),"controls-position":"right",placeholder:"M",max:1,min:0,step:.01,formatter:x,parser:A,precision:2,onChange:e[15]||(e[15]=s=>b({cmyk:l(d)}))},null,8,["modelValue"]),u(a,{modelValue:l(d).y,"onUpdate:modelValue":e[16]||(e[16]=s=>l(d).y=s),"controls-position":"right",placeholder:"Y",max:1,min:0,step:.01,formatter:x,parser:A,precision:2,onChange:e[17]||(e[17]=s=>b({cmyk:l(d)}))},null,8,["modelValue"]),u(a,{modelValue:l(d).k,"onUpdate:modelValue":e[18]||(e[18]=s=>l(d).k=s),"controls-position":"right",placeholder:"K",max:1,min:0,step:.01,formatter:x,parser:A,precision:2,onChange:e[19]||(e[19]=s=>b({cmyk:l(d)}))},null,8,["modelValue"])])]),_:1}),u(m,{label:"HSVA",class:"hsva"},{default:V(()=>[g("div",Le,[u(a,{modelValue:l(r).h,"onUpdate:modelValue":e[20]||(e[20]=s=>l(r).h=s),"controls-position":"right",placeholder:"H",max:360,min:0,step:.01,formatter:F,parser:P,precision:2,onChange:e[21]||(e[21]=s=>b({hsva:l(r)}))},null,8,["modelValue"]),u(a,{modelValue:l(r).s,"onUpdate:modelValue":e[22]||(e[22]=s=>l(r).s=s),"controls-position":"right",placeholder:"S",max:1,min:0,step:.01,formatter:x,parser:A,precision:2,onChange:e[23]||(e[23]=s=>b({hsva:l(r)}))},null,8,["modelValue"]),u(a,{modelValue:l(r).v,"onUpdate:modelValue":e[24]||(e[24]=s=>l(r).v=s),"controls-position":"right",placeholder:"V",max:1,min:0,step:.01,formatter:x,parser:A,precision:2,onChange:e[25]||(e[25]=s=>b({hsva:l(r)}))},null,8,["modelValue"]),u(a,{modelValue:l(r).a,"onUpdate:modelValue":e[26]||(e[26]=s=>l(r).a=s),"controls-position":"right",placeholder:"A",max:1,min:0,step:.01,precision:2,onChange:e[27]||(e[27]=s=>b({hsva:l(r)}))},null,8,["modelValue"])])]),_:1}),u(m,{label:"HSLA",class:"hsla"},{default:V(()=>[g("div",Ne,[u(a,{modelValue:l(v).h,"onUpdate:modelValue":e[28]||(e[28]=s=>l(v).h=s),"controls-position":"right",placeholder:"H",max:360,min:0,step:.01,formatter:F,parser:P,precision:2,onChange:e[29]||(e[29]=s=>b({hsla:l(v)}))},null,8,["modelValue"]),u(a,{modelValue:l(v).s,"onUpdate:modelValue":e[30]||(e[30]=s=>l(v).s=s),"controls-position":"right",placeholder:"S",max:1,min:0,step:.01,formatter:x,parser:A,precision:2,onChange:e[31]||(e[31]=s=>b({hsla:l(v)}))},null,8,["modelValue"]),u(a,{modelValue:l(v).l,"onUpdate:modelValue":e[32]||(e[32]=s=>l(v).l=s),"controls-position":"right",placeholder:"L",max:1,min:0,step:.01,formatter:x,parser:A,precision:2,onChange:e[33]||(e[33]=s=>b({hsla:l(v)}))},null,8,["modelValue"]),u(a,{modelValue:l(v).a,"onUpdate:modelValue":e[34]||(e[34]=s=>l(v).a=s),"controls-position":"right",placeholder:"A",max:1,min:0,step:.01,precision:2,onChange:e[35]||(e[35]=s=>b({hsla:l(v)}))},null,8,["modelValue"])])]),_:1})]),_:1})]),g("div",De,[u(c,{level:4},{default:V(()=>[D(" 颜色选择 ")]),_:1}),u(G,{direction:"vertical","w-full":"",fill:!0,gap:8},{default:V(()=>[g("div",He,[u(w,{value:l(h),onChange:C},null,8,["value"])]),g("div",Ie,[u(W,{value:l(h),onChange:C},null,8,["value"])]),g("div",Be,[u(z,{value:l(h),onChange:C},null,8,["value"])])]),_:1})]),g("div",Xe,[u(c,{level:4},{default:V(()=>[D(" 颜色预览 ")]),_:1}),g("div",{"w-full":"","h-sm":"",style:S({background:l(M)})},null,4)])])}}},Te=k(Fe,[["__scopeId","data-v-f3f4b83e"]]);export{Te as default};
