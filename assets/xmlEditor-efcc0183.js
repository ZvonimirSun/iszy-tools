import{j as A,bA as $,Y as B,B as P,k as j,q as I,x as Y,l as U,o as T,c as L,b as C,ae as M,y as _,af as W,aM as q,aL as z,a3 as k,L as Q,ac as D,a as R,X,ad as G,bc as H,aQ as J,am as K,an as Z}from"./vendor-2d125fa4.js";import ee from"./fullEditor-7d59f832.js";import"./vue3-ace-editor-49af4976.js";import"./common-d4a6585c.js";import"./ant-design-vue-cea3bdbb.js";import"./ace-builds-f4031b13.js";const te={class:"formatter-container"},ne=A({__name:"FormatTransformer",props:{transformer:{type:Function,default:$},inputValidationRules:{default:()=>[]},inputLabel:{default:"输入"},inputPlaceholder:{default:"输入..."},inputDefault:{default:""},outputLabel:{default:"输出"}},emits:["format"],setup(y,{emit:p}){const h=y,{transformer:r,inputValidationRules:m,inputLabel:v,outputLabel:d,inputPlaceholder:E,inputDefault:b}=B(h),S=p,F=P(),u=j({input:b.value});I(b,t=>{u.input=t});const s=Y(()=>r.value(u.input)),c=j({input:m.value});return U(()=>{S("format",s.value)}),I(s,()=>{S("format",s.value)}),(t,e)=>{const l=W,i=q,g=z;return T(),L("div",te,[C(g,{ref_key:"ruleFormRef",ref:F,model:_(u),"label-position":"top",rules:_(c)},{default:M(()=>[C(i,{label:_(v),prop:"input"},{default:M(()=>[C(l,{modelValue:_(u).input,"onUpdate:modelValue":e[0]||(e[0]=n=>_(u).input=n),placeholder:_(E),rows:20,type:"textarea"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),C(i,{label:_(d)},{default:M(()=>[C(l,{"model-value":_(s),rows:20,type:"textarea",readonly:""},null,8,["model-value"])]),_:1},8,["label"])]),_:1},8,["model","rules"])])}}});const oe=k(ne,[["__scopeId","data-v-25a21576"]]);var O={exports:{}},V={exports:{}};(function(y,p){Object.defineProperty(p,"__esModule",{value:!0}),p.ParsingError=void 0;class h extends Error{constructor(o,a){super(o),this.cause=a}}p.ParsingError=h;let r;function m(){return b(!1)||s()||u()||F()}function v(){return e(/\s*/),b(!0)||u()||S()||E(!1)}function d(){const n=E(!0),o=[];let a,f=v();for(;f;){if(f.node.type==="Element"){if(a)throw new Error("Found multiple root nodes");a=f.node}f.excluded||o.push(f.node),f=v()}if(!a)throw new h("Failed to parse XML","Root Element not found");if(r.xml.length!==0)throw new h("Failed to parse XML","Not Well-Formed XML");return{declaration:n?n.node:null,root:a,children:o}}function E(n){const o=e(n?/^<\?(xml)\s*/:/^<\?([\w-:.]+)\s*/);if(!o)return;const a={name:o[1],type:"ProcessingInstruction",attributes:{}};for(;!(l()||i("?>"));){const f=c();if(f)a.attributes[f.name]=f.value;else return}return e(/\?>/),{excluded:n?!1:r.options.filter(a)===!1,node:a}}function b(n){const o=e(/^<([^?!</>\s]+)\s*/);if(!o)return;const a={type:"Element",name:o[1],attributes:{},children:[]},f=n?!1:r.options.filter(a)===!1;for(;!(l()||i(">")||i("?>")||i("/>"));){const w=c();if(w)a.attributes[w.name]=w.value;else return}if(e(/^\s*\/>/))return a.children=null,{excluded:f,node:a};e(/\??>/);let x=m();for(;x;)x.excluded||a.children.push(x.node),x=m();if(r.options.strictMode){const w=`</${a.name}>`;if(r.xml.startsWith(w))r.xml=r.xml.slice(w.length);else throw new h("Failed to parse XML",`Closing tag not matching "${w}"`)}else e(/^<\/\s*[\w-:.\u00C0-\u00FF]+>/);return{excluded:f,node:a}}function S(){const n=e(/^<!DOCTYPE\s+\S+\s+SYSTEM[^>]*>/)||e(/^<!DOCTYPE\s+\S+\s+PUBLIC[^>]*>/)||e(/^<!DOCTYPE\s+\S+\s*\[[^\]]*]>/)||e(/^<!DOCTYPE\s+\S+\s*>/);if(n){const o={type:"DocumentType",content:n[0]};return{excluded:r.options.filter(o)===!1,node:o}}}function F(){if(r.xml.startsWith("<![CDATA[")){const n=r.xml.indexOf("]]>");if(n>-1){const o=n+3,a={type:"CDATA",content:r.xml.substring(0,o)};return r.xml=r.xml.slice(o),{excluded:r.options.filter(a)===!1,node:a}}}}function u(){const n=e(/^<!--[\s\S]*?-->/);if(n){const o={type:"Comment",content:n[0]};return{excluded:r.options.filter(o)===!1,node:o}}}function s(){const n=e(/^([^<]+)/);if(n){const o={type:"Text",content:n[1]};return{excluded:r.options.filter(o)===!1,node:o}}}function c(){const n=e(/([^=]+)\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)\s*/);if(n)return{name:n[1].trim(),value:t(n[2].trim())}}function t(n){return n.replace(/^['"]|['"]$/g,"")}function e(n){const o=r.xml.match(n);if(o)return r.xml=r.xml.slice(o[0].length),o}function l(){return r.xml.length===0}function i(n){return r.xml.indexOf(n)===0}function g(n,o={}){n=n.trim();const a=o.filter||(()=>!0);return r={xml:n,options:Object.assign(Object.assign({},o),{filter:a,strictMode:o.strictMode===!0})},d()}y.exports=g,p.default=g})(V,V.exports);var le=V.exports;(function(y,p){var h=D&&D.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(p,"__esModule",{value:!0});const r=h(le);function m(t){if(!t.options.indentation&&!t.options.lineSeparator)return;t.content+=t.options.lineSeparator;let e;for(e=0;e<t.level;e++)t.content+=t.options.indentation}function v(t){t.content=t.content.replace(/ +$/,"");let e;for(e=0;e<t.level;e++)t.content+=t.options.indentation}function d(t,e){t.content+=e}function E(t,e,l){if(typeof t.content=="string")b(t.content,e,l);else if(t.type==="Element")F(t,e,l);else if(t.type==="ProcessingInstruction")s(t,e);else throw new Error("Unknown node type: "+t.type)}function b(t,e,l){if(!l){const i=t.trim();(e.options.lineSeparator||i.length===0)&&(t=i)}t.length>0&&(!l&&e.content.length>0&&m(e),d(e,t))}function S(t,e){const l="/"+t.join("/"),i=t[t.length-1];return e.includes(i)||e.includes(l)}function F(t,e,l){if(e.path.push(t.name),!l&&e.content.length>0&&m(e),d(e,"<"+t.name),u(e,t.attributes),t.children===null||e.options.forceSelfClosingEmptyTag&&t.children.length===0){const i=e.options.whiteSpaceAtEndOfSelfclosingTag?" />":"/>";d(e,i)}else if(t.children.length===0)d(e,"></"+t.name+">");else{const i=t.children;d(e,">"),e.level++;let g=t.attributes["xml:space"]==="preserve",n=!1;if(!g&&e.options.ignoredPaths&&(n=S(e.path,e.options.ignoredPaths),g=n),!g&&e.options.collapseContent){let o=!1,a=!1,f=!1;i.forEach(function(x,w){x.type==="Text"?(x.content.includes(`
`)?(a=!0,x.content=x.content.trim()):(w===0||w===i.length-1)&&!l&&x.content.trim().length===0&&(x.content=""),x.content.trim().length>0&&(o=!0)):x.type==="CDATA"?o=!0:f=!0}),o&&(!f||!a)&&(g=!0)}i.forEach(function(o){E(o,e,l||g)}),e.level--,!l&&!g&&m(e),n&&v(e),d(e,"</"+t.name+">")}e.path.pop()}function u(t,e){Object.keys(e).forEach(function(l){const i=e[l].replace(/"/g,"&quot;");d(t," "+l+'="'+i+'"')})}function s(t,e){e.content.length>0&&m(e),d(e,"<?"+t.name),u(e,t.attributes),d(e,"?>")}function c(t,e={}){e.indentation="indentation"in e?e.indentation:"    ",e.collapseContent=e.collapseContent===!0,e.lineSeparator="lineSeparator"in e?e.lineSeparator:`\r
`,e.whiteSpaceAtEndOfSelfclosingTag=e.whiteSpaceAtEndOfSelfclosingTag===!0,e.throwOnFailure=e.throwOnFailure!==!1;try{const l=(0,r.default)(t,{filter:e.filter,strictMode:e.strictMode}),i={content:"",level:0,options:e,path:[]};return l.declaration&&s(l.declaration,i),l.children.forEach(function(g){E(g,i,!1)}),e.lineSeparator?i.content.replace(/\r\n/g,`
`).replace(/\n/g,e.lineSeparator):i.content}catch(l){if(e.throwOnFailure)throw l;return t}}c.minify=(t,e={})=>c(t,Object.assign(Object.assign({},e),{indentation:"",lineSeparator:""})),y.exports=c,p.default=c})(O,O.exports);var re=O.exports;const N=Q(re),ie=y=>(K("data-v-e51757fc"),y=y(),Z(),y),ae={class:"code-container"},se={key:0,flex:"","gap-4":"","flex-col":"","w-full":"","items-center":""},ue={flex:"","gap-4":"","items-center":""},ce=ie(()=>R("span",null," 缩进大小 ",-1)),fe=A({__name:"xmlEditor",setup(y){const p=P(!1),h=P("<hello><world>foo</world><world>bar</world></hello>"),r=P(""),m=P(!0),v=P(2),d=[{validator:(u,s,c)=>{F(s)?c():c(new Error("请输入正确的XML内容"))},trigger:"change"}];function E(){h.value=r.value||h.value,p.value=!p.value}function b(u){r.value=u}function S(u){try{return N(u.trim(),{collapseContent:m.value,indentation:" ".repeat(v.value),lineSeparator:`
`})}catch{return""}}function F(u){const s=u.trim();if(!s)return!0;try{return N(s),!0}catch{return!1}}return(u,s)=>{const c=H,t=J,e=oe;return T(),L("div",ae,[C(c,{"model-value":_(p),size:"large","inactive-text":"简易模式","active-text":"高级模式",onChange:E},null,8,["model-value"]),_(p)?(T(),G(ee,{key:1,value:_(h),onChange:b},null,8,["value"])):(T(),L("div",se,[R("div",ue,[C(c,{modelValue:_(m),"onUpdate:modelValue":s[0]||(s[0]=l=>X(m)?m.value=l:null),size:"large","inactive-text":"折叠内容"},null,8,["modelValue"]),ce,C(t,{modelValue:_(v),"onUpdate:modelValue":s[1]||(s[1]=l=>X(v)?v.value=l:null),min:0,max:10,step:1,"step-strictly":!0},null,8,["modelValue"])]),C(e,{"w-full":"","input-label":"你的XML内容","input-placeholder":"在这里粘贴XML内容...","output-label":"格式化后的XML内容","input-default":_(h),transformer:S,"input-validation-rules":d,onFormat:s[2]||(s[2]=l=>r.value=l)},null,8,["input-default"])]))])}}});const xe=k(fe,[["__scopeId","data-v-e51757fc"]]);export{xe as default};
