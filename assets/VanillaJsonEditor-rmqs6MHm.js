import{y as V,z as xe,t as Oe,E as eo,O as oo,A as Fe,_ as no,h as to}from"./Router-Isf4x3kO.js";import{_ as W,F as j,G as U,t as C,E as le,I as P,o as Ke,u as v,v as be,C as me,l as Y,a8 as $,m as D,ag as lo,aa as re,w as he,b8 as so,aw as F,J as K,a0 as x,a1 as s,cE as ao,cF as ro,X as r,af as Ae,aN as io,b9 as uo,as as we,b4 as ze,c0 as co,H as Ie,ba as po,bY as fo,bq as mo,K as Z,bo as vo,a2 as ie,L as fe,a3 as te,p as Ge,ap as _,aj as go,ay as _e,T as _o,cG as bo,N as ho,a7 as wo,bG as Ve,b_ as Re,aF as Io,ar as z,ai as Be,ax as ce,P as oe,az as yo,bJ as Pe,ab as ne,aA as Co,aB as Eo,aC as To}from"./index-2G9LXyMG.js";import{c as Ue,E as $o}from"./el-dialog-tVF7pZHK.js";import{E as ko}from"./el-space-NLF_vZpu.js";import"./el-scrollbar-vz8xv5bG.js";import{F as So,h as pe}from"./jse-theme-dark-wumw_ZPe.js";import{c as De}from"./createFile-mHtL5k87.js";import{f as No}from"./formatBytes-KQaxC_6_.js";import{E as Oo}from"./index-7ZjEfJkX.js";import{c as Fo}from"./castArray-hc2dqAj8.js";const Ro=j({inheritAttrs:!1});function Bo(e,o,g,a,b,h){return U(e.$slots,"default")}var Po=W(Ro,[["render",Bo],["__file","collection.vue"]]);const Do=j({name:"ElCollectionItem",inheritAttrs:!1});function Lo(e,o,g,a,b,h){return U(e.$slots,"default")}var Mo=W(Do,[["render",Lo],["__file","collection-item.vue"]]);const Je="data-el-collection-item",Ye=e=>{const o=`El${e}Collection`,g=`${o}Item`,a=Symbol(o),b=Symbol(g),h={...Po,name:o,setup(){const n=C(null),f=new Map;le(a,{itemMap:f,getItems:()=>{const I=v(n);if(!I)return[];const w=Array.from(I.querySelectorAll(`[${Je}]`));return[...f.values()].sort((t,u)=>w.indexOf(t.ref)-w.indexOf(u.ref))},collectionRef:n})}},i={...Mo,name:g,setup(n,{attrs:f}){const m=C(null),I=P(a,void 0);le(b,{collectionItemRef:m}),Ke(()=>{const w=v(m);w&&I.itemMap.set(w,{ref:w,...f})}),be(()=>{const w=v(m);I.itemMap.delete(w)})}};return{COLLECTION_INJECTION_KEY:a,COLLECTION_ITEM_INJECTION_KEY:b,ElCollection:h,ElCollectionItem:i}},Ko=me({style:{type:Y([String,Array,Object])},currentTabId:{type:Y(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:Y(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:Ao,ElCollectionItem:zo,COLLECTION_INJECTION_KEY:ye,COLLECTION_ITEM_INJECTION_KEY:Go}=Ye("RovingFocusGroup"),Ce=Symbol("elRovingFocusGroup"),je=Symbol("elRovingFocusGroupItem"),Vo={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},Uo=(e,o)=>{if(o!=="rtl")return e;switch(e){case $.right:return $.left;case $.left:return $.right;default:return e}},Jo=(e,o,g)=>{const a=Uo(e.key,g);if(!(o==="vertical"&&[$.left,$.right].includes(a))&&!(o==="horizontal"&&[$.up,$.down].includes(a)))return Vo[a]},Yo=(e,o)=>e.map((g,a)=>e[(a+o)%e.length]),Ee=e=>{const{activeElement:o}=document;for(const g of e)if(g===o||(g.focus(),o!==document.activeElement))return},Le="currentTabIdChange",Me="rovingFocusGroup.entryFocus",jo={bubbles:!1,cancelable:!0},Ho=j({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:Ko,emits:[Le,"entryFocus"],setup(e,{emit:o}){var g;const a=C((g=e.currentTabId||e.defaultCurrentTabId)!=null?g:null),b=C(!1),h=C(!1),i=C(null),{getItems:n}=P(ye,void 0),f=D(()=>[{outline:"none"},e.style]),m=d=>{o(Le,d)},I=()=>{b.value=!0},w=V(d=>{var y;(y=e.onMousedown)==null||y.call(e,d)},()=>{h.value=!0}),T=V(d=>{var y;(y=e.onFocus)==null||y.call(e,d)},d=>{const y=!v(h),{target:k,currentTarget:N}=d;if(k===N&&y&&!v(b)){const J=new Event(Me,jo);if(N==null||N.dispatchEvent(J),!J.defaultPrevented){const O=n().filter(L=>L.focusable),R=O.find(L=>L.active),B=O.find(L=>L.id===v(a)),H=[R,B,...O].filter(Boolean).map(L=>L.ref);Ee(H)}}h.value=!1}),t=V(d=>{var y;(y=e.onBlur)==null||y.call(e,d)},()=>{b.value=!1}),u=(...d)=>{o("entryFocus",...d)};le(Ce,{currentTabbedId:lo(a),loop:re(e,"loop"),tabIndex:D(()=>v(b)?-1:0),rovingFocusGroupRef:i,rovingFocusGroupRootStyle:f,orientation:re(e,"orientation"),dir:re(e,"dir"),onItemFocus:m,onItemShiftTab:I,onBlur:t,onFocus:T,onMousedown:w}),he(()=>e.currentTabId,d=>{a.value=d??null}),so(i,Me,u)}});function Wo(e,o,g,a,b,h){return U(e.$slots,"default")}var qo=W(Ho,[["render",Wo],["__file","roving-focus-group-impl.vue"]]);const Qo=j({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:Ao,ElRovingFocusGroupImpl:qo}});function Xo(e,o,g,a,b,h){const i=F("el-roving-focus-group-impl"),n=F("el-focus-group-collection");return K(),x(n,null,{default:s(()=>[r(i,ro(ao(e.$attrs)),{default:s(()=>[U(e.$slots,"default")]),_:3},16)]),_:3})}var Zo=W(Qo,[["render",Xo],["__file","roving-focus-group.vue"]]);const xo=j({components:{ElRovingFocusCollectionItem:zo},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:o}){const{currentTabbedId:g,loop:a,onItemFocus:b,onItemShiftTab:h}=P(Ce,void 0),{getItems:i}=P(ye,void 0),n=Ae(),f=C(null),m=V(t=>{o("mousedown",t)},t=>{e.focusable?b(v(n)):t.preventDefault()}),I=V(t=>{o("focus",t)},()=>{b(v(n))}),w=V(t=>{o("keydown",t)},t=>{const{key:u,shiftKey:d,target:y,currentTarget:k}=t;if(u===$.tab&&d){h();return}if(y!==k)return;const N=Jo(t);if(N){t.preventDefault();let O=i().filter(R=>R.focusable).map(R=>R.ref);switch(N){case"last":{O.reverse();break}case"prev":case"next":{N==="prev"&&O.reverse();const R=O.indexOf(k);O=a.value?Yo(O,R+1):O.slice(R+1);break}}io(()=>{Ee(O)})}}),T=D(()=>g.value===v(n));return le(je,{rovingFocusGroupItemRef:f,tabIndex:D(()=>v(T)?0:-1),handleMousedown:m,handleFocus:I,handleKeydown:w}),{id:n,handleKeydown:w,handleFocus:I,handleMousedown:m}}});function en(e,o,g,a,b,h){const i=F("el-roving-focus-collection-item");return K(),x(i,{id:e.id,focusable:e.focusable,active:e.active},{default:s(()=>[U(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var on=W(xo,[["render",en],["__file","roving-focus-item.vue"]]);const nn=me({trigger:xe.trigger,effect:{...Oe.effect,default:"light"},type:{type:Y(String)},placement:{type:Y(String),default:"bottom"},popperOptions:{type:Y(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:Y([Number,String]),default:0},maxHeight:{type:Y([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:Y(Object)},teleported:Oe.teleported}),He=me({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:uo}}),tn=me({onKeydown:{type:Y(Function)}}),ln=[$.down,$.pageDown,$.home],We=[$.up,$.pageUp,$.end],sn=[...ln,...We],{ElCollection:an,ElCollectionItem:rn,COLLECTION_INJECTION_KEY:un,COLLECTION_ITEM_INJECTION_KEY:dn}=Ye("Dropdown"),ve=Symbol("elDropdown"),{ButtonGroup:cn}=we,pn=j({name:"ElDropdown",components:{ElButton:we,ElButtonGroup:cn,ElScrollbar:Oo,ElDropdownCollection:an,ElTooltip:eo,ElRovingFocusGroup:Zo,ElOnlyChild:oo,ElIcon:ze,ArrowDown:co},props:nn,emits:["visible-change","click","command"],setup(e,{emit:o}){const g=Ge(),a=Ie("dropdown"),{t:b}=po(),h=C(),i=C(),n=C(null),f=C(null),m=C(null),I=C(null),w=C(!1),T=[$.enter,$.space,$.down],t=D(()=>({maxHeight:fo(e.maxHeight)})),u=D(()=>[a.m(R.value)]),d=D(()=>Fo(e.trigger)),y=Ae().value,k=D(()=>e.id||y);he([h,d],([c,M],[l])=>{var p,E,S;(p=l==null?void 0:l.$el)!=null&&p.removeEventListener&&l.$el.removeEventListener("pointerenter",G),(E=c==null?void 0:c.$el)!=null&&E.removeEventListener&&c.$el.removeEventListener("pointerenter",G),(S=c==null?void 0:c.$el)!=null&&S.addEventListener&&M.includes("hover")&&c.$el.addEventListener("pointerenter",G)},{immediate:!0}),be(()=>{var c,M;(M=(c=h.value)==null?void 0:c.$el)!=null&&M.removeEventListener&&h.value.$el.removeEventListener("pointerenter",G)});function N(){J()}function J(){var c;(c=n.value)==null||c.onClose()}function O(){var c;(c=n.value)==null||c.onOpen()}const R=mo();function B(...c){o("command",...c)}function G(){var c,M;(M=(c=h.value)==null?void 0:c.$el)==null||M.focus()}function H(){}function L(){const c=v(f);d.value.includes("hover")&&(c==null||c.focus()),I.value=null}function ue(c){I.value=c}function q(c){w.value||(c.preventDefault(),c.stopImmediatePropagation())}function Q(){o("visible-change",!0)}function de(c){(c==null?void 0:c.type)==="keydown"&&f.value.focus()}function ge(){o("visible-change",!1)}return le(ve,{contentRef:f,role:D(()=>e.role),triggerId:k,isUsingKeyboard:w,onItemEnter:H,onItemLeave:L}),le("elDropdown",{instance:g,dropdownSize:R,handleClick:N,commandHandler:B,trigger:re(e,"trigger"),hideOnClick:re(e,"hideOnClick")}),{t:b,ns:a,scrollbar:m,wrapStyle:t,dropdownTriggerKls:u,dropdownSize:R,triggerId:k,triggerKeys:T,currentTabId:I,handleCurrentTabIdChange:ue,handlerMainButtonClick:c=>{o("click",c)},handleEntryFocus:q,handleClose:J,handleOpen:O,handleBeforeShowTooltip:Q,handleShowTooltip:de,handleBeforeHideTooltip:ge,onFocusAfterTrapped:c=>{var M,l;c.preventDefault(),(l=(M=f.value)==null?void 0:M.focus)==null||l.call(M,{preventScroll:!0})},popperRef:n,contentRef:f,triggeringElementRef:h,referenceElementRef:i}}});function fn(e,o,g,a,b,h){var i;const n=F("el-dropdown-collection"),f=F("el-roving-focus-group"),m=F("el-scrollbar"),I=F("el-only-child"),w=F("el-tooltip"),T=F("el-button"),t=F("arrow-down"),u=F("el-icon"),d=F("el-button-group");return K(),Z("div",{class:fe([e.ns.b(),e.ns.is("disabled",e.disabled)])},[r(w,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":(i=e.referenceElementRef)==null?void 0:i.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-after":e.trigger==="hover"?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"",persistent:"",onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},vo({content:s(()=>[r(m,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:s(()=>[r(f,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:s(()=>[r(n,null,{default:s(()=>[U(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:s(()=>[r(I,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:s(()=>[U(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(K(),x(d,{key:0},{default:s(()=>[r(T,ie({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:s(()=>[U(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),r(T,ie({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:s(()=>[r(u,{class:fe(e.ns.e("icon"))},{default:s(()=>[r(t)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):te("v-if",!0)],2)}var mn=W(pn,[["render",fn],["__file","dropdown.vue"]]);const vn=j({name:"DropdownItemImpl",components:{ElIcon:ze},props:He,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:o}){const g=Ie("dropdown"),{role:a}=P(ve,void 0),{collectionItemRef:b}=P(dn,void 0),{collectionItemRef:h}=P(Go,void 0),{rovingFocusGroupItemRef:i,tabIndex:n,handleFocus:f,handleKeydown:m,handleMousedown:I}=P(je,void 0),w=Ue(b,h,i),T=D(()=>a.value==="menu"?"menuitem":a.value==="navigation"?"link":"button"),t=V(u=>{const{code:d}=u;if(d===$.enter||d===$.space)return u.preventDefault(),u.stopImmediatePropagation(),o("clickimpl",u),!0},m);return{ns:g,itemRef:w,dataset:{[Je]:""},role:T,tabIndex:n,handleFocus:f,handleKeydown:t,handleMousedown:I}}}),gn=["aria-disabled","tabindex","role"];function _n(e,o,g,a,b,h){const i=F("el-icon");return K(),Z(_o,null,[e.divided?(K(),Z("li",ie({key:0,role:"separator",class:e.ns.bem("menu","item","divided")},e.$attrs),null,16)):te("v-if",!0),_("li",ie({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:o[0]||(o[0]=n=>e.$emit("clickimpl",n)),onFocus:o[1]||(o[1]=(...n)=>e.handleFocus&&e.handleFocus(...n)),onKeydown:o[2]||(o[2]=_e((...n)=>e.handleKeydown&&e.handleKeydown(...n),["self"])),onMousedown:o[3]||(o[3]=(...n)=>e.handleMousedown&&e.handleMousedown(...n)),onPointermove:o[4]||(o[4]=n=>e.$emit("pointermove",n)),onPointerleave:o[5]||(o[5]=n=>e.$emit("pointerleave",n))}),[e.icon?(K(),x(i,{key:0},{default:s(()=>[(K(),x(go(e.icon)))]),_:1})):te("v-if",!0),U(e.$slots,"default")],16,gn)],64)}var bn=W(vn,[["render",_n],["__file","dropdown-item-impl.vue"]]);const qe=()=>{const e=P("elDropdown",{}),o=D(()=>e==null?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:o}},hn=j({name:"ElDropdownItem",components:{ElDropdownCollectionItem:rn,ElRovingFocusItem:on,ElDropdownItemImpl:bn},inheritAttrs:!1,props:He,emits:["pointermove","pointerleave","click"],setup(e,{emit:o,attrs:g}){const{elDropdown:a}=qe(),b=Ge(),h=C(null),i=D(()=>{var t,u;return(u=(t=v(h))==null?void 0:t.textContent)!=null?u:""}),{onItemEnter:n,onItemLeave:f}=P(ve,void 0),m=V(t=>(o("pointermove",t),t.defaultPrevented),Fe(t=>{if(e.disabled){f(t);return}const u=t.currentTarget;u===document.activeElement||u.contains(document.activeElement)||(n(t),t.defaultPrevented||u==null||u.focus())})),I=V(t=>(o("pointerleave",t),t.defaultPrevented),Fe(t=>{f(t)})),w=V(t=>{if(!e.disabled)return o("click",t),t.type!=="keydown"&&t.defaultPrevented},t=>{var u,d,y;if(e.disabled){t.stopImmediatePropagation();return}(u=a==null?void 0:a.hideOnClick)!=null&&u.value&&((d=a.handleClick)==null||d.call(a)),(y=a.commandHandler)==null||y.call(a,e.command,b,t)}),T=D(()=>({...e,...g}));return{handleClick:w,handlePointerMove:m,handlePointerLeave:I,textContent:i,propsAndAttrs:T}}});function wn(e,o,g,a,b,h){var i;const n=F("el-dropdown-item-impl"),f=F("el-roving-focus-item"),m=F("el-dropdown-collection-item");return K(),x(m,{disabled:e.disabled,"text-value":(i=e.textValue)!=null?i:e.textContent},{default:s(()=>[r(f,{focusable:!e.disabled},{default:s(()=>[r(n,ie(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:s(()=>[U(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var Qe=W(hn,[["render",wn],["__file","dropdown-item.vue"]]);const In=j({name:"ElDropdownMenu",props:tn,setup(e){const o=Ie("dropdown"),{_elDropdownSize:g}=qe(),a=g.value,{focusTrapRef:b,onKeydown:h}=P(bo,void 0),{contentRef:i,role:n,triggerId:f}=P(ve,void 0),{collectionRef:m,getItems:I}=P(un,void 0),{rovingFocusGroupRef:w,rovingFocusGroupRootStyle:T,tabIndex:t,onBlur:u,onFocus:d,onMousedown:y}=P(Ce,void 0),{collectionRef:k}=P(ye,void 0),N=D(()=>[o.b("menu"),o.bm("menu",a==null?void 0:a.value)]),J=Ue(i,m,b,w,k),O=V(B=>{var G;(G=e.onKeydown)==null||G.call(e,B)},B=>{const{currentTarget:G,code:H,target:L}=B;if(G.contains(L),$.tab===H&&B.stopImmediatePropagation(),B.preventDefault(),L!==v(i)||!sn.includes(H))return;const q=I().filter(Q=>!Q.disabled).map(Q=>Q.ref);We.includes(H)&&q.reverse(),Ee(q)});return{size:a,rovingFocusGroupRootStyle:T,tabIndex:t,dropdownKls:N,role:n,triggerId:f,dropdownListWrapperRef:J,handleKeydown:B=>{O(B),h(B)},onBlur:u,onFocus:d,onMousedown:y}}}),yn=["role","aria-labelledby"];function Cn(e,o,g,a,b,h){return K(),Z("ul",{ref:e.dropdownListWrapperRef,class:fe(e.dropdownKls),style:ho(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onBlur:o[0]||(o[0]=(...i)=>e.onBlur&&e.onBlur(...i)),onFocus:o[1]||(o[1]=(...i)=>e.onFocus&&e.onFocus(...i)),onKeydown:o[2]||(o[2]=_e((...i)=>e.handleKeydown&&e.handleKeydown(...i),["self"])),onMousedown:o[3]||(o[3]=_e((...i)=>e.onMousedown&&e.onMousedown(...i),["self"]))},[U(e.$slots,"default")],46,yn)}var Xe=W(In,[["render",Cn],["__file","dropdown-menu.vue"]]);const En=wo(mn,{DropdownItem:Qe,DropdownMenu:Xe}),Tn=Ve(Qe),$n=Ve(Xe),A=e=>(Co("data-v-ccd6505b"),e=e(),Eo(),e),kn={key:0,class:"json-editor-menu"},Sn={key:0,class:"editorTitle"},Nn=A(()=>_("span",{class:"buttonWithIcon"},[_("span",{class:"i-icon-park-outline-file-addition-one"}),z(" 新建")],-1)),On=A(()=>_("span",{class:"buttonWithIcon"},[_("span",{class:"i-icon-park-outline-history"}),z(" 打开最近记录")],-1)),Fn=A(()=>_("span",{class:"buttonWithIcon"},[_("span",{class:"i-icon-park-outline-computer"}),z(" 打开本地文件")],-1)),Rn=A(()=>_("span",{class:"buttonWithIcon"},[_("span",{class:"i-icon-park-outline-folder-open"}),z(" 打开"),_("span",{class:"i-icon-park-outline-down"})],-1)),Bn=A(()=>_("span",{class:"buttonWithIcon"},[_("span",{class:"i-icon-park-outline-save"}),z(" 保存")],-1)),Pn={class:"buttonWithIcon"},Dn=A(()=>_("span",{class:"i-icon-park-outline-indent-right"},null,-1)),Ln=A(()=>_("span",{class:"buttonWithIcon"},[_("span",{class:"i-icon-park-outline-info"}),z(" 文档属性")],-1)),Mn=A(()=>_("span",{class:"buttonWithIcon"},[_("span",{class:"i-icon-park-outline-delete"}),z(" 删除文档")],-1)),Kn=A(()=>_("span",{class:"buttonWithIcon"},[_("span",{class:"i-icon-park-outline-setting-two"}),z(" 选项"),_("span",{class:"i-icon-park-outline-down"})],-1)),An={class:"dialog-footer"},zn=A(()=>_("strong",null,"名称：",-1)),Gn=A(()=>_("strong",null,"存储：",-1)),Vn=A(()=>_("strong",null,"更新：",-1)),Un=A(()=>_("strong",null,"内容：",-1)),Jn=A(()=>_("strong",null,"大小：",-1)),Yn=j({__name:"VanillaJsonEditor",props:{content:{default:void 0},config:{default:()=>({mode:"text"})},showMenuBar:{type:Boolean,default:!1},name:{default:""}},emits:["change","create","changeName","open","openRecent","delete"],setup(e,{expose:o,emit:g}){const a=["content","mode","mainMenuBar","navigationBar","statusBar","readOnly","indentation","tabSize","escapeControlCharacters","escapeUnicodeCharacters","validator","onError","onChange","onChangeMode","onClassName","onRenderValue","onRenderMenu","queryLanguages","queryLanguageId","onChangeQueryLanguage","onFocus","onBlur"],b=C(),h=C(),i=C();let n;const f=C(""),m=C(2),I=C(!1),w=C(!1),T=C(!1),t=C(""),u=D(()=>{if(w){const l=n.get();let p,E;return pe(l)?E=l.json:E=l.text,typeof E=="string"?p="字符串类型":Array.isArray(E)?p=`数组类型，包含 ${E.length} 个对象`:E&&typeof E=="object"?p=`对象类型，包含 ${Object.keys(E).length} 个属性`:p="其他类型",{name:f.value,storage:f.value?"浏览器本地":"",updated:"",content:p,size:No(typeof E=="string"?E.length:JSON.stringify(E,null,m.value).length)}}else return{}}),d=g;let y=!1;o({container:h,update:B,set:G,refresh:L,get:H});const k=e;let N={};Ke(()=>{b.value&&(N=Re(k.config),n=new So({target:b.value,props:{content:{json:{}},onChange:l=>{y||(pe(l)?d("change",l.json):d("change",l.text))},indentation:m.value,...M(N,a)}}),k.config.indentation&&(m.value=k.config.indentation))}),be(()=>{n==null||n.destroy()}),he(()=>Pe().isDark,()=>{n==null||n.refresh()}),Io(()=>{let l=!1;for(const p in k.config)if(k.config[p]!==N[p]){l=!0;break}l&&(N=Re(k.config),n==null||n.updateProps(M(N,a))),k.content!=null&&B(k.content),f.value=k.name,n==null||n.refresh()});function J(){n.set({json:{}}),d("create")}function O(l){var p;switch(l){case"file":(p=i.value)==null||p.click();break;case"recent":d("openRecent");break}}function R(l){const p=l.target;if(p.files&&p.files.length){const E=p.files[0],S=new FileReader;S.onload=()=>{S.result&&d("open",{name:E.name,content:S.result})},S.readAsText(E)}p.value=""}function B(l){y=!0;let p;l!=null&&(typeof l=="string"?p=l:p=JSON.stringify(l,null,m.value),n.update({text:p})),setTimeout(()=>{y=!1},0)}function G(l){y=!0,l!=null&&(typeof l=="string"?n.set({text:l}):n.set({json:l})),setTimeout(()=>{y=!1},0)}function H(){const l=n.get();return pe(l)?l.json:l.text}function L(){n==null||n.refresh()}function ue(){const l=n.get(),p=f.value?f.value+".json":"未命名.json";pe(l)?De(JSON.stringify(l.json),p):De(l.text,p)}let q=m.value;function Q(l){switch(l){case"indentation":q=m.value,I.value=!0;break;case"properties":w.value=!0;break;case"delete":d("delete");break}}function de(){m.value=q,I.value=!1}function ge(){n.updateProps({indentation:m.value}),I.value=!1}function Te(){t.value=f.value,T.value=!0}function $e(){T.value=!1}function c(){t.value&&d("changeName",t.value),T.value=!1}function M(l,p){const E={};for(const S of p)l[S]!==void 0&&(E[S]=l[S]);return E}return(l,p)=>{const E=yo,S=we,se=Tn,ke=$n,Se=En,Ze=ko,ee=no,Ne=$o,ae=to;return K(),Z("div",{ref_key:"container",ref:h,class:"json-editor-wrapper"},[l.showMenuBar?(K(),Z("div",kn,[v(f)&&!v(T)?(K(),Z("div",Sn,[z(Be(v(f))+" ",1),_("i",{class:"i-icon-park-outline-edit",onClick:Te})])):te("",!0),v(T)?(K(),x(E,{key:1,modelValue:v(t),"onUpdate:modelValue":p[0]||(p[0]=X=>ce(t)?t.value=X:null),class:"name-editor",placeholder:"请输入名称"},{suffix:s(()=>[_("i",{class:"i-icon-park-outline-close",onClick:$e}),_("i",{class:"i-icon-park-outline-check",onClick:c})]),_:1},8,["modelValue"])):te("",!0),r(Ze,{class:"editorControlButtons"},{default:s(()=>[r(S,{size:"small",type:"primary",onClick:J},{default:s(()=>[Nn]),_:1}),r(Se,{onCommand:O},{dropdown:s(()=>[r(ke,null,{default:s(()=>[r(se,{command:"recent"},{default:s(()=>[On]),_:1}),r(se,{command:"file"},{default:s(()=>[Fn]),_:1})]),_:1})]),default:s(()=>[r(S,{size:"small",type:"primary"},{default:s(()=>[Rn]),_:1})]),_:1}),r(S,{size:"small",type:"primary",onClick:ue},{default:s(()=>[Bn]),_:1}),r(Se,{onCommand:Q},{dropdown:s(()=>[r(ke,null,{default:s(()=>[r(se,{command:"indentation"},{default:s(()=>[_("span",Pn,[Dn,z(" 缩进("+Be(v(m))+")",1)])]),_:1}),r(se,{command:"properties"},{default:s(()=>[Ln]),_:1}),r(se,{command:"delete"},{default:s(()=>[Mn]),_:1})]),_:1})]),default:s(()=>[r(S,{size:"small",type:"primary"},{default:s(()=>[Kn]),_:1})]),_:1})]),_:1})])):te("",!0),_("div",{ref_key:"jsonEditorDiv",ref:b,class:fe(["json-editor",{"jse-theme-dark":("useStyleStore"in l?l.useStyleStore:v(Pe))().isDark}])},null,2),oe(_("input",{ref_key:"uploader",ref:i,type:"file",accept:".json,.geojson,.txt",onChange:R},null,544),[[ne,!1]]),r(Ne,{modelValue:v(I),"onUpdate:modelValue":p[2]||(p[2]=X=>ce(I)?I.value=X:null),title:"设置缩进","before-close":de},{footer:s(()=>[_("span",An,[r(S,{onClick:de},{default:s(()=>[z("取消")]),_:1}),r(S,{type:"primary",onClick:ge},{default:s(()=>[z(" 确定 ")]),_:1})])]),default:s(()=>[r(ee,null,{default:s(()=>[z("配置代码模式下用于缩进的空格数。 缩进同时应用于两个面板。")]),_:1}),r(E,{modelValue:v(m),"onUpdate:modelValue":p[1]||(p[1]=X=>ce(m)?m.value=X:null),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1},8,["modelValue"]),r(Ne,{modelValue:v(w),"onUpdate:modelValue":p[3]||(p[3]=X=>ce(w)?w.value=X:null),title:"文档属性",class:"documentProperties"},{default:s(()=>[r(ee,null,{default:s(()=>[zn,oe(r(ae,{content:v(u).name},null,8,["content"]),[[ne,v(u).name]])]),_:1}),r(ee,null,{default:s(()=>[Gn,oe(r(ae,{content:v(u).storage},null,8,["content"]),[[ne,v(u).storage]])]),_:1}),r(ee,null,{default:s(()=>[Vn,oe(r(ae,{content:v(u).updated},null,8,["content"]),[[ne,v(u).updated]])]),_:1}),r(ee,null,{default:s(()=>[Un,oe(r(ae,{content:v(u).content},null,8,["content"]),[[ne,v(u).content]])]),_:1}),r(ee,null,{default:s(()=>[Jn,oe(r(ae,{content:v(u).size},null,8,["content"]),[[ne,v(u).size]])]),_:1})]),_:1},8,["modelValue"])],512)}}}),nt=To(Yn,[["__scopeId","data-v-ccd6505b"]]);export{nt as V};
