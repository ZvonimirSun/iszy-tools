import{h as T,aR as S,_ as N,k as y,aS as j,u as z,R as F,T as L,E as w,r as p,s as R,x as n,v as b,I as q,j as G,l as O,a8 as J,F as Q,q as v,w as _,y as U,aN as W,H as B,b6 as X,z as Z,K as r,bm as x,L as h,N as u,Y as ee,at as te,a4 as C,bn as I,aA as m,G as ae,a0 as se}from"./index-qQsk_k09.js";import"./el-empty-B1bHywG5.js";import{F as re,a as ne,E as le}from"./el-table-v2-gjJ-vGTX.js";/* empty css               */import{E as oe}from"./el-popover-DlxowTtq.js";import"./el-popper-B2AtgFGa.js";import{E as k}from"./index-CuGF9c9-.js";import"./castArray-_zs3I2Qj.js";import"./raf-De0QvMTm.js";import"./memoize-one.esm-BdPwpGay.js";import"./index-HQm4yQrW.js";import"./index-6CHePwZQ.js";const $=Symbol("breadcrumbKey"),ce=T({separator:{type:String,default:"/"},separatorIcon:{type:S}}),ue=y({name:"ElBreadcrumb"}),ie=y({...ue,props:ce,setup(a){const e=a,{t:i}=j(),s=z("breadcrumb"),c=F();return q($,e),L(()=>{const o=c.value.querySelectorAll(`.${s.e("item")}`);o.length&&o[o.length-1].setAttribute("aria-current","page")}),(o,E)=>(p(),w("div",{ref_key:"breadcrumb",ref:c,class:b(n(s).b()),"aria-label":n(i)("el.breadcrumb.label"),role:"navigation"},[R(o.$slots,"default")],10,["aria-label"]))}});var de=N(ie,[["__file","breadcrumb.vue"]]);const me=T({to:{type:G([String,Object]),default:""},replace:Boolean}),pe=y({name:"ElBreadcrumbItem"}),fe=y({...pe,props:me,setup(a){const e=a,i=J(),s=O($,void 0),c=z("breadcrumb"),o=i.appContext.config.globalProperties.$router,E=F(),A=()=>{!e.to||!o||(e.replace?o.replace(e.to):o.push(e.to))};return(g,D)=>{var l,t;return p(),w("span",{class:b(n(c).e("item"))},[Q("span",{ref_key:"link",ref:E,class:b([n(c).e("inner"),n(c).is("link",!!g.to)]),role:"link",onClick:A},[R(g.$slots,"default")],2),(l=n(s))!=null&&l.separatorIcon?(p(),v(n(W),{key:0,class:b(n(c).e("separator"))},{default:_(()=>[(p(),v(U(n(s).separatorIcon)))]),_:1},8,["class"])):(p(),w("span",{key:1,class:b(n(c).e("separator")),role:"presentation"},B((t=n(s))==null?void 0:t.separator),3))],2)}}});var V=N(fe,[["__file","breadcrumb-item.vue"]]);const be=Z(de,{BreadcrumbItem:V}),_e=X(V);var f=function(a){return a[a.DEACTIVATED=0]="DEACTIVATED",a[a.ENABLED=1]="ENABLED",a[a.DISABLED=2]="DISABLED",a}(f||{});function ye(a){return[{key:"userId",dataKey:"userId",width:150,hidden:!0},{key:"userName",dataKey:"userName",title:"用户名",width:150,align:"center"},{key:"nickName",dataKey:"nickName",title:"昵称",width:150,align:"center"},{key:"email",dataKey:"email",title:"邮箱",width:150,align:"center"},{key:"roles",title:"角色",width:150,align:"center",cellRenderer:({rowData:e})=>{var s;const i=((s=e.roles)==null?void 0:s.map(c=>c.name).join(", "))||"";return r("span",null,[i])}},{key:"status",title:"状态",width:100,align:"center",cellRenderer:({rowData:e})=>{switch(e.status){case f.ENABLED:return r(k,{type:"success"},{default:()=>[u("正常")]});case f.DISABLED:return r(k,{type:"info"},{default:()=>[u("禁用")]});case f.DEACTIVATED:return r(k,{type:"info"},{default:()=>[u("待激活")]});default:return r(k,{type:"warning"},{default:()=>[u("未知")]})}}},{key:"createdAt",title:"创建时间",width:200,align:"center",cellRenderer:({rowData:e})=>r("span",null,[x(e.createdAt).format("YYYY-MM-DD HH:mm:ss")])},{key:"updatedAt",title:"更新时间",width:200,align:"center",cellRenderer:({rowData:e})=>r("span",null,[x(e.updatedAt).format("YYYY-MM-DD HH:mm:ss")])},{key:"operations",title:"操作",width:200,fixed:re.RIGHT,cellRenderer:({rowData:e})=>r(ee,null,[r(h,{size:"small",plain:!0,onClick:()=>a(e,"edit")},{default:()=>[u("修改")]}),e.status===f.DEACTIVATED||e.status===f.DISABLED?r(h,{size:"small",plain:!0,onClick:()=>a(e,"activate")},{default:()=>[u("启用")]}):r(h,{size:"small",plain:!0,onClick:()=>a(e,"disable")},{default:()=>[u("禁用")]}),r(oe,{title:"确定要删除吗？",onConfirm:()=>a(e,"delete")},{reference:()=>r(h,{size:"small",plain:!0,type:"danger"},{default:()=>[u("删除")]})})])}]}const Ee={"h-full":"","w-full":"",flex:"","flex-col":"","gap-4":"","pa-4":""},ge=y({__name:"userManager",setup(a){const e=te(),i=C([]),s=C({index:1,size:10}),c=ye(E);L(()=>{o(1,s.size)});async function o(l,t){try{const d=await I.get("/user/list",{params:{pageIndex:l,pageSize:t}});if(d.success)i.splice(0,i.length,...d.data);else throw new Error(d.message)}catch(d){m.error(d.message)}}function E(l,t){switch(t){case"edit":break;case"disable":A(l);break;case"activate":g(l);break;case"delete":D(l);break}}async function A(l){try{const t=await I.put("/user/ban",null,{params:{id:l.userId}});if(t.success)m.success(t.message),await o(s.index,s.size);else throw new Error(t.message)}catch(t){m.error(t.message)}}async function g(l){try{const t=await I.put("/user/activate",null,{params:{id:l.userId}});if(t.success)m.success(t.message),await o(s.index,s.size);else throw new Error(t.message)}catch(t){m.error(t.message)}}async function D(l){try{const t=await I.delete(`/user/${l.userId}`);if(t.success)m.success(t.message),await o(s.index,s.size);else throw new Error(t.message)}catch(t){m.error(t.message)}}return(l,t)=>{const d=_e,Y=be,M=ne,P=le;return p(),w("div",Ee,[n(e).meta.parentInfo?(p(),v(Y,{key:0},{default:_(()=>[r(d,{to:n(e).meta.parentInfo.link},{default:_(()=>[u(B(n(e).meta.parentInfo.name),1)]),_:1},8,["to"]),r(d,null,{default:_(()=>[u(B(n(e).name),1)]),_:1})]),_:1})):ae("",!0),r(P,{"flex-1":""},{default:_(({width:K,height:H})=>[r(M,{columns:n(c),data:n(i),width:K,height:H,fixed:""},null,8,["columns","data","width","height"])]),_:1})])}}}),ze=se(ge,[["__scopeId","data-v-2a17d7f3"]]);export{ze as default};
