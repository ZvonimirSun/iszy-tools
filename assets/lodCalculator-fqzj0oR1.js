import{D as I,aE as N,r as b,H as E,I as v,V as n,$ as r,ao as m,u as i,aq as w,ah as x,az as h,ar as P}from"./index-AbLOts5N.js";import{a as C,E as U}from"./el-form-item-B51anhTH.js";import{E as B}from"./el-input-number-e7byhuVd.js";import"./castArray-CUQkfLHh.js";import"./index-DamUF0rO.js";const k={"h-full":"","w-full":"",flex:"","flex-col":"","gap-2":"","overflow-auto":""},y={flex:"","flex-wrap":"","gap-2":""},R={flex:"","flex-1":"","gap-2":"","overflow-auto":""},J={"h-full":"","flex-1":"","overflow-auto":""},M={"h-full":"","flex-1":"","overflow-auto":""},A=I({__name:"lodCalculator",setup(O){const l=N({ppi:"96",pixelSize:"0.26",scaleDomination:"295829355.454566",resolution:"78271.51696402059"}),e=N({ppi:96,pixelSize:.26,count:21,scaleDomination:295829355454566e-6,resolution:78271.51696402059,lod:0}),d=b(""),c=b("");function V(t){if(!t)return;const o=Number.parseFloat(t);Number.isNaN(o)||(e.ppi=o,l.pixelSize=(.0254/e.ppi*1e3).toFixed(2),e.pixelSize=Number.parseFloat(l.pixelSize),l.scaleDomination?p(l.scaleDomination):l.resolution&&f(l.resolution))}function D(t){if(!t)return;const o=Number.parseFloat(t);Number.isNaN(o)||(e.pixelSize=o,l.ppi=(.0254/e.pixelSize*1e3).toFixed(3),e.ppi=Number.parseFloat(l.ppi),l.scaleDomination?p(l.scaleDomination):l.resolution&&f(l.resolution))}function p(t){if(!t)return;const o=Number.parseFloat(t);Number.isNaN(o)||(e.scaleDomination=o,l.resolution=(e.scaleDomination/e.ppi*.0254).toPrecision(11),e.resolution=Number.parseFloat(l.resolution))}function f(t){if(!t)return;const o=Number.parseFloat(t);Number.isNaN(o)||(e.resolution=o,l.scaleDomination=(e.resolution/.0254*e.ppi).toPrecision(11),e.scaleDomination=Number.parseFloat(l.scaleDomination))}function S(){e.count&&(e.count<1?e.count=1:e.count<e.lod+1&&(e.lod=e.count-1))}function F(){let t;e.lod===0?t=e.resolution:t=e.resolution*2**e.lod;const o=[];for(let a=0;a<e.count;a++){const s=t/2**a;o.push({lod:a,resolution:Number.parseFloat(s.toPrecision(11)),scaleDomination:Number.parseFloat((s/.0254*e.ppi).toPrecision(11))})}d.value=JSON.stringify(o,null,2),c.value=JSON.stringify(o.map(a=>a.resolution),null,2)}return(t,o)=>{const a=h,s=C,_=B,g=P,z=U;return E(),v("div",k,[n(z,{"label-width":130},{default:r(()=>[m("div",y,[n(s,{label:"屏幕分辨率",class:"form-item"},{default:r(()=>[n(a,{modelValue:i(l).ppi,"onUpdate:modelValue":o[0]||(o[0]=u=>i(l).ppi=u),onInput:V},null,8,["modelValue"])]),_:1}),n(s,{label:"像元大小(mm)",class:"form-item"},{default:r(()=>[n(a,{modelValue:i(l).pixelSize,"onUpdate:modelValue":o[1]||(o[1]=u=>i(l).pixelSize=u),onInput:D},null,8,["modelValue"])]),_:1}),n(s,{label:"切片层级数",class:"form-item"},{default:r(()=>[n(_,{modelValue:i(e).count,"onUpdate:modelValue":o[2]||(o[2]=u=>i(e).count=u),modelModifiers:{number:!0},min:0,step:1,onChange:S},null,8,["modelValue"])]),_:1}),n(s,{label:"ScaleDomination",class:"form-item"},{default:r(()=>[n(a,{modelValue:i(l).scaleDomination,"onUpdate:modelValue":o[3]||(o[3]=u=>i(l).scaleDomination=u),onInput:p},null,8,["modelValue"])]),_:1}),n(s,{label:"Resolution",class:"form-item"},{default:r(()=>[n(a,{modelValue:i(l).resolution,"onUpdate:modelValue":o[4]||(o[4]=u=>i(l).resolution=u),onInput:f},null,8,["modelValue"])]),_:1}),n(s,{label:"当前层级",class:"form-item"},{default:r(()=>[n(_,{modelValue:i(e).lod,"onUpdate:modelValue":o[5]||(o[5]=u=>i(e).lod=u),modelModifiers:{number:!0},min:0,max:i(e).count,step:1},null,8,["modelValue","max"])]),_:1}),n(s,{class:"form-item"},{default:r(()=>[n(g,{onClick:F},{default:r(()=>[w(" 生成 ")]),_:1})]),_:1})])]),_:1}),m("div",R,[m("div",J,[m("pre",null,x(i(d)),1)]),m("div",M,[m("pre",null,x(i(c)),1)])])])}}});export{A as default};
