import{j as I,k as b,B as f,bG as q,aQ as x,q as B,l as S,o as z,c as C,a as u,b as a,aD as t,y as r,bI as y,W as F,bJ as K,a8 as g,aE as Q,aF as U,aI as G,aG as L,aO as M,aP as O,ad as P}from"./vendor-Emzjfwe5.js";import{v as R}from"./common-uZVBLpiI.js";const v=n=>(M("data-v-4c32003c"),n=n(),O(),n),j={class:"login-container"},D={class:"main"},J=v(()=>u("span",{class:"i-icon-park-outline-user"},null,-1)),T=v(()=>u("span",{class:"i-icon-park-outline-lock"},null,-1)),W={class:"btn-wrapper"},A=I({__name:"login",setup(n){const s=b({userName:"",password:""}),i=f(),c=f({}),d=f(!1),h=q(),N=x(),w=R();B(N,function(o){const e=o.query;e&&(typeof e.redirect=="string"&&(i.value=e.redirect),c.value=V(e))},{immediate:!0}),S(()=>{w.isLogged&&h.push({path:i.value||"/",query:c.value})});async function p(){if(!navigator.onLine){g.warning("已离线！");return}if(s.userName!=null&&s.password!=null){d.value=!0;try{await w.login({userName:s.userName,password:s.password}),g.success("登录成功！"),h.push({path:i.value||"/",query:c.value})}catch(o){o instanceof Error&&g.error(o.message)}d.value=!1}}function V(o){const{redirect:e,...l}=o;return l}return(o,e)=>{const l=Q,m=U,k=G,E=L;return z(),C("div",j,[u("div",D,[a(E,K({layout:"horizontal",model:r(s)},{wrapperCol:{span:24}}),{default:t(()=>[a(m,{required:""},{default:t(()=>[a(l,{modelValue:r(s).userName,"onUpdate:modelValue":e[0]||(e[0]=_=>r(s).userName=_),placeholder:"账户",size:"large",onKeypress:y(p,["enter"])},{prefix:t(()=>[J]),_:1},8,["modelValue"])]),_:1}),a(m,{required:""},{default:t(()=>[a(l,{modelValue:r(s).password,"onUpdate:modelValue":e[1]||(e[1]=_=>r(s).password=_),type:"password",placeholder:"密码",size:"large","show-password":"",onKeypress:y(p,["enter"])},{prefix:t(()=>[T]),_:1},8,["modelValue"])]),_:1}),a(m,null,{default:t(()=>[u("div",W,[a(k,{type:"primary",block:"",size:"large",loading:r(d),onClick:p},{default:t(()=>[F(" 登录 ")]),_:1},8,["loading"])])]),_:1})]),_:1},16,["model"])])])}}}),Y=P(A,[["__scopeId","data-v-4c32003c"]]);export{Y as default};
