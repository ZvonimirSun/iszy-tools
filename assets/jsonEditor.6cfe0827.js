var e=Object.defineProperty,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,n=(t,o,a)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,i=(e,i)=>{for(var r in i||(i={}))o.call(i,r)&&n(e,r,i[r]);if(t)for(var r of t(i))a.call(i,r)&&n(e,r,i[r]);return e};import{E as r,a0 as d,a9 as s,ap as l,aq as c,ar as h,as as f,at as m,au as p,av as g,l as u,aw as v,ax as j,ay as E,az as y,a as b,o as w,c as k,w as C,aA as L,e as x,b as R,O as P,g as S}from"./vendor.80c566e1.js";import{C as O}from"./container.00ca171b.js";import{J as D}from"./jsoneditor.min.7be9b5ba.js";import{c as _}from"./createFile.e88553d5.js";/* empty css              *//* empty css              */import{_ as N}from"./index.8be3106b.js";var A=".editorPanel[data-v-1a98fede] {\n  display: flex;\n  height: 100%;\n}\n@media (max-width: 1024px) {\n.editorPanel[data-v-1a98fede] {\n    height: calc(100% - 3.2rem - 1.2rem);\n}\n}\n.editorPanel .controller[data-v-1a98fede] {\n  height: 100%;\n  width: 10rem;\n  text-align: center;\n}\n.editorPanel .controller .ant-space[data-v-1a98fede] {\n  margin-top: 10rem;\n  width: 80%;\n}\n.editorPanel .controller .ant-space[data-v-1a98fede] .ant-btn {\n  display: flex;\n  align-items: center;\n}\n.editorPanel .controller .ant-space[data-v-1a98fede] .ant-btn .i-icon {\n  font-size: 1.8rem;\n}\n.editorPanel .controller .ant-space[data-v-1a98fede] .ant-btn .i-icon + span, .editorPanel .controller .ant-space[data-v-1a98fede] .ant-btn span + .i-icon {\n  margin-left: 0;\n}\n.editorPanel[data-v-1a98fede] .jsonEditor {\n  height: 100%;\n  width: calc(50% - 5rem);\n}\n.editorPanel[data-v-1a98fede] .jsonEditor .ace-jsoneditor *, .editorPanel[data-v-1a98fede] .jsonEditor textarea.jsoneditor-text *, .editorPanel[data-v-1a98fede] .jsonEditor code, .editorPanel[data-v-1a98fede] .jsonEditor pre {\n  font-family: JetBrains Mono, monospace;\n}\n@media (max-width: 1024px) {\n.editorPanel[data-v-1a98fede] .jsonEditor.jsonEditorLeft {\n    width: 100%;\n}\n}\n.editorPanel[data-v-1a98fede] .jsonEditor.jsonEditorLeft .differentElement {\n  background-color: pink;\n}\n.editorPanel[data-v-1a98fede] .jsonEditor.jsonEditorLeft .differentElement .jsoneditor-field, .editorPanel[data-v-1a98fede] .jsonEditor.jsonEditorLeft .differentElement .jsoneditor-value {\n  color: red;\n}\n.editorPanel[data-v-1a98fede] .jsonEditor.jsonEditorRight .differentElement {\n  background-color: #acee61;\n}\n.editorPanel[data-v-1a98fede] .jsonEditor.jsonEditorRight .differentElement .jsoneditor-field, .editorPanel[data-v-1a98fede] .jsonEditor.jsonEditorRight .differentElement .jsoneditor-value {\n  color: red;\n}\n@media (max-width: 1024px) {\n.noShowMobile[data-v-1a98fede] {\n    display: none !important;\n}\n}\n@media (min-width: 1024px) {\n.showMobile[data-v-1a98fede] {\n    display: none !important;\n}\n}\n@media (max-width: 1024px) {\n.ant-space[data-v-1a98fede] {\n    margin-top: 1.2rem;\n}\n}\n[data-v-1a98fede] .jsoneditor-poweredBy {\n  display: none;\n}";const{mapGetters:B,mapActions:J}=r("cache"),M={name:"JsonEditor",components:{Container:O,Button:d,Space:s,Checkbox:l,Right:c,Left:h,CodeDownload:f,Save:m,Clear:p},data:()=>({editorLeft:null,editorRight:null,codeLeft:{Array:[1,2,3],Boolean:!0,Null:null,Number:123,Object:{a:"b",c:"d"},String:"Hello World"},codeRight:{Array:[1,2,3],Boolean:!0,Null:null,Number:123,Object:{a:"b",c:"d"},String:"Hello World"},autoSave:!1,diff:!0}),computed:i({},B(["getData"])),mounted(){this.init()},methods:i({init(){this.getData("jsonEditor")&&(this.getData("jsonEditor").left&&(this.codeLeft=this.getData("jsonEditor").left),this.getData("jsonEditor").right&&(this.codeRight=this.getData("jsonEditor").right)),this.editorLeft=g(new D(this.$refs.jsonEditorLeft,{mode:"code",modes:["code","tree"],onClassName:this.onClassName,onChangeText:e=>{try{this.codeLeft=JSON.parse(e),this.editorRight.refresh(),this.autoSave&&this.save()}catch(t){}},autocomplete:{applyTo:["value"],filter:"contain",trigger:"focus",getOptions:(e,t,o,a)=>new Promise(((e,t)=>{const o=this.extractUniqueWords(a.get());o.length>0?e(o):t(new Error("noOptions"))}))}},this.codeLeft)),this.editorRight=g(new D(this.$refs.jsonEditorRight,{mode:"tree",modes:["code","tree"],onClassName:this.onClassName,onChangeText:e=>{try{this.codeRight=JSON.parse(e),this.editorLeft.refresh(),this.autoSave&&this.save()}catch(t){}},autocomplete:{applyTo:["value"],filter:"contain",trigger:"focus",getOptions:(e,t,o,a)=>new Promise(((e,t)=>{const o=this.extractUniqueWords(a.get());o.length>0?e(o):t(new Error("noOptions"))}))}},this.codeRight))},copyRight(){this.codeRight=u(this.codeLeft),this.editorRight.update(this.codeRight),this.editorLeft.refresh()},copyLeft(){this.codeLeft=u(this.codeRight),this.editorLeft.update(this.codeLeft),this.editorRight.refresh()},async save(){try{await this.setData({key:"jsonEditor",val:{left:this.editorLeft.get(),right:this.editorRight.get()}})}catch(e){this.$msg.warn("JSON存在错误，保存失败")}},async clear(){await this.setData({key:"jsonEditor",val:void 0}),this.$msg.success("清除成功")},download(){_(this.editorLeft.getText(),"left.json")},changeDiff(){this.editorLeft.refresh(),this.editorRight.refresh()},changeAutoSave(){this.autoSave&&this.save()},onClassName({path:e}){const t=v(this.codeLeft,e),o=v(this.codeRight,e);return this.diff?j(t,o)?"":"differentElement":""},extractUniqueWords:e=>E(y(e,(function(e,t){return L(e)?[t]:[t,String(e)]})))},J(["setData"])),beforeUnmount(){this.editorLeft&&this.editorLeft.destroy(),this.editorRight&&this.editorRight.destroy()}},U={class:"editorPanel"},T={ref:"jsonEditorLeft",class:"jsonEditor jsonEditorLeft"},W={class:"controller noShowMobile"},q=S(" 复制 "),$=S(" 复制 "),z=S(" 保存 "),H=S("自动"),I=S(" 清除 "),F=S(" 下载 "),G=S("Diff"),K={ref:"jsonEditorRight",class:"jsonEditor jsonEditorRight noShowMobile"},Q=S(" 下载 ");function V(e,t,o,a,n,i){const r=b("Right"),d=b("Button"),s=b("Left"),l=b("Save"),c=b("Checkbox"),h=b("Clear"),f=b("CodeDownload"),m=b("Space"),p=b("container");return w(),k(p,null,{default:C((()=>[x("div",U,[x("div",T,null,512),x("div",W,[R(m,{direction:"vertical"},{default:C((()=>[R(d,{type:"primary",onClick:i.copyRight,block:""},{default:C((()=>[R(r,{theme:"outline"}),q])),_:1},8,["onClick"]),R(d,{type:"primary",onClick:i.copyLeft,block:""},{default:C((()=>[R(s,{theme:"outline"}),$])),_:1},8,["onClick"]),R(d,{type:"primary",onClick:i.save,block:""},{default:C((()=>[R(l,{theme:"outline"}),z])),_:1},8,["onClick"]),R(c,{checked:e.autoSave,"onUpdate:checked":t[0]||(t[0]=t=>e.autoSave=t),onChange:i.changeAutoSave},{default:C((()=>[H])),_:1},8,["checked","onChange"]),e.getData("jsonEditor")?(w(),k(d,{key:0,type:"primary",onClick:i.clear,block:""},{default:C((()=>[R(h,{theme:"outline"}),I])),_:1},8,["onClick"])):P("",!0),R(d,{type:"primary",onClick:i.download,block:""},{default:C((()=>[R(f,{theme:"outline"}),F])),_:1},8,["onClick"]),R(c,{checked:e.diff,"onUpdate:checked":t[1]||(t[1]=t=>e.diff=t),onChange:i.changeDiff},{default:C((()=>[G])),_:1},8,["checked","onChange"])])),_:1})]),x("div",K,null,512)]),R(m,{class:"showMobile",align:"center"},{default:C((()=>[R(d,{type:"primary",onClick:i.download},{default:C((()=>[Q])),_:1},8,["onClick"])])),_:1})])),_:1})}var X=N(M,[["render",V],["__scopeId","data-v-1a98fede"]]);export{X as default};
