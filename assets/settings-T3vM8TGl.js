import{F as w,aV as x,aq as T,m as N,u as a,G as I,a2 as M,a3 as V,at as j,aU as G,bI as P,au as $,av as q,J as g,K as C,a0 as b,a1 as t,ar as o,ai as F,X as e,ap as E,T as H,as as J,aC as K}from"./index-Tr-dY9sd.js";import{E as X}from"./el-checkbox-E9SsA0Z9.js";import{E as z,a as L}from"./el-radio-group-G8y1uhoX.js";/* empty css                 */import{E as Q}from"./el-divider-ywyLe9hS.js";import{E as W}from"./el-space-CHUIqsDE.js";import{E as Y}from"./el-popover-Ouwpg9Bu.js";import{n as Z,b as ee}from"./Router-twqYWQ-l.js";import"./hasIn-H5lpYK--.js";const te=w({inheritAttrs:!1,__name:"HaveAccess",props:{auth:{type:[Boolean,Object],default:!1},link:{default:""}},setup(u){const l=u,p=x(),k=Z(),d=T(),_=N(()=>l.auth?typeof l.auth=="boolean"?p.logged:p.checkAccess(l.auth):l.link?p.checkAccess(k.getAuth(l.link)):!0);function n(){l.link&&d.push(l.link)}return(m,y)=>a(_)?I(m.$slots,"default",M({key:0},m.$attrs,{goto:n})):V("",!0)}}),oe=j("main",{persist:!0,state:()=>({_cache:{},clearOfflineCacheTag:!1}),getters:{getData:u=>l=>{if(l)return(u._cache||{})[l]}},actions:{setData({key:u,val:l}={}){u&&(this._cache=this._cache||{},this._cache[u]=l)},clear(){this._cache={}},clearOfflineCache(){console.log("clearOfflineCache"),this.clearOfflineCacheTag=!0}}}),ae={key:1,flex:"","items-center":"","gap-4":""},le={flex:"","flex-wrap":"","items-start":"","gap-4":"","text-7":"",class:"settings-container"},ne={class:"settings-wrapper"},se={key:0,class:"settings-wrapper"},re=w({__name:"settings",setup(u){const l=T(),p=G(),k=P(),d=x(),_=$(),n=N(()=>_.general),m=()=>oe().clearOfflineCache();function y(){l.push({path:"/login",query:{redirect:p.fullPath}})}function O(){l.push("/register")}function U(){l.push("/logout")}return(ue,r)=>{const c=ee,i=J,A=q("router-link"),B=te,S=Y,h=W,R=Q,v=z,D=L,f=X;return g(),C(H,null,[a(d).logged?(g(),b(c,{key:0,level:3},{default:t(()=>[o(F(a(d).profile.nickName)+" 欢迎你~ ",1)]),_:1})):V("",!0),a(d).logged?(g(),C("div",ae,[e(i,{type:"primary",onClick:U},{default:t(()=>[o(" 登出 ")]),_:1}),e(A,{to:"/personalCenter"},{default:t(()=>[e(i,null,{default:t(()=>[o(" 个人中心 ")]),_:1})]),_:1}),e(B,{link:"/userManager"},{default:t(({goto:s})=>[e(i,{onClick:s},{default:t(()=>[o(" 用户权限中心 ")]),_:2},1032,["onClick"])]),_:1}),e(S,{title:"您是否确定要清空本地缓存？","confirm-button-text":"清空",onConfirm:m},{reference:t(()=>[e(i,{type:"danger",plain:""},{default:t(()=>[o(" 清空本地缓存 ")]),_:1})]),_:1})])):(g(),b(h,{key:2,"mt-4":""},{default:t(()=>[e(i,{type:"primary",onClick:y},{default:t(()=>[o(" 登录 ")]),_:1}),e(i,{onClick:O},{default:t(()=>[o(" 注册 ")]),_:1}),e(S,{title:"您是否确定要清空本地缓存？","confirm-button-text":"清空",onConfirm:m},{reference:t(()=>[e(i,{type:"danger",plain:""},{default:t(()=>[o(" 清空本地缓存 ")]),_:1})]),_:1})]),_:1})),e(R),E("div",le,[E("div",ne,[e(c,{level:4},{default:t(()=>[o(" 全局设置 ")]),_:1}),e(c,{level:5},{default:t(()=>[o(" 外观 ")]),_:1}),e(h,null,{default:t(()=>[e(D,{"model-value":a(n).theme.mode,onChange:a(k).setTheme},{default:t(()=>[e(v,{value:"auto",label:"跟随系统"}),e(v,{value:"light",label:"浅色"}),e(v,{value:"dark",label:"深色"})]),_:1},8,["model-value","onChange"])]),_:1}),e(c,{level:5},{default:t(()=>[o(" 访问统计 ")]),_:1}),e(h,null,{default:t(()=>[e(f,{modelValue:a(n).showMost,"onUpdate:modelValue":r[0]||(r[0]=s=>a(n).showMost=s)},{default:t(()=>[o(" 最常访问 ")]),_:1},8,["modelValue"]),e(f,{modelValue:a(n).showRecent,"onUpdate:modelValue":r[1]||(r[1]=s=>a(n).showRecent=s)},{default:t(()=>[o(" 最近访问 ")]),_:1},8,["modelValue"])]),_:1}),e(c,{level:5},{default:t(()=>[o(" 其他设置 ")]),_:1}),e(h,null,{default:t(()=>[e(f,{modelValue:a(n).showSearch,"onUpdate:modelValue":r[2]||(r[2]=s=>a(n).showSearch=s)},{default:t(()=>[o(" 显示搜索 ")]),_:1},8,["modelValue"]),e(f,{modelValue:a(n).showType,"onUpdate:modelValue":r[3]||(r[3]=s=>a(n).showType=s)},{default:t(()=>[o(" 显示分类 ")]),_:1},8,["modelValue"]),e(f,{modelValue:a(n).openInNewTab,"onUpdate:modelValue":r[4]||(r[4]=s=>a(n).openInNewTab=s)},{default:t(()=>[o(" 新标签页打开工具 ")]),_:1},8,["modelValue"])]),_:1})]),a(d).logged?(g(),C("div",se,[e(c,{level:4},{default:t(()=>[o(" 应用设置 ")]),_:1}),e(c,{level:5},{default:t(()=>[o(" JSON 编辑器 ")]),_:1}),e(h,null,{default:t(()=>[e(f,{modelValue:a(_).modules.jsonEditor.syncCloud,"onUpdate:modelValue":r[5]||(r[5]=s=>a(_).modules.jsonEditor.syncCloud=s)},{default:t(()=>[o(" 从云端获取 ")]),_:1},8,["modelValue"])]),_:1})])):V("",!0)])],64)}}}),ke=K(re,[["__scopeId","data-v-328055a3"]]);export{ke as default};
