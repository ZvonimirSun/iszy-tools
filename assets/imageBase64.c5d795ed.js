import{d as h,r as k,j as c,f as C,o as u,J as p,a as s,w as o,b as n,an as b,c as i,$ as l,F as E,K as R,B as $,k as U,L as A,_ as D}from"./index.0076ae71.js";import{_ as N}from"./index.62f02984.js";import{_ as V}from"./index.1840c018.js";import"./index.16e8d45c.js";import"./useFlexGapSupport.c97836c2.js";import"./FormItem.64437d2d.js";import"./Col.4a27d762.js";import"./responsiveObserve.feea05c3.js";import"./toArray.212a2a2e.js";import"./get.82adb324.js";import"./hasIn.92743382.js";import"./toInteger.92a1bf9f.js";import"./toFinite.5bacd687.js";import"./_baseFindIndex.10ef1a58.js";import"./collapseMotion.6195688e.js";import"./EyeOutlined.37d7aead.js";import"./index.0f56182c.js";import"./Form.83fad866.js";import"./_arrayIncludesWith.91d14080.js";import"./useRefs.7d2cdf6b.js";const L={class:"wrapper"},T=["src"],j=h({__name:"imageBase64",setup(W){const e=k(""),r=c("$msg"),m=c("$axios"),d=C(()=>e.value&&(e.value.startsWith("http://")||e.value.startsWith("https://")));function v(t){const a=new FileReader;return a.onloadend=()=>{e.value=a.result},a.readAsDataURL(t),!1}async function f(){try{await window.navigator.clipboard.writeText(e.value),r.success("\u590D\u5236\u6210\u529F")}catch(t){r.error(t==null?void 0:t.message)}}async function g(){try{const t=await m.get(e.value,{responseType:"blob"}),a=new FileReader;a.onloadend=()=>{e.value=a.result},a.readAsDataURL(t.data)}catch(t){r.error(t==null?void 0:t.message)}}return(t,a)=>{const _=$,y=V,B=N,w=U,F=A;return u(),p("div",L,[s(B,null,{default:o(()=>[s(y,{"file-list":[],"show-upload-list":!1,accept:"image/*","before-upload":v},{default:o(()=>[s(_,{type:"primary"},{default:o(()=>[n(" \u70B9\u51FB\u4E0A\u4F20\u56FE\u7247 ")]),_:1})]),_:1}),b(d)?(u(),i(_,{key:0,onClick:g},{default:o(()=>[n(" \u8F6C\u6362\u4E3ABase64 ")]),_:1})):l("",!0),e.value?(u(),i(_,{key:1,onClick:f},{default:o(()=>[n(" \u590D\u5236\u5185\u5BB9 ")]),_:1})):l("",!0)]),_:1}),s(w,{value:e.value,"onUpdate:value":a[0]||(a[0]=x=>e.value=x),"allow-clear":"","auto-size":{minRows:5,maxRows:10},placeholder:"\u8BF7\u8F93\u5165 \u56FE\u7247\u5730\u5740 \u6216 Base64\u683C\u5F0F\u7684\u56FE\u7247"},null,8,["value"]),e.value?(u(),p(E,{key:0},[s(F,{level:4},{default:o(()=>[n(" \u9884\u89C8 ")]),_:1}),R("img",{class:"preview",src:e.value,alt:"preview"},null,8,T)],64)):l("",!0)])}}});const ue=D(j,[["__scopeId","data-v-30701a75"]]);export{ue as default};
