import{h as C,aR as S,_ as T,k as y,aS as j,u as N,R as z,T as F,E as B,r as p,s as L,x as o,v as b,I as U,j as q,l as G,a8 as O,F as W,q as v,w as _,y as J,aN as Q,H as D,b6 as X,z as Z,K as s,bm as $,L as h,N as d,Y as ee,a4 as x,aW as k,ax as I,aA as m,G as ae,a0 as te}from"./index-I2jAi2yK.js";import"./el-empty-CZcirWtJ.js";import{F as re,a as se,E as ne}from"./el-table-v2-DHNW66PL.js";/* empty css               */import{E as le}from"./el-popover-BtDglR05.js";import"./el-popper-CUBdiXAZ.js";import{E as w}from"./index-rXI8xRyp.js";import"./castArray-DuSNBg6W.js";import"./raf-DZDHlK65.js";import"./memoize-one.esm-BdPwpGay.js";import"./index-CoAr4j8p.js";import"./isUndefined-DCTLXrZ8.js";const R=Symbol("breadcrumbKey"),oe=C({separator:{type:String,default:"/"},separatorIcon:{type:S}}),ce=y({name:"ElBreadcrumb"}),ie=y({...ce,props:oe,setup(t){const e=t,{t:l}=j(),c=N("breadcrumb"),n=z();return U(R,e),F(()=>{const i=n.value.querySelectorAll(`.${c.e("item")}`);i.length&&i[i.length-1].setAttribute("aria-current","page")}),(i,g)=>(p(),B("div",{ref_key:"breadcrumb",ref:n,class:b(o(c).b()),"aria-label":o(l)("el.breadcrumb.label"),role:"navigation"},[L(i.$slots,"default")],10,["aria-label"]))}});var ue=T(ie,[["__file","breadcrumb.vue"]]);const de=C({to:{type:q([String,Object]),default:""},replace:Boolean}),me=y({name:"ElBreadcrumbItem"}),pe=y({...me,props:de,setup(t){const e=t,l=O(),c=G(R,void 0),n=N("breadcrumb"),i=l.appContext.config.globalProperties.$router,g=z(),A=()=>{!e.to||!i||(e.replace?i.replace(e.to):i.push(e.to))};return(E,r)=>{var a,u;return p(),B("span",{class:b(o(n).e("item"))},[W("span",{ref_key:"link",ref:g,class:b([o(n).e("inner"),o(n).is("link",!!E.to)]),role:"link",onClick:A},[L(E.$slots,"default")],2),(a=o(c))!=null&&a.separatorIcon?(p(),v(o(Q),{key:0,class:b(o(n).e("separator"))},{default:_(()=>[(p(),v(J(o(c).separatorIcon)))]),_:1},8,["class"])):(p(),B("span",{key:1,class:b(o(n).e("separator")),role:"presentation"},D((u=o(c))==null?void 0:u.separator),3))],2)}}});var V=T(pe,[["__file","breadcrumb-item.vue"]]);const fe=Z(ue,{BreadcrumbItem:V}),be=X(V);var f=function(t){return t[t.DEACTIVATED=0]="DEACTIVATED",t[t.ENABLED=1]="ENABLED",t[t.DISABLED=2]="DISABLED",t}(f||{});function _e(t){return[{key:"userId",dataKey:"userId",width:150,hidden:!0},{key:"userName",dataKey:"userName",title:"用户名",width:150,align:"center"},{key:"nickName",dataKey:"nickName",title:"昵称",width:150,align:"center"},{key:"email",dataKey:"email",title:"邮箱",width:150,align:"center"},{key:"roles",title:"角色",width:150,align:"center",cellRenderer:({rowData:e})=>{var c;const l=((c=e.roles)==null?void 0:c.map(n=>n.name).join(", "))||"";return s("span",null,[l])}},{key:"status",title:"状态",width:100,align:"center",cellRenderer:({rowData:e})=>{switch(e.status){case f.ENABLED:return s(w,{type:"success"},{default:()=>[d("正常")]});case f.DISABLED:return s(w,{type:"info"},{default:()=>[d("禁用")]});case f.DEACTIVATED:return s(w,{type:"info"},{default:()=>[d("待激活")]});default:return s(w,{type:"warning"},{default:()=>[d("未知")]})}}},{key:"createdAt",title:"创建时间",width:200,align:"center",cellRenderer:({rowData:e})=>s("span",null,[$(e.createdAt).format("YYYY-MM-DD HH:mm:ss")])},{key:"updatedAt",title:"更新时间",width:200,align:"center",cellRenderer:({rowData:e})=>s("span",null,[$(e.updatedAt).format("YYYY-MM-DD HH:mm:ss")])},{key:"operations",title:"操作",width:200,fixed:re.RIGHT,cellRenderer:({rowData:e})=>s(ee,null,[s(h,{size:"small",plain:!0,onClick:()=>t(e,"edit")},{default:()=>[d("修改")]}),e.status===f.DEACTIVATED||e.status===f.DISABLED?s(h,{size:"small",plain:!0,onClick:()=>t(e,"activate")},{default:()=>[d("启用")]}):s(h,{size:"small",plain:!0,onClick:()=>t(e,"disable")},{default:()=>[d("禁用")]}),s(le,{title:"确定要删除吗？",onConfirm:()=>t(e,"delete")},{reference:()=>s(h,{size:"small",plain:!0,type:"danger"},{default:()=>[d("删除")]})})])}]}const ye={"h-full":"","w-full":"",flex:"","flex-col":"","gap-4":"","pa-4":""},ge=y({__name:"userManager",setup(t){const e=x([]),l=x({index:1,size:10}),c=_e(i);F(()=>{n(1,l.size)});async function n(r,a){try{const u=(await k.get(`${I.apiBaseUrl}/user/list`,{params:{pageIndex:r,pageSize:a}})).data;if(u.success)e.splice(0,e.length,...u.data);else throw new Error(u.message)}catch(u){m.error(u.message)}}function i(r,a){switch(a){case"edit":break;case"disable":g(r);break;case"activate":A(r);break;case"delete":E(r);break}}async function g(r){try{const a=(await k.put(`${I.apiBaseUrl}/user/ban`,null,{params:{id:r.userId}})).data;if(a.success)m.success(a.message),await n(l.index,l.size);else throw new Error(a.message)}catch(a){m.error(a.message)}}async function A(r){try{const a=(await k.put(`${I.apiBaseUrl}/user/activate`,null,{params:{id:r.userId}})).data;if(a.success)m.success(a.message),await n(l.index,l.size);else throw new Error(a.message)}catch(a){m.error(a.message)}}async function E(r){try{const a=(await k.delete(`${I.apiBaseUrl}/user/${r.userId}`)).data;if(a.success)m.success(a.message),await n(l.index,l.size);else throw new Error(a.message)}catch(a){m.error(a.message)}}return(r,a)=>{const u=be,Y=fe,M=se,K=ne;return p(),B("div",ye,[r.$route.meta.parentInfo?(p(),v(Y,{key:0},{default:_(()=>[s(u,{to:r.$route.meta.parentInfo.link},{default:_(()=>[d(D(r.$route.meta.parentInfo.name),1)]),_:1},8,["to"]),s(u,null,{default:_(()=>[d(D(r.$route.name),1)]),_:1})]),_:1})):ae("",!0),s(K,{"flex-1":""},{default:_(({width:P,height:H})=>[s(M,{columns:o(c),data:o(e),width:P,height:H,fixed:""},null,8,["columns","data","width","height"])]),_:1})])}}}),Te=te(ge,[["__scopeId","data-v-6e8cfbee"]]);export{Te as default};
