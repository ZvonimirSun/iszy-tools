var e=Object.defineProperty,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,n=(t,o,a)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[o]=a,i=(e,i)=>{for(var r in i||(i={}))o.call(i,r)&&n(e,r,i[r]);if(t)for(var r of t(i))a.call(i,r)&&n(e,r,i[r]);return e},r="undefined"!=typeof require?require:e=>{throw new Error('Dynamic require of "'+e+'" is not supported')};import{D as d,$ as s,ad as l,ae as c,af as h,ag as f,ah as p,ai as m,aj as g,ak as u,s as v,al as j,am as E,an as y,ao as b,p as w,a as k,ap as C,b as L,c as R,w as P,o as x,f as S,e as D,K as O,h as _}from"./vendor.6f9f256f.js";import{_ as N}from"./container.949198bc.js";import{J as q}from"./jsoneditor.min.82982af9.js";import{c as B}from"./createFile.19e2b3ed.js";/* empty css              *//* empty css              */var J=".editorPanel[data-v-1a98fede] {\n  display: flex;\n  height: 100%;\n}\n@media (max-width: 1024px) {\n.editorPanel[data-v-1a98fede] {\n    height: calc(100% - 3.2rem - 1.2rem);\n}\n}\n.editorPanel .controller[data-v-1a98fede] {\n  height: 100%;\n  width: 10rem;\n  text-align: center;\n}\n.editorPanel .controller .ant-space[data-v-1a98fede] {\n  margin-top: 10rem;\n  width: 80%;\n}\n.editorPanel .controller .ant-space[data-v-1a98fede] .ant-btn {\n  display: flex;\n  align-items: center;\n}\n.editorPanel .controller .ant-space[data-v-1a98fede] .ant-btn .i-icon {\n  font-size: 1.8rem;\n}\n.editorPanel .controller .ant-space[data-v-1a98fede] .ant-btn .i-icon + span, .editorPanel .controller .ant-space[data-v-1a98fede] .ant-btn span + .i-icon {\n  margin-left: 0;\n}\n.editorPanel[data-v-1a98fede] .jsonEditor {\n  height: 100%;\n  width: calc(50% - 5rem);\n}\n.editorPanel[data-v-1a98fede] .jsonEditor .ace-jsoneditor *, .editorPanel[data-v-1a98fede] .jsonEditor textarea.jsoneditor-text *, .editorPanel[data-v-1a98fede] .jsonEditor code, .editorPanel[data-v-1a98fede] .jsonEditor pre {\n  font-family: JetBrains Mono, monospace;\n}\n@media (max-width: 1024px) {\n.editorPanel[data-v-1a98fede] .jsonEditor.jsonEditorLeft {\n    width: 100%;\n}\n}\n.editorPanel[data-v-1a98fede] .jsonEditor.jsonEditorLeft .differentElement {\n  background-color: pink;\n}\n.editorPanel[data-v-1a98fede] .jsonEditor.jsonEditorLeft .differentElement .jsoneditor-field, .editorPanel[data-v-1a98fede] .jsonEditor.jsonEditorLeft .differentElement .jsoneditor-value {\n  color: red;\n}\n.editorPanel[data-v-1a98fede] .jsonEditor.jsonEditorRight .differentElement {\n  background-color: #acee61;\n}\n.editorPanel[data-v-1a98fede] .jsonEditor.jsonEditorRight .differentElement .jsoneditor-field, .editorPanel[data-v-1a98fede] .jsonEditor.jsonEditorRight .differentElement .jsoneditor-value {\n  color: red;\n}\n@media (max-width: 1024px) {\n.noShowMobile[data-v-1a98fede] {\n    display: none !important;\n}\n}\n@media (min-width: 1024px) {\n.showMobile[data-v-1a98fede] {\n    display: none !important;\n}\n}\n@media (max-width: 1024px) {\n.ant-space[data-v-1a98fede] {\n    margin-top: 1.2rem;\n}\n}\n[data-v-1a98fede] .jsoneditor-poweredBy {\n  display: none;\n}";const{mapGetters:M,mapActions:U}=d("cache"),A={name:"JsonEditor",components:{Container:N,Button:s,Space:l,Checkbox:c,Right:h,Left:f,CodeDownload:p,Save:m,Clear:g},data:()=>({editorLeft:null,editorRight:null,codeLeft:{Array:[1,2,3],Boolean:!0,Null:null,Number:123,Object:{a:"b",c:"d"},String:"Hello World"},codeRight:{Array:[1,2,3],Boolean:!0,Null:null,Number:123,Object:{a:"b",c:"d"},String:"Hello World"},autoSave:!1,diff:!0}),computed:i({},M(["getData"])),mounted(){this.init()},methods:i({init(){this.getData("jsonEditor")&&(this.getData("jsonEditor").left&&(this.codeLeft=this.getData("jsonEditor").left),this.getData("jsonEditor").right&&(this.codeRight=this.getData("jsonEditor").right)),this.editorLeft=u(new q(this.$refs.jsonEditorLeft,{mode:"code",modes:["code","tree"],onClassName:this.onClassName,onChangeText:e=>{try{this.codeLeft=JSON.parse(e),this.editorRight.refresh(),this.autoSave&&this.save()}catch(t){}},autocomplete:{applyTo:["value"],filter:"contain",trigger:"focus",getOptions:(e,t,o,a)=>new Promise(((e,t)=>{const o=this.extractUniqueWords(a.get());o.length>0?e(o):t(new Error("noOptions"))}))}},this.codeLeft)),this.editorRight=u(new q(this.$refs.jsonEditorRight,{mode:"tree",modes:["code","tree"],onClassName:this.onClassName,onChangeText:e=>{try{this.codeRight=JSON.parse(e),this.editorLeft.refresh(),this.autoSave&&this.save()}catch(t){}},autocomplete:{applyTo:["value"],filter:"contain",trigger:"focus",getOptions:(e,t,o,a)=>new Promise(((e,t)=>{const o=this.extractUniqueWords(a.get());o.length>0?e(o):t(new Error("noOptions"))}))}},this.codeRight))},copyRight(){this.codeRight=v(this.codeLeft),this.editorRight.update(this.codeRight),this.editorLeft.refresh()},copyLeft(){this.codeLeft=v(this.codeRight),this.editorLeft.update(this.codeLeft),this.editorRight.refresh()},async save(){try{await this.setData({key:"jsonEditor",val:{left:this.editorLeft.get(),right:this.editorRight.get()}})}catch(e){this.$msg.warn("JSON存在错误，保存失败")}},async clear(){await this.setData({key:"jsonEditor",val:void 0}),this.$msg.success("清除成功")},download(){B(this.editorLeft.getText(),"left.json")},changeDiff(){this.editorLeft.refresh(),this.editorRight.refresh()},changeAutoSave(){this.autoSave&&this.save()},onClassName({path:e}){const t=j(this.codeLeft,e),o=j(this.codeRight,e);return this.diff?E(t,o)?"":"differentElement":""},extractUniqueWords:e=>y(b(e,(function(e,t){return C(e)?[t]:[t,String(e)]})))},U(["setData"])),beforeUnmount(){this.editorLeft&&this.editorLeft.destroy(),this.editorRight&&this.editorRight.destroy()}};w("data-v-1a98fede");const T={class:"editorPanel"},W={ref:"jsonEditorLeft",class:"jsonEditor jsonEditorLeft"},$={class:"controller noShowMobile"},H=_(" 复制 "),I=_(" 复制 "),z=_(" 保存 "),F=_("自动"),G=_(" 清除 "),K=_(" 下载 "),Q=_("Diff"),V={ref:"jsonEditorRight",class:"jsonEditor jsonEditorRight noShowMobile"},X=_(" 下载 ");function Y(e,t,o,a,n,i){const r=L("Right"),d=L("Button"),s=L("Left"),l=L("Save"),c=L("Checkbox"),h=L("Clear"),f=L("CodeDownload"),p=L("Space"),m=L("container");return x(),R(m,null,{default:P((()=>[S("div",T,[S("div",W,null,512),S("div",$,[D(p,{direction:"vertical"},{default:P((()=>[D(d,{type:"primary",onClick:i.copyRight,block:""},{default:P((()=>[D(r,{theme:"outline"}),H])),_:1},8,["onClick"]),D(d,{type:"primary",onClick:i.copyLeft,block:""},{default:P((()=>[D(s,{theme:"outline"}),I])),_:1},8,["onClick"]),D(d,{type:"primary",onClick:i.save,block:""},{default:P((()=>[D(l,{theme:"outline"}),z])),_:1},8,["onClick"]),D(c,{checked:e.autoSave,"onUpdate:checked":t[0]||(t[0]=t=>e.autoSave=t),onChange:i.changeAutoSave},{default:P((()=>[F])),_:1},8,["checked","onChange"]),e.getData("jsonEditor")?(x(),R(d,{key:0,type:"primary",onClick:i.clear,block:""},{default:P((()=>[D(h,{theme:"outline"}),G])),_:1},8,["onClick"])):O("",!0),D(d,{type:"primary",onClick:i.download,block:""},{default:P((()=>[D(f,{theme:"outline"}),K])),_:1},8,["onClick"]),D(c,{checked:e.diff,"onUpdate:checked":t[1]||(t[1]=t=>e.diff=t),onChange:i.changeDiff},{default:P((()=>[Q])),_:1},8,["checked","onChange"])])),_:1})]),S("div",V,null,512)]),D(p,{class:"showMobile",align:"center"},{default:P((()=>[D(d,{type:"primary",onClick:i.download},{default:P((()=>[X])),_:1},8,["onClick"])])),_:1})])),_:1})}k(),A.render=Y,A.__scopeId="data-v-1a98fede";export{A as default};
