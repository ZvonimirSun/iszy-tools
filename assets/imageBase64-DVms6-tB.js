import{j as V,R as d,k as b,o as i,F as _,K as r,w as l,L as c,m as o,l as f,H as p,W as C,X as U,G as N,q as T,aC as m,aW as W,N as F,$ as L,a2 as z}from"./index-CQU3zzuo.js";import{E as I}from"./el-space-BEOoLCa0.js";import{E as P}from"./el-upload-DnaMu5qY.js";import"./el-progress-AbUAPnsz.js";import{T as S}from"./Router-DyhZE3F6.js";const $={class:"wrapper"},A=["src"],D=V({__name:"imageBase64",setup(H){const e=d(""),n=d(),s=d({width:"",height:""}),h=b(()=>e.value&&(e.value.startsWith("http://")||e.value.startsWith("https://")));function w(a){const t=new FileReader;return t.onloadend=()=>{e.value=t.result},t.readAsDataURL(a),!1}async function v(){try{await window.navigator.clipboard.writeText(e.value),m.success("复制成功")}catch(a){m.error(a==null?void 0:a.message)}}async function g(){try{const a=await W.get(e.value,{responseType:"blob"}),t=new FileReader;t.onloadend=()=>{e.value=t.result},t.readAsDataURL(a.data)}catch(a){m.error(a==null?void 0:a.message)}}function y(){n.value&&(s.value.height=`${n.value.naturalHeight}px`,s.value.width=`${n.value.naturalWidth}px`)}return(a,t)=>{const u=F,x=P,k=I,B=L,E=S;return i(),_("div",$,[r(k,null,{default:l(()=>[r(x,{"file-list":[],"show-file-list":!1,accept:"image/*","before-upload":w},{default:l(()=>[r(u,{type:"primary"},{default:l(()=>[c(" 点击上传图片 ")]),_:1})]),_:1}),o(h)?(i(),f(u,{key:0,onClick:g},{default:l(()=>[c(" 转换为Base64 ")]),_:1})):p("",!0),o(e)?(i(),f(u,{key:1,onClick:v},{default:l(()=>[c(" 复制内容 ")]),_:1})):p("",!0)]),_:1}),r(B,{modelValue:o(e),"onUpdate:modelValue":t[0]||(t[0]=R=>C(e)?e.value=R:null),type:"textarea","allow-clear":"",autosize:{minRows:5,maxRows:10},placeholder:"请输入 图片地址 或 Base64格式的图片"},null,8,["modelValue"]),o(e)?(i(),_(U,{key:0},[r(E,{level:4},{default:l(()=>[c(" 预览 ")]),_:1}),N("img",{ref_key:"imgPreview",ref:n,class:"preview",src:o(e),alt:"preview",style:T({width:o(s).width?o(s).width:"",height:o(s).height?o(s).height:""}),onLoad:y},null,44,A)],64)):p("",!0)])}}}),X=z(D,[["__scopeId","data-v-a510d9bd"]]);export{X as default};
