import{d as D,r as F,H as w,ag as h,o as x,c as A,w as v,a as B,k as b,c2 as o,V as S,W as I,M as n,b as E,_ as T}from"./index.751c57b2.js";import{S as U}from"./index.5e92f067.js";import{U as k}from"./index.c779b07e.js";import"./index.c8c28096.js";import{u as M}from"./index.f7ae730e.js";import{u as C}from"./imgHosting.d6f61063.js";import"./Form.95b3fdd4.js";import"./Col.087b91d5.js";import"./responsiveObserve.f2ed908d.js";import"./useFlexGapSupport.55f67b56.js";import"./toArray.53f83abf.js";import"./get.d6a3c075.js";import"./_baseGet.204114c2.js";import"./toString.8e602380.js";import"./_arrayMap.dc1f124f.js";import"./_flatRest.c821f587.js";import"./toInteger.8aaa5735.js";import"./toFinite.48def093.js";import"./_arrayIncludesWith.15e56e3a.js";import"./collapseMotion.3ce2651b.js";import"./EyeOutlined.0dd856ea.js";import"./index.b0dda827.js";import"./useRefs.a3d92d4a.js";import"./v4.0e237c76.js";const m=u=>(S("data-v-f7230d96"),u=u(),I(),u),V=m(()=>n("p",{class:"ant-upload-drag-icon"},[n("span",{class:"i-icon-park-upload-one"})],-1)),j=m(()=>n("p",{class:"ant-upload-text"},[E(" \u76F4\u63A5\u7C98\u8D34\u56FE\u7247\u6216\u62D6\u62FD\u56FE\u7247\u5230\u8FD9\u91CC\u4E0A\u4F20"),n("br"),E("\u6216\u8005\u76F4\u63A5\u70B9\u51FB\u9009\u62E9\u6587\u4EF6\u4E0A\u4F20 ")],-1)),H=m(()=>n("p",{class:"ant-upload-hint"}," \u6682\u65F6\u4EC5\u652F\u6301\u5355\u6587\u4EF6\u4E0A\u4F20\u3002 ",-1)),L=D({__name:"upload",props:{activeKey:{type:String,default:""}},setup(u){const y=u,p=F(!1),a=F(),l=C(),d=l.config,r=l.uploader,c=l.commonConfig;w(()=>{document.addEventListener("paste",g)}),h(()=>{document.removeEventListener("paste",g)});async function f({file:s}={}){let t=s;if(p.value=!0,r&&d(r)){if(c.renameTimeStamp){const e=t.name||"";t=new File([t],(new Date().getTime()+e.substring(e.lastIndexOf("."))).toLowerCase(),{type:t.type,lastModified:t.lastModified})}try{const e=await M[r].handle(d(r),t);if(C().addImage(e),c.copyUrlAfterUpload)try{c.customCopyContent?await navigator.clipboard.writeText(c.customCopyContent.replace(/\$url/g,e.url)):await navigator.clipboard.writeText(e.url),o.success("\u4E0A\u4F20\u6210\u529F\uFF0C\u5730\u5740\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F")}catch{o.error("\u4E0A\u4F20\u6210\u529F\uFF0C\u4F46\u5730\u5740\u590D\u5236\u5931\u8D25")}else o.success("\u4E0A\u4F20\u6210\u529F")}catch(e){console.log(e),o.error("\u4E0A\u4F20\u5931\u8D25")}}else o.warn("\u8BF7\u5148\u8FDB\u884C\u8BBE\u7F6E");p.value=!1}function _(){o.warning("\u4E0D\u652F\u6301\u7684\u6587\u4EF6\u7C7B\u578B\uFF01")}function g(s){if(y.activeKey==="home"&&!p.value&&!a.value){a.value=setTimeout(()=>{a.value=void 0},500);const t=s.clipboardData&&s.clipboardData.items;let e;if(t&&t.length)for(const i of t)i.type.indexOf("image")!==-1&&(e=i.getAsFile());e?f({file:e}):(_(),clearTimeout(a.value),a.value=void 0)}}return(s,t)=>{const e=k,i=U;return x(),A(i,{spinning:b(p)},{default:v(()=>[B(e,{"file-list":[],accept:"image/bmp,image/gif,image/jpeg,image/png,image/webp","show-upload-list":!1,"custom-request":f,onReject:_},{default:v(()=>[V,j,H]),_:1})]),_:1},8,["spinning"])}}});const re=T(L,[["__scopeId","data-v-f7230d96"]]);export{re as default};
