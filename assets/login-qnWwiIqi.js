import{j as q,k as x,B as f,a$ as B,aK as E,q as I,l as z,o as S,c as C,a as u,b as a,az as t,y as r,bA as y,W as K,bB as U,a9 as g,aA as A,b2 as F,aB as L,b1 as M,aH as Q,aI as R,a3 as j}from"./vendor-vjIVktzB.js";import{u as H}from"./common-uzkYpcZ_.js";import"./ant-design-vue-oWwqdbYZ.js";import"./vanilla-jsoneditor--Y_UqYYL.js";const v=n=>(Q("data-v-c49a0e85"),n=n(),R(),n),O={class:"login-container"},P={class:"main"},T=v(()=>u("span",{class:"i-icon-park-outline-user"},null,-1)),W=v(()=>u("span",{class:"i-icon-park-outline-lock"},null,-1)),$={class:"btn-wrapper"},D=q({__name:"login",setup(n){const o=x({userName:"",password:""}),i=f(),c=f({}),p=f(!1),h=B(),N=E(),w=H();I(N,function(s){const e=s.query;e&&(typeof e.redirect=="string"&&(i.value=e.redirect),c.value=V(e))},{immediate:!0}),z(()=>{w.isLogged&&h.push({path:i.value||"/",query:c.value})});async function d(){if(!navigator.onLine){g.warning("已离线！");return}if(o.userName!=null&&o.password!=null){p.value=!0;try{await w.login({userName:o.userName,password:o.password}),g.success("登录成功！"),h.push({path:i.value||"/",query:c.value})}catch(s){s instanceof Error&&g.error(s.message)}p.value=!1}}function V(s){const{redirect:e,...l}=s;return l}return(s,e)=>{const l=A,m=F,b=L,k=M;return S(),C("div",O,[u("div",P,[a(k,U({layout:"horizontal",model:r(o)},{wrapperCol:{span:24}}),{default:t(()=>[a(m,{required:""},{default:t(()=>[a(l,{modelValue:r(o).userName,"onUpdate:modelValue":e[0]||(e[0]=_=>r(o).userName=_),placeholder:"账户",size:"large",onKeypress:y(d,["enter"])},{prefix:t(()=>[T]),_:1},8,["modelValue"])]),_:1}),a(m,{required:""},{default:t(()=>[a(l,{modelValue:r(o).password,"onUpdate:modelValue":e[1]||(e[1]=_=>r(o).password=_),type:"password",placeholder:"密码",size:"large","show-password":"",onKeypress:y(d,["enter"])},{prefix:t(()=>[W]),_:1},8,["modelValue"])]),_:1}),a(m,null,{default:t(()=>[u("div",$,[a(b,{type:"primary",block:"",size:"large",loading:r(p),onClick:d},{default:t(()=>[K(" 登录 ")]),_:1},8,["loading"])])]),_:1})]),_:1},16,["model"])])])}}}),Z=j(D,[["__scopeId","data-v-c49a0e85"]]);export{Z as default};
