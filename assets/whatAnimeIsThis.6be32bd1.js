import{b as n,i as U,H as fe,L as Z,aC as me,cj as ge,ck as ve,Q as b,F as J,P as L,e as se,f as Ee,c7 as pe,N as ce,O as Qe,J as he,a9 as ne,g as ye,U as be,aJ as Ce,ay as Be,I as Se,_ as Ie,ap as _e,B as ke,r as Q,o as I,n as _,w as s,p as oe,q as Ne,S as we,D as Je,s as ae,d as f,z as S}from"./index.fd3c34f7.js";/* empty css               */import{U as xe}from"./index.a4cf11d3.js";import"./index.c7591175.js";/* empty css               *//* empty css               */import{D as Ue}from"./index.21c04a9a.js";import{I as De}from"./index.a4b9241a.js";import{R as le,r as re}from"./responsiveObserve.3bea7b2a.js";import"./Form.970fc2ed.js";import"./Col.165062d6.js";import"./useFlexGapSupport.5d23bcb4.js";import"./toArray.f0b52048.js";import"./get.cd8ee735.js";import"./hasIn.d219cb93.js";import"./_arrayIncludesWith.40afec22.js";import"./toFinite.5a5e99db.js";import"./collapseMotion.69c5a13a.js";import"./debounce.f0dc985b.js";import"./EyeOutlined.d40575ed.js";import"./useMergedState.fcf9d1e6.js";import"./index.0bcab8cb.js";import"./useRefs.aacf5ee1.js";import"./css.b1edd3c8.js";function T(e){return e!=null}var Re=function(t){var a=t.itemPrefixCls,o=t.component,r=t.span,l=t.labelStyle,c=t.contentStyle,h=t.bordered,d=t.label,u=t.content,i=t.colon,m=o;if(h){var v;return n(m,{class:[(v={},U(v,"".concat(a,"-item-label"),T(d)),U(v,"".concat(a,"-item-content"),T(u)),v)],colSpan:r},{default:function(){return[T(d)&&n("span",{style:l},[d]),T(u)&&n("span",{style:c},[u])]}})}return n(m,{class:["".concat(a,"-item")],colSpan:r},{default:function(){return[n("div",{class:"".concat(a,"-item-container")},[d&&n("span",{class:["".concat(a,"-item-label"),U({},"".concat(a,"-item-no-colon"),!i)],style:l},[d]),u&&n("span",{class:"".concat(a,"-item-content"),style:c},[u])])]}})},H=Re,je=function(t){var a=function(v,g,E){var p=g.colon,k=g.prefixCls,A=g.bordered,C=E.component,K=E.type,z=E.showLabel,P=E.showContent,N=E.labelStyle,D=E.contentStyle;return v.map(function(y,R){var w,j,B=y.props||{},G=B.prefixCls,M=G===void 0?k:G,O=B.span,X=O===void 0?1:O,W=B.labelStyle,V=B.contentStyle,$=B.label,ee=$===void 0?(j=(w=y.children)===null||w===void 0?void 0:w.label)===null||j===void 0?void 0:j.call(w):$,te=me(y),F=ge(y),Y=ve(y),q=y.key;return typeof C=="string"?n(H,{key:"".concat(K,"-").concat(String(q)||R),class:F,style:Y,labelStyle:b(b({},N.value),W),contentStyle:b(b({},D.value),V),span:X,colon:p,component:C,itemPrefixCls:M,bordered:A,label:z?ee:null,content:P?te:null},null):[n(H,{key:"label-".concat(String(q)||R),class:F,style:b(b(b({},N.value),Y),W),span:1,colon:p,component:C[0],itemPrefixCls:M,bordered:A,label:ee},null),n(H,{key:"content-".concat(String(q)||R),class:F,style:b(b(b({},D.value),Y),V),span:X*2-1,component:C[1],itemPrefixCls:M,bordered:A,content:te},null)]})},o=t.prefixCls,r=t.vertical,l=t.row,c=t.index,h=t.bordered,d=fe(Ae,{labelStyle:Z({}),contentStyle:Z({})}),u=d.labelStyle,i=d.contentStyle;return r?n(J,null,[n("tr",{key:"label-".concat(c),class:"".concat(o,"-row")},[a(l,t,{component:"th",type:"label",showLabel:!0,labelStyle:u,contentStyle:i})]),n("tr",{key:"content-".concat(c),class:"".concat(o,"-row")},[a(l,t,{component:"td",type:"content",showContent:!0,labelStyle:u,contentStyle:i})])]):n("tr",{key:c,class:"".concat(o,"-row")},[a(l,t,{component:h?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0,labelStyle:u,contentStyle:i})])},Ke=je;L.any;var Pe=function(){return{prefixCls:String,label:L.any,labelStyle:{type:Object,default:void 0},contentStyle:{type:Object,default:void 0},span:{type:Number,default:1}}},Te=se({name:"ADescriptionsItem",props:Pe(),slots:["label"],setup:function(t,a){var o=a.slots;return function(){var r;return(r=o.default)===null||r===void 0?void 0:r.call(o)}}}),de={xxxl:3,xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function Le(e,t){if(typeof e=="number")return e;if(ce(e)==="object")for(var a=0;a<re.length;a++){var o=re[a];if(t[o]&&e[o]!==void 0)return e[o]||de[o]}return 3}function ie(e,t,a){var o=e;return(t===void 0||t>a)&&(o=Ce(e,{span:a}),Be(t===void 0,"Descriptions","Sum of column `span` in a line not match `column` of Descriptions.")),o}function ze(e,t){var a=be(e),o=[],r=[],l=t;return a.forEach(function(c,h){var d,u=(d=c.props)===null||d===void 0?void 0:d.span,i=u||1;if(h===a.length-1){r.push(ie(c,u,l)),o.push(r);return}i<l?(l-=i,r.push(c)):(r.push(ie(c,i,l)),o.push(r),l=t,r=[])}),o}var Me=function(){return{prefixCls:String,bordered:{type:Boolean,default:void 0},size:{type:String,default:"default"},title:L.any,extra:L.any,column:{type:[Number,Object],default:function(){return de}},layout:String,colon:{type:Boolean,default:void 0},labelStyle:{type:Object,default:void 0},contentStyle:{type:Object,default:void 0}}},Ae=Symbol("descriptionsContext"),x=se({name:"ADescriptions",props:Me(),slots:["title","extra"],Item:Te,setup:function(t,a){var o=a.slots,r=Ee("descriptions",t),l=r.prefixCls,c=r.direction,h,d=Z({});pe(function(){h=le.subscribe(function(i){ce(t.column)==="object"&&(d.value=i)})}),Qe(function(){le.unsubscribe(h)}),he(Ae,{labelStyle:ne(t,"labelStyle"),contentStyle:ne(t,"contentStyle")});var u=ye(function(){return Le(t.column,d.value)});return function(){var i,m,v,g,E=t.size,p=t.bordered,k=p===void 0?!1:p,A=t.layout,C=A===void 0?"horizontal":A,K=t.colon,z=K===void 0?!0:K,P=t.title,N=P===void 0?(m=o.title)===null||m===void 0?void 0:m.call(o):P,D=t.extra,y=D===void 0?(v=o.extra)===null||v===void 0?void 0:v.call(o):D,R=(g=o.default)===null||g===void 0?void 0:g.call(o),w=ze(R,u.value);return n("div",{class:[l.value,(i={},U(i,"".concat(l.value,"-").concat(E),E!=="default"),U(i,"".concat(l.value,"-bordered"),!!k),U(i,"".concat(l.value,"-rtl"),c.value==="rtl"),i)]},[(N||y)&&n("div",{class:"".concat(l.value,"-header")},[N&&n("div",{class:"".concat(l.value,"-title")},[N]),y&&n("div",{class:"".concat(l.value,"-extra")},[y])]),n("div",{class:"".concat(l.value,"-view")},[n("table",null,[n("tbody",null,[w.map(function(j,B){return n(Ke,{key:B,index:B,colon:z,prefixCls:l.value,vertical:C==="vertical",bordered:k,row:j},null)})])])])])}}});x.install=function(e){return e.component(x.name,x),e.component(x.Item.name,x.Item),e};var ue=x,Fe=Se("loading",!0,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M4 24C4 35.0457 12.9543 44 24 44V44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M36 24C36 17.3726 30.6274 12 24 12C17.3726 12 12 17.3726 12 24C12 30.6274 17.3726 36 24 36V36",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])});const{Item:Ye}=ue,{Title:qe,Paragraph:He,Text:Ze}=we,Ge={name:"WhatAnimeIsThis",components:{Input:_e,Upload:xe,Title:qe,Button:ke,Divider:Ue,Image:De,Paragraph:He,Text:Ze,Descriptions:ue,Item:Ye,Loading:Fe},data:()=>({file:"",img:void 0,fileName:"",id:"",quota:0,quotaUsed:0,loading:!1,result:[]}),mounted(){this.checkTimes()},methods:{beforeUpload(e){if(e.size/1024/1024>=10)return this.$msg.error("\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC710MB!"),!1;const t=new FileReader;return t.onload=()=>{this.img=e,this.fileName=e.name,this.file=t.result},t.readAsDataURL(e),!1},async start(){try{this.loading=!0;const e=new FormData;e.append("image",this.img);const t=await this.$axios.post("https://api.trace.moe/search?anilistInfo",e,{headers:{"Content-Type":"multipart/form-data"}});this.loading=!1,await this.checkTimes(),t.data.error||(this.result=t.data.result||[])}catch{this.loading=!1,this.$msg.error("\u8BF7\u6C42\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u8FDE\u63A5")}},async checkTimes(){try{const e=await this.$axios.get("https://api.trace.moe/me");this.id=e.data.id||"",this.quotaUsed=e.data.quotaUsed||0,this.quota=e.data.quota||0}catch{this.$msg.error("\u8BF7\u6C42\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u8FDE\u63A5")}},secondToDate(e){const t=Math.floor(e/3600),a=Math.floor(e/60%60),o=(e%60).toFixed(2);return t+":"+a+":"+o}}},Oe=f(" \u8BF7\u9009\u62E9\u8981\u8BC6\u522B\u52A8\u6F2B\u622A\u56FE "),Xe={key:0},We=f("\u8BC6\u522B\u4E2D"),Ve={key:1},$e=f(" \u4F7F\u7528 trace.moe API\uFF0C\u6709\u4F7F\u7528\u6B21\u6570\u9650\u5236\u3002\u7528\u6237ID\uFF1A "),et=f(" \uFF0C\u6BCF\u6708\u6B21\u6570\u5269\u4F59\uFF1A "),tt=f(" \uFF0C\u5DF2\u4F7F\u7528\u6B21\u6570\uFF1A "),nt=f(" \u9884\u89C8 "),ot=f(" \u7ED3\u679C "),at=f(" ~ "),lt=["src","poster"];function rt(e,t,a,o,r,l){const c=Q("Title"),h=Q("Loading"),d=Q("Button"),u=Q("Input"),i=Q("Upload"),m=Q("Text"),v=Q("Paragraph"),g=Q("Divider"),E=Q("Image"),p=Q("Item"),k=Q("Descriptions");return I(),_(J,null,[n(c,{level:3},{default:s(()=>[Oe]),_:1}),n(i,{"file-list":[],"show-upload-list":!1,accept:"image/*","before-upload":l.beforeUpload},{default:s(()=>[n(u,{readonly:"",placeholder:"\u70B9\u51FB\u8FD9\u91CC\u4E0A\u4F20\u56FE\u7247",value:e.fileName},{addonAfter:s(()=>[n(d,{block:"",disabled:!e.file||e.quota===0||e.quota-e.quotaUsed<=0,onClick:Je(l.start,["stop"])},{default:s(()=>[e.loading?(I(),_("span",Xe,[n(h,{theme:"outline"}),We])):(I(),_("span",Ve,"\u5F00\u59CB\u8BC6\u522B"))]),_:1},8,["disabled","onClick"])]),_:1},8,["value"])]),_:1},8,["before-upload"]),n(v,null,{default:s(()=>[ae("blockquote",null,[$e,n(m,{code:""},{default:s(()=>[f(S(e.id),1)]),_:1}),et,n(m,{code:""},{default:s(()=>[f(S(e.quota),1)]),_:1}),tt,n(m,{code:""},{default:s(()=>[f(S(e.quotaUsed),1)]),_:1})])]),_:1}),e.file?(I(),_(J,{key:0},[n(g),n(c,{level:3},{default:s(()=>[nt]),_:1}),n(E,{style:{"max-width":"100%"},src:e.file,fallback:"data:image/png;base64,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"},null,8,["src"])],64)):oe("",!0),e.result.length>0?(I(),_(J,{key:1},[n(g),n(c,{level:3},{default:s(()=>[ot]),_:1}),(I(!0),_(J,null,Ne(e.result,(A,C)=>(I(),_(J,{key:C},[n(g),n(k,{title:A.anilist.title.native+(A.episode?" EP#"+A.episode:""),bordered:"",size:"small",layout:"vertical"},{default:s(()=>[n(p,{label:"\u7F57\u9A6C\u97F3"},{default:s(()=>[f(S(A.anilist.title.romaji),1)]),_:2},1024),n(p,{label:"\u6587\u4EF6\u540D"},{default:s(()=>[f(S(A.filename),1)]),_:2},1024),n(p,{label:"\u76F8\u4F3C\u5EA6"},{default:s(()=>[f(S((A.similarity*100).toFixed(2)+"%"),1)]),_:2},1024),n(p,{label:"\u5339\u914D\u4F4D\u7F6E"},{default:s(()=>[n(m,{code:""},{default:s(()=>[f(S(l.secondToDate(A.from)),1)]),_:2},1024),at,n(m,{code:""},{default:s(()=>[f(S(l.secondToDate(A.to)),1)]),_:2},1024)]),_:2},1024),n(p,{label:"\u9884\u89C8",span:3},{default:s(()=>[ae("video",{controls:"",style:{"max-width":"100%"},src:A.video,poster:A.image},null,8,lt)]),_:2},1024)]),_:2},1032,["title"])],64))),128))],64)):oe("",!0)],64)}var Jt=Ie(Ge,[["render",rt],["__scopeId","data-v-5355d7c4"]]);export{Jt as default};
