import{a as y,ah as I,U as d,c0 as M,c as P,X as c,t as C,C as l,y as t,w as i,L as $,o as F,Q as k}from"./index-BrEFJmNm.js";import{a as B,E as D}from"./el-form-item-BDeP41V9.js";import{_ as R}from"./index-DR9AiYow.js";import{u as U}from"./useComponentRef-D05g82mz.js";const N={class:"formatter-container"},Q=y({__name:"FormatTransformer",props:{plugin:{},target:{default:""},inputLabel:{default:"输入"},inputDefault:{default:""},inputPlaceholder:{default:"输入..."},invalidMessage:{default:"请输入正确的内容"},outputLabel:{default:"输出"},options:{default:()=>({})}},emits:["format"],setup(m){const e=m,{plugin:f,inputDefault:p}=I(e),{_inputLabel:g,_inputPlaceholder:v,_invalidMessage:b,_outputLabel:h}=e.target?{_inputLabel:`你的${e.target}内容`,_inputPlaceholder:`在这里粘贴${e.target}内容...`,_invalidMessage:`请输入正确的${e.target}内容`,_outputLabel:`格式化后的${e.target}内容`}:{_inputLabel:e.inputLabel,_inputPlaceholder:e.inputPlaceholder,_invalidMessage:e.invalidMessage,_outputLabel:e.outputLabel},o=U(),a=d({input:p.value}),L=e.plugin.formatter||M,E=e.plugin.isValid||(()=>!0),u=P(()=>E(a.input));c(p,s=>{a.input=s}),c([u,()=>e.options,o],()=>{u.value?o.value?.setInput(L(a.input,e.options)):o.value?.setInput("")},{deep:!0});const V=d({input:[{validator:(s,r,n)=>{u.value?n():n(new Error(b))},trigger:"change"}]});return(s,r)=>{const n=$,_=D,w=B;return F(),C("div",N,[l(w,{model:t(a),"label-position":"top",rules:t(V)},{default:i(()=>[l(_,{label:t(g),prop:"input"},{default:i(()=>[l(n,{modelValue:t(a).input,"onUpdate:modelValue":r[0]||(r[0]=x=>t(a).input=x),placeholder:t(v),rows:20,type:"textarea"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(_,{label:t(h)},{default:i(()=>[l(R,{ref_key:"editor",ref:o,plugin:t(f),readonly:!0},null,8,["plugin"])]),_:1},8,["label"])]),_:1},8,["model","rules"])])}}}),z=k(Q,[["__scopeId","data-v-e9c68d28"]]);export{z as _};
