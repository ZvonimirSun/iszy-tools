import{n as O,D as _,V as j,m as B,J as K,U as Q,o as p,r as i,f as e,w as t,g as c,s as U,v as r,F as k,L as w,M as q,e as E,z as D,G as F,H as W,E as X,_ as Y}from"./index.js";import{E as Z,a as ee}from"./el-tab-pane-0949e37f.js";import{a as oe,E as te}from"./el-form-item-ee26a29f.js";import{E as ae}from"./el-divider-1f863f57.js";import{E as le,a as ne}from"./el-radio-group-81bd7f60.js";/* empty css                 */import"./index-7b458e4d.js";import{E as se}from"./el-switch-116fc0b4.js";import{u as I}from"./index-0547b063.js";import{u as h}from"./imgHosting-3569c18f.js";import{_ as ue}from"./Title-ec9955d3.js";import{_ as re}from"./Text-fac19e45.js";import"./vite-8235fac6.js";import"./strings-9f65aa13.js";import"./castArray-552f9086.js";import"./ResizeObserver.es-0f9f8adb.js";import"./isEqual-62aeb03d.js";const de={class:"commonConfigPanel"},pe={key:0,class:"configPanel"},ce={class:"configTable"},me={class:"configOperator"},_e=O({__name:"settings",setup(ie){const x=h(),a=x.commonConfig,M=x.config,N={renameBeforeUpload:!1,renameTimeStamp:!0,copyUrlAfterUpload:!0,customCopyContent:"$url"},d=_("standard"),m=_("$url"),u=_("aliyun"),f=_([]);j(()=>{const s=h().uploader;switch(s!=null&&(u.value=s),B(a,B({},N,a)),a.customCopyContent){case"$url":d.value="standard";break;case"![]($url)":d.value="markdown";break;default:d.value="custom",m.value=a.customCopyContent}T()});function R(s){switch(s){case"standard":a.customCopyContent="$url";break;case"markdown":a.customCopyContent="![]($url)";break;case"custom":a.customCopyContent=m.value;break}}K(m,s=>{d.value==="custom"&&(a.customCopyContent=s)});function T(){u.value==="aliyun"&&(f.value=Q(I[u.value].config(M(u.value))))}function A(){const s={};for(const o of f.value){if(o.required&&(o.default==null||o.default==="")){F.warning("必填项未填写完整");return}s[o.name]=o.default}h().saveConfig({uploader:u.value,config:s}),F.success("保存成功")}return(s,o)=>{const g=ue,$=se,y=oe,S=re,v=le,C=W,H=ne,L=ae,P=te,G=X,z=Z,J=ee;return p(),i(w,null,[e(g,{level:4},{default:t(()=>[c(" 通用配置 ")]),_:1}),U("div",de,[e(y,{label:"时间戳重命名"},{default:t(()=>[e($,{modelValue:r(a).renameTimeStamp,"onUpdate:modelValue":o[0]||(o[0]=l=>r(a).renameTimeStamp=l)},null,8,["modelValue"])]),_:1}),e(y,{label:"上传后自动复制URL"},{default:t(()=>[e($,{modelValue:r(a).copyUrlAfterUpload,"onUpdate:modelValue":o[1]||(o[1]=l=>r(a).copyUrlAfterUpload=l)},null,8,["modelValue"])]),_:1}),e(g,{level:5},{default:t(()=>[c(" 链接复制格式 ")]),_:1}),e(H,{modelValue:r(d),"onUpdate:modelValue":o[3]||(o[3]=l=>k(d)?d.value=l:null),class:"custom-copy-wrapper",onChange:R},{default:t(()=>[e(v,{label:"standard"},{default:t(()=>[c(" 标准 "),e(S,{code:"",content:"$url"})]),_:1}),e(v,{label:"markdown"},{default:t(()=>[c(" MarkDown "),e(S,{code:"",content:"![]($url)"})]),_:1}),e(v,{label:"custom"},{default:t(()=>[c(" 自定义 "),e(C,{modelValue:r(m),"onUpdate:modelValue":o[2]||(o[2]=l=>k(m)?m.value=l:null),style:{width:"100px","margin-left":"10px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),e(L),e(g,{level:4},{default:t(()=>[c(" 图床设置 ")]),_:1}),e(J,{modelValue:r(u),"onUpdate:modelValue":o[4]||(o[4]=l=>k(u)?u.value=l:null),type:"card",onTabChange:T},{default:t(()=>[(p(),i(w,null,q(I,(l,V)=>e(z,{key:V,name:V,label:l.name},{default:t(()=>[r(u)===V?(p(),i("div",pe,[U("div",ce,[e(P,{"label-position":"top"},{default:t(()=>[(p(!0),i(w,null,q(r(f),n=>(p(),E(y,{key:n.name,label:n.label,required:n.required},{default:t(()=>[n.type==="input"?(p(),E(C,{key:0,modelValue:n.default,"onUpdate:modelValue":b=>n.default=b,"allow-clear":"",placeholder:n.hint},null,8,["modelValue","onUpdate:modelValue","placeholder"])):n.type==="password"?(p(),E(C,{key:1,modelValue:n.default,"onUpdate:modelValue":b=>n.default=b,type:"password","allow-clear":"",placeholder:n.hint},null,8,["modelValue","onUpdate:modelValue","placeholder"])):D("",!0)]),_:2},1032,["label","required"]))),128))]),_:2},1024)]),U("div",me,[e(G,{type:"primary",onClick:A},{default:t(()=>[c(" 保存 ")]),_:1})])])):D("",!0)]),_:2},1032,["name","label"])),64))]),_:1},8,["modelValue"])],64)}}});const qe=Y(_e,[["__scopeId","data-v-5a0cdaf2"]]);export{qe as default};
