var qi=Object.defineProperty,Vi=Object.defineProperties;var Ui=Object.getOwnPropertyDescriptors;var Ee=Object.getOwnPropertySymbols;var Ki=Object.prototype.hasOwnProperty,Zi=Object.prototype.propertyIsEnumerable;var We=(e,i,t)=>i in e?qi(e,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[i]=t,Yt=(e,i)=>{for(var t in i||(i={}))Ki.call(i,t)&&We(e,t,i[t]);if(Ee)for(var t of Ee(i))Zi.call(i,t)&&We(e,t,i[t]);return e},Qt=(e,i)=>Vi(e,Ui(i));import{d as Lt,aK as Ji,aZ as Yi,_ as Qi,a6 as tn,T as en,ag as nn,bd as rn,as as on,ax as an,bc as sn,M as un,r as Z,o as G,c as pt,f as gt,w as yt,x as vt,a1 as cn,u as jt,y as te,g as Pe,a9 as hn,A as Le,p as ln,b as fn,a as dn}from"./vendor.dc36df7c.js";/* empty css                *//* empty css               */import{_ as pn}from"./index.76782ccf.js";var je=!1;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var F=function(){return F=Object.assign||function(e){for(var i,t=1,n=arguments.length;t<n;t++)for(var r in i=arguments[t])Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);return e},F.apply(this,arguments)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var ee=function(e,i){return ee=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},ee(e,i)};function ie(e,i){if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function t(){this.constructor=e}ee(e,i),e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}var X=function(){return X=Object.assign||function(e){for(var i,t=1,n=arguments.length;t<n;t++)for(var r in i=arguments[t])Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r]);return e},X.apply(this,arguments)};function at(e,i,t,n){return new(t||(t=Promise))(function(r,o){function s(u){try{h(n.next(u))}catch(c){o(c)}}function a(u){try{h(n.throw(u))}catch(c){o(c)}}function h(u){var c;u.done?r(u.value):(c=u.value,c instanceof t?c:new t(function(l){l(c)})).then(s,a)}h((n=n.apply(e,i||[])).next())})}function st(e,i){var t,n,r,o,s={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(h){return function(u){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,n&&(r=2&c[0]?n.return:c[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,c[1])).done)return r;switch(n=0,r&&(c=[2&c[0],r.value]),c[0]){case 0:case 1:r=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,n=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(!((r=(r=s.trys).length>0&&r[r.length-1])||c[0]!==6&&c[0]!==2)){s=0;continue}if(c[0]===3&&(!r||c[1]>r[0]&&c[1]<r[3])){s.label=c[1];break}if(c[0]===6&&s.label<r[1]){s.label=r[1],r=c;break}if(r&&s.label<r[2]){s.label=r[2],s.ops.push(c);break}r[2]&&s.ops.pop(),s.trys.pop();continue}c=i.call(e,s)}catch(l){c=[6,l],n=0}finally{t=r=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([h,u])}}}function ut(e,i){for(var t=0,n=i.length,r=e.length;t<n;t++,r++)e[r]=i[t];return e}var Fe=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Re(e,i,t){return e(t={path:i,exports:{},require:function(n,r){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(r==null&&t.path)}},t.exports),t.exports}var q,Ft,Rt=function(e){return e&&e.Math==Math&&e},x=Rt(typeof globalThis=="object"&&globalThis)||Rt(typeof window=="object"&&window)||Rt(typeof self=="object"&&self)||Rt(typeof Fe=="object"&&Fe)||function(){return this}()||Function("return this")(),J=function(e){try{return!!e()}catch{return!0}},B=!J(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),mt=Function.prototype.call,wt=mt.bind?mt.bind(mt):function(){return mt.apply(mt,arguments)},De={}.propertyIsEnumerable,He=Object.getOwnPropertyDescriptor,gn={f:He&&!De.call({1:2},1)?function(e){var i=He(this,e);return!!i&&i.enumerable}:De},Me=function(e,i){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:i}},Be=Function.prototype,ne=Be.bind,re=Be.call,yn=ne&&ne.bind(re),A=ne?function(e){return e&&yn(re,e)}:function(e){return e&&function(){return re.apply(e,arguments)}},vn=A({}.toString),mn=A("".slice),Y=function(e){return mn(vn(e),8,-1)},oe=x.Object,wn=A("".split),Ne=J(function(){return!oe("z").propertyIsEnumerable(0)})?function(e){return Y(e)=="String"?wn(e,""):oe(e)}:oe,bn=x.TypeError,ae=function(e){if(e==null)throw bn("Can't call method on "+e);return e},Dt=function(e){return Ne(ae(e))},j=function(e){return typeof e=="function"},M=function(e){return typeof e=="object"?e!==null:j(e)},kn=function(e){return j(e)?e:void 0},bt=function(e,i){return arguments.length<2?kn(x[e]):x[e]&&x[e][i]},Sn=A({}.isPrototypeOf),se=bt("navigator","userAgent")||"",Ge=x.process,Xe=x.Deno,qe=Ge&&Ge.versions||Xe&&Xe.version,Ve=qe&&qe.v8;Ve&&(Ft=(q=Ve.split("."))[0]>0&&q[0]<4?1:+(q[0]+q[1])),!Ft&&se&&(!(q=se.match(/Edge\/(\d+)/))||q[1]>=74)&&(q=se.match(/Chrome\/(\d+)/))&&(Ft=+q[1]);var Ue=Ft,ue=!!Object.getOwnPropertySymbols&&!J(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Ue&&Ue<41}),ce=ue&&!Symbol.sham&&typeof Symbol.iterator=="symbol",Cn=x.Object,he=ce?function(e){return typeof e=="symbol"}:function(e){var i=bt("Symbol");return j(i)&&Sn(i.prototype,Cn(e))},zn=x.String,xn=x.TypeError,Ke=function(e){if(j(e))return e;throw xn(function(i){try{return zn(i)}catch{return"Object"}}(e)+" is not a function")},$n=x.TypeError,On=Object.defineProperty,le=function(e,i){try{On(x,e,{value:i,configurable:!0,writable:!0})}catch{x[e]=i}return i},V=x["__core-js_shared__"]||le("__core-js_shared__",{}),Ze=Re(function(e){(e.exports=function(i,t){return V[i]||(V[i]=t!==void 0?t:{})})("versions",[]).push({version:"3.19.2",mode:"global",copyright:"\xA9 2021 Denis Pushkarev (zloirock.ru)"})}),In=x.Object,Je=function(e){return In(ae(e))},Tn=A({}.hasOwnProperty),D=Object.hasOwn||function(e,i){return Tn(Je(e),i)},_n=0,An=Math.random(),En=A(1 .toString),Ye=function(e){return"Symbol("+(e===void 0?"":e)+")_"+En(++_n+An,36)},kt=Ze("wks"),Q=x.Symbol,Qe=Q&&Q.for,Wn=ce?Q:Q&&Q.withoutSetter||Ye,tt=function(e){if(!D(kt,e)||!ue&&typeof kt[e]!="string"){var i="Symbol."+e;ue&&D(Q,e)?kt[e]=Q[e]:kt[e]=ce&&Qe?Qe(i):Wn(i)}return kt[e]},Pn=x.TypeError,Ln=tt("toPrimitive"),ti=function(e){var i=function(t,n){if(!M(t)||he(t))return t;var r,o,s=(r=t[Ln])==null?void 0:Ke(r);if(s){if(n===void 0&&(n="default"),o=wt(s,t,n),!M(o)||he(o))return o;throw Pn("Can't convert object to primitive value")}return n===void 0&&(n="number"),function(a,h){var u,c;if(h==="string"&&j(u=a.toString)&&!M(c=wt(u,a))||j(u=a.valueOf)&&!M(c=wt(u,a))||h!=="string"&&j(u=a.toString)&&!M(c=wt(u,a)))return c;throw $n("Can't convert object to primitive value")}(t,n)}(e,"string");return he(i)?i:i+""},fe=x.document,jn=M(fe)&&M(fe.createElement),ei=function(e){return jn?fe.createElement(e):{}},ii=!B&&!J(function(){return Object.defineProperty(ei("div"),"a",{get:function(){return 7}}).a!=7}),ni=Object.getOwnPropertyDescriptor,ri={f:B?ni:function(e,i){if(e=Dt(e),i=ti(i),ii)try{return ni(e,i)}catch{}if(D(e,i))return Me(!wt(gn.f,e,i),e[i])}},Fn=x.String,Rn=x.TypeError,St=function(e){if(M(e))return e;throw Rn(Fn(e)+" is not an object")},Dn=x.TypeError,oi=Object.defineProperty,Ct={f:B?oi:function(e,i,t){if(St(e),i=ti(i),St(t),ii)try{return oi(e,i,t)}catch{}if("get"in t||"set"in t)throw Dn("Accessors not supported");return"value"in t&&(e[i]=t.value),e}},Ht=B?function(e,i,t){return Ct.f(e,i,Me(1,t))}:function(e,i,t){return e[i]=t,e},Hn=A(Function.toString);j(V.inspectSource)||(V.inspectSource=function(e){return Hn(e)});var Mt,zt,Bt,de=V.inspectSource,ai=x.WeakMap,Mn=j(ai)&&/native code/.test(de(ai)),si=Ze("keys"),ui=function(e){return si[e]||(si[e]=Ye(e))},pe={},ge=x.TypeError,Bn=x.WeakMap;if(Mn||V.state){var et=V.state||(V.state=new Bn),Nn=A(et.get),ci=A(et.has),Gn=A(et.set);Mt=function(e,i){if(ci(et,e))throw new ge("Object already initialized");return i.facade=e,Gn(et,e,i),i},zt=function(e){return Nn(et,e)||{}},Bt=function(e){return ci(et,e)}}else{var ct=ui("state");pe[ct]=!0,Mt=function(e,i){if(D(e,ct))throw new ge("Object already initialized");return i.facade=e,Ht(e,ct,i),i},zt=function(e){return D(e,ct)?e[ct]:{}},Bt=function(e){return D(e,ct)}}var Nt,hi={set:Mt,get:zt,has:Bt,enforce:function(e){return Bt(e)?zt(e):Mt(e,{})},getterFor:function(e){return function(i){var t;if(!M(i)||(t=zt(i)).type!==e)throw ge("Incompatible receiver, "+e+" required");return t}}},li=Function.prototype,Xn=B&&Object.getOwnPropertyDescriptor,ye=D(li,"name"),qn={EXISTS:ye,PROPER:ye&&function(){}.name==="something",CONFIGURABLE:ye&&(!B||B&&Xn(li,"name").configurable)},Vn=Re(function(e){var i=qn.CONFIGURABLE,t=hi.get,n=hi.enforce,r=String(String).split("String");(e.exports=function(o,s,a,h){var u,c=!!h&&!!h.unsafe,l=!!h&&!!h.enumerable,d=!!h&&!!h.noTargetGet,f=h&&h.name!==void 0?h.name:s;j(a)&&(String(f).slice(0,7)==="Symbol("&&(f="["+String(f).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!D(a,"name")||i&&a.name!==f)&&Ht(a,"name",f),(u=n(a)).source||(u.source=r.join(typeof f=="string"?f:""))),o!==x?(c?!d&&o[s]&&(l=!0):delete o[s],l?o[s]=a:Ht(o,s,a)):l?o[s]=a:le(s,a)})(Function.prototype,"toString",function(){return j(this)&&t(this).source||de(this)})}),Un=Math.ceil,Kn=Math.floor,fi=function(e){var i=+e;return i!=i||i===0?0:(i>0?Kn:Un)(i)},Zn=Math.max,Jn=Math.min,Yn=Math.min,di=function(e){return(i=e.length)>0?Yn(fi(i),9007199254740991):0;var i},pi=function(e){return function(i,t,n){var r,o=Dt(i),s=di(o),a=function(h,u){var c=fi(h);return c<0?Zn(c+u,0):Jn(c,u)}(n,s);if(e&&t!=t){for(;s>a;)if((r=o[a++])!=r)return!0}else for(;s>a;a++)if((e||a in o)&&o[a]===t)return e||a||0;return!e&&-1}},ve={includes:pi(!0),indexOf:pi(!1)},Qn=ve.indexOf,gi=A([].push),yi=function(e,i){var t,n=Dt(e),r=0,o=[];for(t in n)!D(pe,t)&&D(n,t)&&gi(o,t);for(;i.length>r;)D(n,t=i[r++])&&(~Qn(o,t)||gi(o,t));return o},Gt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],tr=Gt.concat("length","prototype"),er={f:Object.getOwnPropertyNames||function(e){return yi(e,tr)}},ir={f:Object.getOwnPropertySymbols},nr=A([].concat),rr=bt("Reflect","ownKeys")||function(e){var i=er.f(St(e)),t=ir.f;return t?nr(i,t(e)):i},or=function(e,i){for(var t=rr(i),n=Ct.f,r=ri.f,o=0;o<t.length;o++){var s=t[o];D(e,s)||n(e,s,r(i,s))}},ar=/#|\.prototype\./,xt=function(e,i){var t=ur[sr(e)];return t==hr||t!=cr&&(j(i)?J(i):!!i)},sr=xt.normalize=function(e){return String(e).replace(ar,".").toLowerCase()},ur=xt.data={},cr=xt.NATIVE="N",hr=xt.POLYFILL="P",lr=xt,fr=ri.f,$t=function(e,i){var t,n,r,o,s,a=e.target,h=e.global,u=e.stat;if(t=h?x:u?x[a]||le(a,{}):(x[a]||{}).prototype)for(n in i){if(o=i[n],r=e.noTargetGet?(s=fr(t,n))&&s.value:t[n],!lr(h?n:a+(u?".":"#")+n,e.forced)&&r!==void 0){if(typeof o==typeof r)continue;or(o,r)}(e.sham||r&&r.sham)&&Ht(o,"sham",!0),Vn(t,n,o,e)}},dr=Object.keys||function(e){return yi(e,Gt)},pr=B?Object.defineProperties:function(e,i){St(e);for(var t,n=Dt(i),r=dr(i),o=r.length,s=0;o>s;)Ct.f(e,t=r[s++],n[t]);return e},gr=bt("document","documentElement"),vi=ui("IE_PROTO"),me=function(){},mi=function(e){return"<script>"+e+"<\/script>"},wi=function(e){e.write(mi("")),e.close();var i=e.parentWindow.Object;return e=null,i},Xt=function(){try{Nt=new ActiveXObject("htmlfile")}catch{}var e,i;Xt=typeof document!="undefined"?document.domain&&Nt?wi(Nt):((i=ei("iframe")).style.display="none",gr.appendChild(i),i.src=String("javascript:"),(e=i.contentWindow.document).open(),e.write(mi("document.F=Object")),e.close(),e.F):wi(Nt);for(var t=Gt.length;t--;)delete Xt.prototype[Gt[t]];return Xt()};pe[vi]=!0;var yr=Object.create||function(e,i){var t;return e!==null?(me.prototype=St(e),t=new me,me.prototype=null,t[vi]=e):t=Xt(),i===void 0?t:pr(t,i)},we=tt("unscopables"),be=Array.prototype;be[we]==null&&Ct.f(be,we,{configurable:!0,value:yr(null)});var bi=function(e){be[we][e]=!0},vr=ve.includes;$t({target:"Array",proto:!0},{includes:function(e){return vr(this,e,arguments.length>1?arguments[1]:void 0)}}),bi("includes"),$t({target:"Object",stat:!0,forced:!B,sham:!B},{defineProperty:Ct.f});var mr=tt("match"),wr=x.TypeError,br=function(e){if(function(i){var t;return M(i)&&((t=i[mr])!==void 0?!!t:Y(i)=="RegExp")}(e))throw wr("The method doesn't accept regular expressions");return e},ki={};ki[tt("toStringTag")]="z";var kr=String(ki)==="[object z]",Sr=tt("toStringTag"),Cr=x.Object,zr=Y(function(){return arguments}())=="Arguments",Si=kr?Y:function(e){var i,t,n;return e===void 0?"Undefined":e===null?"Null":typeof(t=function(r,o){try{return r[o]}catch{}}(i=Cr(e),Sr))=="string"?t:zr?Y(i):(n=Y(i))=="Object"&&j(i.callee)?"Arguments":n},xr=x.String,Ci=function(e){if(Si(e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return xr(e)},$r=tt("match"),Or=A("".indexOf);$t({target:"String",proto:!0,forced:!function(e){var i=/./;try{"/./"[e](i)}catch{try{return i[$r]=!1,"/./"[e](i)}catch{}}return!1}("includes")},{includes:function(e){return!!~Or(Ci(ae(this)),Ci(br(e)),arguments.length>1?arguments[1]:void 0)}});var zi,Ir=ve.indexOf,ke=A([].indexOf),xi=!!ke&&1/ke([1],1,-0)<0,Tr=!!(zi=[].indexOf)&&J(function(){zi.call(null,function(){throw 1},1)});$t({target:"Array",proto:!0,forced:xi||!Tr},{indexOf:function(e){var i=arguments.length>1?arguments[1]:void 0;return xi?ke(this,e,i)||0:Ir(this,e,i)}});var $i=A(A.bind),Oi=Array.isArray||function(e){return Y(e)=="Array"},Ii=function(){},_r=[],Ti=bt("Reflect","construct"),Se=/^\s*(?:class|function)\b/,Ar=A(Se.exec),Er=!Se.exec(Ii),Ot=function(e){if(!j(e))return!1;try{return Ti(Ii,_r,e),!0}catch{return!1}},Wr=!Ti||J(function(){var e;return Ot(Ot.call)||!Ot(Object)||!Ot(function(){e=!0})||e})?function(e){if(!j(e))return!1;switch(Si(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return Er||!!Ar(Se,de(e))}:Ot,Pr=tt("species"),_i=x.Array,Lr=function(e,i){return new(function(t){var n;return Oi(t)&&(n=t.constructor,(Wr(n)&&(n===_i||Oi(n.prototype))||M(n)&&(n=n[Pr])===null)&&(n=void 0)),n===void 0?_i:n}(e))(i===0?0:i)},Ai=A([].push),U=function(e){var i=e==1,t=e==2,n=e==3,r=e==4,o=e==6,s=e==7,a=e==5||o;return function(h,u,c,l){for(var d,f,v=Je(h),p=Ne(v),g=function(C,k){return Ke(C),k===void 0?C:$i?$i(C,k):function(){return C.apply(k,arguments)}}(u,c),w=di(p),b=0,m=l||Lr,y=i?m(h,w):t||s?m(h,0):void 0;w>b;b++)if((a||b in p)&&(f=g(d=p[b],b,v),e))if(i)y[b]=f;else if(f)switch(e){case 3:return!0;case 5:return d;case 6:return b;case 2:Ai(y,d)}else switch(e){case 4:return!1;case 7:Ai(y,d)}return o?-1:n||r?r:y}},jr=[U(0),U(1),U(2),U(3),U(4),U(5),U(6),U(7)][5],Ei=!0;"find"in[]&&Array(1).find(function(){Ei=!1}),$t({target:"Array",proto:!0,forced:Ei},{find:function(e){return jr(this,e,arguments.length>1?arguments[1]:void 0)}}),bi("find"),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,i){if(this==null)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if(n===0)return!1;for(var r,o,s=0|i,a=Math.max(s>=0?s:n-Math.abs(s),0);a<n;){if((r=t[a])===(o=e)||typeof r=="number"&&typeof o=="number"&&isNaN(r)&&isNaN(o))return!0;a++}return!1}}),String.prototype.includes||(String.prototype.includes=function(e,i){return typeof i!="number"&&(i=0),!(i+e.length>this.length)&&this.indexOf(e,i)!==-1}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(this==null)throw new TypeError('"this" is null or not defined');var i=Object(this),t=i.length>>>0;if(typeof e!="function")throw new TypeError("predicate must be a function");for(var n=arguments[1],r=0;r<t;){var o=i[r];if(e.call(n,o,r,i))return o;r++}}});var E=function(e){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];return i.some(function(n){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()===n})},Wi=function(e,i){for(var t=0,n=i.split(".");t<n.length;t++){var r=e[n[t]];if(!E(r,"object","array"))return r;e=r}return e},Pi=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},Ce=function(e){return[].filter.call(e,function(i){return i!==`
`}).join("")},K=function(e){if(typeof e!="string"||(e=e.toLocaleLowerCase().trim())==="transparent")return!1;var i;return!(/^rgba/.test(e)&&((i=/([^\s,]+)\)$/.exec(e))===null?0:typeof i=="object"?NaN:typeof i=="number"?i:typeof i=="string"?i[i.length-1]==="%"?Number(i.slice(0,-1))/100:Number(i):NaN)===0)},Li=function(e){var i,t=((i=e.padding)===null||i===void 0?void 0:i.replace(/px/g,"").split(" ").map(function(u){return~~u}))||[0],n=0,r=0,o=0,s=0;switch(t.length){case 1:n=r=o=s=t[0];break;case 2:n=r=t[0],o=s=t[1];break;case 3:n=t[0],o=s=t[1],r=t[2];break;default:n=t[0],r=t[1],o=t[2],s=t[3]}var a={paddingTop:n,paddingBottom:r,paddingLeft:o,paddingRight:s};for(var h in a)a[h]=Object.prototype.hasOwnProperty.call(e,h)&&E(e[h],"string","number")?~~String(e[h]).replace(/px/g,""):a[h];return[n,r,o,s]},ji=function(e){var i=[],t=e.map(function(r){return Number(r)}).reduce(function(r,o){if(o>0){var s=r+o;return i.push(s),s}return i.push(NaN),r},0),n=Math.random()*t;return i.findIndex(function(r){return n<=r})},ze=function(e,i,t,n){n===void 0&&(n=1/0),n<=0&&(n=1/0);for(var r="",o=[],s=e.measureText("...").width,a=0;a<i.length;a++){r+=i[a];var h=e.measureText(r).width,u=t(o);if(n===o.length+1&&(h+=s),u<0)return o;if(h>u&&(o.push(r.slice(0,-1)),r=i[a]),n===o.length)return o[o.length-1]+="...",o}return r&&o.push(r),o.length||o.push(i),o},it=function(e){return Math.PI/180*e},It=function(e){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];var n=i[0],r=i[1],o=i[2],s=i[3],a=i[4],h=Math.min(o,s),u=Math.PI;a>h/2&&(a=h/2),e.beginPath(),e.moveTo(n+a,r),e.lineTo(n+a,r),e.lineTo(n+o-a,r),e.arc(n+o-a,r+a,a,-u/2,0),e.lineTo(n+o,r+s-a),e.arc(n+o-a,r+s-a,a,0,u/2),e.lineTo(n+a,r+s),e.arc(n+a,r+s-a,a,u/2,u),e.lineTo(n,r+a),e.arc(n+a,r+a,a,u,-u/2),e.closePath()},Fr=function(e,i,t,n,r,o){var s=document.createElement("canvas"),a=s.getContext("2d"),h=e.width,u=e.height;s.width=h,s.height=u;var c=h/n;return It(a,i*c,t*c,n*c,r*c,o*c),a.clip(),a.drawImage(e,0,0,h,u),s},nt=function(){function e(){this.subs=[]}return e.prototype.addSub=function(i){this.subs.includes(i)||this.subs.push(i)},e.prototype.notify=function(){this.subs.forEach(function(i){i.update()})},e}(),Rr="__proto__"in{};function Fi(e,i,t,n){Object.defineProperty(e,i,{value:t,enumerable:!!n,writable:!0,configurable:!0})}var Ri=Array.prototype,qt=Object.create(Ri);["push","pop","shift","unshift","sort","splice","reverse"].forEach(function(e){qt[e]=function(){for(var i=[],t=0;t<arguments.length;t++)i[t]=arguments[t];var n=Ri[e].apply(this,i),r=this.__luckyOb__;return["push","unshift","splice"].includes(e)&&r.walk(this),r.dep.notify(),n}});var Dr=function(){function e(i){this.dep=new nt,Fi(i,"__luckyOb__",this),Array.isArray(i)&&(Rr?i.__proto__=qt:Object.getOwnPropertyNames(qt).forEach(function(t){Fi(i,t,qt[t])})),this.walk(i)}return e.prototype.walk=function(i){Object.keys(i).forEach(function(t){Hi(i,t,i[t])})},e}();function Di(e){if(e&&typeof e=="object")return"__luckyOb__"in e?e.__luckyOb__:new Dr(e)}function Hi(e,i,t){var n=new nt,r=Object.getOwnPropertyDescriptor(e,i);if(!r||r.configurable!==!1){var o=r&&r.get,s=r&&r.set;o&&!s||arguments.length!==2||(t=e[i]);var a=Di(t);Object.defineProperty(e,i,{get:function(){var h=o?o.call(e):t;return nt.target&&(n.addSub(nt.target),a&&a.dep.addSub(nt.target)),h},set:function(h){h!==t&&(t=h,o&&!s||(s?s.call(e,h):t=h,a=Di(h),n.notify()))}})}}var Hr=0,Mr=function(){function e(i,t,n,r){r===void 0&&(r={}),this.id=Hr++,this.$lucky=i,this.expr=t,this.deep=!!r.deep,this.getter=typeof t=="function"?t:function(o){o+=".";for(var s=[],a="",h=0;h<o.length;h++){var u=o[h];if(/\[|\./.test(u))s.push(a),a="";else{if(/\W/.test(u))continue;a+=u}}return function(c){return s.reduce(function(l,d){return l[d]},c)}}(t),this.cb=n,this.value=this.get()}return e.prototype.get=function(){nt.target=this;var i=this.getter.call(this.$lucky,this.$lucky);return this.deep&&function(t){var n=function(r){E(r,"array","object")&&Object.keys(r).forEach(function(o){var s=r[o];n(s)})};n(t)}(i),nt.target=null,i},e.prototype.update=function(){var i=this.get(),t=this.value;this.value=i,this.cb.call(this.$lucky,i,t)},e}(),xe=function(){function e(i,t){var n=this;this.version="1.7.11",this.htmlFontSize=16,this.rAF=function(){},this.boxWidth=0,this.boxHeight=0,typeof i=="string"?i={el:i}:i.nodeType===1&&(i={el:"",divElement:i}),i=i,this.config=i,this.data=t,i.flag||(i.flag="WEB"),i.el&&(i.divElement=document.querySelector(i.el)),i.divElement&&(i.canvasElement=document.createElement("canvas"),i.divElement.appendChild(i.canvasElement)),i.canvasElement&&(i.ctx=i.canvasElement.getContext("2d"),i.canvasElement.setAttribute("package","lucky-canvas@1.7.11"),i.canvasElement.addEventListener("click",function(r){return n.handleClick(r)})),this.ctx=i.ctx,this.initWindowFunction(),this.config.ctx||console.error("\u65E0\u6CD5\u83B7\u53D6\u5230 CanvasContext2D"),window&&typeof window.addEventListener=="function"&&window.addEventListener("resize",function(r,o){o===void 0&&(o=300);var s=null;return function(){for(var a=this,h=[],u=0;u<arguments.length;u++)h[u]=arguments[u];s||(s=setTimeout(function(){r.apply(a,h),clearTimeout(s),s=null},o))}}(function(){return n.resize()},300)),window&&typeof window.MutationObserver=="function"&&new window.MutationObserver(function(){n.resize()}).observe(document.documentElement,{attributes:!0})}return e.prototype.resize=function(){var i,t;(t=(i=this.config).beforeResize)===null||t===void 0||t.call(i),this.setHTMLFontSize(),this.setDpr(),this.resetWidthAndHeight(),this.zoomCanvas()},e.prototype.initLucky=function(){if(this.resize(),!this.boxWidth||!this.boxHeight)return console.error("\u65E0\u6CD5\u83B7\u53D6\u5230\u5BBD\u5EA6\u6216\u9AD8\u5EA6")},e.prototype.handleClick=function(i){},e.prototype.setHTMLFontSize=function(){window&&(this.htmlFontSize=+window.getComputedStyle(document.documentElement).fontSize.slice(0,-2))},e.prototype.clearCanvas=function(){var i=[this.boxWidth,this.boxHeight],t=i[0],n=i[1];this.ctx.clearRect(-t,-n,2*t,2*n)},e.prototype.setDpr=function(){var i=this.config;i.dpr||(window?window.dpr=i.dpr=window.devicePixelRatio||1:i.dpr||console.error(i,"\u672A\u4F20\u5165 dpr \u53EF\u80FD\u4F1A\u5BFC\u81F4\u7ED8\u5236\u5F02\u5E38"))},e.prototype.resetWidthAndHeight=function(){var i=this.config,t=this.data,n=0,r=0;i.divElement&&(n=i.divElement.offsetWidth,r=i.divElement.offsetHeight),this.boxWidth=this.getLength(t.width||i.width)||n,this.boxHeight=this.getLength(t.height||i.height)||r,i.divElement&&(i.divElement.style.overflow="hidden",i.divElement.style.width=this.boxWidth+"px",i.divElement.style.height=this.boxHeight+"px")},e.prototype.zoomCanvas=function(){var i=this.config,t=this.ctx,n=i.canvasElement,r=i.dpr,o=[this.boxWidth*r,this.boxHeight*r],s=o[0],a=o[1];n&&(n.width=s,n.height=a,n.style.width=s+"px",n.style.height=a+"px",n.style["transform-origin"]="left top",n.style.transform="scale("+1/r+")",t.scale(r,r))},e.prototype.initWindowFunction=function(){var i=this.config;if(window)return this.rAF=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(n){window.setTimeout(n,1e3/60)},i.setTimeout=window.setTimeout,i.setInterval=window.setInterval,i.clearTimeout=window.clearTimeout,void(i.clearInterval=window.clearInterval);if(i.rAF)this.rAF=i.rAF;else if(i.setTimeout){var t=i.setTimeout;this.rAF=function(n){return t(n,16.7)}}else this.rAF=function(n){return setTimeout(n,16.7)}},e.prototype.loadImg=function(i,t,n){var r=this;return n===void 0&&(n="$resolve"),new Promise(function(o,s){if(i||s("=> '"+t.src+"' \u4E0D\u80FD\u4E3A\u7A7A\u6216\u4E0D\u5408\u6CD5"),r.config.flag!=="WEB")return t[n]=o,void(t.$reject=s);var a=new Image;a.onload=function(){return o(a)},a.onerror=function(){return s("=> '"+t.src+"' \u56FE\u7247\u52A0\u8F7D\u5931\u8D25")},a.src=i})},e.prototype.drawImage=function(i,t){for(var n,r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var s=this.config,a=s.flag,h=s.dpr;if(["WEB","MP-WX"].includes(a))n=t;else{if(!["UNI-H5","UNI-MP","TARO-H5","TARO-MP"].includes(a))return console.error("\u610F\u6599\u4E4B\u5916\u7684 flag, \u8BE5\u5E73\u53F0\u5C1A\u672A\u517C\u5BB9!");n=t.path}return r.length===8&&(r=r.map(function(u,c){return c<4?u*h:u})),i.drawImage.apply(i,ut([n],r))},e.prototype.getLength=function(i){return E(i,"number")?i:E(i,"string")?this.changeUnits(i):0},e.prototype.changeUnits=function(i,t){var n=this;return t===void 0&&(t=1),Number(i.replace(/^([-]*[0-9.]*)([a-z%]*)$/,function(r,o,s){var a={"%":function(u){return u*(t/100)},px:function(u){return 1*u},rem:function(u){return u*n.htmlFontSize},vw:function(u){return u/100*window.innerWidth}}[s];if(a)return a(o);var h=n.config.unitFunc;return h?h(o,s):o}))},e.prototype.getOffscreenCanvas=function(i,t){if(!Pi(this,"_offscreenCanvas")){if(!window||!window.document)return console.error("\u65E0\u6CD5\u521B\u5EFA\u79BB\u5C4FCanvas!");this._offscreenCanvas=document.createElement("canvas")}var n=this.config.dpr,r=this._offscreenCanvas;r.width=(i||300)*n,r.height=(t||150)*n;var o=r.getContext("2d");return o.clearRect(0,0,i,t),o.scale(n,n),o.dpr=n,{_offscreenCanvas:r,_ctx:o}},e.prototype.$clip=function(i){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var o=n.map(function(s){return t.getLength(s)});return Fr.apply(void 0,ut([i],o))},e.prototype.$opacity=function(i,t){return function(n,r){var o=document.createElement("canvas"),s=o.getContext("2d"),a=n.width,h=n.height;if(o.width=a,o.height=h,typeof s.filter=="string")s.filter="opacity("+r+"%)",s.drawImage(n,0,0,a,h);else{s.drawImage(n,0,0,a,h);for(var u=s.getImageData(0,0,a,h),c=u.data,l=c.length,d=0;d<l;d+=4){var f=c[d+3];f!==0&&(c[d+3]=f*r/100)}s.putImageData(u,0,0)}return o}(i,this.getLength(t))},e.prototype.$blur=function(i,t){return function(n,r){var o=document.createElement("canvas"),s=o.getContext("2d"),a=n.width,h=n.height;o.width=a,o.height=h,s.drawImage(n,0,0,a,h);var u=s.getImageData(0,0,a,h),c=u.data,l=function(d,f){f=f||d/3;for(var v=Math.ceil(d),p=f*f,g=2*p,w=1/(2*Math.PI*p),b=[],m=0,y=-v;y<=v;y++)for(var C=-v;C<=v;C++){var k=w*Math.exp(-(y*y+C*C)/g);b.push(k),m+=k}for(var S=0;S<b.length;S++)b[S]/=m;return b}(r);return c.length,l.length,console.log(u),s.putImageData(u,0,0),o}(i,this.getLength(t))},e.prototype.$set=function(i,t,n){i&&typeof i=="object"&&Hi(i,t,n)},e.prototype.$computed=function(i,t,n){var r=this;Object.defineProperty(i,t,{get:function(){return n.call(r)}})},e.prototype.$watch=function(i,t,n){n===void 0&&(n={}),typeof t=="object"&&(t=(n=t).handler);var r=new Mr(this,i,t,n);return n.immediate&&t.call(this,r.value),function(){}},e}(),$e=function(e,i,t,n){return e>=n&&(e=n),t*(e/=n)*e+i},ht=function(e,i,t,n){return e>=n&&(e=n),-t*(e/=n)*(e-2)+i},Br=function(e){function i(t,n){var r,o=e.call(this,t,{width:n.width,height:n.height})||this;return o.blocks=[],o.prizes=[],o.buttons=[],o.defaultConfig={},o.defaultStyle={},o._defaultConfig={},o._defaultStyle={},o.Radius=0,o.prizeRadius=0,o.prizeDeg=0,o.prizeRadian=0,o.rotateDeg=0,o.maxBtnRadius=0,o.startTime=0,o.endTime=0,o.stopDeg=0,o.endDeg=0,o.FPS=16.6,o.step=0,o.ImageCache={blocks:[],prizes:[],buttons:[]},o.initData(n),o.initWatch(),o.initComputed(),(r=t.beforeCreate)===null||r===void 0||r.call(o),o.init(),o}return ie(i,e),i.prototype.resize=function(){var t,n;e.prototype.resize.call(this),this.Radius=Math.min(this.boxWidth,this.boxHeight)/2,this.ctx.translate(this.Radius,this.Radius),this.draw(),(n=(t=this.config).afterResize)===null||n===void 0||n.call(t)},i.prototype.initLucky=function(){this.Radius=0,this.prizeRadius=0,this.prizeDeg=0,this.prizeRadian=0,this.rotateDeg=0,this.maxBtnRadius=0,this.startTime=0,this.endTime=0,this.stopDeg=0,this.endDeg=0,this.FPS=16.6,this.prizeFlag=-1,this.step=0,e.prototype.initLucky.call(this)},i.prototype.initData=function(t){this.$set(this,"width",t.width||"300px"),this.$set(this,"height",t.height||"300px"),this.$set(this,"blocks",t.blocks||[]),this.$set(this,"prizes",t.prizes||[]),this.$set(this,"buttons",t.buttons||[]),this.$set(this,"defaultConfig",t.defaultConfig||{}),this.$set(this,"defaultStyle",t.defaultStyle||{}),this.$set(this,"startCallback",t.start),this.$set(this,"endCallback",t.end)},i.prototype.initComputed=function(){var t=this;this.$computed(this,"_defaultConfig",function(){return X({gutter:"0px",offsetDegree:0,speed:20,speedFunction:"quad",accelerationTime:2500,decelerationTime:2500,stopRange:0},t.defaultConfig)}),this.$computed(this,"_defaultStyle",function(){return X({fontSize:"18px",fontColor:"#000",fontStyle:"sans-serif",fontWeight:"400",background:"rgba(0,0,0,0)",wordWrap:!0,lengthLimit:"90%"},t.defaultStyle)})},i.prototype.initWatch=function(){var t=this;this.$watch("width",function(n){t.data.width=n,t.resize()}),this.$watch("height",function(n){t.data.height=n,t.resize()}),this.$watch("blocks",function(n){t.initImageCache()},{deep:!0}),this.$watch("prizes",function(n){t.initImageCache()},{deep:!0}),this.$watch("buttons",function(n){t.initImageCache()},{deep:!0}),this.$watch("defaultConfig",function(){return t.draw()},{deep:!0}),this.$watch("defaultStyle",function(){return t.draw()},{deep:!0}),this.$watch("startCallback",function(){return t.init()}),this.$watch("endCallback",function(){return t.init()})},i.prototype.init=function(){var t,n;return at(this,void 0,void 0,function(){var r;return st(this,function(o){switch(o.label){case 0:return this.initLucky(),r=this.config,(t=r.beforeInit)===null||t===void 0||t.call(this),this.draw(),this.draw(),[4,this.initImageCache()];case 1:return o.sent(),(n=r.afterInit)===null||n===void 0||n.call(this),[2]}})})},i.prototype.initImageCache=function(){var t=this;return new Promise(function(n){var r={blocks:t.blocks.map(function(o){return o.imgs}),prizes:t.prizes.map(function(o){return o.imgs}),buttons:t.buttons.map(function(o){return o.imgs})};Object.keys(r).forEach(function(o){var s=r[o],a=[];s&&s.forEach(function(h,u){h&&h.forEach(function(c,l){a.push(t.loadAndCacheImg(o,u,o,l))})}),Promise.all(a).then(function(){t.draw(),n()})})})},i.prototype.handleClick=function(t){var n,r=this.ctx;r.beginPath(),r.arc(0,0,this.maxBtnRadius,0,2*Math.PI,!1),r.isPointInPath(t.offsetX,t.offsetY)&&this.step===0&&((n=this.startCallback)===null||n===void 0||n.call(this,t))},i.prototype.loadAndCacheImg=function(t,n,r,o){return at(this,void 0,void 0,function(){var s=this;return st(this,function(a){return[2,new Promise(function(h,u){var c=s[t][n];if(c&&c.imgs){var l=c.imgs[o];if(l){var d=s.ImageCache;d[r][n]||(d[r][n]=[]),s.loadImg(l.src,l).then(function(f){typeof l.formatter=="function"&&(f=l.formatter.call(s,f)),d[r][n][o]=f,h()}).catch(function(f){console.error(t+"["+n+"].imgs["+o+"] "+f),u()})}}})]})})},i.prototype.computedWidthAndHeight=function(t,n,r,o){if(!n.width&&!n.height)return[t.width,t.height];if(n.width&&!n.height){var s=this.getWidth(n.width,r);return[s,t.height*(s/t.width)]}if(!n.width&&n.height){var a=this.getHeight(n.height,o);return[t.width*(a/t.height),a]}return[this.getWidth(n.width,r),this.getHeight(n.height,o)]},i.prototype.draw=function(){var t,n,r=this,o=this,s=o.config,a=o.ctx,h=o._defaultConfig,u=o._defaultStyle;(t=s.beforeDraw)===null||t===void 0||t.call(this,a),a.clearRect(-this.Radius,-this.Radius,2*this.Radius,2*this.Radius),this.prizeRadius=this.blocks.reduce(function(f,v,p){return K(v.background)&&(a.beginPath(),a.fillStyle=v.background,a.arc(0,0,f,0,2*Math.PI,!1),a.fill()),v.imgs&&v.imgs.forEach(function(g,w){var b=r.ImageCache.blocks;if(b&&b[p]){var m=b[p][w];if(m){var y=r.computedWidthAndHeight(m,g,2*f,2*f),C=y[0],k=y[1],S=[r.getOffsetX(C),r.getHeight(g.top,2*f)-f],z=S[0],$=S[1];a.save(),g.rotate&&a.rotate(it(r.rotateDeg)),r.drawImage(a,m,z,$,C,k),a.restore()}}}),f-r.getLength(v.padding&&v.padding.split(" ")[0])},this.Radius),this.prizeDeg=360/this.prizes.length,this.prizeRadian=it(this.prizeDeg);var c=it(this.rotateDeg-90+this.prizeDeg/2+h.offsetDegree),l=function(f){return r.getOffsetX(a.measureText(f).width)},d=function(f,v,p){var g=f.lineHeight||u.lineHeight||f.fontSize||u.fontSize;return r.getHeight(f.top,v)+(p+1)*r.getLength(g)};a.save(),this.prizes.forEach(function(f,v){var p=c+v*r.prizeRadian,g=r.prizeRadius-r.maxBtnRadius,w=f.background||u.background;K(w)&&(a.fillStyle=w,function(y,C,k,S,z,$){y.beginPath();var O,I,T=it(90/Math.PI/k*$),_=S+T,W=z-T;y.arc(0,0,k,_,W,!1),y.lineTo.apply(y,(O=(S+z)/2,I=$/2/Math.abs(Math.sin((S-z)/2)),[+(Math.cos(O)*I).toFixed(8),+(Math.sin(O)*I).toFixed(8)])),y.closePath()}(a,r.maxBtnRadius,r.prizeRadius,p-r.prizeRadian/2,p+r.prizeRadian/2,r.getLength(h.gutter)),a.fill());var b=Math.cos(p)*r.prizeRadius,m=Math.sin(p)*r.prizeRadius;a.translate(b,m),a.rotate(p+it(90)),f.imgs&&f.imgs.forEach(function(y,C){var k=r.ImageCache.prizes;if(k&&k[v]){var S=k[v][C];if(S){var z=r.computedWidthAndHeight(S,y,r.prizeRadian*r.prizeRadius,g),$=z[0],O=z[1],I=[r.getOffsetX($),r.getHeight(y.top,g)],T=I[0],_=I[1];r.drawImage(a,S,T,_,$,O)}}}),f.fonts&&f.fonts.forEach(function(y){var C=y.fontColor||u.fontColor,k=y.fontWeight||u.fontWeight,S=r.getLength(y.fontSize||u.fontSize),z=y.fontStyle||u.fontStyle,$=Object.prototype.hasOwnProperty.call(y,"wordWrap")?y.wordWrap:u.wordWrap,O=y.lengthLimit||u.lengthLimit,I=y.lineClamp||u.lineClamp;a.fillStyle=C,a.font=k+" "+(S>>0)+"px "+z;var T=String(y.text);($?ze(a,Ce(T),function(_){var W=(r.prizeRadius-d(y,g,_.length))*Math.tan(r.prizeRadian/2)*2-r.getLength(h.gutter);return r.getWidth(O,W)},I):T.split(`
`)).filter(function(_){return!!_}).forEach(function(_,W){a.fillText(_,l(_),d(y,g,W))})}),a.rotate(it(360)-p-it(90)),a.translate(-b,-m)}),a.restore(),this.buttons.forEach(function(f,v){var p=r.getHeight(f.radius);r.maxBtnRadius=Math.max(r.maxBtnRadius,p),K(f.background)&&(a.beginPath(),a.fillStyle=f.background,a.arc(0,0,p,0,2*Math.PI,!1),a.fill()),f.pointer&&K(f.background)&&(a.beginPath(),a.fillStyle=f.background,a.moveTo(-p,0),a.lineTo(p,0),a.lineTo(0,2*-p),a.closePath(),a.fill()),f.imgs&&f.imgs.forEach(function(g,w){var b=r.ImageCache.buttons;if(b&&b[v]){var m=b[v][w];if(m){var y=r.computedWidthAndHeight(m,g,2*p,2*p),C=y[0],k=y[1],S=[r.getOffsetX(C),r.getHeight(g.top,p)],z=S[0],$=S[1];r.drawImage(a,m,z,$,C,k)}}}),f.fonts&&f.fonts.forEach(function(g){var w=g.fontColor||u.fontColor,b=g.fontWeight||u.fontWeight,m=r.getLength(g.fontSize||u.fontSize),y=g.fontStyle||u.fontStyle;a.fillStyle=w,a.font=b+" "+(m>>0)+"px "+y,String(g.text).split(`
`).forEach(function(C,k){a.fillText(C,l(C),d(g,p,k))})})}),(n=s.afterDraw)===null||n===void 0||n.call(this,a)},i.prototype.carveOnGunwaleOfAMovingBoat=function(){var t=this,n=t._defaultConfig,r=t.prizeFlag,o=t.prizeDeg,s=t.rotateDeg;this.endTime=Date.now();for(var a=this.stopDeg=s,h=n.speed,u=(Math.random()*o-o/2)*this.getLength(n.stopRange),c=0,l=0,d=0;++c;){var f=360*c-r*o-s-n.offsetDegree+u-o/2,v=ht(this.FPS,a,f,n.decelerationTime)-a;if(v>h){this.endDeg=h-l>v-h?f:d;break}d=f,l=v}},i.prototype.play=function(){var t,n;this.step===0&&(this.startTime=Date.now(),this.prizeFlag=void 0,this.step=1,(n=(t=this.config).afterStart)===null||n===void 0||n.call(t),this.run())},i.prototype.stop=function(t){if(this.step!==0&&this.step!==3){if(!t&&t!==0){var n=this.prizes.map(function(r){return r.range});t=ji(n)}t<0?(this.step=0,this.prizeFlag=-1):(this.step=2,this.prizeFlag=t%this.prizes.length)}},i.prototype.run=function(t){var n;t===void 0&&(t=0);var r=this,o=r.rAF,s=r.step,a=r.prizeFlag,h=r.stopDeg,u=r.endDeg,c=r._defaultConfig,l=c.accelerationTime,d=c.decelerationTime,f=c.speed;if(s!==0){if(a!==-1){s!==3||this.endDeg||this.carveOnGunwaleOfAMovingBoat();var v=Date.now()-this.startTime,p=Date.now()-this.endTime,g=this.rotateDeg;if(s===1||v<l){this.FPS=v/t;var w=$e(v,0,f,l);w===f&&(this.step=2),g+=w%360}else s===2?(g+=f%360,a!==void 0&&a>=0&&(this.step=3,this.stopDeg=0,this.endDeg=0)):s===3?(g=ht(p,h,u,d),p>=d&&(this.step=0)):this.stop(-1);this.rotateDeg=g,this.draw(),o(this.run.bind(this,t+1))}}else(n=this.endCallback)===null||n===void 0||n.call(this,this.prizes.find(function(b,m){return m===a})||{})},i.prototype.getWidth=function(t,n){return n===void 0&&(n=this.prizeRadian*this.prizeRadius),E(t,"number")?t:E(t,"string")?this.changeUnits(t,n):0},i.prototype.getHeight=function(t,n){return n===void 0&&(n=this.prizeRadius),E(t,"number")?t:E(t,"string")?this.changeUnits(t,n):0},i.prototype.getOffsetX=function(t){return-t/2},i.prototype.conversionAxis=function(t,n){var r=this.config;return[t/r.dpr-this.Radius,n/r.dpr-this.Radius]},i}(xe),Nr=function(e){function i(t,n){var r,o=e.call(this,t,{width:n.width,height:n.height})||this;return o.rows=3,o.cols=3,o.blocks=[],o.prizes=[],o.buttons=[],o.defaultConfig={},o.defaultStyle={},o.activeStyle={},o._defaultConfig={},o._defaultStyle={},o._activeStyle={},o.cellWidth=0,o.cellHeight=0,o.startTime=0,o.endTime=0,o.currIndex=0,o.stopIndex=0,o.endIndex=0,o.demo=!1,o.timer=0,o.FPS=16.6,o.step=0,o.prizeFlag=-1,o.cells=[],o.ImageCache={blocks:[],prizes:[],buttons:[]},o.initData(n),o.initWatch(),o.initComputed(),(r=t.beforeCreate)===null||r===void 0||r.call(o),o.init(),o}return ie(i,e),i.prototype.resize=function(){var t,n;e.prototype.resize.call(this),this.draw(),(n=(t=this.config).afterResize)===null||n===void 0||n.call(t)},i.prototype.initLucky=function(){this.cellWidth=0,this.cellHeight=0,this.startTime=0,this.endTime=0,this.currIndex=0,this.stopIndex=0,this.endIndex=0,this.demo=!1,this.timer=0,this.FPS=16.6,this.prizeFlag=-1,this.step=0,e.prototype.initLucky.call(this)},i.prototype.initData=function(t){this.$set(this,"width",t.width||"300px"),this.$set(this,"height",t.height||"300px"),this.$set(this,"rows",Number(t.rows)||3),this.$set(this,"cols",Number(t.cols)||3),this.$set(this,"blocks",t.blocks||[]),this.$set(this,"prizes",t.prizes||[]),this.$set(this,"buttons",t.buttons||[]),this.$set(this,"button",t.button),this.$set(this,"defaultConfig",t.defaultConfig||{}),this.$set(this,"defaultStyle",t.defaultStyle||{}),this.$set(this,"activeStyle",t.activeStyle||{}),this.$set(this,"startCallback",t.start),this.$set(this,"endCallback",t.end)},i.prototype.initComputed=function(){var t=this;this.$computed(this,"_defaultConfig",function(){var n=X({gutter:5,speed:20,accelerationTime:2500,decelerationTime:2500},t.defaultConfig);return n.gutter=t.getLength(n.gutter),n.speed=n.speed/40,n}),this.$computed(this,"_defaultStyle",function(){return X({borderRadius:20,fontColor:"#000",fontSize:"18px",fontStyle:"sans-serif",fontWeight:"400",background:"rgba(0,0,0,0)",shadow:"",wordWrap:!0,lengthLimit:"90%"},t.defaultStyle)}),this.$computed(this,"_activeStyle",function(){return X({background:"#ffce98",shadow:""},t.activeStyle)})},i.prototype.initWatch=function(){var t=this;this.$watch("width",function(n){t.data.width=n,t.resize()}),this.$watch("height",function(n){t.data.height=n,t.resize()}),this.$watch("blocks",function(n){t.initImageCache()},{deep:!0}),this.$watch("prizes",function(n){t.initImageCache()},{deep:!0}),this.$watch("buttons",function(n){t.initImageCache()},{deep:!0}),this.$watch("rows",function(){return t.init()}),this.$watch("cols",function(){return t.init()}),this.$watch("defaultConfig",function(){return t.draw()},{deep:!0}),this.$watch("defaultStyle",function(){return t.draw()},{deep:!0}),this.$watch("activeStyle",function(){return t.draw()},{deep:!0}),this.$watch("startCallback",function(){return t.init()}),this.$watch("endCallback",function(){return t.init()})},i.prototype.init=function(){var t,n;return at(this,void 0,void 0,function(){var r;return st(this,function(o){switch(o.label){case 0:return this.initLucky(),r=this.config,(t=r.beforeInit)===null||t===void 0||t.call(this),this.draw(),[4,this.initImageCache()];case 1:return o.sent(),(n=r.afterInit)===null||n===void 0||n.call(this),[2]}})})},i.prototype.initImageCache=function(){var t=this;return new Promise(function(n){var r=t.buttons.map(function(s){return s.imgs});t.button&&r.push(t.button.imgs);var o={blocks:t.blocks.map(function(s){return s.imgs}),prizes:t.prizes.map(function(s){return s.imgs}),buttons:r};Object.keys(o).forEach(function(s){var a=o[s],h=[];a&&a.forEach(function(u,c){u&&u.forEach(function(l,d){h.push(t.loadAndCacheImg(s,c,s,d))})}),Promise.all(h).then(function(){t.draw(),n()})})})},i.prototype.handleClick=function(t){var n=this,r=this.ctx;ut(ut([],this.buttons),[this.button]).forEach(function(o){var s;if(o){var a=n.getGeometricProperty([o.x,o.y,o.col||1,o.row||1]),h=a[0],u=a[1],c=a[2],l=a[3];r.beginPath(),r.rect(h,u,c,l),r.isPointInPath(t.offsetX,t.offsetY)&&n.step===0&&(typeof o.callback=="function"&&o.callback.call(n,o),(s=n.startCallback)===null||s===void 0||s.call(n,t,o))}})},i.prototype.loadAndCacheImg=function(t,n,r,o){return at(this,void 0,void 0,function(){var s=this;return st(this,function(a){return[2,new Promise(function(h,u){var c=s[t][n];if(t==="buttons"&&!s.buttons.length&&s.button&&(c=s.button),c&&c.imgs){var l=c.imgs[o];if(l){var d=s.ImageCache;d[r][n]||(d[r][n]=[]);var f=[s.loadImg(l.src,l),l.activeSrc&&s.loadImg(l.activeSrc,l,"$activeResolve")];Promise.all(f).then(function(v){var p=v[0],g=v[1],w=l.formatter;typeof w=="function"&&(p=w.call(s,p),g&&(g=w.call(s,g))),d[r][n][o]={defaultImg:p,activeImg:g},h()}).catch(function(v){console.error(t+"["+n+"].imgs["+o+"] "+v),u()})}}})]})})},i.prototype.computedWidthAndHeight=function(t,n,r){if(!n.width&&!n.height)return[t.width,t.height];if(n.width&&!n.height){var o=this.getWidth(n.width,r.col);return[o,t.height*(o/t.width)]}if(!n.width&&n.height){var s=this.getHeight(n.height,r.row);return[t.width*(s/t.height),s]}return[this.getWidth(n.width,r.col),this.getHeight(n.height,r.row)]},i.prototype.draw=function(){var t,n,r=this,o=this,s=o.config,a=o.ctx,h=o._defaultConfig,u=o._defaultStyle,c=o._activeStyle;(t=s.beforeDraw)===null||t===void 0||t.call(this,a),a.clearRect(0,0,this.boxWidth,this.boxHeight),this.cells=ut(ut([],this.prizes),this.buttons),this.button&&this.cells.push(this.button),this.cells.forEach(function(l){l.col=l.col||1,l.row=l.row||1}),this.prizeArea=this.blocks.reduce(function(l,d){var f=l.x,v=l.y,p=l.w,g=l.h,w=Li(d),b=w[0],m=w[1],y=w[2],C=w[3],k=d.borderRadius?r.getLength(d.borderRadius):0,S=d.background||u.background;return K(S)&&(a.fillStyle=r.handleBackground(f,v,p,g,S),It(a,f,v,p,g,k),a.fill()),{x:f+y,y:v+b,w:p-y-C,h:g-b-m}},{x:0,y:0,w:this.boxWidth,h:this.boxHeight}),this.cellWidth=(this.prizeArea.w-h.gutter*(this.cols-1))/this.cols,this.cellHeight=(this.prizeArea.h-h.gutter*(this.rows-1))/this.rows,this.cells.forEach(function(l,d){var f=r.getGeometricProperty([l.x,l.y,l.col,l.row]),v=f[0],p=f[1],g=f[2],w=f[3],b=!1;(r.prizeFlag===void 0||r.prizeFlag>-1)&&(b=d===r.currIndex%r.prizes.length>>0);var m=b?c.background:l.background||u.background;if(K(m)){var y=(b?c.shadow:l.shadow||u.shadow).replace(/px/g,"").split(",")[0].split(" ").map(function(S,z){return z<3?Number(S):S});y.length===4&&(a.shadowColor=y[3],a.shadowOffsetX=y[0]*s.dpr,a.shadowOffsetY=y[1]*s.dpr,a.shadowBlur=y[2],y[0]>0?g-=y[0]:(g+=y[0],v-=y[0]),y[1]>0?w-=y[1]:(w+=y[1],p-=y[1])),a.fillStyle=r.handleBackground(v,p,g,w,m);var C=r.getLength(l.borderRadius?l.borderRadius:u.borderRadius);It(a,v,p,g,w,C),a.fill(),a.shadowColor="rgba(0, 0, 0, 0)",a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=0}var k="prizes";d>=r.prizes.length&&(k="buttons",d-=r.prizes.length),l.imgs&&l.imgs.forEach(function(S,z){var $=r.ImageCache[k];if($[d]){var O=$[d][z];if(O){var I=b&&O.activeImg||O.defaultImg;if(I){var T=r.computedWidthAndHeight(I,S,l),_=T[0],W=T[1],P=[v+r.getOffsetX(_,l.col),p+r.getHeight(S.top,l.row)],N=P[0],lt=P[1];r.drawImage(a,I,N,lt,_,W)}}}}),l.fonts&&l.fonts.forEach(function(S){var z=b&&c.fontStyle?c.fontStyle:S.fontStyle||u.fontStyle,$=b&&c.fontWeight?c.fontWeight:S.fontWeight||u.fontWeight,O=b&&c.fontSize?r.getLength(c.fontSize):r.getLength(S.fontSize||u.fontSize),I=b&&c.lineHeight?c.lineHeight:S.lineHeight||u.lineHeight||S.fontSize||u.fontSize,T=Object.prototype.hasOwnProperty.call(S,"wordWrap")?S.wordWrap:u.wordWrap,_=S.lengthLimit||u.lengthLimit,W=S.lineClamp||u.lineClamp;a.font=$+" "+(O>>0)+"px "+z,a.fillStyle=b&&c.fontColor?c.fontColor:S.fontColor||u.fontColor;var P=[],N=String(S.text);if(T){var lt=r.getWidth(_,l.col);P=ze(a,Ce(N),function(){return lt},W)}else P=N.split(`
`);P.forEach(function(Tt,R){a.fillText(Tt,v+r.getOffsetX(a.measureText(Tt).width,l.col),p+r.getHeight(S.top,l.row)+(R+1)*r.getLength(I))})})}),(n=s.afterDraw)===null||n===void 0||n.call(this,a)},i.prototype.handleBackground=function(t,n,r,o,s){var a=this.ctx;return s.includes("linear-gradient")&&(s=function(h,u,c,l,d,f){var v=/linear-gradient\((.+)\)/.exec(f)[1].split(",").map(function(m){return m.trim()}),p=v.shift(),g=[0,0,0,0];if(p.includes("deg")){var w=function(m){return Math.tan(m/180*Math.PI)};(p=p.slice(0,-3)%360)>=0&&p<45?g=[u,c+d,u+l,c+d-l*w(p-0)]:p>=45&&p<90?g=[u,c+d,u+l-d*w(p-45),c]:p>=90&&p<135?g=[u+l,c+d,u+l-d*w(p-90),c]:p>=135&&p<180?g=[u+l,c+d,u,c+l*w(p-135)]:p>=180&&p<225?g=[u+l,c,u,c+l*w(p-180)]:p>=225&&p<270?g=[u+l,c,u+d*w(p-225),c+d]:p>=270&&p<315?g=[u,c,u+d*w(p-270),c+d]:p>=315&&p<360&&(g=[u,c,u+l,c+d-l*w(p-315)])}else p.includes("top")?g=[u,c+d,u,c]:p.includes("bottom")?g=[u,c,u,c+d]:p.includes("left")?g=[u+l,c,u,c]:p.includes("right")&&(g=[u,c,u+l,c]);var b=h.createLinearGradient.apply(h,g.map(function(m){return m>>0}));return v.reduce(function(m,y,C){var k=y.split(" ");return k.length===1?m.addColorStop(C,k[0]):k.length===2&&m.addColorStop.apply(m,k),m},b)}(a,t,n,r,o,s)),s},i.prototype.carveOnGunwaleOfAMovingBoat=function(){var t=this,n=t._defaultConfig,r=t.prizeFlag,o=t.currIndex;this.endTime=Date.now();for(var s=this.stopIndex=o,a=n.speed,h=0,u=0,c=0;++h;){var l=this.prizes.length*h+r-s,d=ht(this.FPS,s,l,n.decelerationTime)-s;if(d>a){this.endIndex=a-u>d-a?l:c;break}c=l,u=d}},i.prototype.play=function(){var t,n;this.step===0&&(this.startTime=Date.now(),this.prizeFlag=void 0,this.step=1,(n=(t=this.config).afterStart)===null||n===void 0||n.call(t),this.run())},i.prototype.stop=function(t){if(this.step!==0&&this.step!==3){if(!t&&t!==0){var n=this.prizes.map(function(r){return r.range});t=ji(n)}t<0?(this.step=0,this.prizeFlag=-1):(this.step=2,this.prizeFlag=t%this.prizes.length)}},i.prototype.run=function(t){var n;t===void 0&&(t=0);var r=this,o=r.rAF,s=r.step,a=r.prizes,h=r.prizeFlag,u=r.stopIndex,c=r.endIndex,l=r._defaultConfig,d=l.accelerationTime,f=l.decelerationTime,v=l.speed;if(s!==0){if(h!==-1){s!==3||this.endIndex||this.carveOnGunwaleOfAMovingBoat();var p=Date.now()-this.startTime,g=Date.now()-this.endTime,w=this.currIndex;if(s===1||p<d){this.FPS=p/t;var b=$e(p,.1,v-.1,d);b===v&&(this.step=2),w+=b%a.length}else s===2?(w+=v%a.length,h!==void 0&&h>=0&&(this.step=3,this.stopIndex=0,this.endIndex=0)):s===3?(w=ht(g,u,c,f),g>=f&&(this.step=0)):this.stop(-1);this.currIndex=w,this.draw(),o(this.run.bind(this,t+1))}}else(n=this.endCallback)===null||n===void 0||n.call(this,this.prizes.find(function(m,y){return y===h})||{})},i.prototype.getGeometricProperty=function(t){var n=t[0],r=t[1],o=t[2],s=o===void 0?1:o,a=t[3],h=a===void 0?1:a,u=this.cellWidth,c=this.cellHeight,l=this._defaultConfig.gutter,d=[this.prizeArea.x+(u+l)*n,this.prizeArea.y+(c+l)*r];return s&&h&&d.push(u*s+l*(s-1),c*h+l*(h-1)),d},i.prototype.getWidth=function(t,n){return n===void 0&&(n=1),E(t,"number")?t:E(t,"string")?this.changeUnits(t,this.cellWidth*n+this._defaultConfig.gutter*(n-1)):0},i.prototype.getHeight=function(t,n){return n===void 0&&(n=1),E(t,"number")?t:E(t,"string")?this.changeUnits(t,this.cellHeight*n+this._defaultConfig.gutter*(n-1)):0},i.prototype.getOffsetX=function(t,n){return n===void 0&&(n=1),(this.cellWidth*n+this._defaultConfig.gutter*(n-1)-t)/2},i.prototype.conversionAxis=function(t,n){var r=this.config;return[t/r.dpr,n/r.dpr]},i}(xe),Gr=function(e){function i(t,n){var r,o=e.call(this,t,{width:n.width,height:n.height})||this;return o.blocks=[],o.prizes=[],o.slots=[],o.defaultConfig={},o._defaultConfig={},o.defaultStyle={},o._defaultStyle={},o.endCallback=function(){},o.cellWidth=0,o.cellHeight=0,o.cellAndSpacing=0,o.widthAndSpacing=0,o.heightAndSpacing=0,o.FPS=16.6,o.scroll=[],o.stopScroll=[],o.endScroll=[],o.startTime=0,o.endTime=0,o.step=0,o.prizeFlag=void 0,o.ImageCache={blocks:[],prizes:[]},o.initData(n),o.initWatch(),o.initComputed(),(r=t.beforeCreate)===null||r===void 0||r.call(o),o.init(),o}return ie(i,e),i.prototype.resize=function(){var t,n;e.prototype.resize.call(this),this.draw(),(n=(t=this.config).afterResize)===null||n===void 0||n.call(t)},i.prototype.initLucky=function(){this.cellWidth=0,this.cellHeight=0,this.cellAndSpacing=0,this.widthAndSpacing=0,this.heightAndSpacing=0,this.FPS=16.6,this.scroll=[],this.stopScroll=[],this.endScroll=[],this.startTime=0,this.endTime=0,this.prizeFlag=void 0,this.step=0,e.prototype.initLucky.call(this)},i.prototype.initData=function(t){this.$set(this,"width",t.width||"300px"),this.$set(this,"height",t.height||"300px"),this.$set(this,"blocks",t.blocks||[]),this.$set(this,"prizes",t.prizes||[]),this.$set(this,"slots",t.slots||[]),this.$set(this,"defaultConfig",t.defaultConfig||{}),this.$set(this,"defaultStyle",t.defaultStyle||{}),this.$set(this,"endCallback",t.end)},i.prototype.initComputed=function(){var t=this;this.$computed(this,"_defaultConfig",function(){var n=X({mode:"vertical",rowSpacing:0,colSpacing:5,speed:20,direction:1,accelerationTime:2500,decelerationTime:2500},t.defaultConfig);return n.rowSpacing=t.getLength(n.rowSpacing),n.colSpacing=t.getLength(n.colSpacing),n}),this.$computed(this,"_defaultStyle",function(){return X({borderRadius:0,fontColor:"#000",fontSize:"18px",fontStyle:"sans-serif",fontWeight:"400",background:"rgba(0,0,0,0)",wordWrap:!0,lengthLimit:"90%"},t.defaultStyle)})},i.prototype.initWatch=function(){var t=this;this.$watch("width",function(n){t.data.width=n,t.resize()}),this.$watch("height",function(n){t.data.height=n,t.resize()}),this.$watch("blocks",function(n){t.initImageCache()},{deep:!0}),this.$watch("prizes",function(n){t.initImageCache()},{deep:!0}),this.$watch("slots",function(n){t.drawOffscreenCanvas(),t.draw()},{deep:!0}),this.$watch("defaultConfig",function(){return t.draw()},{deep:!0}),this.$watch("defaultStyle",function(){return t.draw()},{deep:!0}),this.$watch("endCallback",function(){return t.init()})},i.prototype.init=function(){var t,n;return at(this,void 0,void 0,function(){var r;return st(this,function(o){switch(o.label){case 0:return this.initLucky(),r=this.config,(t=r.beforeInit)===null||t===void 0||t.call(this),this.drawOffscreenCanvas(),this.draw(),[4,this.initImageCache()];case 1:return o.sent(),(n=r.afterInit)===null||n===void 0||n.call(this),[2]}})})},i.prototype.initImageCache=function(){var t=this;return new Promise(function(n){var r={blocks:t.blocks.map(function(o){return o.imgs}),prizes:t.prizes.map(function(o){return o.imgs})};Object.keys(r).forEach(function(o){var s=r[o],a=[];s&&s.forEach(function(h,u){h&&h.forEach(function(c,l){a.push(t.loadAndCacheImg(o,u,o,l))})}),Promise.all(a).then(function(){t.drawOffscreenCanvas(),t.draw(),n()})})})},i.prototype.loadAndCacheImg=function(t,n,r,o){return at(this,void 0,void 0,function(){var s=this;return st(this,function(a){return[2,new Promise(function(h,u){var c=s[t][n];if(c&&c.imgs){var l=c.imgs[o];if(l){var d=s.ImageCache;d[r][n]||(d[r][n]=[]),s.loadImg(l.src,l).then(function(f){typeof l.formatter=="function"&&(f=l.formatter.call(s,f)),d[r][n][o]=f,h()}).catch(function(f){console.error(t+"["+n+"].imgs["+o+"] "+f),u()})}}})]})})},i.prototype.computedWidthAndHeight=function(t,n,r,o){if(!n.width&&!n.height)return[t.width,t.height];if(n.width&&!n.height){var s=this.getWidth(n.width,r);return[s,t.height*(s/t.width)]}if(!n.width&&n.height){var a=this.getHeight(n.height,o);return[t.width*(a/t.height),a]}return[this.getWidth(n.width,r),this.getHeight(n.height,o)]},i.prototype.drawOffscreenCanvas=function(){var t=this,n=this._defaultConfig,r=this._defaultStyle,o=this.drawBlocks(),s=o.w,a=o.h,h=this.prizes.length,u=this.displacementWidthOrHeight(),c=u.cellWidth,l=u.cellHeight,d=u.widthAndSpacing,f=u.heightAndSpacing,v=new Array(h).fill(void 0).map(function(y,C){return C}),p=0,g=0;this.slots.forEach(function(y,C){t.scroll[C]===void 0&&(t.scroll[C]=0),y.order=y.order||v;var k=y.order.length;p=Math.max(p,s+d*k),g=Math.max(g,a+f*k)});var w=this.getOffscreenCanvas(p,g),b=w._offscreenCanvas,m=w._ctx;this._offscreenCanvas=b,this.slots.forEach(function(y,C){var k=c*C,S=l*C,z=0,$=function(R,rt){for(var _t={},At=[],H=0;H<R.length;H++)_t[H]=R[H];for(H=0;H<rt.length;H++){var ot=_t[rt[H]];ot&&(At[H]=ot)}return At}(t.prizes,y.order);if($.length){$.forEach(function(R,rt){if(R){var _t=y.order[rt],At=d*rt+n.colSpacing/2,H=f*rt+n.rowSpacing/2,ot=t.displacement([k,H,f],[At,S,d]),Vt=ot[0],Ut=ot[1],Bi=ot[2];z+=Bi;var Te=R.background||r.background;if(K(Te)){var Ni=t.getLength(Pi(R,"borderRadius")?R.borderRadius:r.borderRadius);It(m,Vt,Ut,c,c,Ni),m.fillStyle=Te,m.fill()}R.imgs&&R.imgs.forEach(function(L,Kt){var ft=Wi(t.ImageCache,"prizes."+_t+"."+Kt);if(ft){var Et=t.computedWidthAndHeight(ft,L,c,l),Wt=Et[0],Zt=Et[1],Pt=[Vt+t.getOffsetX(Wt,c),Ut+t.getHeight(L.top,l)],Jt=Pt[0],dt=Pt[1];t.drawImage(m,ft,Jt,dt,Wt,Zt)}}),R.fonts&&R.fonts.forEach(function(L){var Kt=L.fontStyle||r.fontStyle,ft=L.fontWeight||r.fontWeight,Et=t.getLength(L.fontSize||r.fontSize),Wt=L.lineHeight||r.lineHeight||L.fontSize||r.fontSize,Zt=Object.prototype.hasOwnProperty.call(L,"wordWrap")?L.wordWrap:r.wordWrap,Pt=L.lengthLimit||r.lengthLimit,Jt=L.lineClamp||r.lineClamp;m.font=ft+" "+(Et>>0)+"px "+Kt,m.fillStyle=L.fontColor||r.fontColor;var dt=[],_e=String(L.text);if(Zt){var Gi=t.getWidth(Pt,c);dt=ze(m,Ce(_e),function(){return Gi},Jt)}else dt=_e.split(`
`);dt.forEach(function(Ae,Xi){m.fillText(Ae,Vt+t.getOffsetX(m.measureText(Ae).width,c),Ut+t.getHeight(L.top,l)+(Xi+1)*t.getLength(Wt))})})}});for(var O=t.displacement([k,0,c,z],[0,S,z,l]),I=O[0],T=O[1],_=O[2],W=O[3],P=z;P<g+z;){var N=t.displacement([I,P],[P,T]),lt=N[0],Tt=N[1];t.drawImage(m,b,I,T,_,W,lt,Tt,_,W),P+=z}}})},i.prototype.drawBlocks=function(){var t=this,n=this;n.config;var r=n.ctx;n._defaultConfig;var o=n._defaultStyle;return this.prizeArea=this.blocks.reduce(function(s,a,h){var u=s.x,c=s.y,l=s.w,d=s.h,f=Li(a),v=f[0],p=f[1],g=f[2],w=f[3],b=a.borderRadius?t.getLength(a.borderRadius):0,m=a.background||o.background;return K(m)&&(It(r,u,c,l,d,b),r.fillStyle=m,r.fill()),a.imgs&&a.imgs.forEach(function(y,C){var k=Wi(t.ImageCache,"blocks."+h+"."+C);if(k){var S=t.computedWidthAndHeight(k,y,l,d),z=S[0],$=S[1],O=[t.getOffsetX(z,l),t.getHeight(y.top,d)],I=O[0],T=O[1];t.drawImage(r,k,u+I,c+T,z,$)}}),{x:u+g,y:c+v,w:l-g-w,h:d-v-p}},{x:0,y:0,w:this.boxWidth,h:this.boxHeight})},i.prototype.draw=function(){var t,n=this,r=this,o=r.config,s=r.ctx;r._defaultConfig,r._defaultStyle,(t=o.beforeDraw)===null||t===void 0||t.call(this,s),s.clearRect(0,0,this.boxWidth,this.boxHeight);var a=this.drawBlocks(),h=a.x,u=a.y,c=a.w,l=a.h;if(this._offscreenCanvas){var d=this,f=d.cellWidth,v=d.cellHeight,p=d.cellAndSpacing,g=d.widthAndSpacing,w=d.heightAndSpacing;this.slots.forEach(function(b,m){var y=p*b.order.length,C=n.displacement(-(l-w)/2,-(c-g)/2),k=n.scroll[m]+C;k<0&&(k=k%y+y),k>y&&(k%=y);var S=n.displacement([f*m,k,f,l],[k,v*m,c,v]),z=S[0],$=S[1],O=S[2],I=S[3],T=n.displacement([h+g*m,u,f,l],[h,u+w*m,c,v]),_=T[0],W=T[1],P=T[2],N=T[3];n.drawImage(s,n._offscreenCanvas,z,$,O,I,_,W,P,N)})}},i.prototype.carveOnGunwaleOfAMovingBoat=function(){var t=this,n=this,r=n._defaultConfig,o=n.prizeFlag,s=n.cellAndSpacing;this.endTime=Date.now(),this.slots.forEach(function(a,h){var u=a.order;if(u.length)for(var c=a.speed||r.speed,l=a.direction||r.direction,d=u.findIndex(function(b){return b===o[h]}),f=s*u.length,v=t.stopScroll[h]=t.scroll[h],p=0;++p;){var g=s*d+f*p*l-v,w=ht(t.FPS,v,g,r.decelerationTime)-v;if(Math.abs(w)>c){t.endScroll[h]=g;break}}})},i.prototype.play=function(){this.step===0&&(this.startTime=Date.now(),this.prizeFlag=void 0,this.step=1,this.run())},i.prototype.stop=function(t){var n;if(this.step!==0&&this.step!==3){if(typeof t=="number")this.prizeFlag=new Array(this.slots.length).fill(t);else{if(!E(t,"array"))return this.stop(-1),console.error("stop() \u65E0\u6CD5\u8BC6\u522B\u7684\u53C2\u6570\u7C7B\u578B "+typeof t);if(t.length!==this.slots.length)return this.stop(-1),console.error("stop(["+t+"]) \u53C2\u6570\u957F\u5EA6\u7684\u4E0D\u6B63\u786E");this.prizeFlag=t}((n=this.prizeFlag)===null||n===void 0?void 0:n.includes(-1))?(this.prizeFlag=[],this.step=0):this.step=2}},i.prototype.run=function(t){var n,r,o=this;t===void 0&&(t=0);var s=this,a=s.rAF,h=s.step,u=s.prizeFlag,c=s._defaultConfig,l=s.cellAndSpacing,d=s.slots,f=c.accelerationTime,v=c.decelerationTime;if(this.step!==0||(u==null?void 0:u.length)!==d.length){if(u===void 0||u.length){this.step!==3||this.endScroll.length||this.carveOnGunwaleOfAMovingBoat();var p=Date.now()-this.startTime,g=Date.now()-this.endTime;d.forEach(function(C,k){var S=C.order;if(S&&S.length){var z=l*S.length,$=Math.abs(C.speed||c.speed),O=C.direction||c.direction,I=0,T=o.scroll[k];if(h===1||p<f){o.FPS=p/t;var _=$e(p,0,$,f);_===$&&(o.step=2),I=(T+_*O)%z}else if(h===2)I=(T+$*O)%z,(u==null?void 0:u.length)===d.length&&(o.step=3,o.stopScroll=[],o.endScroll=[]);else if(h===3&&g){var W=o.stopScroll[k],P=o.endScroll[k];I=ht(g,W,P,v),g>=v&&(o.step=0)}o.scroll[k]=I}}),this.draw(),a(this.run.bind(this,t+1))}}else{for(var w=u[0],b=0;b<d.length;b++){var m=d[b],y=u[b];if(!((n=m.order)===null||n===void 0?void 0:n.includes(y))||w!==y){w=-1;break}}(r=this.endCallback)===null||r===void 0||r.call(this,this.prizes.find(function(C,k){return k===w})||void 0)}},i.prototype.displacement=function(t,n){return this._defaultConfig.mode==="horizontal"?n:t},i.prototype.displacementWidthOrHeight=function(){var t=this._defaultConfig.mode,n=this.slots.length,r=this._defaultConfig,o=r.colSpacing,s=r.rowSpacing,a=this.prizeArea||this.drawBlocks();a.x,a.y;var h,u,c=a.w,l=a.h,d=0,f=0;return t==="horizontal"?(f=this.cellHeight=(l-s*(n-1))/n,d=this.cellWidth=f):(d=this.cellWidth=(c-o*(n-1))/n,f=this.cellHeight=d),h=this.widthAndSpacing=this.cellWidth+o,u=this.heightAndSpacing=this.cellHeight+s,this.cellAndSpacing=t==="horizontal"?h:u,{cellWidth:d,cellHeight:f,widthAndSpacing:h,heightAndSpacing:u}},i.prototype.getWidth=function(t,n){return E(t,"number")?t:E(t,"string")?this.changeUnits(t,n):0},i.prototype.getHeight=function(t,n){return E(t,"number")?t:E(t,"string")?this.changeUnits(t,n):0},i.prototype.getOffsetX=function(t,n){return(n-t)/2},i}(xe),Oe=function(e,i,t){i===void 0&&(i={}),je;var n=i.props,r=i.domProps,o=i.on,s=function(u,c){var l={};for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&c.indexOf(d)<0&&(l[d]=u[d]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function"){var f=0;for(d=Object.getOwnPropertySymbols(u);f<d.length;f++)c.indexOf(d[f])<0&&Object.prototype.propertyIsEnumerable.call(u,d[f])&&(l[d[f]]=u[d[f]])}return l}(i,["props","domProps","on"]),a=function(u){return u?Object.entries(u).reduce(function(c,l){var d,f=l[0],v=l[1];return f="on"+(f=f.charAt(0).toUpperCase()+f.slice(1)),F(F({},c),((d={})[f]=v,d))},{}):null}(o),h=F(F(F(F({},s),n),r),a);return Ji(e,h,t)},Ie="@lucky-canvas/vue",Mi=Lt({name:"LuckyWheel",props:{width:{type:[String,Number],default:"300px",require:!0},height:{type:[String,Number],default:"300px",require:!0},blocks:{type:Array,default:function(){return[]}},prizes:{type:Array,default:function(){return[]}},buttons:{type:Array,default:function(){return[]}},defaultStyle:{type:Object,default:function(){return{}}},defaultConfig:{type:Object,default:function(){return{}}}},emits:["start","end","success","error","finally"],watch:{blocks:function(e,i){this.$lucky&&(this.$lucky.blocks=e)},prizes:function(e,i){this.$lucky&&(this.$lucky.prizes=e)},buttons:function(e,i){this.$lucky&&(this.$lucky.buttons=e)}},data:function(){return{$lucky:null}},mounted:function(){this.$refs.myLucky&&this.$refs.myLucky.setAttribute("package",Ie+"@0.1.6");try{this.initLucky(),this.$emit("success")}catch(e){this.$emit("error",e)}finally{this.$emit("finally")}},methods:{initLucky:function(){var e=this;this.$lucky=new Br({flag:"WEB",width:String(this.width),height:String(this.height),divElement:this.$refs.myLucky,rAF:window.requestAnimationFrame,setTimeout:window.setTimeout,setInterval:window.setInterval,clearTimeout:window.clearTimeout,clearInterval:window.clearInterval},F(F({},this.$props),{start:function(i){e.$emit("start",i)},end:function(i){e.$emit("end",i)}}))},init:function(){this.$lucky&&this.$lucky.init()},play:function(){var e;(e=this.$lucky)===null||e===void 0||e.play()},stop:function(e){var i;(i=this.$lucky)===null||i===void 0||i.stop(e)}},render:function(){return Oe("div",{ref:"myLucky"})}}),Xr=Lt({name:"LuckyGrid",props:{width:{type:[String,Number],default:"300px",require:!0},height:{type:[String,Number],default:"300px",require:!0},cols:{type:[String,Number],default:3},rows:{type:[String,Number],default:3},blocks:{type:Array,default:function(){return[]}},prizes:{type:Array,default:function(){return[]}},buttons:{type:Array,default:function(){return[]}},button:{type:Object},defaultStyle:{type:Object,default:function(){return{}}},activeStyle:{type:Object,default:function(){return{}}},defaultConfig:{type:Object,default:function(){return{}}}},emits:["start","end","success","error","finally"],watch:{cols:function(e,i){this.$lucky&&(this.$lucky.cols=e)},rows:function(e,i){this.$lucky&&(this.$lucky.rows=e)},blocks:function(e,i){this.$lucky&&(this.$lucky.blocks=e)},prizes:function(e,i){this.$lucky&&(this.$lucky.prizes=e)},buttons:function(e,i){this.$lucky&&(this.$lucky.buttons=e)},button:function(e,i){this.$lucky&&(this.$lucky.button=e)}},data:function(){return{$lucky:null}},mounted:function(){this.$refs.myLucky&&this.$refs.myLucky.setAttribute("package",Ie+"@0.1.6");try{this.initLucky(),this.$emit("success")}catch(e){this.$emit("error",e)}finally{this.$emit("finally")}},methods:{initLucky:function(){var e=this;this.$lucky=new Nr({flag:"WEB",width:String(this.width),height:String(this.height),divElement:this.$refs.myLucky,rAF:window.requestAnimationFrame,setTimeout:window.setTimeout,setInterval:window.setInterval,clearTimeout:window.clearTimeout,clearInterval:window.clearInterval},F(F({},this.$props),{start:function(i,t){e.$emit("start",i,t)},end:function(i){e.$emit("end",i)}}))},init:function(){this.$lucky&&this.$lucky.init()},play:function(){var e;(e=this.$lucky)===null||e===void 0||e.play()},stop:function(e){var i;(i=this.$lucky)===null||i===void 0||i.stop(e)}},render:function(){return Oe("div",{ref:"myLucky"})}}),qr=Lt({name:"SlotMachine",props:{width:{type:[String,Number],default:"300px",require:!0},height:{type:[String,Number],default:"300px",require:!0},blocks:{type:Array,default:function(){return[]}},prizes:{type:Array,default:function(){return[]}},slots:{type:Array,default:function(){return[]}},defaultStyle:{type:Object,default:function(){return{}}},defaultConfig:{type:Object,default:function(){return{}}}},watch:{blocks:function(e,i){this.$lucky&&(this.$lucky.blocks=e)},slots:function(e,i){this.$lucky&&(this.$lucky.slots=e)},prizes:function(e,i){this.$lucky&&(this.$lucky.prizes=e)}},data:function(){return{$lucky:null}},mounted:function(){this.$refs.myLucky&&this.$refs.myLucky.setAttribute("package",Ie+"@0.1.6");try{this.initLucky(),this.$emit("success")}catch(e){this.$emit("error",e)}finally{this.$emit("finally")}},methods:{initLucky:function(){var e=this;this.$lucky=new Gr({flag:"WEB",width:String(this.width),height:String(this.height),divElement:this.$refs.myLucky,rAF:window.requestAnimationFrame,setTimeout:window.setTimeout,setInterval:window.setInterval,clearTimeout:window.clearTimeout,clearInterval:window.clearInterval},F(F({},this.$props),{start:function(i){e.$emit("start",i)},end:function(i){e.$emit("end",i)}}))},init:function(){this.$lucky&&this.$lucky.init()},play:function(){var e;(e=this.$lucky)===null||e===void 0||e.play()},stop:function(e){var i;(i=this.$lucky)===null||i===void 0||i.stop(e)}},render:function(){return Oe("div",{ref:"myLucky"})}}),Vr=function(e){e.component("LuckyWheel",Mi),e.component("LuckyGrid",Xr),e.component("SlotMachine",qr)};typeof window!="undefined"&&window.Vue&&je&&Vr(window.Vue);const Ur=Lt({name:"randomList",components:{Tag:Yi,Tooltip:Qi,Input:tn,Typography:en,Divider:nn,Plus:rn,LuckyWheel:Mi},data:()=>({tags:[],inputValue:"",inputVisible:!1,loading:!1,blocks:[{padding:"10px",background:"#869cfa"}],buttons:[{radius:"40%",background:"#617df2"},{radius:"35%",background:"#afc8ff"},{radius:"30%",background:"#869cfa",pointer:!0,fonts:[{text:"\u5F00\u59CB",top:"-10px"}]}]}),computed:Qt(Yt({},on(["getData"])),{prizes:function(){const e=["#e9e8fe","#b8c5f2"];return this.tags.map((i,t)=>({background:e[t%2],fonts:[{text:i}]}))}}),mounted(){this.tags=(this.getData("randomList")||{}).tags||[]},watch:{},beforeUnmount(){},methods:Qt(Yt({},an(["setData"])),{startCallBack(){this.loading=!0,this.$refs.myLucky.play(),setTimeout(()=>{this.$refs.myLucky.stop(sn(this.tags.length))},3e3)},endCallBack(e){un.success({title:()=>`\u62BD\u4E2D\u4E86 \u300E${e.fonts[0].text}\u300F`,onOk:()=>{this.$refs.myLucky.init(),this.loading=!1}})},updateCache(){this.setData({key:"randomList",val:{tags:this.tags}})},handleClose(e){this.tags=this.tags.filter(i=>i!==e),this.updateCache()},showInput(){this.inputVisible=!0,this.$nextTick(()=>{this.$refs.inputRef.focus()})},handleInputConfirm(){const e=this.inputValue;e&&this.tags.indexOf(e)===-1&&(this.tags=[...this.tags,e]),this.inputVisible=!1,this.inputValue="",this.updateCache()}})}),Kr=e=>(ln("data-v-79886922"),e=e(),fn(),e),Zr=Kr(()=>dn("h4",null,"\u968F\u673A\u5217\u8868",-1)),Jr=te(" \u65B0\u5185\u5BB9 ");function Yr(e,i,t,n,r,o){const s=Z("Typography"),a=Z("Tag"),h=Z("Tooltip"),u=Z("Input"),c=Z("Plus"),l=Z("Divider"),d=Z("LuckyWheel");return G(),pt(vt,null,[gt(s,null,{default:yt(()=>[Zr]),_:1}),(G(!0),pt(vt,null,cn(e.tags,(f,v)=>(G(),pt(vt,{key:v},[f.length>20?(G(),jt(h,{key:0,title:f},{default:yt(()=>[gt(a,{closable:!e.loading,onClose:p=>e.handleClose(f)},{default:yt(()=>[te(Pe(`${f.slice(0,20)}...`),1)]),_:2},1032,["closable","onClose"])]),_:2},1032,["title"])):(G(),jt(a,{key:1,closable:!e.loading,onClose:p=>e.handleClose(f)},{default:yt(()=>[te(Pe(f),1)]),_:2},1032,["closable","onClose"]))],64))),128)),e.loading?Le("",!0):(G(),pt(vt,{key:0},[e.inputVisible?(G(),jt(u,{key:0,ref:"inputRef",type:"text",size:"small",style:{width:"78px"},value:e.inputValue,"onUpdate:value":i[0]||(i[0]=f=>e.inputValue=f),onBlur:e.handleInputConfirm,onKeyup:hn(e.handleInputConfirm,["enter"])},null,8,["value","onBlur","onKeyup"])):(G(),jt(a,{key:1,onClick:e.showInput,style:{background:"#fff","border-style":"dashed"}},{default:yt(()=>[gt(c,{theme:"outline"}),Jr]),_:1},8,["onClick"]))],64)),e.tags.length?(G(),pt(vt,{key:1},[gt(l),gt(d,{ref:"myLucky",width:"200px",height:"200px",blocks:e.blocks,prizes:e.prizes,buttons:e.buttons,onStart:e.startCallBack,onEnd:e.endCallBack},null,8,["blocks","prizes","buttons","onStart","onEnd"])],64)):Le("",!0)],64)}var ro=pn(Ur,[["render",Yr],["__scopeId","data-v-79886922"]]);export{ro as default};
