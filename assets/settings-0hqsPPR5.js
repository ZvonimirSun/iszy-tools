import{k as N,Q as h,aw as S,E,r as w,q as P,G as U,x as n,w as l,N as u,K as t,F as m,a0 as x,J as D,n as q,s as J,aB as K,R as B,a4 as F,H as C,L as M,X as L,W as Q,aA as I,P as W,at as X,Y,bl as z}from"./index-w7TCLGKA.js";import{E as j}from"./el-divider-Bg3gZdsK.js";import{E as T}from"./el-space-CPEcZ4be.js";import{E as G}from"./el-checkbox-DKDbFMWO.js";import{T as b,u as Z}from"./Router-Bi3Fictt.js";import{E as ee}from"./el-popover-Byp37P6P.js";import"./el-popper-uUMWk3U4.js";import{E as te}from"./el-dialog-Clc8Ts50.js";import{a as oe,E as le}from"./el-form-item-CmDPJEEH.js";import{E as se,a as ne}from"./el-radio-group-DCRYRFOG.js";/* empty css                 */import"./index-BXMAFBfg.js";import"./isUndefined-DCTLXrZ8.js";import"./castArray-B5gwZRA9.js";import"./clone-MGzO6PYW.js";const ae=N({__name:"jsonEditor",setup(_){const a=h(),p=S(),d=a.modules.jsonEditor;return(s,o)=>{const c=b,f=G,V=T;return w(),E("div",null,[n(p).logged?(w(),P(c,{key:0,level:5},{default:l(()=>o[1]||(o[1]=[u(" JSON 编辑器 ")])),_:1})):U("",!0),n(p).logged?(w(),P(V,{key:1},{default:l(()=>[t(f,{modelValue:n(d).syncCloud,"onUpdate:modelValue":o[0]||(o[0]=i=>n(d).syncCloud=i)},{default:l(()=>o[2]||(o[2]=[u(" 从云端获取 ")])),_:1},8,["modelValue"])]),_:1})):U("",!0)])}}}),re={"w-full":"","overflow-auto":""},ie={"gap-4":"",class:"settings-wrapper"},de=N({__name:"toolSettings",setup(_){return(a,p)=>{const d=b;return w(),E("div",re,[t(d,{level:4},{default:l(()=>p[0]||(p[0]=[u(" 应用设置 ")])),_:1}),m("div",ie,[t(ae)])])}}}),ue=x(de,[["__scopeId","data-v-730637d2"]]),pe=N({inheritAttrs:!1,__name:"HaveAccess",props:{auth:{type:[Boolean,Object],default:!1},link:{default:""}},setup(_){const a=_,p=S(),d=Z(),s=D(),o=q(()=>a.auth?typeof a.auth=="boolean"?p.logged:p.checkAccess(a.auth):a.link?p.checkAccess(d.getAuth(a.link)):!0);function c(){a.link&&s.push(a.link)}return(f,V)=>n(o)?J(f.$slots,"default",K({key:0},f.$attrs,{goto:c})):U("",!0)}}),me={flex:"","flex-col":"","items-start":"","gap-4":"","text-7":""},fe={flex:""},_e={flex:""},ce={flex:""},ge={class:"dialog-footer"},we=N({__name:"personalInfo",setup(_){const a=S(),p=B(!1),d=B(),s=F({userName:"",nickName:"",email:"",passwd:"",rePasswd:"",oldPasswd:""}),o=F({userName:[{trigger:"change",validator:(i,e,r)=>{e&&!e.trim()?r(new Error("用户名无效")):r()}}],nickName:[{trigger:"change",validator:(i,e,r)=>{e&&!e.trim()?r(new Error("昵称无效")):r()}}],rePasswd:[{trigger:"change",validator:(i,e,r)=>{e&&e!==s.passwd?r(new Error("两次输入的密码不一致")):r()}}]});function c(){s.userName=a.profile.userName??"",s.nickName=a.profile.nickName??"",s.email=a.profile.email??"",s.passwd="",s.rePasswd="",s.oldPasswd="",p.value=!0}function f(){p.value=!1}async function V(i){i&&await i.validate(async e=>{if(e){const r={};if(s.userName&&(r.userName=s.userName),s.nickName&&(r.nickName=s.nickName),s.email&&(r.email=s.email),s.passwd&&(r.passwd=s.passwd,s.oldPasswd&&(r.oldPasswd=s.oldPasswd)),Object.keys(r).length===0){I.warning("没有需要修改的信息");return}try{await a.updateUser(r)}catch(v){I.error(v.message)}p.value=!1}else I.warning("请检查输入")})}return(i,e)=>{var R,A,O;const r=b,v=M,k=Q,y=le,$=oe,H=te;return w(),E("div",null,[t(r,{level:4},{default:l(()=>e[7]||(e[7]=[u(" 账户信息 ")])),_:1}),m("div",me,[m("div",fe,[e[8]||(e[8]=m("div",{"w-32":""}," 昵称: ",-1)),m("div",null,C(n(a).profile.nickName),1)]),m("div",_e,[e[9]||(e[9]=m("div",{"w-32":""}," 邮箱: ",-1)),m("div",null,C(n(a).profile.email),1)]),m("div",ce,[e[10]||(e[10]=m("div",{"w-32":""}," 角色 ",-1)),m("div",null,C(((O=(A=(R=n(a).profile)==null?void 0:R.roles)==null?void 0:A[0])==null?void 0:O.alias)??"注册用户"),1)]),t(v,{onClick:c},{default:l(()=>e[11]||(e[11]=[u(" 修改信息 ")])),_:1})]),t(H,{modelValue:n(p),"onUpdate:modelValue":e[6]||(e[6]=g=>L(p)?p.value=g:null),title:"修改信息","before-close":f},{footer:l(()=>[m("span",ge,[t(v,{onClick:f},{default:l(()=>e[12]||(e[12]=[u("取消")])),_:1}),t(v,{type:"primary",onClick:e[5]||(e[5]=g=>V(n(d)))},{default:l(()=>e[13]||(e[13]=[u(" 保存 ")])),_:1})])]),default:l(()=>[t($,{ref_key:"ruleFormRef",ref:d,model:n(s),rules:n(o),"label-width":"8rem","label-position":"left"},{default:l(()=>[t(y,{label:"昵称",prop:"nickName"},{default:l(()=>[t(k,{modelValue:n(s).nickName,"onUpdate:modelValue":e[0]||(e[0]=g=>n(s).nickName=g)},null,8,["modelValue"])]),_:1}),t(y,{label:"邮箱",prop:"email"},{default:l(()=>[t(k,{modelValue:n(s).email,"onUpdate:modelValue":e[1]||(e[1]=g=>n(s).email=g)},null,8,["modelValue"])]),_:1}),t(y,{label:"旧密码",prop:"oldPasswd"},{default:l(()=>[t(k,{modelValue:n(s).oldPasswd,"onUpdate:modelValue":e[2]||(e[2]=g=>n(s).oldPasswd=g),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(y,{label:"新密码",prop:"passwd"},{default:l(()=>[t(k,{modelValue:n(s).passwd,"onUpdate:modelValue":e[3]||(e[3]=g=>n(s).passwd=g),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),t(y,{label:"确认密码",prop:"rePasswd"},{default:l(()=>[t(k,{modelValue:n(s).rePasswd,"onUpdate:modelValue":e[4]||(e[4]=g=>n(s).rePasswd=g),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}}),ve=x(we,[["__scopeId","data-v-d189005c"]]),Ve=W("main",{persist:!0,state:()=>({_cache:{},clearOfflineCacheTag:!1}),getters:{getData:_=>a=>{if(a)return(_._cache||{})[a]}},actions:{setData({key:_,val:a}={}){_&&(this._cache=this._cache||{},this._cache[_]=a)},clear(){this._cache={}},clearOfflineCache(){console.log("clearOfflineCache"),this.clearOfflineCacheTag=!0}}}),ke={flex:"","items-center":"","gap-4":""},ye=N({__name:"authInfo",setup(_){const a=D(),p=X(),d=S(),s=()=>Ve().clearOfflineCache();function o(){a.push({path:"/login",query:{redirect:p.fullPath}})}function c(){a.push("/register")}function f(){a.push("/logout")}return(V,i)=>{const e=M,r=pe,v=ee,k=j,y=T;return n(d).logged?(w(),E(Y,{key:0},[m("div",ke,[t(e,{type:"primary",onClick:f},{default:l(()=>i[0]||(i[0]=[u(" 登出 ")])),_:1}),t(r,{link:"/userManager"},{default:l(({goto:$})=>[t(e,{onClick:$},{default:l(()=>i[1]||(i[1]=[u(" 用户权限中心 ")])),_:2},1032,["onClick"])]),_:1}),t(v,{title:"您是否确定要清空本地缓存？","confirm-button-text":"清空",onConfirm:s},{reference:l(()=>[t(e,{type:"danger",plain:""},{default:l(()=>i[2]||(i[2]=[u(" 清空本地缓存 ")])),_:1})]),_:1})]),t(k),t(ve)],64)):(w(),P(y,{key:1,"mt-4":""},{default:l(()=>[t(e,{type:"primary",onClick:o},{default:l(()=>i[3]||(i[3]=[u(" 登录 ")])),_:1}),t(e,{onClick:c},{default:l(()=>i[4]||(i[4]=[u(" 注册 ")])),_:1}),t(v,{title:"您是否确定要清空本地缓存？","confirm-button-text":"清空",onConfirm:s},{reference:l(()=>[t(e,{type:"danger",plain:""},{default:l(()=>i[5]||(i[5]=[u(" 清空本地缓存 ")])),_:1})]),_:1})]),_:1}))}}}),Ne=x(ye,[["__scopeId","data-v-304747f8"]]),Ee={class:"settings-wrapper"},Se=N({__name:"globalSettings",setup(_){const a=h(),p=z(),d=a.general;return(s,o)=>{const c=b,f=ne,V=se,i=T,e=G;return w(),E("div",Ee,[t(c,{level:4},{default:l(()=>o[5]||(o[5]=[u(" 全局设置 ")])),_:1}),t(c,{level:5},{default:l(()=>o[6]||(o[6]=[u(" 外观 ")])),_:1}),t(i,null,{default:l(()=>[t(V,{"model-value":n(d).theme.mode,onChange:n(p).setTheme},{default:l(()=>[t(f,{value:"auto",label:"跟随系统"}),t(f,{value:"light",label:"浅色"}),t(f,{value:"dark",label:"深色"})]),_:1},8,["model-value","onChange"])]),_:1}),t(c,{level:5},{default:l(()=>o[7]||(o[7]=[u(" 访问统计 ")])),_:1}),t(i,null,{default:l(()=>[t(e,{modelValue:n(d).showMost,"onUpdate:modelValue":o[0]||(o[0]=r=>n(d).showMost=r)},{default:l(()=>o[8]||(o[8]=[u(" 最常访问 ")])),_:1},8,["modelValue"]),t(e,{modelValue:n(d).showRecent,"onUpdate:modelValue":o[1]||(o[1]=r=>n(d).showRecent=r)},{default:l(()=>o[9]||(o[9]=[u(" 最近访问 ")])),_:1},8,["modelValue"])]),_:1}),t(c,{level:5},{default:l(()=>o[10]||(o[10]=[u(" 其他设置 ")])),_:1}),t(i,null,{default:l(()=>[t(e,{modelValue:n(d).showSearch,"onUpdate:modelValue":o[2]||(o[2]=r=>n(d).showSearch=r)},{default:l(()=>o[11]||(o[11]=[u(" 显示搜索 ")])),_:1},8,["modelValue"]),t(e,{modelValue:n(d).showType,"onUpdate:modelValue":o[3]||(o[3]=r=>n(d).showType=r)},{default:l(()=>o[12]||(o[12]=[u(" 显示分类 ")])),_:1},8,["modelValue"]),t(e,{modelValue:n(d).openInNewTab,"onUpdate:modelValue":o[4]||(o[4]=r=>n(d).openInNewTab=r)},{default:l(()=>o[13]||(o[13]=[u(" 新标签页打开工具 ")])),_:1},8,["modelValue"])]),_:1})])}}}),xe=x(Se,[["__scopeId","data-v-f2fa67ef"]]),be={flex:"","flex-wrap":"","items-start":"","gap-4":""},Ce=N({__name:"settings",setup(_){const a=S();return(p,d)=>{const s=b,o=j;return w(),E("div",null,[n(a).logged?(w(),P(s,{key:0,level:3},{default:l(()=>[u(C(n(a).profile.nickName)+" 欢迎你~ ",1)]),_:1})):U("",!0),t(Ne),t(o),m("div",be,[t(xe),t(ue,{"flex-1":""})])])}}}),He=x(Ce,[["__scopeId","data-v-0add9d51"]]);export{He as default};
