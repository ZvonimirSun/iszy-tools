var N=Object.defineProperty;var C=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;var y=(e,t,o)=>t in e?N(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,g=(e,t)=>{for(var o in t||(t={}))S.call(t,o)&&y(e,o,t[o]);if(C)for(var o of C(t))L.call(t,o)&&y(e,o,t[o]);return e};import{a0 as O,ag as R,ah as B,ai as M,aj as q,ak as T,al as J,i as E,am as b,an as U,ao as V,ap as W,aq as F,c as P,a as _,f as s,x as c,E as A,ar as G,r as f,o as H,G as h}from"./vendor.c45c2a3c.js";import{J as v}from"./jsoneditor.min.7f453bf1.js";import{c as $}from"./createFile.2db54a0b.js";/* empty css                *//* empty css               */import{_ as I}from"./index.29b6224a.js";let n,i,d={Array:[1,2,3],Boolean:!0,Null:null,Number:123,Object:{a:"b",c:"d"},String:"Hello World"},l={Array:[1,2,3],Boolean:!0,Null:null,Number:123,Object:{a:"b",c:"d"},String:"Hello World"};const z={name:"JsonEditor",components:{Button:O,Space:R,Checkbox:B,Right:M,Left:q,CodeDownload:T},data:()=>({diff:!1}),computed:g({},J(["getData"])),mounted(){this.init()},methods:g({init(){this.getData("jsonEditor")&&(this.getData("jsonEditor").left&&(d=this.getData("jsonEditor").left),this.getData("jsonEditor").right&&(l=this.getData("jsonEditor").right)),n=new v(this.$refs.jsonEditorLeft,{mode:"code",modes:["code","tree","text","preview"],onClassName:this.onClassName,onChangeText:e=>{try{d=JSON.parse(e),i.refresh(),this.save()}catch{}},autocomplete:{applyTo:["value"],filter:"contain",trigger:"focus",getOptions:(e,t,o,p)=>new Promise((u,a)=>{const r=this.extractUniqueWords(p.get());r.length>0?u(r):a(new Error("noOptions"))})}},d),i=new v(this.$refs.jsonEditorRight,{mode:"tree",modes:["code","tree","text","preview"],onClassName:this.onClassName,onChangeText:e=>{try{l=JSON.parse(e),n.refresh(),this.save()}catch{}},autocomplete:{applyTo:["value"],filter:"contain",trigger:"focus",getOptions:(e,t,o,p)=>new Promise((u,a)=>{const r=this.extractUniqueWords(p.get());r.length>0?u(r):a(new Error("noOptions"))})}},l)},copyRight(){l=E(d),i.update(l),n.refresh(),this.save()},copyLeft(){d=E(l),n.update(d),i.refresh(),this.save()},async save(){try{await this.setData({key:"jsonEditor",val:{left:n.get(),right:i.get()}})}catch{}},download(){$(n.getText(),"left.json")},changeDiff(){this.diff&&(n.getMode()!=="tree"||i.getMode()!=="tree")&&this.$msg.warn("\u5BF9\u6BD4\u6A21\u5F0F\u4EC5\u5728\u300C\u6811\u300D\u6A21\u5F0F\u4E0B\u751F\u6548\uFF0C\u8BF7\u5207\u6362\u4E3A\u6811\u6A21\u5F0F"),n.refresh(),i.refresh()},onClassName({path:e}){const t=b(d,e),o=b(l,e);return this.diff?U(t,o)?"":"differentElement":""},extractUniqueWords(e){return V(W(e,function(t,o){return G(t)?[o]:[o,String(t)]}))}},F(["setData"])),beforeUnmount(){n&&n.destroy(),i&&i.destroy()}},K={class:"editorPanel"},Q={ref:"jsonEditorLeft",class:"jsonEditor jsonEditorLeft"},X={class:"controller noShowMobile"},Y=h(" \u590D\u5236 "),Z=h(" \u590D\u5236 "),ee=h(" \u4E0B\u8F7D "),te=h("\u5BF9\u6BD4"),oe={ref:"jsonEditorRight",class:"jsonEditor jsonEditorRight noShowMobile"},se=h(" \u4E0B\u8F7D ");function ne(e,t,o,p,u,a){const r=f("Right"),m=f("Button"),x=f("Left"),k=f("CodeDownload"),w=f("Checkbox"),j=f("Space");return H(),P(A,null,[_("div",K,[_("div",Q,null,512),_("div",X,[s(j,{direction:"vertical"},{default:c(()=>[s(m,{type:"primary",onClick:a.copyRight,block:""},{default:c(()=>[s(r,{theme:"outline"}),Y]),_:1},8,["onClick"]),s(m,{type:"primary",onClick:a.copyLeft,block:""},{default:c(()=>[s(x,{theme:"outline"}),Z]),_:1},8,["onClick"]),s(m,{type:"primary",onClick:a.download,block:""},{default:c(()=>[s(k,{theme:"outline"}),ee]),_:1},8,["onClick"]),s(w,{checked:e.diff,"onUpdate:checked":t[0]||(t[0]=D=>e.diff=D),onChange:a.changeDiff},{default:c(()=>[te]),_:1},8,["checked","onChange"])]),_:1})]),_("div",oe,null,512)]),s(j,{class:"showMobile",align:"center"},{default:c(()=>[s(m,{type:"primary",onClick:a.download},{default:c(()=>[se]),_:1},8,["onClick"])]),_:1})],64)}var he=I(z,[["render",ne],["__scopeId","data-v-06a86748"]]);export{he as default};
