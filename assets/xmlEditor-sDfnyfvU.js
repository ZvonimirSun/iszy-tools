import{j as A,bQ as $,Y as B,B as F,k as j,q as I,x as Y,l as U,o as M,c as O,b as C,ay as T,y as h,az as W,b3 as z,b2 as q,a3 as k,L as G,ac as D,a as R,X,ax as Q,bu as H,b7 as J,aG as K,aH as Z}from"./vendor-Ru-BxWlB.js";import ee from"./fullEditor-hyNNHxy6.js";import"./vue3-ace-editor-BO4BtOgD.js";import"./common-br7fSpCF.js";import"./ant-design-vue-1fGE3reg.js";import"./vanilla-jsoneditor-_koh3yF9.js";import"./ace-builds-34Vbu04p.js";const te={class:"formatter-container"},ne=A({__name:"FormatTransformer",props:{transformer:{type:Function,default:$},inputValidationRules:{default:()=>[]},inputLabel:{default:"输入"},inputPlaceholder:{default:"输入..."},inputDefault:{default:""},outputLabel:{default:"输出"}},emits:["format"],setup(w,{emit:p}){const g=w,{transformer:r,inputValidationRules:m,inputLabel:v,outputLabel:d,inputPlaceholder:E,inputDefault:y}=B(g),S=p,P=F(),u=j({input:y.value});I(y,t=>{u.input=t});const s=Y(()=>r.value(u.input)),c=j({input:m.value});return U(()=>{S("format",s.value)}),I(s,()=>{S("format",s.value)}),(t,e)=>{const l=W,i=z,_=q;return M(),O("div",te,[C(_,{ref_key:"ruleFormRef",ref:P,model:h(u),"label-position":"top",rules:h(c)},{default:T(()=>[C(i,{label:h(v),prop:"input"},{default:T(()=>[C(l,{modelValue:h(u).input,"onUpdate:modelValue":e[0]||(e[0]=n=>h(u).input=n),placeholder:h(E),rows:20,type:"textarea"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),C(i,{label:h(d)},{default:T(()=>[C(l,{"model-value":h(s),rows:20,type:"textarea",readonly:""},null,8,["model-value"])]),_:1},8,["label"])]),_:1},8,["model","rules"])])}}}),oe=k(ne,[["__scopeId","data-v-31e396f2"]]);var L={exports:{}},V={exports:{}};(function(w,p){Object.defineProperty(p,"__esModule",{value:!0}),p.ParsingError=void 0;class g extends Error{constructor(o,a){super(o),this.cause=a}}p.ParsingError=g;let r;function m(){return y(!1)||s()||u()||P()}function v(){return e(/\s*/),y(!0)||u()||S()||E(!1)}function d(){const n=E(!0),o=[];let a,f=v();for(;f;){if(f.node.type==="Element"){if(a)throw new Error("Found multiple root nodes");a=f.node}f.excluded||o.push(f.node),f=v()}if(!a)throw new g("Failed to parse XML","Root Element not found");if(r.xml.length!==0)throw new g("Failed to parse XML","Not Well-Formed XML");return{declaration:n?n.node:null,root:a,children:o}}function E(n){const o=e(n?/^<\?(xml)\s*/:/^<\?([\w-:.]+)\s*/);if(!o)return;const a={name:o[1],type:"ProcessingInstruction",attributes:{}};for(;!(l()||i("?>"));){const f=c();if(f)a.attributes[f.name]=f.value;else return}return e(/\?>/),{excluded:n?!1:r.options.filter(a)===!1,node:a}}function y(n){const o=e(/^<([^?!</>\s]+)\s*/);if(!o)return;const a={type:"Element",name:o[1],attributes:{},children:[]},f=n?!1:r.options.filter(a)===!1;for(;!(l()||i(">")||i("?>")||i("/>"));){const b=c();if(b)a.attributes[b.name]=b.value;else return}if(e(/^\s*\/>/))return a.children=null,{excluded:f,node:a};e(/\??>/);let x=m();for(;x;)x.excluded||a.children.push(x.node),x=m();if(r.options.strictMode){const b=`</${a.name}>`;if(r.xml.startsWith(b))r.xml=r.xml.slice(b.length);else throw new g("Failed to parse XML",`Closing tag not matching "${b}"`)}else e(/^<\/\s*[\w-:.\u00C0-\u00FF]+>/);return{excluded:f,node:a}}function S(){const n=e(/^<!DOCTYPE\s+\S+\s+SYSTEM[^>]*>/)||e(/^<!DOCTYPE\s+\S+\s+PUBLIC[^>]*>/)||e(/^<!DOCTYPE\s+\S+\s*\[[^\]]*]>/)||e(/^<!DOCTYPE\s+\S+\s*>/);if(n){const o={type:"DocumentType",content:n[0]};return{excluded:r.options.filter(o)===!1,node:o}}}function P(){if(r.xml.startsWith("<![CDATA[")){const n=r.xml.indexOf("]]>");if(n>-1){const o=n+3,a={type:"CDATA",content:r.xml.substring(0,o)};return r.xml=r.xml.slice(o),{excluded:r.options.filter(a)===!1,node:a}}}}function u(){const n=e(/^<!--[\s\S]*?-->/);if(n){const o={type:"Comment",content:n[0]};return{excluded:r.options.filter(o)===!1,node:o}}}function s(){const n=e(/^([^<]+)/);if(n){const o={type:"Text",content:n[1]};return{excluded:r.options.filter(o)===!1,node:o}}}function c(){const n=e(/([^=]+)\s*=\s*("[^"]*"|'[^']*'|[^>\s]+)\s*/);if(n)return{name:n[1].trim(),value:t(n[2].trim())}}function t(n){return n.replace(/^['"]|['"]$/g,"")}function e(n){const o=r.xml.match(n);if(o)return r.xml=r.xml.slice(o[0].length),o}function l(){return r.xml.length===0}function i(n){return r.xml.indexOf(n)===0}function _(n,o={}){n=n.trim();const a=o.filter||(()=>!0);return r={xml:n,options:Object.assign(Object.assign({},o),{filter:a,strictMode:o.strictMode===!0})},d()}w.exports=_,p.default=_})(V,V.exports);var le=V.exports;(function(w,p){var g=D&&D.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(p,"__esModule",{value:!0});const r=g(le);function m(t){if(!t.options.indentation&&!t.options.lineSeparator)return;t.content+=t.options.lineSeparator;let e;for(e=0;e<t.level;e++)t.content+=t.options.indentation}function v(t){t.content=t.content.replace(/ +$/,"");let e;for(e=0;e<t.level;e++)t.content+=t.options.indentation}function d(t,e){t.content+=e}function E(t,e,l){if(typeof t.content=="string")y(t.content,e,l);else if(t.type==="Element")P(t,e,l);else if(t.type==="ProcessingInstruction")s(t,e);else throw new Error("Unknown node type: "+t.type)}function y(t,e,l){if(!l){const i=t.trim();(e.options.lineSeparator||i.length===0)&&(t=i)}t.length>0&&(!l&&e.content.length>0&&m(e),d(e,t))}function S(t,e){const l="/"+t.join("/"),i=t[t.length-1];return e.includes(i)||e.includes(l)}function P(t,e,l){if(e.path.push(t.name),!l&&e.content.length>0&&m(e),d(e,"<"+t.name),u(e,t.attributes),t.children===null||e.options.forceSelfClosingEmptyTag&&t.children.length===0){const i=e.options.whiteSpaceAtEndOfSelfclosingTag?" />":"/>";d(e,i)}else if(t.children.length===0)d(e,"></"+t.name+">");else{const i=t.children;d(e,">"),e.level++;let _=t.attributes["xml:space"]==="preserve",n=!1;if(!_&&e.options.ignoredPaths&&(n=S(e.path,e.options.ignoredPaths),_=n),!_&&e.options.collapseContent){let o=!1,a=!1,f=!1;i.forEach(function(x,b){x.type==="Text"?(x.content.includes(`
`)?(a=!0,x.content=x.content.trim()):(b===0||b===i.length-1)&&!l&&x.content.trim().length===0&&(x.content=""),x.content.trim().length>0&&(o=!0)):x.type==="CDATA"?o=!0:f=!0}),o&&(!f||!a)&&(_=!0)}i.forEach(function(o){E(o,e,l||_)}),e.level--,!l&&!_&&m(e),n&&v(e),d(e,"</"+t.name+">")}e.path.pop()}function u(t,e){Object.keys(e).forEach(function(l){const i=e[l].replace(/"/g,"&quot;");d(t," "+l+'="'+i+'"')})}function s(t,e){e.content.length>0&&m(e),d(e,"<?"+t.name),u(e,t.attributes),d(e,"?>")}function c(t,e={}){e.indentation="indentation"in e?e.indentation:"    ",e.collapseContent=e.collapseContent===!0,e.lineSeparator="lineSeparator"in e?e.lineSeparator:`\r
`,e.whiteSpaceAtEndOfSelfclosingTag=e.whiteSpaceAtEndOfSelfclosingTag===!0,e.throwOnFailure=e.throwOnFailure!==!1;try{const l=(0,r.default)(t,{filter:e.filter,strictMode:e.strictMode}),i={content:"",level:0,options:e,path:[]};return l.declaration&&s(l.declaration,i),l.children.forEach(function(_){E(_,i,!1)}),e.lineSeparator?i.content.replace(/\r\n/g,`
`).replace(/\n/g,e.lineSeparator):i.content}catch(l){if(e.throwOnFailure)throw l;return t}}c.minify=(t,e={})=>c(t,Object.assign(Object.assign({},e),{indentation:"",lineSeparator:""})),w.exports=c,p.default=c})(L,L.exports);var re=L.exports;const N=G(re),ie=w=>(K("data-v-42d9ab2a"),w=w(),Z(),w),ae={class:"code-container"},se={key:0,flex:"","gap-4":"","flex-col":"","w-full":"","items-center":""},ue={flex:"","gap-4":"","items-center":""},ce=ie(()=>R("span",null," 缩进大小 ",-1)),fe=A({__name:"xmlEditor",setup(w){const p=F(!1),g=F("<hello><world>foo</world><world>bar</world></hello>"),r=F(""),m=F(!0),v=F(2),d=[{validator:(u,s,c)=>{P(s)?c():c(new Error("请输入正确的XML内容"))},trigger:"change"}];function E(){g.value=r.value||g.value,p.value=!p.value}function y(u){r.value=u}function S(u){try{return N(u.trim(),{collapseContent:m.value,indentation:" ".repeat(v.value),lineSeparator:`
`})}catch{return""}}function P(u){const s=u.trim();if(!s)return!0;try{return N(s),!0}catch{return!1}}return(u,s)=>{const c=H,t=J,e=oe;return M(),O("div",ae,[C(c,{"model-value":h(p),size:"large","inactive-text":"简易模式","active-text":"高级模式",onChange:E},null,8,["model-value"]),h(p)?(M(),Q(ee,{key:1,value:h(g),onChange:y},null,8,["value"])):(M(),O("div",se,[R("div",ue,[C(c,{modelValue:h(m),"onUpdate:modelValue":s[0]||(s[0]=l=>X(m)?m.value=l:null),size:"large","inactive-text":"折叠内容"},null,8,["modelValue"]),ce,C(t,{modelValue:h(v),"onUpdate:modelValue":s[1]||(s[1]=l=>X(v)?v.value=l:null),min:0,max:10,step:1,"step-strictly":!0},null,8,["modelValue"])]),C(e,{"w-full":"","input-label":"你的XML内容","input-placeholder":"在这里粘贴XML内容...","output-label":"格式化后的XML内容","input-default":h(g),transformer:S,"input-validation-rules":d,onFormat:s[2]||(s[2]=l=>r.value=l)},null,8,["input-default"])]))])}}}),ve=k(fe,[["__scopeId","data-v-42d9ab2a"]]);export{ve as default};
