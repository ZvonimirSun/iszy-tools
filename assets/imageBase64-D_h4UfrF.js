import{a as R,I as p,c as V,v as f,C as r,y as c,w as l,g as _,E as C,D as i,j as a,o as u,M as U,L as N,N as T,x as I,n as L,aq as m,aQ as z,Q as D}from"./index-5f28A1cg.js";import{E as F}from"./el-space-CVYe8wvK.js";import{E as P}from"./el-upload-Cfdhq7Mr.js";import"./el-progress-DD01Zo37.js";import{T as S}from"./Router-D2iT8FA8.js";const W={class:"wrapper"},A=["src"],M=R({__name:"imageBase64",setup(Q){const t=p(""),n=p(),s=p({width:"",height:""}),v=V(()=>t.value&&(t.value.startsWith("http://")||t.value.startsWith("https://")));function w(o){const e=new FileReader;return e.onloadend=()=>{t.value=e.result},e.readAsDataURL(o),!1}async function g(){try{await window.navigator.clipboard.writeText(t.value),m.success("复制成功")}catch(o){m.error(o?.message)}}async function h(){try{const o=await z.get(t.value,{responseType:"blob"}),e=new FileReader;e.onloadend=()=>{t.value=e.result},e.readAsDataURL(o.data)}catch(o){m.error(o?.message)}}function y(){n.value&&(s.value.height=`${n.value.naturalHeight}px`,s.value.width=`${n.value.naturalWidth}px`)}return(o,e)=>{const d=C,x=P,k=F,B=N,E=S;return u(),f("div",W,[r(k,null,{default:l(()=>[r(x,{"file-list":[],"show-file-list":!1,accept:"image/*","before-upload":w},{default:l(()=>[r(d,{type:"primary"},{default:l(()=>[...e[1]||(e[1]=[i(" 点击上传图片 ",-1)])]),_:1})]),_:1}),a(v)?(u(),_(d,{key:0,onClick:h},{default:l(()=>[...e[2]||(e[2]=[i(" 转换为Base64 ",-1)])]),_:1})):c("",!0),a(t)?(u(),_(d,{key:1,onClick:g},{default:l(()=>[...e[3]||(e[3]=[i(" 复制内容 ",-1)])]),_:1})):c("",!0)]),_:1}),r(B,{modelValue:a(t),"onUpdate:modelValue":e[0]||(e[0]=b=>U(t)?t.value=b:null),type:"textarea","allow-clear":"",autosize:{minRows:5,maxRows:10},placeholder:"请输入 图片地址 或 Base64格式的图片"},null,8,["modelValue"]),a(t)?(u(),f(T,{key:0},[r(E,{level:4},{default:l(()=>[...e[4]||(e[4]=[i(" 预览 ",-1)])]),_:1}),I("img",{ref_key:"imgPreview",ref:n,class:"preview",src:a(t),alt:"preview",style:L({width:a(s).width?a(s).width:"",height:a(s).height?a(s).height:""}),onLoad:y},null,44,A)],64)):c("",!0)])}}}),J=D(M,[["__scopeId","data-v-bf65265b"]]);export{J as default};
