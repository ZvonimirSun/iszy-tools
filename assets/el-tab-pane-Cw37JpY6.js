import{Z as ne,a as L,a5 as Ie,b4 as U,J as ye,b5 as Me,S as Le,b6 as We,b as J,m as se,d as X,_ as Ne,i as ce,b7 as ue,u as Z,I as C,X as K,b8 as le,a0 as _e,v as Ce,o as Te,n as Ke,h as Se,j as B,ax as oe,aa as Y,b9 as De,ba as He,c as x,bb as me,V as Ue,C as y,aF as j,bc as je,bd as Xe,aJ as re,aK as A,be as Ye,az as Je,e as Ze,r as ie,bf as qe,bg as we,Y as Ee,A as Ge,bh as Qe,bi as pe,U as et,bj as tt,a7 as at,y as nt,ad as st,b2 as lt,l as ot}from"./index-5f28A1cg.js";import{V as rt,H as it}from"./el-empty-CWljvFyf.js";import{c as ct,r as ut}from"./raf-pt4EDoa_.js";import{c as F}from"./strings-CI-T3j8Z.js";import{c as dt}from"./clamp-Du4p6fNH.js";import{o as bt}from"./omit-BZEx5fu7.js";const vt=(e,i,u)=>Me(e.subTree).filter(n=>{var N;return Le(n)&&((N=n.type)==null?void 0:N.name)===i&&!!n.component}).map(n=>n.component.uid).map(n=>u[n]).filter(n=>!!n),ft=(e,i)=>{const u=ne({}),h=ne([]),a=new WeakMap,n=g=>{u.value[g.uid]=g,U(u),ye(()=>{const b=g.getVnode().el,t=b.parentNode;if(!a.has(t)){a.set(t,[]);const c=t.insertBefore.bind(t);t.insertBefore=(_,l)=>(a.get(t).some(T=>_===T||l===T)&&U(u),c(_,l))}a.get(t).push(b)})},N=g=>{delete u.value[g.uid],U(u);const b=g.getVnode().el,t=b.parentNode,c=a.get(t),_=c.indexOf(b);c.splice(_,1)},m=()=>{h.value=vt(e,i,u.value)},d=g=>g.render(),v=L({setup(g,{slots:b}){return()=>(m(),b.default?Ie(d,{render:b.default}):null)}});return{children:h,addChild:n,removeChild:N,ChildrenSorter:v}},ht={[it]:"deltaX",[rt]:"deltaY"},mt=({atEndEdge:e,atStartEdge:i,layout:u},h)=>{let a,n=0;const N=d=>d<0&&i.value||d>0&&e.value;return{hasReachedEdge:N,onWheel:d=>{ct(a);const v=d[ht[u.value]];N(n)&&N(n+v)||(n+=v,We()||d.preventDefault(),a=ut(()=>{h(n),n=0}))}}},q=Symbol("tabsRootContextKey"),pt=J({tabs:{type:X(Array),default:()=>se([])},tabRefs:{type:X(Object),default:()=>se({})}}),Pe="ElTabBar",gt=L({name:Pe}),yt=L({...gt,props:pt,setup(e,{expose:i}){const u=e,h=ce(q);h||ue(Pe,"<el-tabs><el-tab-bar /></el-tabs>");const a=Z("tabs"),n=C(),N=C(),m=()=>{let t=0,c=0;const _=["top","bottom"].includes(h.props.tabPosition)?"width":"height",l=_==="width"?"x":"y",O=l==="x"?"left":"top";return u.tabs.every(T=>{if(oe(T.paneName))return!1;const S=u.tabRefs[T.paneName];if(!S)return!1;if(!T.active)return!0;t=S[`offset${F(O)}`],c=S[`client${F(_)}`];const s=window.getComputedStyle(S);return _==="width"&&(c-=Number.parseFloat(s.paddingLeft)+Number.parseFloat(s.paddingRight),t+=Number.parseFloat(s.paddingLeft)),!1}),{[_]:`${c}px`,transform:`translate${F(l)}(${t}px)`}},d=()=>N.value=m(),v=[],g=()=>{v.forEach(t=>t.stop()),v.length=0,Object.values(u.tabRefs).forEach(t=>{v.push(le(t,d))})};K(()=>u.tabs,async()=>{await Y(),d(),g()},{immediate:!0});const b=le(n,()=>d());return _e(()=>{v.forEach(t=>t.stop()),v.length=0,b.stop()}),i({ref:n,update:d}),(t,c)=>(Te(),Ce("div",{ref_key:"barRef",ref:n,class:Se([B(a).e("active-bar"),B(a).is(B(h).props.tabPosition)]),style:Ke(N.value)},null,6))}});var Nt=Ne(yt,[["__file","tab-bar.vue"]]);const _t=J({panes:{type:X(Array),default:()=>se([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean,tabindex:{type:[String,Number],default:void 0}}),Ct={tabClick:(e,i,u)=>u instanceof Event,tabRemove:(e,i)=>i instanceof Event},ge="ElTabNav",Tt=L({name:ge,props:_t,emits:Ct,setup(e,{expose:i,emit:u}){const h=ce(q);h||ue(ge,"<el-tabs><tab-nav /></el-tabs>");const a=Z("tabs"),n=De(),N=He(),m=C(),d=C(),v=C(),g=C({}),b=C(),t=C(!1),c=C(0),_=C(!1),l=C(!0),O=ne(),T=x(()=>["top","bottom"].includes(h.props.tabPosition)),S=x(()=>T.value?"width":"height"),s=x(()=>({transform:`translate${S.value==="width"?"X":"Y"}(-${c.value}px)`})),{width:w,height:P}=me(m),{width:V,height:W}=me(d,{width:0,height:0},{box:"border-box"}),D=x(()=>T.value?w.value:P.value),I=x(()=>T.value?V.value:W.value),{onWheel:M}=mt({atStartEdge:x(()=>c.value<=0),atEndEdge:x(()=>I.value-c.value<=D.value),layout:x(()=>T.value?"horizontal":"vertical")},o=>{c.value=dt(c.value+o,0,I.value-D.value)}),G=()=>{if(!m.value)return;const o=m.value[`offset${F(S.value)}`],p=c.value;if(!p)return;const r=p>o?p-o:0;c.value=r},$e=()=>{if(!m.value||!d.value)return;const o=d.value[`offset${F(S.value)}`],p=m.value[`offset${F(S.value)}`],r=c.value;if(o-r<=p)return;const f=o-r>p*2?r+p:o-p;c.value=f},de=async()=>{const o=d.value;if(!t.value||!v.value||!m.value||!o)return;await Y();const p=g.value[e.currentName];if(!p)return;const r=m.value,f=p.getBoundingClientRect(),E=r.getBoundingClientRect(),R=T.value?o.offsetWidth-E.width:o.offsetHeight-E.height,k=c.value;let $=k;T.value?(f.left<E.left&&($=k-(E.left-f.left)),f.right>E.right&&($=k+f.right-E.right)):(f.top<E.top&&($=k-(E.top-f.top)),f.bottom>E.bottom&&($=k+(f.bottom-E.bottom))),$=Math.max($,0),c.value=Math.min($,R)},be=()=>{var o;if(!d.value||!m.value)return;e.stretch&&((o=b.value)==null||o.update());const p=d.value[`offset${F(S.value)}`],r=m.value[`offset${F(S.value)}`],f=c.value;r<p?(t.value=t.value||{},t.value.prev=f,t.value.next=f+r<p,p-f<r&&(c.value=p-r)):(t.value=!1,f>0&&(c.value=0))},Oe=o=>{const p=re(o);let r=0;switch(p){case A.left:case A.up:r=-1;break;case A.right:case A.down:r=1;break;default:return}const f=Array.from(o.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let R=f.indexOf(o.target)+r;R<0?R=f.length-1:R>=f.length&&(R=0),f[R].focus({preventScroll:!0}),f[R].click(),ve()},ve=()=>{l.value&&(_.value=!0)},Q=()=>_.value=!1,Be=(o,p)=>{g.value[p]=o},ke=async()=>{await Y();const o=g.value[e.currentName];o?.focus({preventScroll:!0})};return K(n,o=>{o==="hidden"?l.value=!1:o==="visible"&&setTimeout(()=>l.value=!0,50)}),K(N,o=>{o?setTimeout(()=>l.value=!0,50):l.value=!1}),le(v,be),ye(()=>setTimeout(()=>de(),0)),Ue(()=>be()),i({scrollToActiveTab:de,removeFocus:Q,focusActiveTab:ke,tabListRef:d,tabBarRef:b,scheduleRender:()=>U(O)}),()=>{const o=t.value?[y("span",{class:[a.e("nav-prev"),a.is("disabled",!t.value.prev)],onClick:G},[y(j,null,{default:()=>[y(je,null,null)]})]),y("span",{class:[a.e("nav-next"),a.is("disabled",!t.value.next)],onClick:$e},[y(j,null,{default:()=>[y(Xe,null,null)]})])]:null,p=e.panes.map((r,f)=>{var E,R,k,$,fe;const ze=r.uid,ee=r.props.disabled,H=(R=(E=r.props.name)!=null?E:r.index)!=null?R:`${f}`,te=!ee&&(r.isClosable||r.props.closable!==!1&&e.editable);r.index=`${f}`;const Ae=te?y(j,{class:"is-icon-close",onClick:z=>u("tabRemove",r,z)},{default:()=>[y(Ye,null,null)]}):null,Fe=(($=(k=r.slots).label)==null?void 0:$.call(k))||r.props.label,Ve=!ee&&r.active?(fe=e.tabindex)!=null?fe:h.props.tabindex:-1;return y("div",{ref:z=>Be(z,H),class:[a.e("item"),a.is(h.props.tabPosition),a.is("active",r.active),a.is("disabled",ee),a.is("closable",te),a.is("focus",_.value)],id:`tab-${H}`,key:`tab-${ze}`,"aria-controls":`pane-${H}`,role:"tab","aria-selected":r.active,tabindex:Ve,onFocus:()=>ve(),onBlur:()=>Q(),onClick:z=>{Q(),u("tabClick",r,H,z)},onKeydown:z=>{const he=re(z);te&&(he===A.delete||he===A.backspace)&&u("tabRemove",r,z)}},[Fe,Ae])});return O.value,y("div",{ref:v,class:[a.e("nav-wrap"),a.is("scrollable",!!t.value),a.is(h.props.tabPosition)]},[o,y("div",{class:a.e("nav-scroll"),ref:m},[e.panes.length>0?y("div",{class:[a.e("nav"),a.is(h.props.tabPosition),a.is("stretch",e.stretch&&["top","bottom"].includes(h.props.tabPosition))],ref:d,style:s.value,role:"tablist",onKeydown:Oe,onWheel:M},[e.type?null:y(Nt,{ref:b,tabs:[...e.panes],tabRefs:g.value},null),p]):null])])}}}),St=J({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:X(Function),default:()=>!0},stretch:Boolean,tabindex:{type:[String,Number],default:0}}),ae=e=>Je(e)||Ze(e),wt={[we]:e=>ae(e),tabClick:(e,i)=>i instanceof Event,tabChange:e=>ae(e),edit:(e,i)=>["remove","add"].includes(i),tabRemove:e=>ae(e),tabAdd:()=>!0},Et=L({name:"ElTabs",props:St,emits:wt,setup(e,{emit:i,slots:u,expose:h}){var a;const n=Z("tabs"),N=x(()=>["left","right"].includes(e.tabPosition)),{children:m,addChild:d,removeChild:v,ChildrenSorter:g}=ft(Ee(),"ElTabPane"),b=C(),t=C((a=e.modelValue)!=null?a:"0"),c=async(s,w=!1)=>{var P,V,W,D;if(!(t.value===s||oe(s)))try{let I;if(e.beforeLeave){const M=e.beforeLeave(s,t.value);I=M instanceof Promise?await M:M}else I=!0;if(I!==!1){const M=(P=m.value.find(G=>G.paneName===t.value))==null?void 0:P.isFocusInsidePane();t.value=s,w&&(i(we,s),i("tabChange",s)),(W=(V=b.value)==null?void 0:V.removeFocus)==null||W.call(V),M&&((D=b.value)==null||D.focusActiveTab())}}catch{}},_=(s,w,P)=>{s.props.disabled||(i("tabClick",s,P),c(w,!0))},l=(s,w)=>{s.props.disabled||oe(s.props.name)||(w.stopPropagation(),i("edit",s.props.name,"remove"),i("tabRemove",s.props.name))},O=()=>{i("edit",void 0,"add"),i("tabAdd")},T=s=>{const w=re(s);[A.enter,A.numpadEnter].includes(w)&&O()},S=s=>{const w=s.el.firstChild,P=["bottom","right"].includes(e.tabPosition)?s.children[0].el:s.children[1].el;w!==P&&w.before(P)};return K(()=>e.modelValue,s=>c(s)),K(t,async()=>{var s;await Y(),(s=b.value)==null||s.scrollToActiveTab()}),Ge(q,{props:e,currentName:t,registerPane:d,unregisterPane:v,nav$:b}),h({currentName:t,get tabNavRef(){return bt(b.value,["scheduleRender"])}}),()=>{const s=u["add-icon"],w=e.editable||e.addable?y("div",{class:[n.e("new-tab"),N.value&&n.e("new-tab-vertical")],tabindex:e.tabindex,onClick:O,onKeydown:T},[s?ie(u,"add-icon"):y(j,{class:n.is("icon-plus")},{default:()=>[y(qe,null,null)]})]):null,P=()=>y(Tt,{ref:b,currentName:t.value,editable:e.editable,type:e.type,panes:m.value,stretch:e.stretch,onTabClick:_,onTabRemove:l},null),V=y("div",{class:[n.e("header"),N.value&&n.e("header-vertical"),n.is(e.tabPosition)]},[y(g,null,{default:P,$stable:!0}),w]),W=y("div",{class:n.e("content")},[ie(u,"default")]);return y("div",{class:[n.b(),n.m(e.tabPosition),{[n.m("card")]:e.type==="card",[n.m("border-card")]:e.type==="border-card"}],onVnodeMounted:S,onVnodeUpdated:S},[W,V])}}});var Pt=Et;const Rt=J({label:{type:String,default:""},name:{type:[String,Number]},closable:{type:Boolean,default:void 0},disabled:Boolean,lazy:Boolean}),Re="ElTabPane",xt=L({name:Re}),$t=L({...xt,props:Rt,setup(e){const i=e,u=Ee(),h=Qe(),a=ce(q);a||ue(Re,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const n=Z("tab-pane"),N=C(),m=C(),d=x(()=>{var l;return(l=i.closable)!=null?l:a.props.closable}),v=pe(()=>{var l;return a.currentName.value===((l=i.name)!=null?l:m.value)}),g=C(v.value),b=x(()=>{var l;return(l=i.name)!=null?l:m.value}),t=pe(()=>!i.lazy||g.value||v.value),c=()=>{var l;return(l=N.value)==null?void 0:l.contains(document.activeElement)};K(v,l=>{l&&(g.value=!0)});const _=et({uid:u.uid,getVnode:()=>u.vnode,slots:h,props:i,paneName:b,active:v,index:m,isClosable:d,isFocusInsidePane:c});return a.registerPane(_),_e(()=>{a.unregisterPane(_)}),tt(()=>{var l;h.label&&((l=a.nav$.value)==null||l.scheduleRender())}),(l,O)=>B(t)?at((Te(),Ce("div",{key:0,id:`pane-${B(b)}`,ref_key:"paneRef",ref:N,class:Se(B(n).b()),role:"tabpanel","aria-hidden":!B(v),"aria-labelledby":`tab-${B(b)}`},[ie(l.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[st,B(v)]]):nt("v-if",!0)}});var xe=Ne($t,[["__file","tab-pane.vue"]]);const Vt=ot(Pt,{TabPane:xe}),It=lt(xe);export{It as E,Vt as a};
