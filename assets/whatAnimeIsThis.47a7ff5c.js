import{a as n,h as N,H as ue,K as F,bt as me,cm as fe,cn as ge,O as b,F as I,P as H,d as se,e as he,b6 as ve,M as re,N as Ae,I as be,al as ne,f as ke,ap as Ee,X as Ce,aJ as we,_ as ye,o as Q,m as _,w as r,n as oe,p as Qe,a2 as _e,a1 as xe,z as Be,q,b as u,y as w,B as Se,$ as Ie,co as Me,bz as Ne,bA as ze}from"./index.6b075e9a.js";import{_ as Re}from"./index.15ad559f.js";import{_ as Je}from"./index.930a66b8.js";import{_ as De}from"./index.b381753f.js";import"./index.0bab7ee9.js";import{R as ae,r as ie}from"./responsiveObserve.b9846712.js";import"./css.b1edd3c8.js";import"./EyeOutlined.4309515f.js";import"./FormItem.b9ef37ce.js";import"./Col.a9a9e3f5.js";import"./useFlexGapSupport.961efcb4.js";import"./toArray.9b72b86f.js";import"./get.0e345cac.js";import"./hasIn.eadcf762.js";import"./toInteger.8027272a.js";import"./toFinite.24189daa.js";import"./_baseFindIndex.10ef1a58.js";import"./collapseMotion.4df58250.js";import"./index.84424b9b.js";import"./Form.119ef02f.js";import"./_arrayIncludesWith.91d14080.js";import"./debounce.548054c3.js";import"./useRefs.a2ebad5c.js";function K(e){return e!=null}var je=function(t){var a=t.itemPrefixCls,o=t.component,s=t.span,i=t.labelStyle,d=t.contentStyle,v=t.bordered,c=t.label,p=t.content,l=t.colon,k=o;if(v){var g;return n(k,{class:[(g={},N(g,"".concat(a,"-item-label"),K(c)),N(g,"".concat(a,"-item-content"),K(p)),g)],colSpan:s},{default:function(){return[K(c)&&n("span",{style:i},[c]),K(p)&&n("span",{style:d},[p])]}})}return n(k,{class:["".concat(a,"-item")],colSpan:s},{default:function(){return[n("div",{class:"".concat(a,"-item-container")},[c&&n("span",{class:["".concat(a,"-item-label"),N({},"".concat(a,"-item-no-colon"),!l)],style:i},[c]),p&&n("span",{class:"".concat(a,"-item-content"),style:d},[p])])]}})},T=je,Ke=function(t){var a=function(g,h,m){var y=h.colon,f=h.prefixCls,E=h.bordered,x=m.component,D=m.type,U=m.showLabel,j=m.showContent,B=m.labelStyle,z=m.contentStyle;return g.map(function(A,R){var S,J,C=A.props||{},G=C.prefixCls,Y=G===void 0?f:G,V=C.span,X=V===void 0?1:V,O=C.labelStyle,W=C.contentStyle,$=C.label,ee=$===void 0?(J=(S=A.children)===null||S===void 0?void 0:S.label)===null||J===void 0?void 0:J.call(S):$,te=me(A),L=fe(A),P=ge(A),Z=A.key;return typeof x=="string"?n(T,{key:"".concat(D,"-").concat(String(Z)||R),class:L,style:P,labelStyle:b(b({},B.value),O),contentStyle:b(b({},z.value),W),span:X,colon:y,component:x,itemPrefixCls:Y,bordered:E,label:U?ee:null,content:j?te:null},null):[n(T,{key:"label-".concat(String(Z)||R),class:L,style:b(b(b({},B.value),P),O),span:1,colon:y,component:x[0],itemPrefixCls:Y,bordered:E,label:ee},null),n(T,{key:"content-".concat(String(Z)||R),class:L,style:b(b(b({},z.value),P),W),span:X*2-1,component:x[1],itemPrefixCls:Y,bordered:E,content:te},null)]})},o=t.prefixCls,s=t.vertical,i=t.row,d=t.index,v=t.bordered,c=ue(pe,{labelStyle:F({}),contentStyle:F({})}),p=c.labelStyle,l=c.contentStyle;return s?n(I,null,[n("tr",{key:"label-".concat(d),class:"".concat(o,"-row")},[a(i,t,{component:"th",type:"label",showLabel:!0,labelStyle:p,contentStyle:l})]),n("tr",{key:"content-".concat(d),class:"".concat(o,"-row")},[a(i,t,{component:"td",type:"content",showContent:!0,labelStyle:p,contentStyle:l})])]):n("tr",{key:d,class:"".concat(o,"-row")},[a(i,t,{component:v?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0,labelStyle:p,contentStyle:l})])},He=Ke;H.any;var Ue=function(){return{prefixCls:String,label:H.any,labelStyle:{type:Object,default:void 0},contentStyle:{type:Object,default:void 0},span:{type:Number,default:1}}},de=se({name:"ADescriptionsItem",props:Ue(),slots:["label"],setup:function(t,a){var o=a.slots;return function(){var s;return(s=o.default)===null||s===void 0?void 0:s.call(o)}}}),ce={xxxl:3,xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function Ye(e,t){if(typeof e=="number")return e;if(re(e)==="object")for(var a=0;a<ie.length;a++){var o=ie[a];if(t[o]&&e[o]!==void 0)return e[o]||ce[o]}return 3}function le(e,t,a){var o=e;return(t===void 0||t>a)&&(o=Ce(e,{span:a}),we(t===void 0,"Descriptions","Sum of column `span` in a line not match `column` of Descriptions.")),o}function Le(e,t){var a=Ee(e),o=[],s=[],i=t;return a.forEach(function(d,v){var c,p=(c=d.props)===null||c===void 0?void 0:c.span,l=p||1;if(v===a.length-1){s.push(le(d,p,i)),o.push(s);return}l<i?(i-=l,s.push(d)):(s.push(le(d,l,i)),o.push(s),i=t,s=[])}),o}var Pe=function(){return{prefixCls:String,bordered:{type:Boolean,default:void 0},size:{type:String,default:"default"},title:H.any,extra:H.any,column:{type:[Number,Object],default:function(){return ce}},layout:String,colon:{type:Boolean,default:void 0},labelStyle:{type:Object,default:void 0},contentStyle:{type:Object,default:void 0}}},pe=Symbol("descriptionsContext"),M=se({name:"ADescriptions",props:Pe(),slots:["title","extra"],Item:de,setup:function(t,a){var o=a.slots,s=he("descriptions",t),i=s.prefixCls,d=s.direction,v,c=F({});ve(function(){v=ae.subscribe(function(l){re(t.column)==="object"&&(c.value=l)})}),Ae(function(){ae.unsubscribe(v)}),be(pe,{labelStyle:ne(t,"labelStyle"),contentStyle:ne(t,"contentStyle")});var p=ke(function(){return Ye(t.column,c.value)});return function(){var l,k,g,h,m=t.size,y=t.bordered,f=y===void 0?!1:y,E=t.layout,x=E===void 0?"horizontal":E,D=t.colon,U=D===void 0?!0:D,j=t.title,B=j===void 0?(k=o.title)===null||k===void 0?void 0:k.call(o):j,z=t.extra,A=z===void 0?(g=o.extra)===null||g===void 0?void 0:g.call(o):z,R=(h=o.default)===null||h===void 0?void 0:h.call(o),S=Le(R,p.value);return n("div",{class:[i.value,(l={},N(l,"".concat(i.value,"-").concat(m),m!=="default"),N(l,"".concat(i.value,"-bordered"),!!f),N(l,"".concat(i.value,"-rtl"),d.value==="rtl"),l)]},[(B||A)&&n("div",{class:"".concat(i.value,"-header")},[B&&n("div",{class:"".concat(i.value,"-title")},[B]),A&&n("div",{class:"".concat(i.value,"-extra")},[A])]),n("div",{class:"".concat(i.value,"-view")},[n("table",null,[n("tbody",null,[S.map(function(J,C){return n(He,{key:C,index:C,colon:U,prefixCls:i.value,vertical:x==="vertical",bordered:f,row:J},null)})])])])])}}});M.install=function(e){return e.component(M.name,M),e.component(M.Item.name,M.Item),e};var Ze=M;const Te={name:"WhatAnimeIsThis",data:()=>({file:"",img:void 0,fileName:"",id:"",quota:0,quotaUsed:0,loading:!1,result:[]}),mounted(){this.checkTimes()},methods:{beforeUpload(e){if(e.size/1024/1024>=10)return this.$msg.error("\u56FE\u7247\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC710MB!"),!1;const t=new FileReader;return t.onload=()=>{this.img=e,this.fileName=e.name,this.file=t.result},t.readAsDataURL(e),!1},async start(){try{this.loading=!0;const e=new FormData;e.append("image",this.img);const t=await this.$axios.post("https://api.trace.moe/search?anilistInfo",e,{headers:{"Content-Type":"multipart/form-data"}});this.loading=!1,await this.checkTimes(),t.data.error||(this.result=t.data.result||[])}catch{this.loading=!1,this.$msg.error("\u8BF7\u6C42\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u8FDE\u63A5")}},async checkTimes(){try{const e=await this.$axios.get("https://api.trace.moe/me");this.id=e.data.id||"",this.quotaUsed=e.data.quotaUsed||0,this.quota=e.data.quota||0}catch{this.$msg.error("\u8BF7\u6C42\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u7F51\u7EDC\u8FDE\u63A5")}},secondToDate(e){const t=Math.floor(e/3600),a=Math.floor(e/60%60),o=(e%60).toFixed(2);return t+":"+a+":"+o}}},Fe=e=>(Ne("data-v-4fcdd1ca"),e=e(),ze(),e),qe=u(" \u8BF7\u9009\u62E9\u8981\u8BC6\u522B\u52A8\u6F2B\u622A\u56FE "),Ge={key:0},Ve=Fe(()=>q("span",{class:"i-icon-park-outline-loading"},null,-1)),Xe=u("\u8BC6\u522B\u4E2D"),Oe=[Ve,Xe],We={key:1},$e=u(" \u4F7F\u7528 trace.moe API\uFF0C\u6709\u4F7F\u7528\u6B21\u6570\u9650\u5236\u3002\u7528\u6237ID\uFF1A "),et=u(" \uFF0C\u6BCF\u6708\u6B21\u6570\u5269\u4F59\uFF1A "),tt=u(" \uFF0C\u5DF2\u4F7F\u7528\u6B21\u6570\uFF1A "),nt=u(" \u9884\u89C8 "),ot=u(" \u7ED3\u679C "),at=u(" ~ "),it=["src","poster"];function lt(e,t,a,o,s,i){const d=_e,v=Se,c=Ie,p=De,l=Me,k=xe,g=Je,h=Re,m=de,y=Ze;return Q(),_(I,null,[n(d,{level:3},{default:r(()=>[qe]),_:1}),n(p,{"file-list":[],"show-upload-list":!1,accept:"image/*","before-upload":i.beforeUpload},{default:r(()=>[n(c,{readonly:"",placeholder:"\u70B9\u51FB\u8FD9\u91CC\u4E0A\u4F20\u56FE\u7247",value:e.fileName},{addonAfter:r(()=>[n(v,{block:"",disabled:!e.file||e.quota===0||e.quota-e.quotaUsed<=0,onClick:Be(i.start,["stop"])},{default:r(()=>[e.loading?(Q(),_("span",Ge,Oe)):(Q(),_("span",We,"\u5F00\u59CB\u8BC6\u522B"))]),_:1},8,["disabled","onClick"])]),_:1},8,["value"])]),_:1},8,["before-upload"]),n(k,null,{default:r(()=>[q("blockquote",null,[$e,n(l,{code:""},{default:r(()=>[u(w(e.id),1)]),_:1}),et,n(l,{code:""},{default:r(()=>[u(w(e.quota),1)]),_:1}),tt,n(l,{code:""},{default:r(()=>[u(w(e.quotaUsed),1)]),_:1})])]),_:1}),e.file?(Q(),_(I,{key:0},[n(g),n(d,{level:3},{default:r(()=>[nt]),_:1}),n(h,{style:{"max-width":"100%"},src:e.file,fallback:"data:image/png;base64,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"},null,8,["src"])],64)):oe("",!0),e.result.length>0?(Q(),_(I,{key:1},[n(g),n(d,{level:3},{default:r(()=>[ot]),_:1}),(Q(!0),_(I,null,Qe(e.result,(f,E)=>(Q(),_(I,{key:E},[n(g),n(y,{title:f.anilist.title.native+(f.episode?" EP#"+f.episode:""),bordered:"",size:"small",layout:"vertical"},{default:r(()=>[n(m,{label:"\u7F57\u9A6C\u97F3"},{default:r(()=>[u(w(f.anilist.title.romaji),1)]),_:2},1024),n(m,{label:"\u6587\u4EF6\u540D"},{default:r(()=>[u(w(f.filename),1)]),_:2},1024),n(m,{label:"\u76F8\u4F3C\u5EA6"},{default:r(()=>[u(w((f.similarity*100).toFixed(2)+"%"),1)]),_:2},1024),n(m,{label:"\u5339\u914D\u4F4D\u7F6E"},{default:r(()=>[n(l,{code:""},{default:r(()=>[u(w(i.secondToDate(f.from)),1)]),_:2},1024),at,n(l,{code:""},{default:r(()=>[u(w(i.secondToDate(f.to)),1)]),_:2},1024)]),_:2},1024),n(m,{label:"\u9884\u89C8",span:3},{default:r(()=>[q("video",{controls:"",style:{"max-width":"100%"},src:f.video,poster:f.image},null,8,it)]),_:2},1024)]),_:2},1032,["title"])],64))),128))],64)):oe("",!0)],64)}var It=ye(Te,[["render",lt],["__scopeId","data-v-4fcdd1ca"]]);export{It as default};
