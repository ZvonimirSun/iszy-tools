var t=Object.defineProperty,e=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,a=(e,o,n)=>o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n,i=(t,i)=>{for(var r in i||(i={}))o.call(i,r)&&a(t,r,i[r]);if(e)for(var r of e(i))n.call(i,r)&&a(t,r,i[r]);return t};import{E as r,a0 as d,aj as s,ak as l,al as c,am as h,an as f,ao as m,ap as p,a9 as g,l as u,aq as v,ar as j,as as E,at as y,a as b,o as w,c as k,w as C,au as L,e as R,b as x,O as P,g as S}from"./vendor.47dbce92.js";import{C as O}from"./vue-codemirror.694f8e0e.js";import{J as D}from"./jsoneditor.min.46c83109.js";import{c as _}from"./createFile.1bed909e.js";/* empty css              *//* empty css              */import{_ as N}from"./index.4e0857d2.js";var B=".editorPanel[data-v-358d5848] {\n  display: flex;\n  height: 100%;\n}\n@media (max-width: 1024px) {\n.editorPanel[data-v-358d5848] {\n    height: calc(100% - 3.2rem - 1.2rem);\n}\n}\n.editorPanel .controller[data-v-358d5848] {\n  height: 100%;\n  width: 10rem;\n  text-align: center;\n}\n.editorPanel .controller .ant-space[data-v-358d5848] {\n  margin-top: 10rem;\n  width: 80%;\n}\n.editorPanel .controller .ant-space[data-v-358d5848] .ant-btn {\n  display: flex;\n  align-items: center;\n}\n.editorPanel .controller .ant-space[data-v-358d5848] .ant-btn .i-icon {\n  font-size: 1.8rem;\n}\n.editorPanel .controller .ant-space[data-v-358d5848] .ant-btn .i-icon + span, .editorPanel .controller .ant-space[data-v-358d5848] .ant-btn span + .i-icon {\n  margin-left: 0;\n}\n.editorPanel[data-v-358d5848] .jsonEditor {\n  height: 100%;\n  width: calc(50% - 5rem);\n}\n.editorPanel[data-v-358d5848] .jsonEditor .ace-jsoneditor *, .editorPanel[data-v-358d5848] .jsonEditor textarea.jsoneditor-text *, .editorPanel[data-v-358d5848] .jsonEditor code, .editorPanel[data-v-358d5848] .jsonEditor pre {\n  font-family: JetBrains Mono, monospace;\n}\n@media (max-width: 1024px) {\n.editorPanel[data-v-358d5848] .jsonEditor.jsonEditorLeft {\n    width: 100%;\n}\n}\n.editorPanel[data-v-358d5848] .jsonEditor.jsonEditorLeft .differentElement {\n  background-color: pink;\n}\n.editorPanel[data-v-358d5848] .jsonEditor.jsonEditorLeft .differentElement .jsoneditor-field, .editorPanel[data-v-358d5848] .jsonEditor.jsonEditorLeft .differentElement .jsoneditor-value {\n  color: red;\n}\n.editorPanel[data-v-358d5848] .jsonEditor.jsonEditorRight .differentElement {\n  background-color: #acee61;\n}\n.editorPanel[data-v-358d5848] .jsonEditor.jsonEditorRight .differentElement .jsoneditor-field, .editorPanel[data-v-358d5848] .jsonEditor.jsonEditorRight .differentElement .jsoneditor-value {\n  color: red;\n}\n@media (max-width: 1024px) {\n.noShowMobile[data-v-358d5848] {\n    display: none !important;\n}\n}\n@media (min-width: 1024px) {\n.showMobile[data-v-358d5848] {\n    display: none !important;\n}\n}\n@media (max-width: 1024px) {\n.ant-space[data-v-358d5848] {\n    margin-top: 1.2rem;\n}\n}\n[data-v-358d5848] .jsoneditor-poweredBy {\n  display: none;\n}";const{mapGetters:J,mapActions:M}=r("cache"),U={name:"JsonEditor",components:{Container:O,Button:d,Space:s,Checkbox:l,Right:c,Left:h,CodeDownload:f,Save:m,Clear:p},data:()=>({editorLeft:null,editorRight:null,codeLeft:{Array:[1,2,3],Boolean:!0,Null:null,Number:123,Object:{a:"b",c:"d"},String:"Hello World"},codeRight:{Array:[1,2,3],Boolean:!0,Null:null,Number:123,Object:{a:"b",c:"d"},String:"Hello World"},autoSave:!1,diff:!0}),computed:i({},J(["getData"])),mounted(){this.init()},methods:i({init(){this.getData("jsonEditor")&&(this.getData("jsonEditor").left&&(this.codeLeft=this.getData("jsonEditor").left),this.getData("jsonEditor").right&&(this.codeRight=this.getData("jsonEditor").right)),this.editorLeft=g(new D(this.$refs.jsonEditorLeft,{mode:"code",modes:["code","tree"],onClassName:this.onClassName,onChangeText:t=>{try{this.codeLeft=JSON.parse(t),this.editorRight.refresh(),this.autoSave&&this.save()}catch(e){}},autocomplete:{applyTo:["value"],filter:"contain",trigger:"focus",getOptions:(t,e,o,n)=>new Promise(((t,e)=>{const o=this.extractUniqueWords(n.get());o.length>0?t(o):e(new Error("noOptions"))}))}},this.codeLeft)),this.editorRight=g(new D(this.$refs.jsonEditorRight,{mode:"tree",modes:["code","tree"],onClassName:this.onClassName,onChangeText:t=>{try{this.codeRight=JSON.parse(t),this.editorLeft.refresh(),this.autoSave&&this.save()}catch(e){}},autocomplete:{applyTo:["value"],filter:"contain",trigger:"focus",getOptions:(t,e,o,n)=>new Promise(((t,e)=>{const o=this.extractUniqueWords(n.get());o.length>0?t(o):e(new Error("noOptions"))}))}},this.codeRight))},copyRight(){this.codeRight=u(this.codeLeft),this.editorRight.update(this.codeRight),this.editorLeft.refresh()},copyLeft(){this.codeLeft=u(this.codeRight),this.editorLeft.update(this.codeLeft),this.editorRight.refresh()},async save(){try{await this.setData({key:"jsonEditor",val:{left:this.editorLeft.get(),right:this.editorRight.get()}})}catch(t){this.$msg.warn("JSON存在错误，保存失败")}},async clear(){await this.setData({key:"jsonEditor",val:void 0}),this.$msg.success("清除成功")},download(){_(this.editorLeft.getText(),"left.json")},changeDiff(){this.editorLeft.refresh(),this.editorRight.refresh()},changeAutoSave(){this.autoSave&&this.save()},onClassName({path:t}){const e=v(this.codeLeft,t),o=v(this.codeRight,t);return this.diff?j(e,o)?"":"differentElement":""},extractUniqueWords:t=>E(y(t,(function(t,e){return L(t)?[e]:[e,String(t)]})))},M(["setData"])),beforeUnmount(){this.editorLeft&&this.editorLeft.destroy(),this.editorRight&&this.editorRight.destroy()}},A={class:"editorPanel"},T={ref:"jsonEditorLeft",class:"jsonEditor jsonEditorLeft"},W={class:"controller noShowMobile"},q=S(" 复制 "),$=S(" 复制 "),H=S(" 保存 "),I=S("自动"),z=S(" 清除 "),F=S(" 下载 "),G=S("Diff"),K={ref:"jsonEditorRight",class:"jsonEditor jsonEditorRight noShowMobile"},Q=S(" 下载 ");function V(t,e,o,n,a,i){const r=b("Right"),d=b("Button"),s=b("Left"),l=b("Save"),c=b("Checkbox"),h=b("Clear"),f=b("CodeDownload"),m=b("Space"),p=b("container");return w(),k(p,null,{default:C((()=>[R("div",A,[R("div",T,null,512),R("div",W,[x(m,{direction:"vertical"},{default:C((()=>[x(d,{type:"primary",onClick:i.copyRight,block:""},{default:C((()=>[x(r,{theme:"outline"}),q])),_:1},8,["onClick"]),x(d,{type:"primary",onClick:i.copyLeft,block:""},{default:C((()=>[x(s,{theme:"outline"}),$])),_:1},8,["onClick"]),x(d,{type:"primary",onClick:i.save,block:""},{default:C((()=>[x(l,{theme:"outline"}),H])),_:1},8,["onClick"]),x(c,{checked:t.autoSave,"onUpdate:checked":e[0]||(e[0]=e=>t.autoSave=e),onChange:i.changeAutoSave},{default:C((()=>[I])),_:1},8,["checked","onChange"]),t.getData("jsonEditor")?(w(),k(d,{key:0,type:"primary",onClick:i.clear,block:""},{default:C((()=>[x(h,{theme:"outline"}),z])),_:1},8,["onClick"])):P("",!0),x(d,{type:"primary",onClick:i.download,block:""},{default:C((()=>[x(f,{theme:"outline"}),F])),_:1},8,["onClick"]),x(c,{checked:t.diff,"onUpdate:checked":e[1]||(e[1]=e=>t.diff=e),onChange:i.changeDiff},{default:C((()=>[G])),_:1},8,["checked","onChange"])])),_:1})]),R("div",K,null,512)]),x(m,{class:"showMobile",align:"center"},{default:C((()=>[x(d,{type:"primary",onClick:i.download},{default:C((()=>[Q])),_:1},8,["onClick"])])),_:1})])),_:1})}var X=N(U,[["render",V],["__scopeId","data-v-358d5848"]]);export{X as default};
