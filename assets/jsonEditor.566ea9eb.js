var tt=Object.defineProperty;var P=Object.getOwnPropertySymbols;var et=Object.prototype.hasOwnProperty,st=Object.prototype.propertyIsEnumerable;var z=(t,s,d)=>s in t?tt(t,s,{enumerable:!0,configurable:!0,writable:!0,value:d}):t[s]=d,I=(t,s)=>{for(var d in s||(s={}))et.call(s,d)&&z(t,d,s[d]);if(P)for(var d of P(s))st.call(s,d)&&z(t,d,s[d]);return t};import{a0 as ot,$ as it,af as nt,ag as at,ah as lt,ai as dt,aj as rt,ak as H,al as ht,M as ct,ad as ft,am as V,an as ut,ao as _t,ap as gt,aq as pt,ar as mt,as as yt,at as vt,au as It,av as kt,aw as St,ax as F,i as J,ay as U,az as Lt,c as Rt,a as i,g as _,f as e,x as o,a7 as bt,F as Dt,T as Ct,r as c,o as Mt,E as l,j as Tt,p as Ot,b as xt,aA as wt}from"./vendor.fec45e94.js";import{J as B}from"./jsoneditor.min.096de167.js";import{c as A}from"./createFile.bfd39fc5.js";/* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css               */import{_ as jt}from"./index.76034313.js";const{Item:Wt}=H,{Paragraph:Nt}=Ct,{Item:q}=V,{Meta:Et}=q,{mapState:Pt,mapGetters:zt,mapMutations:Ft}=ot("jsonEditor");let n,a;const Jt={name:"JsonEditor",components:{Button:it,Space:nt,Checkbox:at,Right:lt,Left:dt,Dropdown:rt,Menu:H,MenuItem:Wt,Down:ht,Modal:ct,Input:ft,Paragraph:Nt,List:V,ListItem:q,ListItemMeta:Et,FileAdditionOne:ut,FolderOpen:_t,Save:gt,History:pt,Computer:mt,LinkThree:yt,SettingTwo:vt,Info:It,Delete:kt,IndentRight:St},data:()=>({codeLeft:{array:[1,2,3],boolean:!0,color:"gold",null:null,number:123,object:{a:"b",c:"d"},string:"Hello World"},codeRight:{},diff:!1,modalStatus:{type:"",leftOrRight:""},url:"",keyword:"",selectId:"",indent:2}),computed:I(I({dataListAfterSearch:function(){return this.dataList(this.keyword)},codeLeftString:function(){return typeof this.codeLeft=="string"?this.codeLeft:JSON.stringify(this.codeLeft,null,this.indent)},codeRightString:function(){return typeof this.codeRight=="string"?this.codeRight:JSON.stringify(this.codeRight,null,this.indent)},documentProperties:function(){var t,s,d,S;return this.modalStatus.leftOrRight==="left"?{name:(t=this.leftData)==null?void 0:t.name,storage:this.leftData?"\u6D4F\u89C8\u5668\u672C\u5730":"",updated:(s=this.leftData)==null?void 0:s.updated,size:this.codeLeftString.length}:this.modalStatus.leftOrRight==="right"?{name:(d=this.rightData)==null?void 0:d.name,storage:this.rightData?"\u6D4F\u89C8\u5668\u672C\u5730":"",updated:(S=this.rightData)==null?void 0:S.updated,size:this.codeRightString.length}:{}}},Pt(["leftId","rightId"])),zt(["dataList","data","leftData","rightData"])),mounted(){this.init()},methods:I({init(){if(n=new B(this.$refs.jsonEditorLeft,{mode:"code",modes:["code","tree"],onClassName:this.onClassName,onChangeText:F(t=>{try{this.codeLeft=JSON.parse(t)}catch{this.codeLeft=t}n.refresh(),a.refresh(),this.save("left")},100),onModeChange:t=>{t==="code"&&typeof this.codeLeft!="string"&&n.updateText(this.codeLeftString),this.save("left")},onError:t=>{this.$msg.error(t.message)}}),a=new B(this.$refs.jsonEditorRight,{mode:"tree",modes:["code","tree"],onClassName:this.onClassName,onChangeText:F(t=>{try{this.codeRight=JSON.parse(t)}catch{this.codeRight=t}n.refresh(),a.refresh(),this.save("right")},100),onModeChange:t=>{t==="code"&&typeof this.codeRight!="string"&&a.updateText(this.codeRightString),this.save("right")},onError:t=>{this.$msg.error(t.message)}}),this.leftData&&this.leftData.content){if(this.leftData.content.json)this.codeLeft=this.leftData.content.json,n.set(this.leftData.content.json),n.setMode("tree");else if(this.leftData.content.text){try{this.codeLeft=JSON.parse(this.leftData.content.text)}catch{this.codeLeft=this.leftData.content.text}n.setText(this.leftData.content.text),n.setMode("code")}}else n.set(this.codeLeft);if(this.rightData&&this.rightData.content){if(this.rightData.content.json)this.codeRight=this.rightData.content.json,a.set(this.rightData.content.json),a.setMode("tree");else if(this.rightData.content.text){try{this.codeRight=JSON.parse(this.rightData.content.text)}catch{this.codeRight=this.rightData.content.text}a.setText(this.rightData.content.text),a.setMode("code")}}else a.set(this.codeRight)},copyRight(){typeof this.codeLeft=="string"?(a.setMode("code"),a.updateText(this.codeLeft),this.codeRight=this.codeLeft):(n.getMode==="code"?a.updateText(n.getText()):a.updateText(this.codeLeftString),this.codeRight=J(this.codeLeft)),n.refresh(),a.refresh(),this.save("right")},copyLeft(){typeof this.codeRight=="string"?(n.setMode("code"),n.updateText(this.codeRight),this.codeLeft=this.codeRight):(a.getMode==="code"?n.updateText(a.getText()):n.updateText(this.codeRightString),this.codeLeft=J(this.codeRight)),n.refresh(),a.refresh(),this.save("left")},save(t){(!t||t==="left")&&(n.getMode()==="tree"?this.saveData({left:!0,id:this.leftId,content:n.get()}):this.saveData({left:!0,id:this.leftId,content:n.getText()})),(!t||t==="right")&&(a.getMode()==="tree"?this.saveData({right:!0,id:this.rightId,content:a.get()}):this.saveData({right:!0,id:this.rightId,content:a.getText()}))},create(t){t==="left"?(n.set({}),this.codeLeft={},this.saveData({left:!0})):t==="right"&&(a.set({}),this.codeRight={},this.saveData({right:!0}))},open(t,s){switch(this.modalStatus.leftOrRight=s,t.key){case"recent":this.modalStatus.type="openRecent";break;case"file":this.$refs.uploader.click();break;case"url":this.modalStatus.type="openUrl";break}},openRecent(){if(this.selectId&&this.data(this.selectId)&&this.data(this.selectId).content){const t=this.data(this.selectId).content;if(this.modalStatus.leftOrRight==="left"){if(this.saveData({left:!0,id:this.selectId}),t.json)this.codeLeft=t.json,n.set(t.json),n.setMode("tree");else if(t.text){try{this.codeLeft=JSON.parse(t.text)}catch{this.codeLeft=t.text}n.setText(t.text),n.setMode("code")}}else if(this.modalStatus.leftOrRight==="right"){if(this.saveData({right:!0,id:this.selectId}),t.json)this.codeRight=t.json,a.set(t.json),a.setMode("tree");else if(t.text){try{this.codeRight=JSON.parse(t.text)}catch{this.codeRight=t.text}a.setText(t.text),a.setMode("code")}}}this.selectId="",this.closeModal()},openFile(t){if(t.target.files.length){const s=t.target.files[0],d=new FileReader;d.onload=()=>{d.result&&(this.create(this.modalStatus.leftOrRight),this.modalStatus.leftOrRight==="left"?(this.codeLeft=d.result,n.setText(d.result),this.save("left")):this.modalStatus.leftOrRight==="right"&&(this.codeRight=d.result,a.setText(d.result),this.save("right")))},d.readAsText(s)}t.target.value=""},async openUrl(t){try{const s=(await this.$axios.get(t)).data;s&&(this.create(this.modalStatus.leftOrRight),this.modalStatus.leftOrRight==="left"?(this.codeLeft=s,n.set(s),this.save("left")):this.modalStatus.leftOrRight==="right"&&(this.codeRight=s,a.set(s),this.save("right")),this.url="",this.closeModal())}catch(s){this.$msg.error(s.message)}},download(t){var s,d;t==="left"?A(n.getText(),`${((s=this.leftData)==null?void 0:s.name)||"left"}.json`):t==="right"&&A(a.getText(),`${((d=this.rightData)==null?void 0:d.name)||"right"}.json`)},changeOption(t,s){switch(this.modalStatus.leftOrRight=s,t.key){case"indentation":this.modalStatus.type="setIndentation";break;case"properties":this.modalStatus.type="documentProperties";break;case"delete":s==="left"?this.deleteData({id:this.leftId}):s==="right"&&this.deleteData({id:this.rightId});break}},changeIndentation(){n.indentation=this.indent,a.indentation=this.indent,typeof this.codeLeft=="object"&&n.updateText(this.codeLeftString),typeof this.codeRight=="object"&&a.updateText(this.codeRightString),this.closeModal()},changeDiff(){if(!this.diff){if(typeof this.codeLeft=="string"||typeof this.codeRight=="string"){this.$msg.error("JSON\u5B58\u5728\u9519\u8BEF");return}(n.getMode()!=="tree"||a.getMode()!=="tree")&&this.$msg.warn("\u5BF9\u6BD4\u6A21\u5F0F\u4EC5\u5728\u300C\u6811\u300D\u6A21\u5F0F\u4E0B\u751F\u6548\uFF0C\u8BF7\u5207\u6362\u4E3A\u6811\u6A21\u5F0F")}this.diff=!this.diff,n.refresh(),a.refresh()},onClassName({path:t}){const s=U(this.codeLeft,t),d=U(this.codeRight,t);return this.diff?Lt(s,d)?"":"differentElement":""},closeModal(){this.modalStatus.type="",this.modalStatus.leftOrRight=""}},Ft(["saveData","deleteData"])),beforeUnmount(){n&&n.destroy(),a&&a.destroy()}},k=t=>(Ot("data-v-3306b620"),t=t(),xt(),t),Ut={class:"editorPanel"},Bt={class:"editorPanelContainer editorPanelContainerLeft"},At={class:"editorController editorControllerLeft"},Ht={class:"editorTitle"},Vt={class:"buttonWithIcon"},qt=l("\xA0\u65B0\u5EFA"),Gt={class:"buttonWithIcon"},Kt=l("\xA0\u6253\u5F00\u6700\u8FD1\u8BB0\u5F55"),Qt={class:"buttonWithIcon"},Xt=l("\xA0\u6253\u5F00\u672C\u5730\u6587\u4EF6"),Yt={class:"buttonWithIcon"},Zt=l("\xA0\u6253\u5F00URL"),$t={class:"buttonWithIcon"},te=l("\xA0\u6253\u5F00"),ee={class:"buttonWithIcon"},se=l("\xA0\u4FDD\u5B58"),oe={class:"buttonWithIcon"},ie={class:"buttonWithIcon"},ne=l("\xA0\u6587\u6863\u5C5E\u6027"),ae={class:"buttonWithIcon"},le=l("\xA0\u5220\u9664\u6587\u6863"),de={class:"buttonWithIcon"},re=l("\xA0\u9009\u9879"),he={ref:"jsonEditorLeft",class:"jsonEditor jsonEditorLeft"},ce={class:"controller noShowMobile"},fe=l(" \u590D\u5236 "),ue=l(" \u590D\u5236 "),_e=l("\u5BF9\u6BD4"),ge={class:"editorPanelContainer editorPanelContainerRight noShowMobile"},pe={class:"editorController editorControllerRight"},me={class:"editorTitle"},ye={class:"buttonWithIcon"},ve=l("\xA0\u65B0\u5EFA"),Ie={class:"buttonWithIcon"},ke=l("\xA0\u6253\u5F00\u6700\u8FD1\u8BB0\u5F55"),Se={class:"buttonWithIcon"},Le=l("\xA0\u6253\u5F00\u672C\u5730\u6587\u4EF6"),Re={class:"buttonWithIcon"},be=l("\xA0\u6253\u5F00URL"),De={class:"buttonWithIcon"},Ce=l("\xA0\u6253\u5F00"),Me={class:"buttonWithIcon"},Te=l("\xA0\u4FDD\u5B58"),Oe={class:"buttonWithIcon"},xe={class:"buttonWithIcon"},we=l("\xA0\u6587\u6863\u5C5E\u6027"),je={class:"buttonWithIcon"},We=l("\xA0\u5220\u9664\u6587\u6863"),Ne={class:"buttonWithIcon"},Ee=l("\xA0\u9009\u9879"),Pe={ref:"jsonEditorRight",class:"jsonEditor jsonEditorRight"},ze=l("\u641C\u7D22"),Fe=l("\u5220\u9664"),Je=l("\u4E0D\u652F\u6301\u9700\u8981\u9A8C\u8BC1\u6216\u5F00\u542FCORS\u7684\u5730\u5740"),Ue=l("\u914D\u7F6E\u4EE3\u7801\u6A21\u5F0F\u4E0B\u7528\u4E8E\u7F29\u8FDB\u7684\u7A7A\u683C\u6570\u3002 \u7F29\u8FDB\u540C\u65F6\u5E94\u7528\u4E8E\u4E24\u4E2A\u9762\u677F\u3002"),Be=k(()=>i("strong",null,"\u540D\u79F0\uFF1A",-1)),Ae=k(()=>i("strong",null,"\u5B58\u50A8\uFF1A",-1)),He=k(()=>i("strong",null,"\u66F4\u65B0\uFF1A",-1)),Ve=k(()=>i("strong",null,"\u5927\u5C0F\uFF1A",-1));function qe(t,s,d,S,Ge,r){var N,E;const b=c("FileAdditionOne"),u=c("Button"),D=c("History"),f=c("MenuItem"),C=c("Computer"),M=c("LinkThree"),p=c("Menu"),T=c("FolderOpen"),m=c("Down"),y=c("Dropdown"),O=c("Save"),x=c("IndentRight"),w=c("Info"),j=c("Delete"),W=c("SettingTwo"),L=c("Space"),G=c("Right"),K=c("Left"),Q=c("Checkbox"),g=c("Paragraph"),R=c("Input"),X=c("ListItemMeta"),Y=c("ListItem"),Z=c("List"),v=c("Modal");return Mt(),Rt(Dt,null,[i("div",Ut,[i("div",Bt,[i("div",At,[i("div",Ht,_((N=t.leftData)==null?void 0:N.name),1),e(L,{class:"editorControlButtons"},{default:o(()=>[e(u,{size:"small",type:"primary",onClick:s[0]||(s[0]=h=>r.create("left"))},{default:o(()=>[i("span",Vt,[e(b,{theme:"outline"}),qt])]),_:1}),e(y,null,{overlay:o(()=>[e(p,{onClick:s[1]||(s[1]=h=>r.open(h,"left")),trigger:["click","hover"]},{default:o(()=>[e(f,{key:"recent"},{default:o(()=>[i("span",Gt,[e(D,{theme:"outline"}),Kt])]),_:1}),e(f,{key:"file"},{default:o(()=>[i("span",Qt,[e(C,{theme:"outline"}),Xt])]),_:1}),e(f,{key:"url"},{default:o(()=>[i("span",Yt,[e(M,{theme:"outline"}),Zt])]),_:1})]),_:1})]),default:o(()=>[e(u,{size:"small",type:"primary"},{default:o(()=>[i("span",$t,[e(T,{theme:"outline"}),te,e(m,{theme:"outline"})])]),_:1})]),_:1}),e(u,{size:"small",type:"primary",onClick:s[2]||(s[2]=h=>r.download("left"))},{default:o(()=>[i("span",ee,[e(O,{theme:"outline"}),se])]),_:1}),e(y,null,{overlay:o(()=>[e(p,{onClick:s[3]||(s[3]=h=>r.changeOption(h,"left")),trigger:["click","hover"]},{default:o(()=>[e(f,{key:"indentation"},{default:o(()=>[i("span",oe,[e(x,{theme:"outline"}),l("\xA0\u7F29\u8FDB("+_(t.indent)+")",1)])]),_:1}),e(f,{key:"properties"},{default:o(()=>[i("span",ie,[e(w,{theme:"outline"}),ne])]),_:1}),e(f,{key:"delete",disabled:!Boolean(t.leftId)},{default:o(()=>[i("span",ae,[e(j,{theme:"outline"}),le])]),_:1},8,["disabled"])]),_:1})]),default:o(()=>[e(u,{size:"small",type:"primary"},{default:o(()=>[i("span",de,[e(W,{theme:"outline"}),re,e(m,{theme:"outline"})])]),_:1})]),_:1})]),_:1})]),i("div",he,null,512)]),i("div",ce,[e(L,{direction:"vertical"},{default:o(()=>[e(u,{type:"primary",onClick:r.copyRight,block:""},{default:o(()=>[fe,e(G,{theme:"outline"})]),_:1},8,["onClick"]),e(u,{type:"primary",onClick:r.copyLeft,block:""},{default:o(()=>[e(K,{theme:"outline"}),ue]),_:1},8,["onClick"]),e(Q,{checked:t.diff,onChange:r.changeDiff},{default:o(()=>[_e]),_:1},8,["checked","onChange"])]),_:1})]),i("div",ge,[i("div",pe,[i("div",me,_((E=t.rightData)==null?void 0:E.name),1),e(L,{class:"editorControlButtons"},{default:o(()=>[e(u,{size:"small",type:"primary",onClick:s[4]||(s[4]=h=>r.create("right"))},{default:o(()=>[i("span",ye,[e(b,{theme:"outline"}),ve])]),_:1}),e(y,null,{overlay:o(()=>[e(p,{onClick:s[5]||(s[5]=h=>r.open(h,"right")),trigger:["click","hover"]},{default:o(()=>[e(f,{key:"recent"},{default:o(()=>[i("span",Ie,[e(D,{theme:"outline"}),ke])]),_:1}),e(f,{key:"file"},{default:o(()=>[i("span",Se,[e(C,{theme:"outline"}),Le])]),_:1}),e(f,{key:"url"},{default:o(()=>[i("span",Re,[e(M,{theme:"outline"}),be])]),_:1})]),_:1})]),default:o(()=>[e(u,{size:"small",type:"primary"},{default:o(()=>[i("span",De,[e(T,{theme:"outline"}),Ce,e(m,{theme:"outline"})])]),_:1})]),_:1}),e(u,{size:"small",type:"primary",onClick:s[6]||(s[6]=h=>r.download("right"))},{default:o(()=>[i("span",Me,[e(O,{theme:"outline"}),Te])]),_:1}),e(y,null,{overlay:o(()=>[e(p,{onClick:s[7]||(s[7]=h=>r.changeOption(h,"right")),trigger:["click","hover"]},{default:o(()=>[e(f,{key:"indentation"},{default:o(()=>[i("span",Oe,[e(x,{theme:"outline"}),l("\xA0\u7F29\u8FDB("+_(t.indent)+")",1)])]),_:1}),e(f,{key:"properties"},{default:o(()=>[i("span",xe,[e(w,{theme:"outline"}),we])]),_:1}),e(f,{key:"delete",disabled:!Boolean(t.rightId)},{default:o(()=>[i("span",je,[e(j,{theme:"outline"}),We])]),_:1},8,["disabled"])]),_:1})]),default:o(()=>[e(u,{size:"small",type:"primary"},{default:o(()=>[i("span",Ne,[e(W,{theme:"outline"}),Ee,e(m,{theme:"outline"})])]),_:1})]),_:1})]),_:1})]),i("div",Pe,null,512)])]),e(v,{visible:t.modalStatus.type==="openRecent",title:"\u6253\u5F00\u6700\u8FD1",onCancel:r.closeModal,onOk:r.openRecent},{default:o(()=>[e(g,null,{default:o(()=>[ze]),_:1}),e(R,{value:t.keyword,"onUpdate:value":s[8]||(s[8]=h=>t.keyword=h),placeholder:"\u8BF7\u8F93\u5165\u6587\u6863\u540D\u79F0"},null,8,["value"]),e(Z,{class:"dataList","item-layout":"horizontal","data-source":r.dataListAfterSearch},{renderItem:o(({item:h})=>[e(Y,{onClick:$=>t.selectId=h._id,class:Tt({selected:h._id===t.selectId})},{actions:o(()=>[e(u,{onClick:$=>t.deleteData({id:h._id}),type:"primary",danger:""},{default:o(()=>[Fe]),_:2},1032,["onClick"])]),default:o(()=>[e(X,{description:"\u6700\u540E\u4FEE\u6539: "+h.updated},{title:o(()=>[l(_(h.name),1)]),_:2},1032,["description"])]),_:2},1032,["onClick","class"])]),_:1},8,["data-source"])]),_:1},8,["visible","onCancel","onOk"]),bt(i("input",{type:"file",ref:"uploader",onChange:s[9]||(s[9]=(...h)=>r.openFile&&r.openFile(...h)),accept:".json,.JSON"},null,544),[[wt,!1]]),e(v,{visible:t.modalStatus.type==="openUrl",title:"\u6253\u5F00URL",onCancel:r.closeModal,onOk:s[11]||(s[11]=h=>r.openUrl(t.url))},{default:o(()=>[e(g,null,{default:o(()=>[Je]),_:1}),e(R,{value:t.url,"onUpdate:value":s[10]||(s[10]=h=>t.url=h),placeholder:"\u8BF7\u8F93\u5165URL\u5730\u5740"},null,8,["value"])]),_:1},8,["visible","onCancel"]),e(v,{visible:t.modalStatus.type==="setIndentation",title:"\u8BBE\u7F6E\u7F29\u8FDB",onCancel:r.closeModal,onOk:r.changeIndentation},{default:o(()=>[e(g,null,{default:o(()=>[Ue]),_:1}),e(R,{value:t.indent,"onUpdate:value":s[12]||(s[12]=h=>t.indent=h),valueModifiers:{number:!0}},null,8,["value"])]),_:1},8,["visible","onCancel","onOk"]),e(v,{visible:t.modalStatus.type==="documentProperties",title:"\u6587\u6863\u5C5E\u6027",onCancel:r.closeModal,onOk:r.closeModal},{default:o(()=>[e(g,null,{default:o(()=>[Be,l(_(r.documentProperties.name),1)]),_:1}),e(g,null,{default:o(()=>[Ae,l(_(r.documentProperties.storage),1)]),_:1}),e(g,null,{default:o(()=>[He,l(_(r.documentProperties.updated),1)]),_:1}),e(g,null,{default:o(()=>[Ve,l(_(r.documentProperties.size)+" B",1)]),_:1})]),_:1},8,["visible","onCancel","onOk"])],64)}var ds=jt(Jt,[["render",qe],["__scopeId","data-v-3306b620"]]);export{ds as default};
