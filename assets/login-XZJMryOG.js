import{F as x,aE as z,t as f,aq as C,aU as I,aV as B,w as S,o as K,J as U,K as F,ap as h,X as s,a1 as o,u as r,bH as v,ar as V,a2 as M,a$ as g,az as Q,as as R,aA as A,aB as H,aC as J}from"./index-hQPirc-P.js";import{a as L,E as O}from"./el-form-item-61RMlrO9.js";import"./castArray-w8Qj_fP7.js";const k=n=>(A("data-v-72b7656d"),n=n(),H(),n),P={class:"login-container"},T={class:"main"},X=k(()=>h("span",{class:"i-icon-park-outline-user"},null,-1)),$=k(()=>h("span",{class:"i-icon-park-outline-lock"},null,-1)),j=x({__name:"login",setup(n){const a=z({userName:"",password:""}),i=f(),d=f({}),l=f(!1),c=C(),E=I(),w=B();S(E,t=>{const e=t.query;e&&(typeof e.redirect=="string"&&(i.value=e.redirect),d.value=b(e))},{immediate:!0}),K(()=>{w.logged&&c.push({path:i.value||"/",query:d.value})});async function p(){if(!navigator.onLine){g.warning("已离线！");return}if(a.userName!=null&&a.password!=null){l.value=!0;try{await w.login({userName:a.userName,password:a.password}),g.success("登录成功！"),c.push({path:i.value||"/",query:d.value})}catch(t){t instanceof Error&&g.error(t.message)}l.value=!1}}function N(){c.push("/register")}function b(t){const{redirect:e,...u}=t;return u}return(t,e)=>{const u=Q,m=L,y=R,q=O;return U(),F("div",P,[h("div",T,[s(q,M({layout:"horizontal",model:r(a)},{wrapperCol:{span:24}}),{default:o(()=>[s(m,{required:""},{default:o(()=>[s(u,{modelValue:r(a).userName,"onUpdate:modelValue":e[0]||(e[0]=_=>r(a).userName=_),placeholder:"账户",size:"large",onKeypress:v(p,["enter"])},{prefix:o(()=>[X]),_:1},8,["modelValue"])]),_:1}),s(m,{required:""},{default:o(()=>[s(u,{modelValue:r(a).password,"onUpdate:modelValue":e[1]||(e[1]=_=>r(a).password=_),type:"password",placeholder:"密码",size:"large","show-password":"",onKeypress:v(p,["enter"])},{prefix:o(()=>[$]),_:1},8,["modelValue"])]),_:1}),s(m,null,{default:o(()=>[s(y,{type:"primary",block:"",size:"large",loading:r(l),onClick:p},{default:o(()=>[V(" 登录 ")]),_:1},8,["loading"]),s(y,{block:"",size:"large",disabled:r(l),onClick:N},{default:o(()=>[V(" 注册 ")]),_:1},8,["disabled"])]),_:1})]),_:1},16,["model"])])])}}}),Y=J(j,[["__scopeId","data-v-72b7656d"]]);export{Y as default};
