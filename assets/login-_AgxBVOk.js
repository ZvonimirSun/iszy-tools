import{G as q,H as x,n as f,a_ as I,dn as z,f as S,$ as b,q as B,o as C,j as K,k as u,t as a,w as t,v as r,b3 as v,A as M,M as U,J as g,z as F,E as Q,p as R,l as j,h as A}from"./index-0Glyiw05.js";import{a as G,E as H}from"./el-form-item-W4G1dXis.js";import"./castArray-oE466H88.js";const y=n=>(R("data-v-31ff6a3c"),n=n(),j(),n),J={class:"login-container"},L={class:"main"},O=y(()=>u("span",{class:"i-icon-park-outline-user"},null,-1)),P=y(()=>u("span",{class:"i-icon-park-outline-lock"},null,-1)),T={class:"btn-wrapper"},$=q({__name:"login",setup(n){const o=x({userName:"",password:""}),i=f(),c=f({}),d=f(!1),h=I(),E=z(),w=S();b(E,function(s){const e=s.query;e&&(typeof e.redirect=="string"&&(i.value=e.redirect),c.value=N(e))},{immediate:!0}),B(()=>{w.logged&&h.push({path:i.value||"/",query:c.value})});async function p(){if(!navigator.onLine){g.warning("已离线！");return}if(o.userName!=null&&o.password!=null){d.value=!0;try{await w.login({userName:o.userName,password:o.password}),g.success("登录成功！"),h.push({path:i.value||"/",query:c.value})}catch(s){s instanceof Error&&g.error(s.message)}d.value=!1}}function N(s){const{redirect:e,...l}=s;return l}return(s,e)=>{const l=F,m=G,V=Q,k=H;return C(),K("div",J,[u("div",L,[a(k,U({layout:"horizontal",model:r(o)},{wrapperCol:{span:24}}),{default:t(()=>[a(m,{required:""},{default:t(()=>[a(l,{modelValue:r(o).userName,"onUpdate:modelValue":e[0]||(e[0]=_=>r(o).userName=_),placeholder:"账户",size:"large",onKeypress:v(p,["enter"])},{prefix:t(()=>[O]),_:1},8,["modelValue"])]),_:1}),a(m,{required:""},{default:t(()=>[a(l,{modelValue:r(o).password,"onUpdate:modelValue":e[1]||(e[1]=_=>r(o).password=_),type:"password",placeholder:"密码",size:"large","show-password":"",onKeypress:v(p,["enter"])},{prefix:t(()=>[P]),_:1},8,["modelValue"])]),_:1}),a(m,null,{default:t(()=>[u("div",T,[a(V,{type:"primary",block:"",size:"large",loading:r(d),onClick:p},{default:t(()=>[M(" 登录 ")]),_:1},8,["loading"])])]),_:1})]),_:1},16,["model"])])])}}}),Y=A($,[["__scopeId","data-v-31ff6a3c"]]);export{Y as default};
