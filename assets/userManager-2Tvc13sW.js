import{h as x,aR as j,_ as C,k as E,aS as O,u as N,R as z,T as L,E as D,r as p,s as F,x as l,v as b,I as S,j as q,l as G,a8 as W,F as J,q as v,w as _,y as Q,aN as X,H as B,b6 as Z,z as U,K as s,L as h,N as d,Y as ee,a4 as T,aW as k,ax as I,aA as m,G as ae,a0 as te}from"./index-Bxv9mi5k.js";import"./el-empty-6hfI7gCU.js";import{F as re,a as se,E as ne}from"./el-table-v2-3p-8UzE-.js";import{d as $}from"./dayjs.min-CcbPpEag.js";/* empty css               */import{E as oe}from"./el-popover-DEER6qat.js";import"./el-popper-D9N6o6tY.js";import{E as w}from"./index-CCD87bMe.js";import"./castArray-CnwU0dPU.js";import"./raf-C7cd4oHy.js";import"./memoize-one.esm-BdPwpGay.js";import"./index-DiWVgKd_.js";import"./isUndefined-DCTLXrZ8.js";const R=Symbol("breadcrumbKey"),le=x({separator:{type:String,default:"/"},separatorIcon:{type:j}}),ie=E({name:"ElBreadcrumb"}),ce=E({...ie,props:le,setup(t){const e=t,{t:o}=O(),i=N("breadcrumb"),n=z();return S(R,e),L(()=>{const c=n.value.querySelectorAll(`.${i.e("item")}`);c.length&&c[c.length-1].setAttribute("aria-current","page")}),(c,g)=>(p(),D("div",{ref_key:"breadcrumb",ref:n,class:b(l(i).b()),"aria-label":l(o)("el.breadcrumb.label"),role:"navigation"},[F(c.$slots,"default")],10,["aria-label"]))}});var ue=C(ce,[["__file","breadcrumb.vue"]]);const de=x({to:{type:q([String,Object]),default:""},replace:Boolean}),me=E({name:"ElBreadcrumbItem"}),pe=E({...me,props:de,setup(t){const e=t,o=W(),i=G(R,void 0),n=N("breadcrumb"),c=o.appContext.config.globalProperties.$router,g=z(),A=()=>{!e.to||!c||(e.replace?c.replace(e.to):c.push(e.to))};return(y,r)=>{var a,u;return p(),D("span",{class:b(l(n).e("item"))},[J("span",{ref_key:"link",ref:g,class:b([l(n).e("inner"),l(n).is("link",!!y.to)]),role:"link",onClick:A},[F(y.$slots,"default")],2),(a=l(i))!=null&&a.separatorIcon?(p(),v(l(X),{key:0,class:b(l(n).e("separator"))},{default:_(()=>[(p(),v(Q(l(i).separatorIcon)))]),_:1},8,["class"])):(p(),D("span",{key:1,class:b(l(n).e("separator")),role:"presentation"},B((u=l(i))==null?void 0:u.separator),3))],2)}}});var V=C(pe,[["__file","breadcrumb-item.vue"]]);const fe=U(ue,{BreadcrumbItem:V}),be=Z(V);var f=function(t){return t[t.DELETED=-1]="DELETED",t[t.DEACTIVATED=0]="DEACTIVATED",t[t.ENABLED=1]="ENABLED",t[t.DISABLED=2]="DISABLED",t}(f||{});function _e(t){return[{key:"userId",dataKey:"userId",width:150,hidden:!0},{key:"userName",dataKey:"userName",title:"用户名",width:150,align:"center"},{key:"nickName",dataKey:"nickName",title:"昵称",width:150,align:"center"},{key:"email",dataKey:"email",title:"邮箱",width:150,align:"center"},{key:"roles",title:"角色",width:150,align:"center",cellRenderer:({rowData:e})=>{var i;const o=((i=e.roles)==null?void 0:i.map(n=>n.name).join(", "))||"";return s("span",null,[o])}},{key:"status",title:"状态",width:100,align:"center",cellRenderer:({rowData:e})=>{switch(e.status){case f.ENABLED:return s(w,{type:"success"},{default:()=>[d("正常")]});case f.DISABLED:return s(w,{type:"info"},{default:()=>[d("禁用")]});case f.DEACTIVATED:return s(w,{type:"info"},{default:()=>[d("待激活")]});default:return s(w,{type:"warning"},{default:()=>[d("未知")]})}}},{key:"createdAt",title:"创建时间",width:200,align:"center",cellRenderer:({rowData:e})=>s("span",null,[$(e.createdAt).format("YYYY-MM-DD HH:mm:ss")])},{key:"updatedAt",title:"更新时间",width:200,align:"center",cellRenderer:({rowData:e})=>s("span",null,[$(e.updatedAt).format("YYYY-MM-DD HH:mm:ss")])},{key:"operations",title:"操作",width:200,fixed:re.RIGHT,cellRenderer:({rowData:e})=>s(ee,null,[s(h,{size:"small",plain:!0,onClick:()=>t(e,"edit")},{default:()=>[d("修改")]}),e.status===f.DEACTIVATED||e.status===f.DISABLED?s(h,{size:"small",plain:!0,onClick:()=>t(e,"activate")},{default:()=>[d("启用")]}):s(h,{size:"small",plain:!0,onClick:()=>t(e,"disable")},{default:()=>[d("禁用")]}),s(oe,{title:"确定要删除吗？",onConfirm:()=>t(e,"delete")},{reference:()=>s(h,{size:"small",plain:!0,type:"danger"},{default:()=>[d("删除")]})})])}]}const Ee={"h-full":"","w-full":"",flex:"","flex-col":"","gap-4":"","pa-4":""},ge=E({__name:"userManager",setup(t){const e=T([]),o=T({index:1,size:10}),i=_e(c);L(()=>{n(1,o.size)});async function n(r,a){try{const u=(await k.get(`${I.apiOrigin}/user/list`,{params:{pageIndex:r,pageSize:a}})).data;if(u.success)e.splice(0,e.length,...u.data);else throw new Error(u.message)}catch(u){m.error(u.message)}}function c(r,a){switch(a){case"edit":break;case"disable":g(r);break;case"activate":A(r);break;case"delete":y(r);break}}async function g(r){try{const a=(await k.put(`${I.apiOrigin}/user/ban`,null,{params:{id:r.userId}})).data;if(a.success)m.success(a.message),await n(o.index,o.size);else throw new Error(a.message)}catch(a){m.error(a.message)}}async function A(r){try{const a=(await k.put(`${I.apiOrigin}/user/activate`,null,{params:{id:r.userId}})).data;if(a.success)m.success(a.message),await n(o.index,o.size);else throw new Error(a.message)}catch(a){m.error(a.message)}}async function y(r){try{const a=(await k.delete(`${I.apiOrigin}/user/${r.userId}`)).data;if(a.success)m.success(a.message),await n(o.index,o.size);else throw new Error(a.message)}catch(a){m.error(a.message)}}return(r,a)=>{const u=be,Y=fe,M=se,K=ne;return p(),D("div",Ee,[r.$route.meta.parentInfo?(p(),v(Y,{key:0},{default:_(()=>[s(u,{to:r.$route.meta.parentInfo.link},{default:_(()=>[d(B(r.$route.meta.parentInfo.name),1)]),_:1},8,["to"]),s(u,null,{default:_(()=>[d(B(r.$route.name),1)]),_:1})]),_:1})):ae("",!0),s(K,{"flex-1":""},{default:_(({width:P,height:H})=>[s(M,{columns:l(i),data:l(e),width:P,height:H,fixed:""},null,8,["columns","data","width","height"])]),_:1})])}}}),Ne=te(ge,[["__scopeId","data-v-8f7eef95"]]);export{Ne as default};
