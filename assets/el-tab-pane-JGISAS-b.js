import{a9 as _e,b7 as ge,a1 as Te,h as K,j as J,m as oe,k as L,l as Z,b8 as ee,u as U,R as C,a7 as F,al as te,b9 as X,ab as Ce,q as re,E as ie,t as ce,v as O,x as Ne,_ as ue,a8 as ae,ba as Pe,bb as we,n as V,T as de,a5 as Ee,K as d,aM as D,bc as $e,bd as Se,be as xe,aQ as z,I as Be,s as Y,bf as ke,bg as be,aG as se,aI as Oe,o as Re,bh as ze,bi as ne,a4 as Ae,a6 as Me,ah as Fe,an as Le,G as Ve,z as Ie,b5 as De}from"./index-DfRcp7P5.js";import{c as A}from"./strings-DRKjoRQ8.js";const Ke=(e,l,b)=>ge(e.subTree).filter(s=>{var u;return Te(s)&&((u=s.type)==null?void 0:u.name)===l&&!!s.component}).map(s=>s.component.uid).map(s=>b[s]).filter(s=>!!s),Ue=(e,l)=>{const b={},v=_e([]);return{children:v,addChild:u=>{b[u.uid]=u,v.value=Ke(e,l,b)},removeChild:u=>{delete b[u],v.value=v.value.filter(f=>f.uid!==u)}}},q=Symbol("tabsRootContextKey"),qe=K({tabs:{type:J(Array),default:()=>oe([])}}),ve="ElTabBar",We=L({name:ve}),je=L({...We,props:qe,setup(e,{expose:l}){const b=e,v=ae(),t=Z(q);t||ee(ve,"<el-tabs><el-tab-bar /></el-tabs>");const s=U("tabs"),u=C(),f=C(),y=()=>{let o=0,_=0;const m=["top","bottom"].includes(t.props.tabPosition)?"width":"height",k=m==="width"?"x":"y",n=k==="x"?"left":"top";return b.tabs.every(E=>{var $,S;const N=(S=($=v.parent)==null?void 0:$.refs)==null?void 0:S[`tab-${E.uid}`];if(!N)return!1;if(!E.active)return!0;o=N[`offset${A(n)}`],_=N[`client${A(m)}`];const x=window.getComputedStyle(N);return m==="width"&&(_-=Number.parseFloat(x.paddingLeft)+Number.parseFloat(x.paddingRight),o+=Number.parseFloat(x.paddingLeft)),!1}),{[m]:`${_}px`,transform:`translate${A(k)}(${o}px)`}},T=()=>f.value=y(),g=[],i=()=>{var o;g.forEach(m=>m.stop()),g.length=0;const _=(o=v.parent)==null?void 0:o.refs;if(_){for(const m in _)if(m.startsWith("tab-")){const k=_[m];k&&g.push(X(k,T))}}};F(()=>b.tabs,async()=>{await te(),T(),i()},{immediate:!0});const p=X(u,()=>T());return Ce(()=>{g.forEach(o=>o.stop()),g.length=0,p.stop()}),l({ref:u,update:T}),(o,_)=>(re(),ie("div",{ref_key:"barRef",ref:u,class:ce([O(s).e("active-bar"),O(s).is(O(t).props.tabPosition)]),style:Ne(f.value)},null,6))}});var Ge=ue(je,[["__file","tab-bar.vue"]]);const He=K({panes:{type:J(Array),default:()=>oe([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),Qe={tabClick:(e,l,b)=>b instanceof Event,tabRemove:(e,l)=>l instanceof Event},le="ElTabNav",Xe=L({name:le,props:He,emits:Qe,setup(e,{expose:l,emit:b}){const v=Z(q);v||ee(le,"<el-tabs><tab-nav /></el-tabs>");const t=U("tabs"),s=Pe(),u=we(),f=C(),y=C(),T=C(),g=C(),i=C(!1),p=C(0),o=C(!1),_=C(!0),m=V(()=>["top","bottom"].includes(v.props.tabPosition)?"width":"height"),k=V(()=>({transform:`translate${m.value==="width"?"X":"Y"}(-${p.value}px)`})),n=()=>{if(!f.value)return;const r=f.value[`offset${A(m.value)}`],c=p.value;if(!c)return;const a=c>r?c-r:0;p.value=a},E=()=>{if(!f.value||!y.value)return;const r=y.value[`offset${A(m.value)}`],c=f.value[`offset${A(m.value)}`],a=p.value;if(r-a<=c)return;const P=r-a>c*2?a+c:r-c;p.value=P},$=async()=>{const r=y.value;if(!i.value||!T.value||!f.value||!r)return;await te();const c=T.value.querySelector(".is-active");if(!c)return;const a=f.value,P=["top","bottom"].includes(v.props.tabPosition),h=c.getBoundingClientRect(),w=a.getBoundingClientRect(),I=P?r.offsetWidth-w.width:r.offsetHeight-w.height,R=p.value;let B=R;P?(h.left<w.left&&(B=R-(w.left-h.left)),h.right>w.right&&(B=R+h.right-w.right)):(h.top<w.top&&(B=R-(w.top-h.top)),h.bottom>w.bottom&&(B=R+(h.bottom-w.bottom))),B=Math.max(B,0),p.value=Math.min(B,I)},S=()=>{var r;if(!y.value||!f.value)return;e.stretch&&((r=g.value)==null||r.update());const c=y.value[`offset${A(m.value)}`],a=f.value[`offset${A(m.value)}`],P=p.value;a<c?(i.value=i.value||{},i.value.prev=P,i.value.next=P+a<c,c-P<a&&(p.value=c-a)):(i.value=!1,P>0&&(p.value=0))},N=r=>{let c=0;switch(r.code){case z.left:case z.up:c=-1;break;case z.right:case z.down:c=1;break;default:return}const a=Array.from(r.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let h=a.indexOf(r.target)+c;h<0?h=a.length-1:h>=a.length&&(h=0),a[h].focus({preventScroll:!0}),a[h].click(),x()},x=()=>{_.value&&(o.value=!0)},W=()=>o.value=!1;return F(s,r=>{r==="hidden"?_.value=!1:r==="visible"&&setTimeout(()=>_.value=!0,50)}),F(u,r=>{r?setTimeout(()=>_.value=!0,50):_.value=!1}),X(T,S),de(()=>setTimeout(()=>$(),0)),Ee(()=>S()),l({scrollToActiveTab:$,removeFocus:W}),()=>{const r=i.value?[d("span",{class:[t.e("nav-prev"),t.is("disabled",!i.value.prev)],onClick:n},[d(D,null,{default:()=>[d($e,null,null)]})]),d("span",{class:[t.e("nav-next"),t.is("disabled",!i.value.next)],onClick:E},[d(D,null,{default:()=>[d(Se,null,null)]})])]:null,c=e.panes.map((a,P)=>{var h,w,I,R;const B=a.uid,j=a.props.disabled,G=(w=(h=a.props.name)!=null?h:a.index)!=null?w:`${P}`,H=!j&&(a.isClosable||e.editable);a.index=`${P}`;const me=H?d(D,{class:"is-icon-close",onClick:M=>b("tabRemove",a,M)},{default:()=>[d(xe,null,null)]}):null,he=((R=(I=a.slots).label)==null?void 0:R.call(I))||a.props.label,ye=!j&&a.active?0:-1;return d("div",{ref:`tab-${B}`,class:[t.e("item"),t.is(v.props.tabPosition),t.is("active",a.active),t.is("disabled",j),t.is("closable",H),t.is("focus",o.value)],id:`tab-${G}`,key:`tab-${B}`,"aria-controls":`pane-${G}`,role:"tab","aria-selected":a.active,tabindex:ye,onFocus:()=>x(),onBlur:()=>W(),onClick:M=>{W(),b("tabClick",a,G,M)},onKeydown:M=>{H&&(M.code===z.delete||M.code===z.backspace)&&b("tabRemove",a,M)}},[he,me])});return d("div",{ref:T,class:[t.e("nav-wrap"),t.is("scrollable",!!i.value),t.is(v.props.tabPosition)]},[r,d("div",{class:t.e("nav-scroll"),ref:f},[d("div",{class:[t.e("nav"),t.is(v.props.tabPosition),t.is("stretch",e.stretch&&["top","bottom"].includes(v.props.tabPosition))],ref:y,style:k.value,role:"tablist",onKeydown:N},[e.type?null:d(Ge,{ref:g,tabs:[...e.panes]},null),c])])])}}}),Ye=K({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:J(Function),default:()=>!0},stretch:Boolean}),Q=e=>Oe(e)||Re(e),Je={[be]:e=>Q(e),tabClick:(e,l)=>l instanceof Event,tabChange:e=>Q(e),edit:(e,l)=>["remove","add"].includes(l),tabRemove:e=>Q(e),tabAdd:()=>!0},Ze=L({name:"ElTabs",props:Ye,emits:Je,setup(e,{emit:l,slots:b,expose:v}){var t;const s=U("tabs"),u=V(()=>["left","right"].includes(e.tabPosition)),{children:f,addChild:y,removeChild:T}=Ue(ae(),"ElTabPane"),g=C(),i=C((t=e.modelValue)!=null?t:"0"),p=async(n,E=!1)=>{var $,S,N;if(!(i.value===n||se(n)))try{await(($=e.beforeLeave)==null?void 0:$.call(e,n,i.value))!==!1&&(i.value=n,E&&(l(be,n),l("tabChange",n)),(N=(S=g.value)==null?void 0:S.removeFocus)==null||N.call(S))}catch{}},o=(n,E,$)=>{n.props.disabled||(p(E,!0),l("tabClick",n,$))},_=(n,E)=>{n.props.disabled||se(n.props.name)||(E.stopPropagation(),l("edit",n.props.name,"remove"),l("tabRemove",n.props.name))},m=()=>{l("edit",void 0,"add"),l("tabAdd")};F(()=>e.modelValue,n=>p(n)),F(i,async()=>{var n;await te(),(n=g.value)==null||n.scrollToActiveTab()}),Be(q,{props:e,currentName:i,registerPane:n=>{f.value.push(n)},sortPane:y,unregisterPane:T}),v({currentName:i});const k=({render:n})=>n();return()=>{const n=b["add-icon"],E=e.editable||e.addable?d("div",{class:[s.e("new-tab"),u.value&&s.e("new-tab-vertical")],tabindex:"0",onClick:m,onKeydown:N=>{[z.enter,z.numpadEnter].includes(N.code)&&m()}},[n?Y(b,"add-icon"):d(D,{class:s.is("icon-plus")},{default:()=>[d(ke,null,null)]})]):null,$=d("div",{class:[s.e("header"),u.value&&s.e("header-vertical"),s.is(e.tabPosition)]},[d(k,{render:()=>{const N=f.value.some(x=>x.slots.label);return d(Xe,{ref:g,currentName:i.value,editable:e.editable,type:e.type,panes:f.value,stretch:e.stretch,onTabClick:o,onTabRemove:_},{$stable:!N})}},null),E]),S=d("div",{class:s.e("content")},[Y(b,"default")]);return d("div",{class:[s.b(),s.m(e.tabPosition),{[s.m("card")]:e.type==="card",[s.m("border-card")]:e.type==="border-card"}]},[S,$])}}});var et=Ze;const tt=K({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),fe="ElTabPane",at=L({name:fe}),st=L({...at,props:tt,setup(e){const l=e,b=ae(),v=ze(),t=Z(q);t||ee(fe,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const s=U("tab-pane"),u=C(),f=V(()=>l.closable||t.props.closable),y=ne(()=>{var o;return t.currentName.value===((o=l.name)!=null?o:u.value)}),T=C(y.value),g=V(()=>{var o;return(o=l.name)!=null?o:u.value}),i=ne(()=>!l.lazy||T.value||y.value);F(y,o=>{o&&(T.value=!0)});const p=Ae({uid:b.uid,slots:v,props:l,paneName:g,active:y,index:u,isClosable:f});return t.registerPane(p),de(()=>{t.sortPane(p)}),Me(()=>{t.unregisterPane(p.uid)}),(o,_)=>O(i)?Fe((re(),ie("div",{key:0,id:`pane-${O(g)}`,class:ce(O(s).b()),role:"tabpanel","aria-hidden":!O(y),"aria-labelledby":`tab-${O(g)}`},[Y(o.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[Le,O(y)]]):Ve("v-if",!0)}});var pe=ue(st,[["__file","tab-pane.vue"]]);const ot=Ie(et,{TabPane:pe}),rt=De(pe);export{rt as E,ot as a};
