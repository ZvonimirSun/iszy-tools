import{k as b,Q as D,aw as x,E as S,r as w,q as N,G as U,x as s,w as l,N as u,K as e,F as m,a0 as E,J as M,n as q,s as J,aB as K,R as B,a4 as F,H as P,L as j,X as L,W as Q,aA as I,P as W,at as X,Y,bl as z}from"./index-CKDQabUk.js";import{E as G}from"./el-divider-CrLTRxXI.js";import{E as T}from"./el-space-CoY8TTBq.js";import{E as H}from"./el-checkbox-M09YWPPK.js";import{T as C,u as Z}from"./Router-MkuFlnk8.js";import{E as ee}from"./el-popover-DTTD2nwI.js";import"./el-popper-A00Nsn62.js";import{E as te}from"./el-dialog-BuwIaAd9.js";import{a as oe,E as le}from"./el-form-item-Xocx3jtc.js";import{E as se,a as ne}from"./el-radio-group-DcI8GzZV.js";/* empty css                 */import"./index-DWZwF0R7.js";import"./isUndefined-DCTLXrZ8.js";import"./castArray-C_vv_5Bo.js";import"./clone-DDlismd0.js";const ae=b({__name:"jsonEditor",setup(_){const a=D(),p=x(),d=a.modules.jsonEditor;return(n,o)=>{const c=C,f=H,V=T;return w(),S("div",null,[s(p).logged?(w(),N(c,{key:0,level:5},{default:l(()=>o[1]||(o[1]=[u(" JSON 编辑器 ")])),_:1})):U("",!0),s(p).logged?(w(),N(V,{key:1},{default:l(()=>[e(f,{modelValue:s(d).syncCloud,"onUpdate:modelValue":o[0]||(o[0]=i=>s(d).syncCloud=i)},{default:l(()=>o[2]||(o[2]=[u(" 从云端获取 ")])),_:1},8,["modelValue"])]),_:1})):U("",!0)])}}}),re={"w-full":"","overflow-auto":""},de={"gap-4":"",class:"settings-wrapper"},ie=b({__name:"toolSettings",setup(_){return(a,p)=>{const d=C;return w(),S("div",re,[e(d,{level:4},{default:l(()=>p[0]||(p[0]=[u(" 应用设置 ")])),_:1}),m("div",de,[e(ae)])])}}}),ue=E(ie,[["__scopeId","data-v-730637d2"]]),pe=b({inheritAttrs:!1,__name:"HaveAccess",props:{auth:{type:[Boolean,Object],default:!1},link:{default:""}},setup(_){const a=_,p=x(),d=Z(),n=M(),o=q(()=>a.auth?typeof a.auth=="boolean"?p.logged:p.checkAccess(a.auth):a.link?p.checkAccess(d.getAuth(a.link)):!0);function c(){a.link&&n.push(a.link)}return(f,V)=>s(o)?J(f.$slots,"default",K({key:0},f.$attrs,{goto:c})):U("",!0)}}),me={flex:"","flex-col":"","items-start":"","gap-4":"","text-7":""},fe={flex:""},_e={flex:""},ce={flex:""},ge={class:"dialog-footer"},we=b({__name:"personalInfo",setup(_){const a=x(),p=B(!1),d=B(),n=F({nickName:"",email:"",passwd:"",rePasswd:"",oldPasswd:""}),o=F({rePasswd:[{validator:(i,t,r)=>{t&&t!==n.passwd?r(new Error("两次输入的密码不一致")):r()}}],oldPasswd:[{validator:(i,t,r)=>{!t&&(n.passwd||n.rePasswd)?r(new Error("请输入旧密码")):r()}}]});function c(){n.nickName=a.profile.nickName??"",n.email=a.profile.email??"",n.passwd="",n.rePasswd="",n.oldPasswd="",p.value=!0}function f(){p.value=!1}async function V(i){i&&await i.validate(async t=>{if(t){const r={};if(n.nickName&&(r.nickName=n.nickName),n.email&&(r.email=n.email),n.passwd&&(r.passwd=n.passwd,r.oldPasswd=n.oldPasswd),Object.keys(r).length===0){I.warning("没有需要修改的信息");return}try{await a.updateUser(r)}catch(v){I.error(v.message)}p.value=!1}else I.warning("请检查输入")})}return(i,t)=>{var R,A,O;const r=C,v=j,k=Q,y=le,$=oe,h=te;return w(),S("div",null,[e(r,{level:4},{default:l(()=>t[7]||(t[7]=[u(" 账户信息 ")])),_:1}),m("div",me,[m("div",fe,[t[8]||(t[8]=m("div",{"w-32":""}," 昵称: ",-1)),m("div",null,P(s(a).profile.nickName),1)]),m("div",_e,[t[9]||(t[9]=m("div",{"w-32":""}," 邮箱: ",-1)),m("div",null,P(s(a).profile.email),1)]),m("div",ce,[t[10]||(t[10]=m("div",{"w-32":""}," 角色 ",-1)),m("div",null,P(((O=(A=(R=s(a).profile)==null?void 0:R.roles)==null?void 0:A[0])==null?void 0:O.alias)??"注册用户"),1)]),e(v,{onClick:c},{default:l(()=>t[11]||(t[11]=[u(" 修改信息 ")])),_:1})]),e(h,{modelValue:s(p),"onUpdate:modelValue":t[6]||(t[6]=g=>L(p)?p.value=g:null),title:"修改信息","before-close":f},{footer:l(()=>[m("span",ge,[e(v,{onClick:f},{default:l(()=>t[12]||(t[12]=[u("取消")])),_:1}),e(v,{type:"primary",onClick:t[5]||(t[5]=g=>V(s(d)))},{default:l(()=>t[13]||(t[13]=[u(" 保存 ")])),_:1})])]),default:l(()=>[e($,{ref_key:"ruleFormRef",ref:d,model:s(n),rules:s(o),"label-width":"8rem","label-position":"left"},{default:l(()=>[e(y,{label:"昵称",prop:"nickName"},{default:l(()=>[e(k,{modelValue:s(n).nickName,"onUpdate:modelValue":t[0]||(t[0]=g=>s(n).nickName=g)},null,8,["modelValue"])]),_:1}),e(y,{label:"邮箱",prop:"email"},{default:l(()=>[e(k,{modelValue:s(n).email,"onUpdate:modelValue":t[1]||(t[1]=g=>s(n).email=g)},null,8,["modelValue"])]),_:1}),e(y,{label:"旧密码",prop:"oldPasswd"},{default:l(()=>[e(k,{modelValue:s(n).oldPasswd,"onUpdate:modelValue":t[2]||(t[2]=g=>s(n).oldPasswd=g),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(y,{label:"新密码",prop:"passwd"},{default:l(()=>[e(k,{modelValue:s(n).passwd,"onUpdate:modelValue":t[3]||(t[3]=g=>s(n).passwd=g),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(y,{label:"确认密码",prop:"rePasswd"},{default:l(()=>[e(k,{modelValue:s(n).rePasswd,"onUpdate:modelValue":t[4]||(t[4]=g=>s(n).rePasswd=g),type:"password",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])])}}}),ve=E(we,[["__scopeId","data-v-b51498a4"]]),Ve=W("main",{persist:!0,state:()=>({_cache:{},clearOfflineCacheTag:!1}),getters:{getData:_=>a=>{if(a)return(_._cache||{})[a]}},actions:{setData({key:_,val:a}={}){_&&(this._cache=this._cache||{},this._cache[_]=a)},clear(){this._cache={}},clearOfflineCache(){console.log("clearOfflineCache"),this.clearOfflineCacheTag=!0}}}),ke={flex:"","items-center":"","gap-4":""},ye=b({__name:"authInfo",setup(_){const a=M(),p=X(),d=x(),n=()=>Ve().clearOfflineCache();function o(){a.push({path:"/login",query:{redirect:p.fullPath}})}function c(){a.push("/register")}function f(){a.push("/logout")}return(V,i)=>{const t=j,r=pe,v=ee,k=G,y=T;return s(d).logged?(w(),S(Y,{key:0},[m("div",ke,[e(t,{type:"primary",onClick:f},{default:l(()=>i[0]||(i[0]=[u(" 登出 ")])),_:1}),e(r,{link:"/userManager"},{default:l(({goto:$})=>[e(t,{onClick:$},{default:l(()=>i[1]||(i[1]=[u(" 用户权限中心 ")])),_:2},1032,["onClick"])]),_:1}),e(v,{title:"您是否确定要清空本地缓存？","confirm-button-text":"清空",onConfirm:n},{reference:l(()=>[e(t,{type:"danger",plain:""},{default:l(()=>i[2]||(i[2]=[u(" 清空本地缓存 ")])),_:1})]),_:1})]),e(k),e(ve)],64)):(w(),N(y,{key:1,"mt-4":""},{default:l(()=>[e(t,{type:"primary",onClick:o},{default:l(()=>i[3]||(i[3]=[u(" 登录 ")])),_:1}),e(t,{onClick:c},{default:l(()=>i[4]||(i[4]=[u(" 注册 ")])),_:1}),e(v,{title:"您是否确定要清空本地缓存？","confirm-button-text":"清空",onConfirm:n},{reference:l(()=>[e(t,{type:"danger",plain:""},{default:l(()=>i[5]||(i[5]=[u(" 清空本地缓存 ")])),_:1})]),_:1})]),_:1}))}}}),be=E(ye,[["__scopeId","data-v-304747f8"]]),Se={class:"settings-wrapper"},xe=b({__name:"globalSettings",setup(_){const a=D(),p=z(),d=a.general;return(n,o)=>{const c=C,f=ne,V=se,i=T,t=H;return w(),S("div",Se,[e(c,{level:4},{default:l(()=>o[5]||(o[5]=[u(" 全局设置 ")])),_:1}),e(c,{level:5},{default:l(()=>o[6]||(o[6]=[u(" 外观 ")])),_:1}),e(i,null,{default:l(()=>[e(V,{"model-value":s(d).theme.mode,onChange:s(p).setTheme},{default:l(()=>[e(f,{value:"auto",label:"跟随系统"}),e(f,{value:"light",label:"浅色"}),e(f,{value:"dark",label:"深色"})]),_:1},8,["model-value","onChange"])]),_:1}),e(c,{level:5},{default:l(()=>o[7]||(o[7]=[u(" 访问统计 ")])),_:1}),e(i,null,{default:l(()=>[e(t,{modelValue:s(d).showMost,"onUpdate:modelValue":o[0]||(o[0]=r=>s(d).showMost=r)},{default:l(()=>o[8]||(o[8]=[u(" 最常访问 ")])),_:1},8,["modelValue"]),e(t,{modelValue:s(d).showRecent,"onUpdate:modelValue":o[1]||(o[1]=r=>s(d).showRecent=r)},{default:l(()=>o[9]||(o[9]=[u(" 最近访问 ")])),_:1},8,["modelValue"])]),_:1}),e(c,{level:5},{default:l(()=>o[10]||(o[10]=[u(" 其他设置 ")])),_:1}),e(i,null,{default:l(()=>[e(t,{modelValue:s(d).showSearch,"onUpdate:modelValue":o[2]||(o[2]=r=>s(d).showSearch=r)},{default:l(()=>o[11]||(o[11]=[u(" 显示搜索 ")])),_:1},8,["modelValue"]),e(t,{modelValue:s(d).showType,"onUpdate:modelValue":o[3]||(o[3]=r=>s(d).showType=r)},{default:l(()=>o[12]||(o[12]=[u(" 显示分类 ")])),_:1},8,["modelValue"]),e(t,{modelValue:s(d).openInNewTab,"onUpdate:modelValue":o[4]||(o[4]=r=>s(d).openInNewTab=r)},{default:l(()=>o[13]||(o[13]=[u(" 新标签页打开工具 ")])),_:1},8,["modelValue"])]),_:1})])}}}),Ee=E(xe,[["__scopeId","data-v-f2fa67ef"]]),Ce={flex:"","flex-wrap":"","items-start":"","gap-4":""},Pe=b({__name:"settings",setup(_){const a=x();return(p,d)=>{const n=C,o=G;return w(),S("div",null,[s(a).logged?(w(),N(n,{key:0,level:3},{default:l(()=>[u(P(s(a).profile.nickName)+" 欢迎你~ ",1)]),_:1})):U("",!0),e(be),e(o),m("div",Ce,[e(Ee),e(ue,{"flex-1":""})])])}}}),he=E(Pe,[["__scopeId","data-v-0add9d51"]]);export{he as default};
