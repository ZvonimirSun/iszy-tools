import{k as y,R as V,a4 as z,J as F,aw as K,T as P,E as U,r as q,F as u,K as o,w as s,W as B,bk as p,x as a,L as R,N as w,aA as _,a0 as C}from"./index-eMN9lPih.js";import{E as I,a as M}from"./el-form-item-AU-1Y0UE.js";import"./castArray-CRfAPi9R.js";import"./clone-CDA8DMoS.js";const $=/^(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\v\f\x0E-\x1F\x21\x23-\x5B\x5D-\x7F]|\\[\x01-\x09\v\f\x0E-\x7F])\*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4]\d|[01]?\d{1,2})\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d{1,2}|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\v\f\x0E-\x1F\x21-\x5A\x53-\x7F]|\\[\x01-\x09\v\f\x0E-\x7F])+)\])$/,A=/^1[3-9]\d{9}$/,L={class:"login-container"},G={class:"main"},O=y({__name:"register",setup(S){const m=V(),l=z({userName:"",nickName:"",passwd:"",rePasswd:"",mobile:"",email:""}),v=z({userName:[{required:!0,trigger:"blur",validator:(i,e,r)=>{!e||!e.trim()?r(new Error("请输入用户名")):r()}}],nickName:[{required:!0,trigger:"blur",validator:(i,e,r)=>{!e||!e.trim()?r(new Error("请输入昵称")):r()}}],passwd:[{trigger:"blur",validator:(i,e,r)=>{if(e==="")r(new Error("请输入密码"));else{if(l.rePasswd!==""){if(!m.value)return;m.value.validateField("rePasswd",()=>{})}r()}}}],rePasswd:[{trigger:"change",validator:(i,e,r)=>{e===""?r(new Error("请再次输入密码")):e!==l.passwd?r("两次输入密码不一致!"):r()}}],mobile:[{trigger:"change",validator:(i,e,r)=>{e===""||A.test(e)?r():r("请输入正确的手机号码")}}],email:[{trigger:"change",validator:(i,e,r)=>{e===""||$.test(e)?r():r("请输入正确的邮箱")}}]}),f=V(!1),g=F(),E=K();P(()=>{E.logged&&g.back()});function n(){m.value&&m.value.validate(i=>{i&&(l.userName=l.userName.trim(),l.nickName=l.nickName.trim(),l.email=l.email.trim(),l.mobile=l.mobile.trim(),f.value=!0,E.register(l).then(e=>{e?(_.success("注册成功，请前往登录"),g.push("/login")):(_.success("注册成功，请等待管理员审批"),g.push("/"))}).catch(e=>{_.error(e.message)}).finally(()=>{f.value=!1}))})}function N(){var i;(i=m.value)==null||i.resetFields()}function b(){g.push("/login")}return(i,e)=>{const r=B,d=I,x=R,k=M;return q(),U("div",L,[u("div",G,[o(k,{ref_key:"registerFormRef",ref:m,layout:"horizontal",model:a(l),rules:a(v),"status-icon":"","label-width":"auto"},{default:s(()=>[o(d,{required:"",label:"用户名",prop:"userName"},{default:s(()=>[o(r,{modelValue:a(l).userName,"onUpdate:modelValue":e[0]||(e[0]=t=>a(l).userName=t),size:"large",onKeydown:p(n,["enter"])},{prefix:s(()=>e[6]||(e[6]=[u("span",{class:"i-icon-park-outline-user"},null,-1)])),_:1},8,["modelValue"])]),_:1}),o(d,{required:"",label:"昵称",prop:"nickName"},{default:s(()=>[o(r,{modelValue:a(l).nickName,"onUpdate:modelValue":e[1]||(e[1]=t=>a(l).nickName=t),size:"large",onKeydown:p(n,["enter"])},{prefix:s(()=>e[7]||(e[7]=[u("span",{class:"i-icon-park-outline-user"},null,-1)])),_:1},8,["modelValue"])]),_:1}),o(d,{required:"",label:"密码",prop:"passwd"},{default:s(()=>[o(r,{modelValue:a(l).passwd,"onUpdate:modelValue":e[2]||(e[2]=t=>a(l).passwd=t),type:"password",size:"large","show-password":"",autocomplete:"off",onKeydown:p(n,["enter"])},{prefix:s(()=>e[8]||(e[8]=[u("span",{class:"i-icon-park-outline-lock"},null,-1)])),_:1},8,["modelValue"])]),_:1}),o(d,{required:"",label:"重复密码",prop:"rePasswd"},{default:s(()=>[o(r,{modelValue:a(l).rePasswd,"onUpdate:modelValue":e[3]||(e[3]=t=>a(l).rePasswd=t),type:"password",size:"large","show-password":"",autocomplete:"off",onKeydown:p(n,["enter"])},{prefix:s(()=>e[9]||(e[9]=[u("span",{class:"i-icon-park-outline-lock"},null,-1)])),_:1},8,["modelValue"])]),_:1}),o(d,{label:"手机号",prop:"mobile"},{default:s(()=>[o(r,{modelValue:a(l).mobile,"onUpdate:modelValue":e[4]||(e[4]=t=>a(l).mobile=t),size:"large",onKeydown:p(n,["enter"])},{prefix:s(()=>e[10]||(e[10]=[u("span",{class:"i-icon-park-outline-phone"},null,-1)])),_:1},8,["modelValue"])]),_:1}),o(d,{label:"邮箱",prop:"email"},{default:s(()=>[o(r,{modelValue:a(l).email,"onUpdate:modelValue":e[5]||(e[5]=t=>a(l).email=t),size:"large",onKeydown:p(n,["enter"])},{prefix:s(()=>e[11]||(e[11]=[u("span",{class:"i-icon-park-outline-mail"},null,-1)])),_:1},8,["modelValue"])]),_:1}),o(d,null,{default:s(()=>[o(x,{type:"primary",block:"",size:"large",loading:a(f),onClick:n},{default:s(()=>e[12]||(e[12]=[w(" 注册 ")])),_:1},8,["loading"]),o(x,{block:"",size:"large",disabled:a(f),onClick:N},{default:s(()=>e[13]||(e[13]=[w(" 重置 ")])),_:1},8,["disabled"]),o(x,{block:"",size:"large",disabled:a(f),onClick:b},{default:s(()=>e[14]||(e[14]=[w(" 返回登录 ")])),_:1},8,["disabled"])]),_:1})]),_:1},8,["model","rules"])])])}}}),H=C(O,[["__scopeId","data-v-df70f109"]]);export{H as default};
