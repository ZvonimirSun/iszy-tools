import{j as k,B as u,aJ as q,ar as E,q as I,l as B,o as K,c as S,a as i,b as a,ae as t,y as r,bi as h,W as z,bk as C,aa as g,af as L,aM as M,ag as U,aL as F,am as Q,an as R,a3 as j}from"./vendor-7c5ae7bf.js";import{u as J}from"./common-cdf83cfa.js";import"./ant-design-vue-67d75677.js";const w=n=>(Q("data-v-4d7b2b31"),n=n(),R(),n),O={class:"login-container"},P={class:"main"},T=w(()=>i("span",{class:"i-icon-park-outline-user"},null,-1)),W=w(()=>i("span",{class:"i-icon-park-outline-lock"},null,-1)),A={class:"btn-wrapper"},D=k({__name:"login",setup(n){const s=u({userName:"",password:""}),c=u(),d=u({}),p=u(!1),y=q(),b=E(),v=J();I(b,function(o){const e=o.query;e&&(typeof e.redirect=="string"&&(c.value=e.redirect),d.value=x(e))},{immediate:!0}),B(()=>{v.isLogged&&y.push({path:c.value||"/",query:d.value})});async function _(){if(!navigator.onLine){g.warning("已离线！");return}if(s.value.userName!=null&&s.value.password!=null){p.value=!0;try{await v.login({userName:s.value.userName,password:s.value.password}),g.success("登录成功！"),y.push({path:c.value||"/",query:d.value})}catch(o){o instanceof Error&&g.error(o.message)}p.value=!1}}function x(o){const{redirect:e,...l}=o;return l}return(o,e)=>{const l=L,m=M,N=U,V=F;return K(),S("div",O,[i("div",P,[a(V,C({layout:"horizontal",model:r(s)},{wrapperCol:{span:24}}),{default:t(()=>[a(m,{required:""},{default:t(()=>[a(l,{modelValue:r(s).userName,"onUpdate:modelValue":e[0]||(e[0]=f=>r(s).userName=f),placeholder:"账户",size:"large",onKeypress:h(_,["enter"])},{prefix:t(()=>[T]),_:1},8,["modelValue","onKeypress"])]),_:1}),a(m,{required:""},{default:t(()=>[a(l,{modelValue:r(s).password,"onUpdate:modelValue":e[1]||(e[1]=f=>r(s).password=f),type:"password",placeholder:"密码",size:"large","show-password":"",onKeypress:h(_,["enter"])},{prefix:t(()=>[W]),_:1},8,["modelValue","onKeypress"])]),_:1}),a(m,null,{default:t(()=>[i("div",A,[a(N,{type:"primary",block:"",size:"large",loading:r(p),onClick:_},{default:t(()=>[z(" 登录 ")]),_:1},8,["loading"])])]),_:1})]),_:1},16,["model"])])])}}});const Y=j(D,[["__scopeId","data-v-4d7b2b31"]]);export{Y as default};
