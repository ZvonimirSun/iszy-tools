import{a4 as V,a5 as xe,a6 as Oe,a7 as eo,a8 as oo,a9 as Fe,_ as no,h as to}from"./Router-VR5E3R1i.js";import{_ as W,F as j,G as U,t as C,E as le,I as P,o as Ke,u as v,v as be,C as me,l as Y,a8 as $,m as D,ag as lo,aa as re,w as he,b8 as so,av as O,J as K,a0 as x,a1 as a,bO as ao,bP as ro,X as r,af as Ae,aN as io,b9 as uo,as as we,b4 as Ge,bQ as co,H as Ie,ba as po,bR as fo,bq as mo,K as Z,bo as vo,a2 as ie,L as fe,a3 as te,p as ze,ap as b,aj as go,ay as _e,T as _o,bS as bo,N as ho,a7 as wo,bH as Ve,bT as Re,bJ as Be,aF as Io,ar as G,ai as Pe,aw as ce,P as oe,ab as ne,az as yo,aA as Co,aB as Eo,aC as To}from"./index-00nQ1YxB.js";import{c as Ue,E as $o}from"./el-dialog-0CZ6MIrG.js";import{E as ko}from"./el-space-eRJi4R8F.js";import{E as So}from"./el-scrollbar-h_bL29ZR.js";import{F as No,h as pe}from"./jse-theme-dark-jzpi1pUQ.js";import{c as De}from"./createFile-3m6yiTVP.js";import{f as Oo}from"./formatBytes-TJBQWjKc.js";import{c as Fo}from"./castArray-2alZDx6Z.js";const Ro=j({inheritAttrs:!1});function Bo(e,o,_,t,m,h){return U(e.$slots,"default")}var Po=W(Ro,[["render",Bo],["__file","collection.vue"]]);const Do=j({name:"ElCollectionItem",inheritAttrs:!1});function Lo(e,o,_,t,m,h){return U(e.$slots,"default")}var Mo=W(Do,[["render",Lo],["__file","collection-item.vue"]]);const Je="data-el-collection-item",Ye=e=>{const o=`El${e}Collection`,_=`${o}Item`,t=Symbol(o),m=Symbol(_),h={...Po,name:o,setup(){const i=C(null),y=new Map;le(t,{itemMap:y,getItems:()=>{const w=v(i);if(!w)return[];const d=Array.from(w.querySelectorAll(`[${Je}]`));return[...y.values()].sort((n,g)=>d.indexOf(n.ref)-d.indexOf(g.ref))},collectionRef:i})}},u={...Mo,name:_,setup(i,{attrs:y}){const s=C(null),w=P(t,void 0);le(m,{collectionItemRef:s}),Ke(()=>{const d=v(s);d&&w.itemMap.set(d,{ref:d,...y})}),be(()=>{const d=v(s);w.itemMap.delete(d)})}};return{COLLECTION_INJECTION_KEY:t,COLLECTION_ITEM_INJECTION_KEY:m,ElCollection:h,ElCollectionItem:u}},Ko=me({style:{type:Y([String,Array,Object])},currentTabId:{type:Y(String)},defaultCurrentTabId:String,loop:Boolean,dir:{type:String,values:["ltr","rtl"],default:"ltr"},orientation:{type:Y(String)},onBlur:Function,onFocus:Function,onMousedown:Function}),{ElCollection:Ao,ElCollectionItem:Go,COLLECTION_INJECTION_KEY:ye,COLLECTION_ITEM_INJECTION_KEY:zo}=Ye("RovingFocusGroup"),Ce=Symbol("elRovingFocusGroup"),je=Symbol("elRovingFocusGroupItem"),Vo={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"},Uo=(e,o)=>{if(o!=="rtl")return e;switch(e){case $.right:return $.left;case $.left:return $.right;default:return e}},Jo=(e,o,_)=>{const t=Uo(e.key,_);if(!(o==="vertical"&&[$.left,$.right].includes(t))&&!(o==="horizontal"&&[$.up,$.down].includes(t)))return Vo[t]},Yo=(e,o)=>e.map((_,t)=>e[(t+o)%e.length]),Ee=e=>{const{activeElement:o}=document;for(const _ of e)if(_===o||(_.focus(),o!==document.activeElement))return},Le="currentTabIdChange",Me="rovingFocusGroup.entryFocus",jo={bubbles:!1,cancelable:!0},Ho=j({name:"ElRovingFocusGroupImpl",inheritAttrs:!1,props:Ko,emits:[Le,"entryFocus"],setup(e,{emit:o}){var _;const t=C((_=e.currentTabId||e.defaultCurrentTabId)!=null?_:null),m=C(!1),h=C(!1),u=C(null),{getItems:i}=P(ye,void 0),y=D(()=>[{outline:"none"},e.style]),s=f=>{o(Le,f)},w=()=>{m.value=!0},d=V(f=>{var I;(I=e.onMousedown)==null||I.call(e,f)},()=>{h.value=!0}),T=V(f=>{var I;(I=e.onFocus)==null||I.call(e,f)},f=>{const I=!v(h),{target:F,currentTarget:S}=f;if(F===S&&I&&!v(m)){const J=new Event(Me,jo);if(S==null||S.dispatchEvent(J),!J.defaultPrevented){const N=i().filter(L=>L.focusable),R=N.find(L=>L.active),B=N.find(L=>L.id===v(t)),H=[R,B,...N].filter(Boolean).map(L=>L.ref);Ee(H)}}h.value=!1}),n=V(f=>{var I;(I=e.onBlur)==null||I.call(e,f)},()=>{m.value=!1}),g=(...f)=>{o("entryFocus",...f)};le(Ce,{currentTabbedId:lo(t),loop:re(e,"loop"),tabIndex:D(()=>v(m)?-1:0),rovingFocusGroupRef:u,rovingFocusGroupRootStyle:y,orientation:re(e,"orientation"),dir:re(e,"dir"),onItemFocus:s,onItemShiftTab:w,onBlur:n,onFocus:T,onMousedown:d}),he(()=>e.currentTabId,f=>{t.value=f??null}),so(u,Me,g)}});function Wo(e,o,_,t,m,h){return U(e.$slots,"default")}var qo=W(Ho,[["render",Wo],["__file","roving-focus-group-impl.vue"]]);const Qo=j({name:"ElRovingFocusGroup",components:{ElFocusGroupCollection:Ao,ElRovingFocusGroupImpl:qo}});function Xo(e,o,_,t,m,h){const u=O("el-roving-focus-group-impl"),i=O("el-focus-group-collection");return K(),x(i,null,{default:a(()=>[r(u,ro(ao(e.$attrs)),{default:a(()=>[U(e.$slots,"default")]),_:3},16)]),_:3})}var Zo=W(Qo,[["render",Xo],["__file","roving-focus-group.vue"]]);const xo=j({components:{ElRovingFocusCollectionItem:Go},props:{focusable:{type:Boolean,default:!0},active:{type:Boolean,default:!1}},emits:["mousedown","focus","keydown"],setup(e,{emit:o}){const{currentTabbedId:_,loop:t,onItemFocus:m,onItemShiftTab:h}=P(Ce,void 0),{getItems:u}=P(ye,void 0),i=Ae(),y=C(null),s=V(n=>{o("mousedown",n)},n=>{e.focusable?m(v(i)):n.preventDefault()}),w=V(n=>{o("focus",n)},()=>{m(v(i))}),d=V(n=>{o("keydown",n)},n=>{const{key:g,shiftKey:f,target:I,currentTarget:F}=n;if(g===$.tab&&f){h();return}if(I!==F)return;const S=Jo(n);if(S){n.preventDefault();let N=u().filter(R=>R.focusable).map(R=>R.ref);switch(S){case"last":{N.reverse();break}case"prev":case"next":{S==="prev"&&N.reverse();const R=N.indexOf(F);N=t.value?Yo(N,R+1):N.slice(R+1);break}}io(()=>{Ee(N)})}}),T=D(()=>_.value===v(i));return le(je,{rovingFocusGroupItemRef:y,tabIndex:D(()=>v(T)?0:-1),handleMousedown:s,handleFocus:w,handleKeydown:d}),{id:i,handleKeydown:d,handleFocus:w,handleMousedown:s}}});function en(e,o,_,t,m,h){const u=O("el-roving-focus-collection-item");return K(),x(u,{id:e.id,focusable:e.focusable,active:e.active},{default:a(()=>[U(e.$slots,"default")]),_:3},8,["id","focusable","active"])}var on=W(xo,[["render",en],["__file","roving-focus-item.vue"]]);const nn=me({trigger:xe.trigger,effect:{...Oe.effect,default:"light"},type:{type:Y(String)},placement:{type:Y(String),default:"bottom"},popperOptions:{type:Y(Object),default:()=>({})},id:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},loop:{type:Boolean,default:!0},showTimeout:{type:Number,default:150},hideTimeout:{type:Number,default:150},tabindex:{type:Y([Number,String]),default:0},maxHeight:{type:Y([Number,String]),default:""},popperClass:{type:String,default:""},disabled:{type:Boolean,default:!1},role:{type:String,default:"menu"},buttonProps:{type:Y(Object)},teleported:Oe.teleported}),He=me({command:{type:[Object,String,Number],default:()=>({})},disabled:Boolean,divided:Boolean,textValue:String,icon:{type:uo}}),tn=me({onKeydown:{type:Y(Function)}}),ln=[$.down,$.pageDown,$.home],We=[$.up,$.pageUp,$.end],sn=[...ln,...We],{ElCollection:an,ElCollectionItem:rn,COLLECTION_INJECTION_KEY:un,COLLECTION_ITEM_INJECTION_KEY:dn}=Ye("Dropdown"),ve=Symbol("elDropdown"),{ButtonGroup:cn}=we,pn=j({name:"ElDropdown",components:{ElButton:we,ElButtonGroup:cn,ElScrollbar:So,ElDropdownCollection:an,ElTooltip:eo,ElRovingFocusGroup:Zo,ElOnlyChild:oo,ElIcon:Ge,ArrowDown:co},props:nn,emits:["visible-change","click","command"],setup(e,{emit:o}){const _=ze(),t=Ie("dropdown"),{t:m}=po(),h=C(),u=C(),i=C(null),y=C(null),s=C(null),w=C(null),d=C(!1),T=[$.enter,$.space,$.down],n=D(()=>({maxHeight:fo(e.maxHeight)})),g=D(()=>[t.m(R.value)]),f=D(()=>Fo(e.trigger)),I=Ae().value,F=D(()=>e.id||I);he([h,f],([c,M],[l])=>{var p,E,k;(p=l==null?void 0:l.$el)!=null&&p.removeEventListener&&l.$el.removeEventListener("pointerenter",z),(E=c==null?void 0:c.$el)!=null&&E.removeEventListener&&c.$el.removeEventListener("pointerenter",z),(k=c==null?void 0:c.$el)!=null&&k.addEventListener&&M.includes("hover")&&c.$el.addEventListener("pointerenter",z)},{immediate:!0}),be(()=>{var c,M;(M=(c=h.value)==null?void 0:c.$el)!=null&&M.removeEventListener&&h.value.$el.removeEventListener("pointerenter",z)});function S(){J()}function J(){var c;(c=i.value)==null||c.onClose()}function N(){var c;(c=i.value)==null||c.onOpen()}const R=mo();function B(...c){o("command",...c)}function z(){var c,M;(M=(c=h.value)==null?void 0:c.$el)==null||M.focus()}function H(){}function L(){const c=v(y);f.value.includes("hover")&&(c==null||c.focus()),w.value=null}function ue(c){w.value=c}function q(c){d.value||(c.preventDefault(),c.stopImmediatePropagation())}function Q(){o("visible-change",!0)}function de(c){(c==null?void 0:c.type)==="keydown"&&y.value.focus()}function ge(){o("visible-change",!1)}return le(ve,{contentRef:y,role:D(()=>e.role),triggerId:F,isUsingKeyboard:d,onItemEnter:H,onItemLeave:L}),le("elDropdown",{instance:_,dropdownSize:R,handleClick:S,commandHandler:B,trigger:re(e,"trigger"),hideOnClick:re(e,"hideOnClick")}),{t:m,ns:t,scrollbar:s,wrapStyle:n,dropdownTriggerKls:g,dropdownSize:R,triggerId:F,triggerKeys:T,currentTabId:w,handleCurrentTabIdChange:ue,handlerMainButtonClick:c=>{o("click",c)},handleEntryFocus:q,handleClose:J,handleOpen:N,handleBeforeShowTooltip:Q,handleShowTooltip:de,handleBeforeHideTooltip:ge,onFocusAfterTrapped:c=>{var M,l;c.preventDefault(),(l=(M=y.value)==null?void 0:M.focus)==null||l.call(M,{preventScroll:!0})},popperRef:i,contentRef:y,triggeringElementRef:h,referenceElementRef:u}}});function fn(e,o,_,t,m,h){var u;const i=O("el-dropdown-collection"),y=O("el-roving-focus-group"),s=O("el-scrollbar"),w=O("el-only-child"),d=O("el-tooltip"),T=O("el-button"),n=O("arrow-down"),g=O("el-icon"),f=O("el-button-group");return K(),Z("div",{class:fe([e.ns.b(),e.ns.is("disabled",e.disabled)])},[r(d,{ref:"popperRef",role:e.role,effect:e.effect,"fallback-placements":["bottom","top"],"popper-options":e.popperOptions,"gpu-acceleration":!1,"hide-after":e.trigger==="hover"?e.hideTimeout:0,"manual-mode":!0,placement:e.placement,"popper-class":[e.ns.e("popper"),e.popperClass],"reference-element":(u=e.referenceElementRef)==null?void 0:u.$el,trigger:e.trigger,"trigger-keys":e.triggerKeys,"trigger-target-el":e.contentRef,"show-after":e.trigger==="hover"?e.showTimeout:0,"stop-popper-mouse-event":!1,"virtual-ref":e.triggeringElementRef,"virtual-triggering":e.splitButton,disabled:e.disabled,transition:`${e.ns.namespace.value}-zoom-in-top`,teleported:e.teleported,pure:"",persistent:"",onBeforeShow:e.handleBeforeShowTooltip,onShow:e.handleShowTooltip,onBeforeHide:e.handleBeforeHideTooltip},vo({content:a(()=>[r(s,{ref:"scrollbar","wrap-style":e.wrapStyle,tag:"div","view-class":e.ns.e("list")},{default:a(()=>[r(y,{loop:e.loop,"current-tab-id":e.currentTabId,orientation:"horizontal",onCurrentTabIdChange:e.handleCurrentTabIdChange,onEntryFocus:e.handleEntryFocus},{default:a(()=>[r(i,null,{default:a(()=>[U(e.$slots,"dropdown")]),_:3})]),_:3},8,["loop","current-tab-id","onCurrentTabIdChange","onEntryFocus"])]),_:3},8,["wrap-style","view-class"])]),_:2},[e.splitButton?void 0:{name:"default",fn:a(()=>[r(w,{id:e.triggerId,ref:"triggeringElementRef",role:"button",tabindex:e.tabindex},{default:a(()=>[U(e.$slots,"default")]),_:3},8,["id","tabindex"])])}]),1032,["role","effect","popper-options","hide-after","placement","popper-class","reference-element","trigger","trigger-keys","trigger-target-el","show-after","virtual-ref","virtual-triggering","disabled","transition","teleported","onBeforeShow","onShow","onBeforeHide"]),e.splitButton?(K(),x(f,{key:0},{default:a(()=>[r(T,ie({ref:"referenceElementRef"},e.buttonProps,{size:e.dropdownSize,type:e.type,disabled:e.disabled,tabindex:e.tabindex,onClick:e.handlerMainButtonClick}),{default:a(()=>[U(e.$slots,"default")]),_:3},16,["size","type","disabled","tabindex","onClick"]),r(T,ie({id:e.triggerId,ref:"triggeringElementRef"},e.buttonProps,{role:"button",size:e.dropdownSize,type:e.type,class:e.ns.e("caret-button"),disabled:e.disabled,tabindex:e.tabindex,"aria-label":e.t("el.dropdown.toggleDropdown")}),{default:a(()=>[r(g,{class:fe(e.ns.e("icon"))},{default:a(()=>[r(n)]),_:1},8,["class"])]),_:1},16,["id","size","type","class","disabled","tabindex","aria-label"])]),_:3})):te("v-if",!0)],2)}var mn=W(pn,[["render",fn],["__file","dropdown.vue"]]);const vn=j({name:"DropdownItemImpl",components:{ElIcon:Ge},props:He,emits:["pointermove","pointerleave","click","clickimpl"],setup(e,{emit:o}){const _=Ie("dropdown"),{role:t}=P(ve,void 0),{collectionItemRef:m}=P(dn,void 0),{collectionItemRef:h}=P(zo,void 0),{rovingFocusGroupItemRef:u,tabIndex:i,handleFocus:y,handleKeydown:s,handleMousedown:w}=P(je,void 0),d=Ue(m,h,u),T=D(()=>t.value==="menu"?"menuitem":t.value==="navigation"?"link":"button"),n=V(g=>{const{code:f}=g;if(f===$.enter||f===$.space)return g.preventDefault(),g.stopImmediatePropagation(),o("clickimpl",g),!0},s);return{ns:_,itemRef:d,dataset:{[Je]:""},role:T,tabIndex:i,handleFocus:y,handleKeydown:n,handleMousedown:w}}}),gn=["aria-disabled","tabindex","role"];function _n(e,o,_,t,m,h){const u=O("el-icon");return K(),Z(_o,null,[e.divided?(K(),Z("li",ie({key:0,role:"separator",class:e.ns.bem("menu","item","divided")},e.$attrs),null,16)):te("v-if",!0),b("li",ie({ref:e.itemRef},{...e.dataset,...e.$attrs},{"aria-disabled":e.disabled,class:[e.ns.be("menu","item"),e.ns.is("disabled",e.disabled)],tabindex:e.tabIndex,role:e.role,onClick:o[0]||(o[0]=i=>e.$emit("clickimpl",i)),onFocus:o[1]||(o[1]=(...i)=>e.handleFocus&&e.handleFocus(...i)),onKeydown:o[2]||(o[2]=_e((...i)=>e.handleKeydown&&e.handleKeydown(...i),["self"])),onMousedown:o[3]||(o[3]=(...i)=>e.handleMousedown&&e.handleMousedown(...i)),onPointermove:o[4]||(o[4]=i=>e.$emit("pointermove",i)),onPointerleave:o[5]||(o[5]=i=>e.$emit("pointerleave",i))}),[e.icon?(K(),x(u,{key:0},{default:a(()=>[(K(),x(go(e.icon)))]),_:1})):te("v-if",!0),U(e.$slots,"default")],16,gn)],64)}var bn=W(vn,[["render",_n],["__file","dropdown-item-impl.vue"]]);const qe=()=>{const e=P("elDropdown",{}),o=D(()=>e==null?void 0:e.dropdownSize);return{elDropdown:e,_elDropdownSize:o}},hn=j({name:"ElDropdownItem",components:{ElDropdownCollectionItem:rn,ElRovingFocusItem:on,ElDropdownItemImpl:bn},inheritAttrs:!1,props:He,emits:["pointermove","pointerleave","click"],setup(e,{emit:o,attrs:_}){const{elDropdown:t}=qe(),m=ze(),h=C(null),u=D(()=>{var n,g;return(g=(n=v(h))==null?void 0:n.textContent)!=null?g:""}),{onItemEnter:i,onItemLeave:y}=P(ve,void 0),s=V(n=>(o("pointermove",n),n.defaultPrevented),Fe(n=>{if(e.disabled){y(n);return}const g=n.currentTarget;g===document.activeElement||g.contains(document.activeElement)||(i(n),n.defaultPrevented||g==null||g.focus())})),w=V(n=>(o("pointerleave",n),n.defaultPrevented),Fe(n=>{y(n)})),d=V(n=>{if(!e.disabled)return o("click",n),n.type!=="keydown"&&n.defaultPrevented},n=>{var g,f,I;if(e.disabled){n.stopImmediatePropagation();return}(g=t==null?void 0:t.hideOnClick)!=null&&g.value&&((f=t.handleClick)==null||f.call(t)),(I=t.commandHandler)==null||I.call(t,e.command,m,n)}),T=D(()=>({...e,..._}));return{handleClick:d,handlePointerMove:s,handlePointerLeave:w,textContent:u,propsAndAttrs:T}}});function wn(e,o,_,t,m,h){var u;const i=O("el-dropdown-item-impl"),y=O("el-roving-focus-item"),s=O("el-dropdown-collection-item");return K(),x(s,{disabled:e.disabled,"text-value":(u=e.textValue)!=null?u:e.textContent},{default:a(()=>[r(y,{focusable:!e.disabled},{default:a(()=>[r(i,ie(e.propsAndAttrs,{onPointerleave:e.handlePointerLeave,onPointermove:e.handlePointerMove,onClickimpl:e.handleClick}),{default:a(()=>[U(e.$slots,"default")]),_:3},16,["onPointerleave","onPointermove","onClickimpl"])]),_:3},8,["focusable"])]),_:3},8,["disabled","text-value"])}var Qe=W(hn,[["render",wn],["__file","dropdown-item.vue"]]);const In=j({name:"ElDropdownMenu",props:tn,setup(e){const o=Ie("dropdown"),{_elDropdownSize:_}=qe(),t=_.value,{focusTrapRef:m,onKeydown:h}=P(bo,void 0),{contentRef:u,role:i,triggerId:y}=P(ve,void 0),{collectionRef:s,getItems:w}=P(un,void 0),{rovingFocusGroupRef:d,rovingFocusGroupRootStyle:T,tabIndex:n,onBlur:g,onFocus:f,onMousedown:I}=P(Ce,void 0),{collectionRef:F}=P(ye,void 0),S=D(()=>[o.b("menu"),o.bm("menu",t==null?void 0:t.value)]),J=Ue(u,s,m,d,F),N=V(B=>{var z;(z=e.onKeydown)==null||z.call(e,B)},B=>{const{currentTarget:z,code:H,target:L}=B;if(z.contains(L),$.tab===H&&B.stopImmediatePropagation(),B.preventDefault(),L!==v(u)||!sn.includes(H))return;const q=w().filter(Q=>!Q.disabled).map(Q=>Q.ref);We.includes(H)&&q.reverse(),Ee(q)});return{size:t,rovingFocusGroupRootStyle:T,tabIndex:n,dropdownKls:S,role:i,triggerId:y,dropdownListWrapperRef:J,handleKeydown:B=>{N(B),h(B)},onBlur:g,onFocus:f,onMousedown:I}}}),yn=["role","aria-labelledby"];function Cn(e,o,_,t,m,h){return K(),Z("ul",{ref:e.dropdownListWrapperRef,class:fe(e.dropdownKls),style:ho(e.rovingFocusGroupRootStyle),tabindex:-1,role:e.role,"aria-labelledby":e.triggerId,onBlur:o[0]||(o[0]=(...u)=>e.onBlur&&e.onBlur(...u)),onFocus:o[1]||(o[1]=(...u)=>e.onFocus&&e.onFocus(...u)),onKeydown:o[2]||(o[2]=_e((...u)=>e.handleKeydown&&e.handleKeydown(...u),["self"])),onMousedown:o[3]||(o[3]=_e((...u)=>e.onMousedown&&e.onMousedown(...u),["self"]))},[U(e.$slots,"default")],46,yn)}var Xe=W(In,[["render",Cn],["__file","dropdown-menu.vue"]]);const En=wo(mn,{DropdownItem:Qe,DropdownMenu:Xe}),Tn=Ve(Qe),$n=Ve(Xe),A=e=>(Co("data-v-a39be3a4"),e=e(),Eo(),e),kn={key:0,class:"json-editor-menu"},Sn={key:0,class:"editorTitle"},Nn=A(()=>b("span",{class:"buttonWithIcon"},[b("span",{class:"i-icon-park-outline-file-addition-one"}),G(" 新建")],-1)),On=A(()=>b("span",{class:"buttonWithIcon"},[b("span",{class:"i-icon-park-outline-history"}),G(" 打开最近记录")],-1)),Fn=A(()=>b("span",{class:"buttonWithIcon"},[b("span",{class:"i-icon-park-outline-computer"}),G(" 打开本地文件")],-1)),Rn=A(()=>b("span",{class:"buttonWithIcon"},[b("span",{class:"i-icon-park-outline-folder-open"}),G(" 打开"),b("span",{class:"i-icon-park-outline-down"})],-1)),Bn=A(()=>b("span",{class:"buttonWithIcon"},[b("span",{class:"i-icon-park-outline-save"}),G(" 保存")],-1)),Pn={class:"buttonWithIcon"},Dn=A(()=>b("span",{class:"i-icon-park-outline-indent-right"},null,-1)),Ln=A(()=>b("span",{class:"buttonWithIcon"},[b("span",{class:"i-icon-park-outline-info"}),G(" 文档属性")],-1)),Mn=A(()=>b("span",{class:"buttonWithIcon"},[b("span",{class:"i-icon-park-outline-delete"}),G(" 删除文档")],-1)),Kn=A(()=>b("span",{class:"buttonWithIcon"},[b("span",{class:"i-icon-park-outline-setting-two"}),G(" 选项"),b("span",{class:"i-icon-park-outline-down"})],-1)),An={class:"dialog-footer"},Gn=A(()=>b("strong",null,"名称：",-1)),zn=A(()=>b("strong",null,"存储：",-1)),Vn=A(()=>b("strong",null,"更新：",-1)),Un=A(()=>b("strong",null,"内容：",-1)),Jn=A(()=>b("strong",null,"大小：",-1)),Yn=j({__name:"VanillaJsonEditor",props:{content:{default:void 0},config:{default:()=>({mode:"text"})},showMenuBar:{type:Boolean,default:!1},name:{default:""}},emits:["change","create","changeName","open","openRecent","delete"],setup(e,{expose:o,emit:_}){const t=e,m=_,h=["content","mode","mainMenuBar","navigationBar","statusBar","readOnly","indentation","tabSize","escapeControlCharacters","escapeUnicodeCharacters","validator","onError","onChange","onChangeMode","onClassName","onRenderValue","onRenderMenu","queryLanguages","queryLanguageId","onChangeQueryLanguage","onFocus","onBlur"],u=C(),i=C(),y=C();let s;const w=C(""),d=C(2),T=C(!1),n=C(!1),g=C(!1),f=C(""),I=D(()=>{if(n){const l=s.get();let p,E;return pe(l)?E=l.json:E=l.text,typeof E=="string"?p="字符串类型":Array.isArray(E)?p=`数组类型，包含 ${E.length} 个对象`:E&&typeof E=="object"?p=`对象类型，包含 ${Object.keys(E).length} 个属性`:p="其他类型",{name:w.value,storage:w.value?"浏览器本地":"",updated:"",content:p,size:Oo(typeof E=="string"?E.length:JSON.stringify(E,null,d.value).length)}}else return{}});let F=!1;o({container:i,update:B,set:z,refresh:L,get:H});let S={};Ke(()=>{u.value&&(S=Re(t.config),s=new No({target:u.value,props:{content:{json:{}},onChange:l=>{F||(pe(l)?m("change",l.json):m("change",l.text))},indentation:d.value,...M(S,h)}}),t.config.indentation&&(d.value=t.config.indentation))}),be(()=>{s==null||s.destroy()}),he(()=>Be().isDark,()=>{s==null||s.refresh()}),Io(()=>{let l=!1;for(const p in t.config)if(t.config[p]!==S[p]){l=!0;break}l&&(S=Re(t.config),s==null||s.updateProps(M(S,h))),t.content!=null&&B(t.content),w.value=t.name,s==null||s.refresh()});function J(){s.set({json:{}}),m("create")}function N(l){var p;switch(l){case"file":(p=y.value)==null||p.click();break;case"recent":m("openRecent");break}}function R(l){const p=l.target;if(p.files&&p.files.length){const E=p.files[0],k=new FileReader;k.onload=()=>{k.result&&m("open",{name:E.name,content:k.result})},k.readAsText(E)}p.value=""}function B(l){F=!0;let p;l!=null&&(typeof l=="string"?p=l:p=JSON.stringify(l,null,d.value),s.update({text:p})),setTimeout(()=>{F=!1},0)}function z(l){F=!0,l!=null&&(typeof l=="string"?s.set({text:l}):s.set({json:l})),setTimeout(()=>{F=!1},0)}function H(){const l=s.get();return pe(l)?l.json:l.text}function L(){s==null||s.refresh()}function ue(){const l=s.get(),p=w.value?`${w.value}.json`:"未命名.json";pe(l)?De(JSON.stringify(l.json),p):De(l.text,p)}let q=d.value;function Q(l){switch(l){case"indentation":q=d.value,T.value=!0;break;case"properties":n.value=!0;break;case"delete":m("delete");break}}function de(){d.value=q,T.value=!1}function ge(){s.updateProps({indentation:d.value}),T.value=!1}function Te(){f.value=w.value,g.value=!0}function $e(){g.value=!1}function c(){f.value&&m("changeName",f.value),g.value=!1}function M(l,p){const E={};for(const k of p)l[k]!==void 0&&(E[k]=l[k]);return E}return(l,p)=>{const E=yo,k=we,se=Tn,ke=$n,Se=En,Ze=ko,ee=no,Ne=$o,ae=to;return K(),Z("div",{ref_key:"container",ref:i,class:"json-editor-wrapper"},[l.showMenuBar?(K(),Z("div",kn,[v(w)&&!v(g)?(K(),Z("div",Sn,[G(Pe(v(w))+" ",1),b("i",{class:"i-icon-park-outline-edit",onClick:Te})])):te("",!0),v(g)?(K(),x(E,{key:1,modelValue:v(f),"onUpdate:modelValue":p[0]||(p[0]=X=>ce(f)?f.value=X:null),class:"name-editor",placeholder:"请输入名称"},{suffix:a(()=>[b("i",{class:"i-icon-park-outline-close",onClick:$e}),b("i",{class:"i-icon-park-outline-check",onClick:c})]),_:1},8,["modelValue"])):te("",!0),r(Ze,{class:"editorControlButtons"},{default:a(()=>[r(k,{size:"small",type:"primary",onClick:J},{default:a(()=>[Nn]),_:1}),r(Se,{onCommand:N},{dropdown:a(()=>[r(ke,null,{default:a(()=>[r(se,{command:"recent"},{default:a(()=>[On]),_:1}),r(se,{command:"file"},{default:a(()=>[Fn]),_:1})]),_:1})]),default:a(()=>[r(k,{size:"small",type:"primary"},{default:a(()=>[Rn]),_:1})]),_:1}),r(k,{size:"small",type:"primary",onClick:ue},{default:a(()=>[Bn]),_:1}),r(Se,{onCommand:Q},{dropdown:a(()=>[r(ke,null,{default:a(()=>[r(se,{command:"indentation"},{default:a(()=>[b("span",Pn,[Dn,G(" 缩进("+Pe(v(d))+")",1)])]),_:1}),r(se,{command:"properties"},{default:a(()=>[Ln]),_:1}),r(se,{command:"delete"},{default:a(()=>[Mn]),_:1})]),_:1})]),default:a(()=>[r(k,{size:"small",type:"primary"},{default:a(()=>[Kn]),_:1})]),_:1})]),_:1})])):te("",!0),b("div",{ref_key:"jsonEditorDiv",ref:u,class:fe(["json-editor",{"jse-theme-dark":("useGlobalStore"in l?l.useGlobalStore:v(Be))().isDark}])},null,2),oe(b("input",{ref_key:"uploader",ref:y,type:"file",accept:".json,.geojson,.txt",onChange:R},null,544),[[ne,!1]]),r(Ne,{modelValue:v(T),"onUpdate:modelValue":p[2]||(p[2]=X=>ce(T)?T.value=X:null),title:"设置缩进","before-close":de},{footer:a(()=>[b("span",An,[r(k,{onClick:de},{default:a(()=>[G("取消")]),_:1}),r(k,{type:"primary",onClick:ge},{default:a(()=>[G(" 确定 ")]),_:1})])]),default:a(()=>[r(ee,null,{default:a(()=>[G("配置代码模式下用于缩进的空格数。 缩进同时应用于两个面板。")]),_:1}),r(E,{modelValue:v(d),"onUpdate:modelValue":p[1]||(p[1]=X=>ce(d)?d.value=X:null),modelModifiers:{number:!0}},null,8,["modelValue"])]),_:1},8,["modelValue"]),r(Ne,{modelValue:v(n),"onUpdate:modelValue":p[3]||(p[3]=X=>ce(n)?n.value=X:null),title:"文档属性",class:"documentProperties"},{default:a(()=>[r(ee,null,{default:a(()=>[Gn,oe(r(ae,{content:v(I).name},null,8,["content"]),[[ne,v(I).name]])]),_:1}),r(ee,null,{default:a(()=>[zn,oe(r(ae,{content:v(I).storage},null,8,["content"]),[[ne,v(I).storage]])]),_:1}),r(ee,null,{default:a(()=>[Vn,oe(r(ae,{content:v(I).updated},null,8,["content"]),[[ne,v(I).updated]])]),_:1}),r(ee,null,{default:a(()=>[Un,oe(r(ae,{content:v(I).content},null,8,["content"]),[[ne,v(I).content]])]),_:1}),r(ee,null,{default:a(()=>[Jn,oe(r(ae,{content:v(I).size},null,8,["content"]),[[ne,v(I).size]])]),_:1})]),_:1},8,["modelValue"])],512)}}}),ot=To(Yn,[["__scopeId","data-v-a39be3a4"]]);export{ot as V};
