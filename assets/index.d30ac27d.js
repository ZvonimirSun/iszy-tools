import{b as t,_ as y,S as c,B as w,r,o as v,n as L,s as j,bz as x,w as s,bn as d,d as z}from"./index.65a5f70e.js";/* empty css                *//* empty css                *//* empty css               *//* empty css               */import{I as u}from"./index.04049534.js";import{F as m}from"./Form.1351d5aa.js";import"./Col.21644bee.js";import"./responsiveObserve.0cd39841.js";import"./useFlexGapSupport.2f67ec13.js";import"./toArray.7664e9ea.js";import"./get.298be8a7.js";import"./hasIn.47c1d12e.js";import"./_arrayIncludesWith.15e56e3a.js";import"./toFinite.9b3512b0.js";import"./collapseMotion.236fb3cc.js";import"./debounce.c8a426a0.js";var B=u("lock",!1,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("rect",{x:"6",y:"22",width:"36",height:"22",rx:"2",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M14 22V14C14 8.47715 18.4772 4 24 4C29.5228 4 34 8.47715 34 14V22",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M24 30V36",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),C=u("user",!1,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("circle",{cx:"24",cy:"12",r:"8",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M42 44C42 34.0589 33.9411 26 24 26C14.0589 26 6 34.0589 6 44",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])});const{Item:I}=m,{Password:N}=c,b={name:"PageLogin",components:{User:C,Lock:B,Form:m,Input:c,Button:w,Item:I,Password:N},data:()=>({form:{layout:"horizontal",userName:"",password:""},redirect:void 0,otherQuery:{},loading:!1}),watch:{$route:{handler:function(e){const o=e.query;o&&(this.redirect=o.redirect,this.otherQuery=this.getOtherQuery(o))},immediate:!0}},methods:{login(){this.form.userName!=null&&this.form.password!=null&&(this.loading=!0,this.$store.dispatch("user/login",{userName:this.form.userName,password:this.form.password}).then(e=>{e?(this.$msg.success("\u767B\u5F55\u6210\u529F\uFF01"),this.$router.push({path:this.redirect||"/",query:this.otherQuery})):this.$msg.error("\u7528\u6237\u540D\u6216\u5BC6\u7801\u9519\u8BEF\uFF01")}).catch(()=>{this.$msg.error("\u7528\u6237\u540D\u6216\u5BC6\u7801\u9519\u8BEF\uFF01")}).finally(()=>{this.loading=!1}))},getOtherQuery(e){return Object.keys(e).reduce((o,i)=>(i!=="redirect"&&(o[i]=e[i]),o),{})}}},$={class:"login-container"},V={class:"main"},W=z(" \u786E\u5B9A ");function K(e,o,i,P,Q,n){const h=r("User"),_=r("Input"),a=r("Item"),f=r("Lock"),k=r("Password"),g=r("Button"),p=r("Form");return v(),L("div",$,[j("div",V,[t(p,x({layout:e.form.layout,model:e.form},{wrapperCol:{span:24}}),{default:s(()=>[t(a,{required:""},{default:s(()=>[t(_,{value:e.form.userName,"onUpdate:value":o[0]||(o[0]=l=>e.form.userName=l),placeholder:"\u8D26\u6237",size:"large",onKeypress:d(n.login,["enter"])},{prefix:s(()=>[t(h,{theme:"outline",style:{color:"rgba(0,0,0,.25)"}})]),_:1},8,["value","onKeypress"])]),_:1}),t(a,{required:""},{default:s(()=>[t(k,{value:e.form.password,"onUpdate:value":o[1]||(o[1]=l=>e.form.password=l),placeholder:"\u5BC6\u7801",size:"large",onKeypress:d(n.login,["enter"])},{prefix:s(()=>[t(f,{theme:"outline",style:{color:"rgba(0,0,0,.25)"}})]),_:1},8,["value","onKeypress"])]),_:1}),t(a,null,{default:s(()=>[t(g,{type:"primary",block:"",size:"large",loading:e.loading,onClick:n.login},{default:s(()=>[W]),_:1},8,["loading","onClick"])]),_:1})]),_:1},16,["layout","model"])])])}var ee=y(b,[["render",K],["__scopeId","data-v-4d3c09dc"]]);export{ee as default};
