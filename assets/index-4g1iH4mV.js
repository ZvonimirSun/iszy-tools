import{a3 as J,aK as K,o as g,c as v,a as d,t as E,y as c,aL as G,b as l,d as A,aM as Q,j as O,aN as ee,B as j,l as te,a9 as N,q as C,aO as ae,r as R,az as f,w as M,f as D,W as y,F,g as H,ay as se,aP as ne,aB as oe,aQ as ie,aR as ce,aS as re,aT as le,aU as ue,aH as de,aI as fe,aV as x,aa as me,$ as _e,aW as pe,aX as ge,a2 as he,a4 as P,ae as ye}from"./vendor-uwetv5JM.js";import{v as ve,R as T,S as we,T as ke,A as Se,U as Ie,V as W}from"./common-CpI8Jpmo.js";import"./ant-design-vue-SySycBYq.js";import"./vanilla-jsoneditor--Y_UqYYL.js";const Ee={class:"containerAll"},$e={class:"containerTitle"},be={class:"typeName"},Be={class:"main"},Ne={__name:"container",props:{fullScreenStatus:{type:Boolean,default:!1}},emits:["fullScreen"],setup(a,{emit:s}){const i=s,n=K();function o(){i("fullScreen")}return(e,r)=>{var h;const m=Q;return g(),v("div",{ref:"container",class:A(["containerBase",{"full-screen":a.fullScreenStatus}])},[d("div",Ee,[d("div",$e,[d("div",be,[d("span",null,E(((h=c(n).meta)==null?void 0:h.title)||c(n).name),1),d("span",{class:"i-icon-park-outline-full-screen fullScreen",title:"全屏",onClick:o})])]),d("div",Be,[G(e.$slots,"default",{},void 0,!0),l(m,{"visibility-height":100})])])],2)}}},Ce=J(Ne,[["__scopeId","data-v-8cea8b59"]]);async function xe(a,s="script",i=!1){if(s==="script"){const n=document.getElementsByTagName("script");let o=!1;for(let e=0;e<n.length;e++)o=n[e].src===a,o&&i&&n[e].remove();if(!o||i){const e=document.createElement("script");e.type="text/javascript",e.src=a,e.defer=!0,document.head.appendChild(e)}}else if(s==="style"){const n=document.getElementsByTagName("link");let o=!1;for(let e=0;e<n.length;e++)o=n[e].href===a,o&&i&&n[e].remove();if(!o||i){const e=document.createElement("link");e.rel="stylesheet",e.href=a,document.head.appendChild(e)}}}const I=a=>(de("data-v-09d85e3c"),a=a(),fe(),a),Pe={class:"global-wrapper"},Te=I(()=>d("i",{class:"dark:i-icon-park-outline-moon i-icon-park-outline-sun-one"},null,-1)),Ae={class:"header"},Ve={key:0,class:"desc"},ze={key:1,class:"desc"},Le=I(()=>d("span",{class:"i-icon-park-outline:return"},null,-1)),je={key:0,class:"container"},Re=I(()=>d("a",{href:"https://www.iszy.cc",target:"_blank"}," 随遇而安Blog ",-1)),Me=I(()=>d("br",null,null,-1)),De=I(()=>d("a",{href:"https://beian.miit.gov.cn/#/Integrated/recordQuery",target:"_blank"}," 苏ICP备18047890号-2 ",-1)),Fe=O({__name:"App",setup(a){const{offlineReady:s,needRefresh:i,updateServiceWorker:n}=ee(),o=K(),e=ve()._user,r=j(!1),m=j("2021"),h=new Date().getFullYear().toString();h!==m.value&&(m.value+=` - ${h}`);let k=!1;te(()=>{xe("https://fonts.cdn.iszy.xyz/css2?family=JetBrains+Mono:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Lora:ital,wght@0,400;0,700;1,400;1,700&family=Noto+Serif+SC:wght@300;400;700&display=swap","style"),window.addEventListener("keydown",function(t){r.value&&t.key==="Escape"&&(t.repeat?u():k||(k=!0,setTimeout(()=>{k=!1},3e3),N.info("长按Esc以退出全屏")))},!1)});function u(){r.value&&T("fullScreen")?we("fullScreen"):!r.value&&!T("fullScreen")&&ke("fullScreen"),r.value=!r.value,r.value&&N.info("长按Esc以退出全屏")}return C(s,function(t){t&&N.success("离线使用已准备好~")}),C(i,function(t){t&&ae.confirm("存在新内容，请点击 重载 更新~","更新",{confirmButtonText:"重载",cancelButtonText:"取消",type:"info"}).then(()=>{n()})}),C(()=>o.path,()=>{r.value=T("fullScreen")}),(t,w)=>{const $=oe,_=R("router-link"),b=ie,p=Q,S=R("router-view"),B=Ce,U=ce,Y=re,X=le,Z=ue;return g(),v("div",Pe,[l(Z,{locale:c(ne)},{default:f(()=>[l(X,{class:"main"},{default:f(()=>{var V,z;return[l($,{type:"primary",class:"dark-mode-trigger",circle:"",onClick:c(Se)().toggleTheme},{default:f(()=>[Te]),_:1},8,["onClick"]),M(l(b,{class:A(["main-header",{"in-tool":((V=c(o).meta)==null?void 0:V.type)==="tool"}])},{default:f(()=>[d("div",Ae,[l(_,{to:"/"},{default:f(()=>[y(" ISZY工具集合 ")]),_:1})]),c(o).path==="/"?(g(),v("div",Ve,[y(" 一个轻量的工具集合 "),c(e).profile.nickName?(g(),v(F,{key:0},[y(" · "),l(_,{to:"/settings"},{default:f(()=>[y(E(c(e).profile.nickName),1)]),_:1})],64)):H("",!0)])):(g(),v("div",ze,[l(_,{to:"/"},{default:f(()=>[Le,y("返回首页 ")]),_:1}),c(e).profile.nickName?(g(),v(F,{key:0},[y(" · "),l(_,{to:"/settings"},{default:f(()=>[y(E(c(e).profile.nickName),1)]),_:1})],64)):H("",!0)]))]),_:1},8,["class"]),[[D,!c(r)]]),l(U,{class:A(["main-content",{"full-screen":c(r)}])},{default:f(()=>{var L;return[l(p,{"visibility-height":100}),((L=c(o).meta)==null?void 0:L.type)!=="tool"?(g(),v("div",je,[l(S)])):(g(),se(B,{key:1,"full-screen-status":c(r),onFullScreen:u},{default:f(()=>[l(S)]),_:1},8,["full-screen-status"]))]}),_:1},8,["class"]),M(l(Y,{class:"main-footer"},{default:f(()=>[d("span",null,"© "+E(c(m))+" ",1),Re,Me,De]),_:1},512),[[D,!c(r)&&((z=c(o).meta)==null?void 0:z.type)!=="tool"]])]}),_:1})]),_:1},8,["locale"])])}}}),He=J(Fe,[["__scopeId","data-v-09d85e3c"]]),q=new Ie;async function We(a={}){const s=a.name!=null?a.name:"pinia",i=a.storeName!=null?a.storeName:"keyvaluepairs",n=a.version!=null?a.version:1,o=a.debug,e=x.createInstance({name:s,storeName:n!==1?`${i}_${n}`:i}),r=await e.keys();if(!r.length){if(n!==1){const t=x.createInstance({name:s,storeName:n-1!==1?`${i}_${n-1}`:i});(await t.keys()).length&&n===2&&await qe(t,e),await x.dropInstance({name:s,storeName:n-1!==1?`${i}_${n-1}`:i})}await e.getItem("version")==null&&await e.setItem("version",n)}sessionStorage.clear();const m=[];for(const u of r)m.push((async()=>{const t=await e.getItem(u);t!=null&&sessionStorage.setItem(u,JSON.stringify(t))})());await Promise.all(m);const h=(u,t)=>{const w=sessionStorage.getItem(u);return w!=null?(t&&sessionStorage.removeItem(u),JSON.parse(w)):null},k=(u,t)=>e.setItem(u,pe(t));return u=>{const{store:t,options:{persist:w}}=u;if(!w)return;const $=h(t.$id,!0);t.$patch(me({},t.$state,$));let _=!0;const b=_e(function(){var p,S;q.enqueue(k(t.$id,t.$state).catch(B=>{o&&console.log(B)})),t.$id==="user"&&((p=t.$state.settings)!=null&&p.autoSync)&&navigator.onLine&&(_?t.$state.syncing?(t.$state.syncing=!1,_=!1):q.enqueue((S=t.uploadSettings)==null?void 0:S.call(t)):_=!0)},100);t.$subscribe(p=>{if(p.storeId==="main"&&!Array.isArray(p.events)&&p.events.key==="clearOfflineCacheTag"){e.clear().then(()=>{window.location.reload()});return}b()},{detached:!0,deep:!0})}}async function qe(a,s){await s.clear();const i=await a.keys();for(const n of i)switch(n){case"g2048":await s.setItem("2048",await a.getItem("g2048"));break;case"imgHosting":await s.setItem("imgHosting",await a.getItem("imgHosting"));break;case"jsonEditor":await s.setItem("jsonEditor",await a.getItem("jsonEditor"));break;case"linuxCommand":await s.setItem("linuxCommand",await a.getItem("linuxCommand"));break;case"tinyEditor":await s.setItem("tinyEditor",await a.getItem("tinyEditor"));break;case"user":{const o=await a.getItem("user");delete o.profile,delete o.token,o.modules.jsonEditor=o.settings.jsonEditor,delete o.settings.jsonEditor,o.version=2,await s.setItem("user",o);break}}await s.setItem("version",2)}const Je="https://api.iszy.xyz";(async()=>{const a=ge(),s=he(He);s.config.globalProperties.$axios=P,s.config.globalProperties.$eventBus=W,s.provide("$axios",P),s.provide("$eventBus",W),P.$apiBase=Je;const i=await We({name:"iszy_tools",storeName:"state",version:2});a.use(i),s.use(a);const n=(await ye(()=>import("./index-J2tkG6IJ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))).default;s.use(n),s.mount("#app")})();
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-J2tkG6IJ.js","assets/vendor-uwetv5JM.js","assets/vendor-jQ7NaeSK.css","assets/common-CpI8Jpmo.js","assets/ant-design-vue-SySycBYq.js","assets/ant-design-vue-Wm6vTltt.css","assets/vanilla-jsoneditor--Y_UqYYL.js","assets/common-HmnH0ozX.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}