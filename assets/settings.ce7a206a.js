var z=Object.defineProperty,E=Object.defineProperties;var G=Object.getOwnPropertyDescriptors;var S=Object.getOwnPropertySymbols;var J=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var w=(o,e,s)=>e in o?z(o,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[e]=s,h=(o,e)=>{for(var s in e||(e={}))J.call(e,s)&&w(o,s,e[s]);if(S)for(var s of S(e))M.call(e,s)&&w(o,s,e[s]);return o},$=(o,e)=>E(o,G(e));import{a5 as O,bi as N,ag as q,ah as A,a4 as W,aL as Q,ae as X,aj as Y,aU as Z,W as x,j as B,aC as ee,c as y,f as t,y as a,a as m,J as _,T as oe,r,o as c,n as v,ab as I,h as d,L as P,K as i}from"./vendor.9bf0bfaf.js";/* empty css                *//* empty css               *//* empty css                *//* empty css                *//* empty css               *//* empty css                *//* empty css               */import{u as D}from"./index.cf414c09.js";import{_ as te}from"./index.ab8ef166.js";const{Title:ne,Text:ae}=oe,{TabPane:re}=N,{Item:se}=q,{Password:le}=A,{mapGetters:ue,mapActions:ce}=O("imgHosting"),ie={name:"ImgHostingSettings",components:{Tabs:N,TabPane:re,Form:q,Item:se,Input:A,Password:le,Button:W,Switch:Q,Divider:X,Space:Y,Radio:Z,Title:ne,Text:ae},data:()=>({uploaders:D,currentUploader:"aliyun",currentConfig:[],currentCommonConfig:{renameBeforeUpload:!1,renameTimeStamp:!0,copyUrlAfterUpload:!0,customCopyContent:"$url"},radioStyle:{display:"flex",height:"32px",lineHeight:"32px"},customContent:"$url"}),computed:h({},ue(["config","uploader","commonConfig"])),mounted(){this.uploader&&(this.currentUploader=this.uploader),this.changeUploader(),this.currentCommonConfig=x(this.currentCommonConfig,B(this.commonConfig||{})),this.currentCommonConfig.customCopyContent!=="$url"&&this.currentCommonConfig.customCopyContent!=="![]($url)"&&(this.customContent=this.currentCommonConfig.customCopyContent)},methods:$(h({},ce(["saveConfig","saveCommonConfig","importConfig"])),{changeUploader(){this.currentConfig=B(D[this.currentUploader].config(this.config(this.currentUploader)))},save(){const o={};for(const e of this.currentConfig){if(e.required&&(e.default==null||e.default==="")){this.$msg.warn("\u5FC5\u586B\u9879\u672A\u586B\u5199\u5B8C\u6574");return}o[e.name]=e.default}this.saveConfig({uploader:this.currentUploader,config:o}),this.$msg.success("\u4FDD\u5B58\u6210\u529F")},handler(){this.$refs.file.click()},updateConfig:ee(function(){this.saveCommonConfig(this.currentCommonConfig)},100),updateCustomCopyContent(o){this.currentCommonConfig.customCopyContent=o,this.updateConfig()}})},de=i(" \u901A\u7528\u914D\u7F6E "),me={class:"commonConfigPanel"},pe=i(" \u94FE\u63A5\u590D\u5236\u683C\u5F0F "),Ce=i(" \u6807\u51C6"),fe=i(" MarkDown"),ge=i(" \u81EA\u5B9A\u4E49"),he=i(" \u56FE\u5E8A\u8BBE\u7F6E "),ye={class:"configPanel"},_e={class:"configTable"},ve={class:"configOperator"},Ue=i(" \u4FDD\u5B58 ");function ke(o,e,s,Te,be,u){const p=r("Title"),U=r("Switch"),C=r("Item"),k=r("Text"),f=r("Radio"),T=r("Input"),F=r("Space"),H=r("Divider"),K=r("Password"),L=r("Form"),R=r("Button"),V=r("TabPane"),j=r("Tabs");return c(),y(_,null,[t(p,{level:4},{default:a(()=>[de]),_:1}),m("div",me,[t(C,{label:"\u65F6\u95F4\u6233\u91CD\u547D\u540D"},{default:a(()=>[t(U,{checked:o.currentCommonConfig.renameTimeStamp,"onUpdate:checked":e[0]||(e[0]=n=>o.currentCommonConfig.renameTimeStamp=n),onChange:u.updateConfig},null,8,["checked","onChange"])]),_:1}),t(C,{label:"\u4E0A\u4F20\u540E\u81EA\u52A8\u590D\u5236URL"},{default:a(()=>[t(U,{checked:o.currentCommonConfig.copyUrlAfterUpload,"onUpdate:checked":e[1]||(e[1]=n=>o.currentCommonConfig.copyUrlAfterUpload=n),onChange:u.updateConfig},null,8,["checked","onChange"])]),_:1}),t(p,{level:5},{default:a(()=>[pe]),_:1}),t(F,null,{default:a(()=>[t(f,{style:v(o.radioStyle),checked:o.currentCommonConfig.customCopyContent==="$url",onChange:e[2]||(e[2]=n=>u.updateCustomCopyContent("$url"))},{default:a(()=>[Ce,t(k,{code:"",content:"$url"})]),_:1},8,["style","checked"]),t(f,{style:v(o.radioStyle),checked:o.currentCommonConfig.customCopyContent==="![]($url)",onChange:e[3]||(e[3]=n=>u.updateCustomCopyContent("![]($url)"))},{default:a(()=>[fe,t(k,{code:"",content:"![]($url)"})]),_:1},8,["style","checked"]),t(f,{style:v(o.radioStyle),checked:o.currentCommonConfig.customCopyContent===o.customContent,onChange:e[6]||(e[6]=n=>u.updateCustomCopyContent(o.customContent))},{default:a(()=>[ge,t(T,{value:o.customContent,"onUpdate:value":e[4]||(e[4]=n=>o.customContent=n),style:{width:"100px","margin-left":"10px"},onChange:e[5]||(e[5]=n=>u.updateCustomCopyContent(n.target.value))},null,8,["value"])]),_:1},8,["style","checked"])]),_:1})]),t(H),t(p,{level:4},{default:a(()=>[he]),_:1}),t(j,{activeKey:o.currentUploader,"onUpdate:activeKey":e[7]||(e[7]=n=>o.currentUploader=n),type:"card",onChange:u.changeUploader},{default:a(()=>[(c(!0),y(_,null,I(o.uploaders,(n,b)=>(c(),d(V,{key:b,tab:n.name},{default:a(()=>[m("div",ye,[m("div",_e,[o.currentUploader===b?(c(),d(L,{key:0,layout:"vertical"},{default:a(()=>[(c(!0),y(_,null,I(o.currentConfig,l=>(c(),d(C,{key:l.name,label:l.label,required:l.required},{default:a(()=>[l.type==="input"?(c(),d(T,{key:0,value:l.default,"onUpdate:value":g=>l.default=g,"allow-clear":"",placeholder:l.hint},null,8,["value","onUpdate:value","placeholder"])):l.type==="password"?(c(),d(K,{key:1,value:l.default,"onUpdate:value":g=>l.default=g,"allow-clear":"",placeholder:l.hint},null,8,["value","onUpdate:value","placeholder"])):P("",!0)]),_:2},1032,["label","required"]))),128))]),_:2},1024)):P("",!0)]),m("div",ve,[t(R,{type:"primary",onClick:u.save},{default:a(()=>[Ue]),_:1},8,["onClick"])])])]),_:2},1032,["tab"]))),128))]),_:1},8,["activeKey","onChange"])],64)}var He=te(ie,[["render",ke],["__scopeId","data-v-ccc34f42"]]);export{He as default};
