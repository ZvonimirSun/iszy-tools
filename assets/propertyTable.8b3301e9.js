import{d as k,ah as g,a$ as C,$ as D,l as j,a as m,o as n,c as p,w as h,f as d,V as i,U as w,e as b}from"./vendor.a1d008c9.js";/* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css                *//* empty css                *//* empty css                *//* empty css               */import{l as I}from"./marker-shadow.747f3308.js";import{_ as L}from"./index.f44d3f6b.js";const $=k({name:"propertyTable",components:{Table:g,Empty:C,Input:D},emits:["change"],props:{geoJsonLayer:Object,map:Object},data:()=>({editableData:{}}),computed:{tableColumns(){if(this.propertyList&&this.propertyList.length>0){const t=Object.keys(this.propertyList[0]).map(s=>({title:s,dataIndex:s,key:s,slots:{customRender:"property"}}));return t.push({title:"\u64CD\u4F5C",dataIndex:"operation",width:40,fixed:"right",slots:{customRender:"operation"}}),t}else return null},propertyList(){return this.features?this.features.map(e=>e.properties):null},features(){if(this.geoJsonLayer)try{return this.geoJsonLayer.toGeoJSON().features}catch(e){return null}return null}},methods:{locationGeo(e){try{const s=I.exports.geoJSON(e).getBounds(),u=s.getCenter(),y=this.map.getBoundsZoom(s);this.map.setView(u,y)}catch(t){}},saveToEditableData(e,t,s){if(e instanceof InputEvent&&t&&s)try{t[s]=JSON.parse(e.currentTarget.value)}catch(u){t[s]=e.currentTarget.value}},edit(e){this.editableData[e]=j(this.propertyList[e])},save(e){Object.assign(this.propertyList[e],this.editableData[e]),delete this.editableData[e],this.$emit("change")},cancel(e){delete this.editableData[e]},rowEvents(e,t){return{onClick:()=>{this.locationGeo(this.features[t])}}}}}),E={key:0,class:"editable-cell-input-wrapper"},O={key:1,class:"editable-cell-text-wrapper"},T={key:0},J=["onClick"],N=["onClick"],S={key:1},B=["onClick"];function _(e,t,s,u,y,U){const c=m("Input"),f=m("Table"),v=m("Empty");return e.tableColumns?(n(),p(f,{key:0,class:"ant-table-striped",columns:e.tableColumns,"data-source":e.propertyList,rowKey:(o,a)=>a,pagination:!1,bordered:"",size:"small",scroll:{x:!0},rowClassName:(o,a)=>a%2==1?"table-striped":null,customRow:e.rowEvents},{property:h(({text:o,column:a,index:r})=>[e.editableData[r]?(n(),d("div",E,[typeof e.editableData[r][a.dataIndex]=="string"?(n(),p(c,{key:0,value:e.editableData[r][a.dataIndex],"onUpdate:value":l=>e.editableData[r][a.dataIndex]=l,onClick:t[0]||(t[0]=i(()=>{},["stop"]))},null,8,["value","onUpdate:value"])):typeof e.editableData[r][a.dataIndex]=="number"?(n(),p(c,{key:1,value:e.editableData[r][a.dataIndex],"onUpdate:value":l=>e.editableData[r][a.dataIndex]=l,valueModifiers:{number:!0},onClick:t[1]||(t[1]=i(()=>{},["stop"]))},null,8,["value","onUpdate:value"])):(n(),p(c,{key:2,value:JSON.stringify(e.editableData[r][a.dataIndex]),onClick:t[2]||(t[2]=i(()=>{},["stop"])),onChange:l=>e.saveToEditableData(l,e.editableData[r],a.dataIndex)},null,8,["value","onChange"]))])):(n(),d("div",O,w(typeof o=="object"?JSON.stringify(o):o),1))]),operation:h(({index:o})=>[e.editableData[o]?(n(),d("span",T,[b("a",{onClick:i(a=>e.save(o),["stop"])}," \u4FDD\u5B58\u5C5E\u6027 ",8,J),b("a",{onClick:i(a=>e.cancel(o),["stop"])}," \u53D6\u6D88\u7F16\u8F91 ",8,N)])):(n(),d("span",S,[b("a",{onClick:i(a=>e.edit(o),["stop"])}," \u7F16\u8F91\u5C5E\u6027 ",8,B)]))]),_:1},8,["columns","data-source","rowKey","rowClassName","customRow"])):(n(),p(v,{key:1}))}var P=L($,[["render",_]]);export{P as default};
