import{F as E,t as b,aE as v,aq as h,aV as F,o as K,J as q,K as P,ap as u,X as r,a1 as a,u as l,bH as m,ar as k,a$ as y,az as U,as as I,aA as B,aB as C,aC as S}from"./index-P_dHOoTd.js";import{a as A,E as R}from"./el-form-item-bCU4lDbx.js";import"./castArray-hB-E6EFf.js";const _=f=>(B("data-v-8976c915"),f=f(),C(),f),Z={class:"login-container"},$={class:"main"},M=_(()=>u("span",{class:"i-icon-park-outline-user"},null,-1)),H=_(()=>u("span",{class:"i-icon-park-outline-user"},null,-1)),J=_(()=>u("span",{class:"i-icon-park-outline-lock"},null,-1)),T=_(()=>u("span",{class:"i-icon-park-outline-lock"},null,-1)),X=_(()=>u("span",{class:"i-icon-park-outline-phone"},null,-1)),j=_(()=>u("span",{class:"i-icon-park-outline-mail"},null,-1)),D=E({__name:"register",setup(f){const p=b(),s=v({userName:"",nickName:"",password:"",rePassword:"",mobile:"",email:""}),z=v({userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],nickName:[{required:!0,message:"请输入昵称",trigger:"blur"}],password:[{trigger:"blur",validator:(i,e,o)=>{if(e==="")o(new Error("请输入密码"));else{if(s.rePassword!==""){if(!p.value)return;p.value.validateField("rePassword",()=>null)}o()}}}],rePassword:[{trigger:"blur",validator:(i,e,o)=>{e===""?o(new Error("请再次输入密码")):e!==s.password?o("两次输入密码不一致!"):o()}}],mobile:[{trigger:"blur",validator:(i,e,o)=>{e===""||/^1[3-9]\d{9}$/.test(e)?o():o("请输入正确的手机号码")}}],email:[{trigger:"blur",validator:(i,e,o)=>{e===""||/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(e)?o():o("请输入正确的邮箱")}}]}),c=b(!1),g=h(),w=F();K(()=>{w.logged&&g.back()});function n(){p.value&&p.value.validate(i=>{if(i)c.value=!0,w.register(s).then(()=>{y.success("注册成功，请等待管理员审批"),g.push("/")}).catch(e=>{y.error(e.message)}).finally(()=>{c.value=!1});else return!1})}function N(){var i;(i=p.value)==null||i.resetFields()}return(i,e)=>{const o=U,d=A,V=I,x=R;return q(),P("div",Z,[u("div",$,[r(x,{ref_key:"registerFormRef",ref:p,layout:"horizontal",model:l(s),rules:l(z),"status-icon":"","label-width":"auto"},{default:a(()=>[r(d,{required:"",label:"用户名",prop:"userName"},{default:a(()=>[r(o,{modelValue:l(s).userName,"onUpdate:modelValue":e[0]||(e[0]=t=>l(s).userName=t),size:"large",onKeydown:m(n,["enter"])},{prefix:a(()=>[M]),_:1},8,["modelValue"])]),_:1}),r(d,{required:"",label:"昵称",prop:"nickName"},{default:a(()=>[r(o,{modelValue:l(s).nickName,"onUpdate:modelValue":e[1]||(e[1]=t=>l(s).nickName=t),size:"large",onKeydown:m(n,["enter"])},{prefix:a(()=>[H]),_:1},8,["modelValue"])]),_:1}),r(d,{required:"",label:"密码",prop:"password"},{default:a(()=>[r(o,{modelValue:l(s).password,"onUpdate:modelValue":e[2]||(e[2]=t=>l(s).password=t),type:"password",size:"large","show-password":"",autocomplete:"off",onKeydown:m(n,["enter"])},{prefix:a(()=>[J]),_:1},8,["modelValue"])]),_:1}),r(d,{required:"",label:"重复密码",prop:"rePassword"},{default:a(()=>[r(o,{modelValue:l(s).rePassword,"onUpdate:modelValue":e[3]||(e[3]=t=>l(s).rePassword=t),type:"password",size:"large","show-password":"",autocomplete:"off",onKeydown:m(n,["enter"])},{prefix:a(()=>[T]),_:1},8,["modelValue"])]),_:1}),r(d,{label:"手机号",prop:"mobile"},{default:a(()=>[r(o,{modelValue:l(s).mobile,"onUpdate:modelValue":e[4]||(e[4]=t=>l(s).mobile=t),size:"large",onKeydown:m(n,["enter"])},{prefix:a(()=>[X]),_:1},8,["modelValue"])]),_:1}),r(d,{label:"邮箱",prop:"email"},{default:a(()=>[r(o,{modelValue:l(s).email,"onUpdate:modelValue":e[5]||(e[5]=t=>l(s).email=t),size:"large",onKeydown:m(n,["enter"])},{prefix:a(()=>[j]),_:1},8,["modelValue"])]),_:1}),r(d,null,{default:a(()=>[r(V,{type:"primary",block:"",size:"large",loading:l(c),onClick:n},{default:a(()=>[k(" 注册 ")]),_:1},8,["loading"]),r(V,{block:"",size:"large",disabled:l(c),onClick:N},{default:a(()=>[k(" 重置 ")]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model","rules"])])])}}}),Q=S(D,[["__scopeId","data-v-8976c915"]]);export{Q as default};
