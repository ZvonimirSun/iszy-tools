import{d as D,r as F,H as w,ag as h,o as x,c as A,w as v,a as B,k as b,c2 as o,V as S,W as I,M as n,b as E,_ as T}from"./index.9bd28139.js";import{S as U}from"./index.8ffd82e2.js";import{U as k}from"./index.9d3d2512.js";import"./index.f70e2018.js";import{u as M}from"./index.bec02405.js";import{u as C}from"./imgHosting.ba381200.js";import"./Form.8c4dba25.js";import"./Col.7226ed89.js";import"./responsiveObserve.241d3afa.js";import"./useFlexGapSupport.58f7bf17.js";import"./toArray.380a600e.js";import"./get.ecfd95e3.js";import"./_baseGet.5109bcaa.js";import"./toString.7461b154.js";import"./_arrayMap.dc1f124f.js";import"./_flatRest.b1d96636.js";import"./toInteger.0cff073c.js";import"./toFinite.9a1bd3e7.js";import"./_arrayIncludesWith.15e56e3a.js";import"./collapseMotion.6876bb25.js";import"./EyeOutlined.bb058d2d.js";import"./index.b8e38cc9.js";import"./useRefs.af3a5c90.js";import"./v4.0e237c76.js";const m=u=>(S("data-v-f7230d96"),u=u(),I(),u),V=m(()=>n("p",{class:"ant-upload-drag-icon"},[n("span",{class:"i-icon-park-upload-one"})],-1)),j=m(()=>n("p",{class:"ant-upload-text"},[E(" \u76F4\u63A5\u7C98\u8D34\u56FE\u7247\u6216\u62D6\u62FD\u56FE\u7247\u5230\u8FD9\u91CC\u4E0A\u4F20"),n("br"),E("\u6216\u8005\u76F4\u63A5\u70B9\u51FB\u9009\u62E9\u6587\u4EF6\u4E0A\u4F20 ")],-1)),H=m(()=>n("p",{class:"ant-upload-hint"}," \u6682\u65F6\u4EC5\u652F\u6301\u5355\u6587\u4EF6\u4E0A\u4F20\u3002 ",-1)),L=D({__name:"upload",props:{activeKey:{type:String,default:""}},setup(u){const y=u,p=F(!1),a=F(),l=C(),d=l.config,r=l.uploader,c=l.commonConfig;w(()=>{document.addEventListener("paste",g)}),h(()=>{document.removeEventListener("paste",g)});async function f({file:s}={}){let t=s;if(p.value=!0,r&&d(r)){if(c.renameTimeStamp){const e=t.name||"";t=new File([t],(new Date().getTime()+e.substring(e.lastIndexOf("."))).toLowerCase(),{type:t.type,lastModified:t.lastModified})}try{const e=await M[r].handle(d(r),t);if(C().addImage(e),c.copyUrlAfterUpload)try{c.customCopyContent?await navigator.clipboard.writeText(c.customCopyContent.replace(/\$url/g,e.url)):await navigator.clipboard.writeText(e.url),o.success("\u4E0A\u4F20\u6210\u529F\uFF0C\u5730\u5740\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F")}catch{o.error("\u4E0A\u4F20\u6210\u529F\uFF0C\u4F46\u5730\u5740\u590D\u5236\u5931\u8D25")}else o.success("\u4E0A\u4F20\u6210\u529F")}catch(e){console.log(e),o.error("\u4E0A\u4F20\u5931\u8D25")}}else o.warn("\u8BF7\u5148\u8FDB\u884C\u8BBE\u7F6E");p.value=!1}function _(){o.warning("\u4E0D\u652F\u6301\u7684\u6587\u4EF6\u7C7B\u578B\uFF01")}function g(s){if(y.activeKey==="home"&&!p.value&&!a.value){a.value=setTimeout(()=>{a.value=void 0},500);const t=s.clipboardData&&s.clipboardData.items;let e;if(t&&t.length)for(const i of t)i.type.indexOf("image")!==-1&&(e=i.getAsFile());e?f({file:e}):(_(),clearTimeout(a.value),a.value=void 0)}}return(s,t)=>{const e=k,i=U;return x(),A(i,{spinning:b(p)},{default:v(()=>[B(e,{"file-list":[],accept:"image/bmp,image/gif,image/jpeg,image/png,image/webp","show-upload-list":!1,"custom-request":f,onReject:_},{default:v(()=>[V,j,H]),_:1})]),_:1},8,["spinning"])}}});const re=T(L,[["__scopeId","data-v-f7230d96"]]);export{re as default};
