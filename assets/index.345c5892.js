import{a as i,_ as v,r as l,o as f,m as w,q as C,w as o,bC as E,bq as d,b as _,$ as b,B as M}from"./index.82f4337f.js";/* empty css              *//* empty css              */import{I as m}from"./index.04572a26.js";import{_ as y}from"./Password.a694d5f6.js";import"./index.8a179fe7.js";import{F as x}from"./Form.888097fd.js";import{_ as z}from"./FormItem.1d204d98.js";import"./EyeOutlined.89a34815.js";import"./SearchOutlined.d8f8237a.js";import"./_arrayIncludesWith.91d14080.js";import"./_baseFindIndex.10ef1a58.js";import"./debounce.e2258692.js";import"./Col.0248fc1e.js";import"./responsiveObserve.e6e652ae.js";import"./useFlexGapSupport.9c189fa5.js";import"./toArray.90044492.js";import"./get.ba78fff4.js";import"./hasIn.cf92122f.js";import"./toInteger.f473e073.js";import"./toFinite.060ef74d.js";import"./collapseMotion.72f7dd5b.js";var L=m("lock",!1,function(e){return i("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[i("rect",{x:"6",y:"22",width:"36",height:"22",rx:"2",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),i("path",{d:"M14 22V14C14 8.47715 18.4772 4 24 4C29.5228 4 34 8.47715 34 14V22",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),i("path",{d:"M24 30V36",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),j=m("user",!1,function(e){return i("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[i("circle",{cx:"24",cy:"12",r:"8",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),i("path",{d:"M42 44C42 34.0589 33.9411 26 24 26C14.0589 26 6 34.0589 6 44",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])});const I={name:"PageLogin",components:{User:j,Lock:L},data:()=>({form:{layout:"horizontal",userName:"",password:""},redirect:void 0,otherQuery:{},loading:!1}),watch:{$route:{handler:function(e){const t=e.query;t&&(this.redirect=t.redirect,this.otherQuery=this.getOtherQuery(t))},immediate:!0}},methods:{login(){this.form.userName!=null&&this.form.password!=null&&(this.loading=!0,this.$store.dispatch("user/login",{userName:this.form.userName,password:this.form.password}).then(e=>{e?(this.$msg.success("\u767B\u5F55\u6210\u529F\uFF01"),this.$router.push({path:this.redirect||"/",query:this.otherQuery})):this.$msg.error("\u7528\u6237\u540D\u6216\u5BC6\u7801\u9519\u8BEF\uFF01")}).catch(()=>{this.$msg.error("\u7528\u6237\u540D\u6216\u5BC6\u7801\u9519\u8BEF\uFF01")}).finally(()=>{this.loading=!1}))},getOtherQuery(e){return Object.keys(e).reduce((t,a)=>(a!=="redirect"&&(t[a]=e[a]),t),{})}}},H={class:"login-container"},B={class:"main"},D=_(" \u786E\u5B9A ");function V(e,t,a,Z,A,r){const k=l("User"),c=b,n=z,h=l("Lock"),u=y,p=M,g=x;return f(),w("div",H,[C("div",B,[i(g,E({layout:e.form.layout,model:e.form},{wrapperCol:{span:24}}),{default:o(()=>[i(n,{required:""},{default:o(()=>[i(c,{value:e.form.userName,"onUpdate:value":t[0]||(t[0]=s=>e.form.userName=s),placeholder:"\u8D26\u6237",size:"large",onKeypress:d(r.login,["enter"])},{prefix:o(()=>[i(k,{theme:"outline",style:{color:"rgba(0,0,0,.25)"}})]),_:1},8,["value","onKeypress"])]),_:1}),i(n,{required:""},{default:o(()=>[i(u,{value:e.form.password,"onUpdate:value":t[1]||(t[1]=s=>e.form.password=s),placeholder:"\u5BC6\u7801",size:"large",onKeypress:d(r.login,["enter"])},{prefix:o(()=>[i(h,{theme:"outline",style:{color:"rgba(0,0,0,.25)"}})]),_:1},8,["value","onKeypress"])]),_:1}),i(n,null,{default:o(()=>[i(p,{type:"primary",block:"",size:"large",loading:e.loading,onClick:r.login},{default:o(()=>[D]),_:1},8,["loading","onClick"])]),_:1})]),_:1},16,["layout","model"])])])}var re=v(I,[["render",V],["__scopeId","data-v-04370172"]]);export{re as default};
