import{_ as G,H as J,K as w,L as j,av as V,N as O,bp as R,o as m,m as _,q as g,s as P,c as v,w as Z,n as U,F as z,bz as Y,bA as F,aG as $,p as q,$ as K,ac as Q}from"./index.82f4337f.js";/* empty css              *//* empty css              */import{m as I,c as r}from"./marker-shadow.1b34018e.js";import{l as o}from"./leaflet-src.cde563ff.js";import{F as W}from"./Form.888097fd.js";import{_ as X}from"./FormItem.1d204d98.js";import"./_arrayIncludesWith.91d14080.js";import"./_baseFindIndex.10ef1a58.js";import"./debounce.e2258692.js";import"./Col.0248fc1e.js";import"./responsiveObserve.e6e652ae.js";import"./useFlexGapSupport.9c189fa5.js";import"./toArray.90044492.js";import"./get.ba78fff4.js";import"./hasIn.cf92122f.js";import"./toInteger.f473e073.js";import"./toFinite.060ef74d.js";import"./collapseMotion.72f7dd5b.js";const ee=c=>(Y("data-v-2215a1d8"),c=c(),F(),c),oe=ee(()=>g("div",{class:"title"},[g("span",null,"\u5C5E\u6027")],-1)),ae={__name:"leafletMap",props:{geoJsonLayer:{type:o.exports.GeoJSON,default:void 0}},emits:["update:geoJsonLayer"],setup(c,{emit:S}){const s=c,C=new o.exports.Icon({iconUrl:"https://jsdelivr.cdn.iszy.cc/gh/zvonimirsun/leaflet-color-markers@master/img/marker-icon-2x-blue.png",shadowUrl:I,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),T=new o.exports.Icon({iconUrl:"https://jsdelivr.cdn.iszy.cc/gh/zvonimirsun/leaflet-color-markers@master/img/marker-icon-2x-yellow.png",shadowUrl:I,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),d="bed806b1ccb34b268ab1c0700123d444";let a;const u=J("$eventBus"),i=w(void 0),x=w(),b=w();j(()=>{u.on("locationGeo",E),u.on("updateGeojsonLayer",y),L(),V(()=>{D(),N()})}),O(()=>{u.off("locationGeo",E),u.off("updateGeojsonLayer",y),a&&(a.remove(),a=void 0)});function L(){a=R(o.exports.map(x.value,{attributionControl:!0,zoomControl:!1})),a.setView([35,105],4),S("update:geoJsonLayer",o.exports.geoJSON(void 0,{onEachFeature:A,pointToLayer:(t,e)=>o.exports.marker(e,{icon:C})}).addTo(a))}function D(){o.exports.control.layers({\u9AD8\u5FB7\u77E2\u91CF:r("GaoDe.Normal.Map",{minZoom:3,maxNativeZoom:18,maxZoom:20,attribution:'&copy; <a href="https://lbs.amap.com/pages/terms/" target="_blank">\u9AD8\u5FB7\u5730\u56FE</a> \u8D21\u732E\u8005'}).addTo(a),\u9AD8\u5FB7\u5F71\u50CF:o.exports.layerGroup([r("GaoDe.Satellite.Map",{minZoom:3,maxNativeZoom:18,maxZoom:20}),r("GaoDe.Satellite.Annotation",{minZoom:3,maxNativeZoom:18,maxZoom:20})],{attribution:'&copy; <a href="https://lbs.amap.com/pages/terms/" target="_blank">\u9AD8\u5FB7\u5730\u56FE</a> \u8D21\u732E\u8005'}),\u5929\u5730\u56FE\u77E2\u91CF:o.exports.layerGroup([r("TianDiTu.Normal.Map",{key:d,minZoom:3,maxNativeZoom:18,maxZoom:20}),r("TianDiTu.Normal.Annotation",{key:d,minZoom:3,maxNativeZoom:18,maxZoom:20})],{attribution:'&copy; <a href="https://www.tianditu.gov.cn/" target="_blank">\u5929\u5730\u56FE</a> \u8D21\u732E\u8005'}),\u5929\u5730\u56FE\u5F71\u50CF:o.exports.layerGroup([r("TianDiTu.Satellite.Map",{key:d,minZoom:3,maxNativeZoom:18,maxZoom:20}),r("TianDiTu.Satellite.Annotation",{key:d,minZoom:3,maxNativeZoom:18,maxZoom:20})],{attribution:'&copy; <a href="https://www.tianditu.gov.cn/" target="_blank">\u5929\u5730\u56FE</a> \u8D21\u732E\u8005'}),\u5929\u5730\u56FE\u5730\u5F62:o.exports.layerGroup([r("TianDiTu.Terrain.Map",{key:d,minZoom:3,maxNativeZoom:14,maxZoom:20}),r("TianDiTu.Terrain.Annotation",{key:d,minZoom:3,maxNativeZoom:14,maxZoom:20})],{attribution:'&copy; <a href="https://www.tianditu.gov.cn/" target="_blank">\u5929\u5730\u56FE</a> \u8D21\u732E\u8005'}),OpenStreetMap:r("OSM.Normal.Map",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> \u8D21\u732E\u8005',minZoom:3,maxNativeZoom:19,maxZoom:20})},{\u56FE\u5F62:$(s.geoJsonLayer)},{hideSingleBase:!0,position:"bottomleft"}).addTo(a)}function N(){o.exports.control.scale({imperial:!1,position:"bottomright"}).addTo(a),o.exports.control.zoom({zoomInTitle:"\u653E\u5927",zoomOutTitle:"\u7F29\u5C0F",position:"topright"}).addTo(a)}function A(t,e){t.properties&&e.bindPopup(b.value).on("popupopen",()=>{i.value=t,e instanceof o.exports.Marker?e.setIcon(T):e.setStyle({color:"#ffff00",weight:5,opacity:.65})}).on("popupclose",()=>{i.value=void 0,e instanceof o.exports.Marker?e.setIcon(C):s.geoJsonLayer.resetStyle(e)})}function h(t,e,n){if(t instanceof InputEvent&&e&&n)try{e.properties[n]=JSON.parse(t.currentTarget.value)}catch{e.properties[n]=t.currentTarget.value}u.emit("updateEditor")}function E(t){try{const n=o.exports.geoJSON(t).getBounds(),p=n.getCenter(),k=a.getBoundsZoom(n);a.setView(p,k>16?16:k)}catch{}}function y(t){if(s.geoJsonLayer&&s.geoJsonLayer instanceof o.exports.GeoJSON){s.geoJsonLayer.clearLayers();try{s.geoJsonLayer.addData(t);const e=s.geoJsonLayer.getBounds(),n=e.getCenter(),p=a.getBoundsZoom(e);a.setView(n,p>16?16:p)}catch(e){console.log(e)}}}return(t,e)=>{var M;const n=K,p=X,k=W;return m(),_(z,null,[g("div",{ref_key:"mapContainer",ref:x,class:"mapContainer"},null,512),P(g("div",{ref_key:"propertyPopup",ref:b,class:"propertyPopup"},[oe,(M=i.value)!=null&&M.properties?(m(),v(k,{key:0,"label-col":{span:8},"wrapper-col":{span:16},colon:!1},{default:Z(()=>[(m(!0),_(z,null,q(i.value.properties,(B,l,H)=>(m(),v(p,{key:"prop"+H,label:l},{default:Z(()=>[typeof i.value.properties[l]=="string"?(m(),v(n,{key:0,value:i.value.properties[l],"onUpdate:value":f=>i.value.properties[l]=f,onChange:h},null,8,["value","onUpdate:value"])):typeof i.value.properties[l]=="number"?(m(),v(n,{key:1,value:i.value.properties[l],"onUpdate:value":f=>i.value.properties[l]=f,valueModifiers:{number:!0},onChange:h},null,8,["value","onUpdate:value"])):(m(),v(n,{key:2,value:JSON.stringify(B),onChange:f=>h(f,i.value,l)},null,8,["value","onChange"]))]),_:2},1032,["label"]))),128))]),_:1})):U("",!0)],512),[[Q,!1]])],64)}}};var be=G(ae,[["__scopeId","data-v-2215a1d8"]]);export{be as default};
