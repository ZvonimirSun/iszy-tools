import{aG as C,D as I,dx as O,l as M,dy as U,G as B,o as u,h as k,j as y,s as p,w as m,z as x,F as w,r as P,H as s,t as h,x as T,I as E,E as $,y as G,g as H}from"./index-j7kdK-H8.js";import{a as L,E as W}from"./el-form-item-pniwTBoV.js";import"./el-tag-1f9i8jI2.js";import{E as j,a as K}from"./el-select-3gX-hgiS.js";import"./el-scrollbar-vz8xv5bG.js";import"./el-popper-lAmhRZoK.js";import{E as z}from"./el-switch-jhSu4nEk.js";import{E as q}from"./el-input-number-4bU3Y8F0.js";import{E as J}from"./el-upload-Kzhiz0hz.js";import"./el-progress-rIjQsOpT.js";import{c as Q}from"./createFile-wJ5ZCQ66.js";import"./castArray-RcvnJ037.js";import"./index-ZlnE4rZf.js";import"./isEqual-Z5C-wM-O.js";import"./hasIn-6amFm_if.js";import"./strings-5sVLVEXm.js";import"./toInteger-c76KcG_L.js";import"./toFinite-Hj8N6nO0.js";import"./isUndefined-IZwZ21d-.js";import"./index-RZ9jihLr.js";const X=[{key:"Difficulty",label:"难度",type:"select",default:"None",options:[{value:"None",label:"正常"},{value:"Easy",label:"简单"},{value:"Difficult",label:"困难"}]},{key:"DayTimeSpeedRate",label:"白天时速",type:"number",default:1,min:.1,max:5,formatter:e=>e.toFixed(6)},{key:"NightTimeSpeedRate",label:"夜晚时速",type:"number",default:1,min:.1,max:5,formatter:e=>e.toFixed(6)},{key:"ExpRate",label:"经验倍率",type:"number",default:1,min:.1,formatter:e=>e.toFixed(6)},{key:"PalCaptureRate",label:"帕鲁捕获几率",type:"number",default:1,min:.5,max:2,formatter:e=>e.toFixed(6)},{key:"PalSpawnNumRate",label:"帕鲁重生数量",type:"number",default:1,min:.5,formatter:e=>e.toFixed(6)},{key:"PalDamageRateAttack",label:"帕鲁伤害倍率",type:"number",default:1,min:.1,formatter:e=>e.toFixed(6)},{key:"PalDamageRateDefense",label:"帕鲁受伤倍率",type:"number",default:1,min:.1,formatter:e=>e.toFixed(6)},{key:"PlayerDamageRateAttack",label:"玩家伤害倍率",type:"number",default:1,min:.1,formatter:e=>e.toFixed(6)},{key:"PlayerDamageRateDefense",label:"玩家受伤倍率",type:"number",default:1,min:.1,formatter:e=>e.toFixed(6)},{key:"PlayerStomachDecreaceRate",label:"玩家饱腹感下降速度",type:"number",default:1,min:.1,max:5,formatter:e=>e.toFixed(6)},{key:"PlayerStaminaDecreaceRate",label:"玩家体力下降速度",type:"number",default:1,min:.1,max:5,formatter:e=>e.toFixed(6)},{key:"PlayerAutoHPRegeneRate",label:"玩家血量恢复速度",type:"number",default:1,min:.1,formatter:e=>e.toFixed(6)},{key:"PlayerAutoHpRegeneRateInSleep",label:"玩家睡眠血量恢复速度",type:"number",default:1,min:.1,formatter:e=>e.toFixed(6)},{key:"PalStomachDecreaceRate",label:"帕鲁饱腹感下降速度",type:"number",default:1,min:.1,max:5,formatter:e=>e.toFixed(6)},{key:"PalStaminaDecreaceRate",label:"玩家体力下降速度",type:"number",default:1,min:.1,max:5,formatter:e=>e.toFixed(6)},{key:"PalAutoHPRegeneRate",label:"帕鲁血量恢复速度",type:"number",default:1,min:.1,formatter:e=>e.toFixed(6)},{key:"PalAutoHpRegeneRateInSleep",label:"帕鲁睡眠血量恢复速度",type:"number",default:1,min:.1,formatter:e=>e.toFixed(6)},{key:"BuildObjectDamageRate",label:"建筑受伤倍率",type:"number",default:1,min:.5,max:3,formatter:e=>e.toFixed(6)},{key:"BuildObjectDeteriorationDamageRate",label:"建筑劣化速率",type:"number",default:1,min:0,max:10,formatter:e=>e.toFixed(6)},{key:"CollectionDropRate",label:"采集掉落率",type:"number",default:1,min:.5,formatter:e=>e.toFixed(6)},{key:"CollectionObjectHpRate",label:"采集对象血量倍率",type:"number",default:1,min:.5,max:3,formatter:e=>e.toFixed(6)},{key:"CollectionObjectRespawnSpeedRate",label:"采集对象重生速率",type:"number",default:1,min:.5,max:3,formatter:e=>e.toFixed(6)},{key:"EnemyDropItemRate",label:"怪物掉落倍率",type:"number",default:1,min:.5,formatter:e=>e.toFixed(6)},{key:"DeathPenalty",label:"死亡惩罚",type:"select",default:"All",options:[{value:"None",label:"不掉落"},{value:"Item",label:"仅掉落道具"},{value:"ItemAndEquipment",label:"掉落道具和装备"},{value:"All",label:"全部掉落"}]},{key:"bEnablePlayerToPlayerDamage",label:"玩家之间伤害",type:"switch",default:!1},{key:"bEnableFriendlyFire",label:"友方伤害",type:"switch",default:!1},{key:"bEnableInvaderEnemy",label:"袭击事件",type:"switch",default:!0},{key:"bActiveUNKO",label:"大便",type:"switch",default:!1},{key:"bEnableAimAssistPad",label:"手柄辅助瞄准",type:"switch",default:!0},{key:"bEnableAimAssistKeyboard",label:"键盘辅助瞄准",type:"switch",default:!1},{key:"DropItemMaxNum",label:"最大掉落数",type:"number",default:3e3},{key:"DropItemMaxNum_UNKO",label:"最大掉落大便数",type:"number",default:100},{key:"BaseCampMaxNum",label:"最大基地数",type:"number",default:128},{key:"BaseCampWorkerMaxNum",label:"最大基地内工人数",type:"number",default:20},{key:"DropItemAliveMaxHours",label:"掉落物保存时间",type:"number",default:1,formatter:e=>e.toFixed(6)},{key:"bAutoResetGuildNoOnlinePlayers",label:"不在线玩家自动退出公会",type:"switch",default:!1},{key:"AutoResetGuildTimeNoOnlinePlayers",label:"自动退出公会时间",type:"number",default:72,formatter:e=>e.toFixed(6)},{key:"GuildPlayerMaxNum",label:"工会最大人数",type:"number",default:20},{key:"PalEggDefaultHatchingTime",label:"巨大蛋孵化时间(h)",type:"number",default:1,formatter:e=>e.toFixed(6)},{key:"WorkSpeedRate",label:"工作效率",type:"number",default:1,formatter:e=>e.toFixed(6)},{key:"bIsMultiplay",label:"多人游戏",type:"switch",default:!1},{key:"bIsPvP",label:"PVP模式",type:"switch",default:!1},{key:"bCanPickupOtherGuildDeathPenaltyDrop",label:"其他公会死亡掉落物捡取",type:"switch",default:!1},{key:"bEnableNonLoginPenalty",label:"登陆惩罚?",type:"switch",default:!1},{key:"bEnableFastTravel",label:"快速旅行",type:"switch",default:!0},{key:"bIsStartLocationSelectByMap",label:"选择出生点",type:"switch",default:!0},{key:"bExistPlayerAfterLogout",label:"登出自动关服",type:"switch",default:!1},{key:"bEnableDefenseOtherGuildPlayer",label:"工会间伤害",type:"switch",default:!1},{key:"CoopPlayerMaxNum",label:"CoopPlayerMaxNum",type:"number",default:4},{key:"ServerPlayerMaxNum",label:"服务器最大玩家人数",type:"number",default:32},{key:"ServerName",label:"服务器名称",type:"input",default:"Palworld Server"},{key:"ServerDescription",label:"服务器描述",type:"input",default:""},{key:"AdminPassword",label:"管理员密码",type:"input",default:""},{key:"ServerPassword",label:"服务器密码",type:"input",default:""},{key:"PublicPort",label:"服务器端口",type:"number",default:8211},{key:"PublicIP",label:"服务器IP",type:"input",default:""},{key:"RCONEnabled",label:"RCONEnabled",type:"switch",default:!1},{key:"RCONPort",label:"RCONPort",type:"number",default:25575},{key:"Region",label:"地区",type:"input",default:""},{key:"bUseAuth",label:"bUseAuth",type:"switch",default:!0},{key:"BanListURL",label:"封禁名单地址",type:"input",default:"https://api.palworldgame.com/api/banlist.txt"}];function _(){return C(X)}function Y(e){if(!e)throw new Error("ini is empty");const r=_();try{const n={};e.replaceAll(`
`,"").replaceAll("\r","").slice(0,-1).split("OptionSettings=(")[1].split(",").forEach(t=>{const a=t.split("="),b=a[0].trim();let i=a[1].trim();i.startsWith('"')&&i.endsWith('"')&&(i=i.slice(1,-1)),n[b]=i});for(const t of r){let a;if(n[t.key]!=null)switch(a=n[t.key],t.type){case"select":t.default=a;break;case"number":t.default=Number(a);break;case"switch":t.default=a==="True";break;default:t.default=a;break}}}catch{throw new Error("wrong ini format")}return r}function Z(e){var n;let r="";for(const t of e)switch(t.type){case"select":r+=`${t.key}=${t.default},`;break;case"number":r+=`${t.key}=${t.formatter?t.formatter(t.default||0):(n=t.default)==null?void 0:n.toString()},`;break;case"switch":r+=`${t.key}=${t.default?"True":"False"},`;break;default:r+=`${t.key}="${t.default}",`;break}return`[/Script/Pal.PalGameWorldSettings]
OptionSettings=(${r.slice(0,-1)})

`}const ee={flex:"","flex-col":"","gap-4":"","w-full":"","h-full":"","overflow-auto":"","items-center":""},te={flex:"","flex-wrap":"","gap-4":""},le={class:"v-scroll"},ae={class:"content"},re=I({__name:"palServerSettings",setup(e){O(d=>({"5d3d8c34":h(t),"32e41db2":h(n)}));const r=M(null),{width:n,height:t}=U(r),a=B(_());async function b(d){try{const f=await d.text();a.splice(0,a.length,...Y(f)),E.success("解析成功")}catch{E.error("解析失败")}return!1}function i(){const d=Z(a);Q(d,"PalWorldSettings.ini")}function F(){a.splice(0,a.length,..._())}return(d,f)=>{const c=$,v=J,R=q,S=z,g=j,D=K,N=G,A=L,V=W;return u(),k("div",ee,[y("div",te,[p(v,{"before-upload":b,"show-file-list":!1,accept:".ini"},{default:m(()=>[p(c,{type:"primary"},{default:m(()=>[x(" 解析配置 ")]),_:1})]),_:1}),p(c,{onClick:F},{default:m(()=>[x(" 恢复默认 ")]),_:1}),p(c,{onClick:i},{default:m(()=>[x(" 下载配置 ")]),_:1})]),p(V,{"flex-1":"","w-full":"","overflow-auto":"","label-width":"17rem","position-relative":"",onSubmit:f[0]||(f[0]=T(()=>{},["prevent"]))},{default:m(()=>[y("div",{ref_key:"scrollContainer",ref:r,class:"scroll-container","w-full":"","h-full":""},[y("div",le,[y("div",ae,[(u(!0),k(w,null,P(h(a),l=>(u(),s(A,{key:l.key,label:l.label},{default:m(()=>[l.type==="number"?(u(),s(R,{key:0,modelValue:l.default,"onUpdate:modelValue":o=>l.default=o,min:l.min,max:l.max},null,8,["modelValue","onUpdate:modelValue","min","max"])):l.type==="switch"?(u(),s(S,{key:1,modelValue:l.default,"onUpdate:modelValue":o=>l.default=o},null,8,["modelValue","onUpdate:modelValue"])):l.type==="select"?(u(),s(D,{key:2,modelValue:l.default,"onUpdate:modelValue":o=>l.default=o},{default:m(()=>[(u(!0),k(w,null,P(l.options,o=>(u(),s(g,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])):(u(),s(N,{key:3,modelValue:l.default,"onUpdate:modelValue":o=>l.default=o},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1032,["label"]))),128))])])],512)]),_:1})])}}}),ve=H(re,[["__scopeId","data-v-54061e1a"]]);export{ve as default};
