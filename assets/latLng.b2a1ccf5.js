import{l as s,c as i,C as d}from"./leaflet.ChineseLayer.f142a669.js";import{C as y}from"./vue-codemirror.a2ad42b5.js";import{a0 as C,$ as w,aj as A,a9 as p,a as r,o as b,c as v,w as l,b as m,aP as S,e as T,g as M}from"./vendor.3bd2b7e4.js";/* empty css                */import{_}from"./index.8932276d.js";var h="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACkAAAApCAQAAAACach9AAACMUlEQVR4Ae3ShY7jQBAE0Aoz/f9/HTMzhg1zrdKUrJbdx+Kd2nD8VNudfsL/Th///dyQN2TH6f3y/BGpC379rV+S+qqetBOxImNQXL8JCAr2V4iMQXHGNJxeCfZXhSRBcQMfvkOWUdtfzlLgAENmZDcmo2TVmt8OSM2eXxBp3DjHSMFutqS7SbmemzBiR+xpKCNUIRkdkkYxhAkyGoBvyQFEJEefwSmmvBfJuJ6aKqKWnAkvGZOaZXTUgFqYULWNSHUckZuR1HIIimUExutRxwzOLROIG4vKmCKQt364mIlhSyzAf1m9lHZHJZrlAOMMztRRiKimp/rpdJDc9Awry5xTZCte7FHtuS8wJgeYGrex28xNTd086Dik7vUMscQOa8y4DoGtCCSkAKlNwpgNtphjrC6MIHUkR6YWxxs6Sc5xqn222mmCRFzIt8lEdKx+ikCtg91qS2WpwVfBelJCiQJwvzixfI9cxZQWgiSJelKnwBElKYtDOb2MFbhmUigbReQBV0Cg4+qMXSxXSyGUn4UbF8l+7qdSGnTC0XLCmahIgUHLhLOhpVCtw4CzYXvLQWQbJNmxoCsOKAxSgBJno75avolkRw8iIAFcsdc02e9iyCd8tHwmeSSoKTowIgvscSGZUOA7PuCN5b2BX9mQM7S0wYhMNU74zgsPBj3HU7wguAfnxxjFQGBE6pwN+GjME9zHY7zGp8wVxMShYX9NXvEWD3HbwJf4giO4CFIQxXScH1/TM+04kkBiAAAAAElFTkSuQmCC";const N=new s.exports.Icon({iconUrl:"https://cdn.jsdelivr.net/gh/zvonimirsun/leaflet-color-markers@master/img/marker-icon-2x-green.png",shadowUrl:h,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),Z=new s.exports.Icon({iconUrl:"https://cdn.jsdelivr.net/gh/zvonimirsun/leaflet-color-markers@master/img/marker-icon-2x-yellow.png",shadowUrl:h,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),z={name:"latLng",components:{Container:y,Button:C,Input:w,Space:A},data:()=>({map:void 0,centerMarker:void 0,clickMarker:void 0,tdtToken:"bed806b1ccb34b268ab1c0700123d444",gaodeToken:"868d6830a7409520ae283cde3a3f84d1",latLng:{lng:"",lat:""},address:"",keyword:""}),mounted(){this.initMap()},methods:{initMap(){this.map=p(s.exports.map(this.$refs.mapContainer,{attributionControl:!0,zoomControl:!1})),this.map.setView([35,105],4),s.exports.control.layers({\u9AD8\u5FB7\u77E2\u91CF:i("GaoDe.Normal.Map",{minZoom:3,maxNativeZoom:18,maxZoom:20,attribution:'&copy; <a href="https://lbs.amap.com/pages/terms/" target="_blank">\u9AD8\u5FB7\u5730\u56FE</a> \u8D21\u732E\u8005'}).addTo(this.map),\u9AD8\u5FB7\u5F71\u50CF:s.exports.layerGroup([i("GaoDe.Satellite.Map",{minZoom:3,maxNativeZoom:18,maxZoom:20}),i("GaoDe.Satellite.Annotation",{minZoom:3,maxNativeZoom:18,maxZoom:20})],{attribution:'&copy; <a href="https://lbs.amap.com/pages/terms/" target="_blank">\u9AD8\u5FB7\u5730\u56FE</a> \u8D21\u732E\u8005'}),\u5929\u5730\u56FE\u77E2\u91CF:s.exports.layerGroup([i("TianDiTu.Normal.Map",{key:this.tdtToken,minZoom:3,maxNativeZoom:18,maxZoom:20}),i("TianDiTu.Normal.Annotation",{key:this.tdtToken,minZoom:3,maxNativeZoom:18,maxZoom:20})],{attribution:'&copy; <a href="https://www.tianditu.gov.cn/" target="_blank">\u5929\u5730\u56FE</a> \u8D21\u732E\u8005'}),\u5929\u5730\u56FE\u5F71\u50CF:s.exports.layerGroup([i("TianDiTu.Satellite.Map",{key:this.tdtToken,minZoom:3,maxNativeZoom:18,maxZoom:20}),i("TianDiTu.Satellite.Annotation",{key:this.tdtToken,minZoom:3,maxNativeZoom:18,maxZoom:20})],{attribution:'&copy; <a href="https://www.tianditu.gov.cn/" target="_blank">\u5929\u5730\u56FE</a> \u8D21\u732E\u8005'}),\u5929\u5730\u56FE\u5730\u5F62:s.exports.layerGroup([i("TianDiTu.Terrain.Map",{key:this.tdtToken,minZoom:3,maxNativeZoom:14,maxZoom:20}),i("TianDiTu.Terrain.Annotation",{key:this.tdtToken,minZoom:3,maxNativeZoom:14,maxZoom:20})],{attribution:'&copy; <a href="https://www.tianditu.gov.cn/" target="_blank">\u5929\u5730\u56FE</a> \u8D21\u732E\u8005'}),OpenStreetMap:i("OSM.Normal.Map",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> \u8D21\u732E\u8005'})},{},{hideSingleBase:!0,position:"topright"}).addTo(this.map),s.exports.control.scale({imperial:!1,position:"bottomleft"}).addTo(this.map),s.exports.control.zoom({zoomInTitle:"\u653E\u5927",zoomOutTitle:"\u7F29\u5C0F",position:"bottomright"}).addTo(this.map),this.centerMarker=p(s.exports.marker(this.map.getCenter(),{icon:N})).addTo(this.map).bindPopup(this.getPopupContent(this.map.getCenter()),{autoPan:!1,autoClose:!1,closeOnEscapeKey:!1,closeOnClick:!1}).openPopup(),this.map.on("move",()=>{this.centerMarker.setLatLng(this.map.getCenter()).getPopup().setContent(this.getPopupContent(this.map.getCenter()))}),this.map.on("click",t=>{this.locateLatLng(t.latlng,null,!1)}),"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(t=>{this.map.setView([t.coords.latitude,t.coords.longitude],18)})},getPopupContent(t,e){const a=t.lat;let o=t.lng%360;o<=-180&&(o+=360);let n="";return a>=0?n+=`<p>\u5317\u7EACN: ${Math.abs(a)}</p>`:n+=`<p>\u5357\u7EACS: ${Math.abs(a)}</p>`,o>=0?n+=`<p>\u4E1C\u7ECFE: ${Math.abs(o)}</p>`:n+=`<p>\u897F\u7ECFW: ${Math.abs(o)}</p>`,a>=0?n+=`<p>\u5317\u7EACN: ${this.formatDegree(Math.abs(a))}</p>`:n+=`<p>\u5357\u7EACS: ${this.formatDegree(Math.abs(a))}</p>`,o>=0?n+=`<p>\u4E1C\u7ECFE: ${this.formatDegree(o)}</p>`:n+=`<p>\u897F\u7ECFW: ${this.formatDegree(o)}</p>`,e&&(n+=`<p>\u5730\u5740: ${e}</p>`),n},handler(){if(!this.keyword)return;const t=this.keyword.replace(/ï¼Œ/g,",").split(",");if(t.length===2&&!isNaN(parseFloat(t[0].trim()))&&!isNaN(parseFloat(t[1].trim()))){this.latLng.lng=parseFloat(t[0].trim()),this.latLng.lat=parseFloat(t[1].trim()),this.locateLatLng(this.latLng);return}this.address=this.keyword,this.locateAddress()},async locateLatLng(t={},e,a=!0){if(t.lng!=null&&t.lat!=null&&t.lng!==""&&t.lat!=="")try{if(!e)try{const o=d.prototype.csysConvert.gps84_To_gcj02(t.lng,t.lat),n=await this.$axios.get("https://amap.api.iszy.xyz/v3/geocode/regeo",{params:{location:`${o.lng},${o.lat}`,output:"json",key:this.gaodeToken,homeorcorp:1}});n.data.status==="1"&&n.data.regeocode.formatted_address?e=n.data.regeocode.formatted_address:this.$msg.warn("\u672A\u627E\u5230\u76F8\u5173\u5730\u5740\u3002")}catch(o){this.$msg.error("\u67E5\u8BE2\u5730\u5740\u5931\u8D25\uFF01")}this.clickMarker?(this.clickMarker.setLatLng(t).getPopup().setContent(this.getPopupContent(t,e)),this.clickMarker.openPopup()):this.clickMarker=p(s.exports.marker(t,{icon:Z})).addTo(this.map).bindPopup(this.getPopupContent(t,e),{autoPan:!1,autoClose:!1,closeOnEscapeKey:!1,closeOnClick:!1,maxWidth:350}).openPopup(),a&&this.map.setView(t,18)}catch(o){this.$msg.error("\u5B9A\u4F4D\u5931\u8D25!")}},async locateAddress(){if(this.address)try{const t=await this.$axios.get("https://amap.api.iszy.xyz/v3/geocode/geo",{params:{address:this.address,key:this.gaodeToken}});if(t.data.status==="1"&&Number(t.data.count)>0){const e=t.data.geocodes[0],a=d.prototype.csysConvert.gcj02_To_gps84(parseFloat(e.location.split(",")[0]),parseFloat(e.location.split(",")[1]));await this.locateLatLng({lat:a.lat,lng:a.lng},e.formatted_address)}else this.$msg.warn("\u672A\u627E\u5230\u76F8\u5173\u5730\u5740\u3002")}catch(t){this.$msg.error("\u67E5\u8BE2\u5730\u5740\u5931\u8D25!")}},formatDegree(t){t=Math.abs(t);const e=Math.floor(t),a=Math.floor((t-e)*60),o=((t-e)*3600%60).toFixed(2);return e+"\xB0 "+(a<10?"0"+a:a)+"' "+(o<10?"0"+o:o)+'" '}}},B=M("\u89E3\u6790"),U={class:"mapContainer",ref:"mapContainer"};function L(t,e,a,o,n,c){const g=r("Input"),u=r("Button"),f=r("Space"),k=r("container");return b(),v(k,null,{default:l(()=>[m(f,{size:8,align:"center"},{default:l(()=>[m(g,{value:t.keyword,"onUpdate:value":e[0]||(e[0]=x=>t.keyword=x),placeholder:"\u8F93\u5165\u7ECF\u7EAC\u5EA6(\u5982'116.4,36.9')\u6216\u5730\u5740(\u5982'\u5317\u4EAC\u5E02\u653F\u5E9C')",onKeypress:S(c.handler,["enter"]),"allow-clear":""},null,8,["value","onKeypress"]),m(u,{onClick:c.handler,type:"primary"},{default:l(()=>[B]),_:1},8,["onClick"])]),_:1}),T("div",U,null,512)]),_:1})}var K=_(z,[["render",L],["__scopeId","data-v-20cb1b4a"]]);export{K as default};
