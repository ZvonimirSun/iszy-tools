import{j as E,R as _,a4 as k,J as F,au as K,T as P,o as U,F as q,G as d,K as r,w as l,m as s,bk as m,L as b,aA as v,$ as C,N as B,a0 as R}from"./index-Fx23U6zs.js";import{a as I,E as $}from"./el-form-item-COyBW9yD.js";import"./castArray-DILX5hJX.js";const M={class:"login-container"},S={class:"main"},T=E({__name:"register",setup(j){const p=_(),a=k({userName:"",nickName:"",password:"",rePassword:"",mobile:"",email:""}),y=k({userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],nickName:[{required:!0,message:"请输入昵称",trigger:"blur"}],password:[{trigger:"blur",validator:(i,e,o)=>{if(e==="")o(new Error("请输入密码"));else{if(a.rePassword!==""){if(!p.value)return;p.value.validateField("rePassword",()=>{})}o()}}}],rePassword:[{trigger:"blur",validator:(i,e,o)=>{e===""?o(new Error("请再次输入密码")):e!==a.password?o("两次输入密码不一致!"):o()}}],mobile:[{trigger:"blur",validator:(i,e,o)=>{e===""||/^1[3-9]\d{9}$/.test(e)?o():o("请输入正确的手机号码")}}],email:[{trigger:"blur",validator:(i,e,o)=>{e===""||/^[\w-]+@[\w-]+(?:\.[\w-]+)+$/.test(e)?o():o("请输入正确的邮箱")}}]}),f=_(!1),g=F(),V=K();P(()=>{V.logged&&g.back()});function n(){p.value&&p.value.validate(i=>{i&&(f.value=!0,V.register(a).then(()=>{v.success("注册成功，请等待管理员审批"),g.push("/")}).catch(e=>{v.error(e.message)}).finally(()=>{f.value=!1}))})}function N(){var i;(i=p.value)==null||i.resetFields()}function x(){g.push("/login")}return(i,e)=>{const o=C,u=I,w=B,z=$;return U(),q("div",M,[d("div",S,[r(z,{ref_key:"registerFormRef",ref:p,layout:"horizontal",model:s(a),rules:s(y),"status-icon":"","label-width":"auto"},{default:l(()=>[r(u,{required:"",label:"用户名",prop:"userName"},{default:l(()=>[r(o,{modelValue:s(a).userName,"onUpdate:modelValue":e[0]||(e[0]=t=>s(a).userName=t),size:"large",onKeydown:m(n,["enter"])},{prefix:l(()=>e[6]||(e[6]=[d("span",{class:"i-icon-park-outline-user"},null,-1)])),_:1},8,["modelValue"])]),_:1}),r(u,{required:"",label:"昵称",prop:"nickName"},{default:l(()=>[r(o,{modelValue:s(a).nickName,"onUpdate:modelValue":e[1]||(e[1]=t=>s(a).nickName=t),size:"large",onKeydown:m(n,["enter"])},{prefix:l(()=>e[7]||(e[7]=[d("span",{class:"i-icon-park-outline-user"},null,-1)])),_:1},8,["modelValue"])]),_:1}),r(u,{required:"",label:"密码",prop:"password"},{default:l(()=>[r(o,{modelValue:s(a).password,"onUpdate:modelValue":e[2]||(e[2]=t=>s(a).password=t),type:"password",size:"large","show-password":"",autocomplete:"off",onKeydown:m(n,["enter"])},{prefix:l(()=>e[8]||(e[8]=[d("span",{class:"i-icon-park-outline-lock"},null,-1)])),_:1},8,["modelValue"])]),_:1}),r(u,{required:"",label:"重复密码",prop:"rePassword"},{default:l(()=>[r(o,{modelValue:s(a).rePassword,"onUpdate:modelValue":e[3]||(e[3]=t=>s(a).rePassword=t),type:"password",size:"large","show-password":"",autocomplete:"off",onKeydown:m(n,["enter"])},{prefix:l(()=>e[9]||(e[9]=[d("span",{class:"i-icon-park-outline-lock"},null,-1)])),_:1},8,["modelValue"])]),_:1}),r(u,{label:"手机号",prop:"mobile"},{default:l(()=>[r(o,{modelValue:s(a).mobile,"onUpdate:modelValue":e[4]||(e[4]=t=>s(a).mobile=t),size:"large",onKeydown:m(n,["enter"])},{prefix:l(()=>e[10]||(e[10]=[d("span",{class:"i-icon-park-outline-phone"},null,-1)])),_:1},8,["modelValue"])]),_:1}),r(u,{label:"邮箱",prop:"email"},{default:l(()=>[r(o,{modelValue:s(a).email,"onUpdate:modelValue":e[5]||(e[5]=t=>s(a).email=t),size:"large",onKeydown:m(n,["enter"])},{prefix:l(()=>e[11]||(e[11]=[d("span",{class:"i-icon-park-outline-mail"},null,-1)])),_:1},8,["modelValue"])]),_:1}),r(u,null,{default:l(()=>[r(w,{type:"primary",block:"",size:"large",loading:s(f),onClick:n},{default:l(()=>e[12]||(e[12]=[b(" 注册 ")])),_:1},8,["loading"]),r(w,{block:"",size:"large",disabled:s(f),onClick:N},{default:l(()=>e[13]||(e[13]=[b(" 重置 ")])),_:1},8,["disabled"]),r(w,{block:"",size:"large",disabled:s(f),onClick:x},{default:l(()=>e[14]||(e[14]=[b(" 返回登录 ")])),_:1},8,["disabled"])]),_:1})]),_:1},8,["model","rules"])])])}}}),L=R(T,[["__scopeId","data-v-d9568009"]]);export{L as default};
