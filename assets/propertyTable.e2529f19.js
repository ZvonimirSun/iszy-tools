import{_,d as f,o,c as d,w as v,aT as k,L as n,bC as l,bm as g,F as y,M as b,I as D,bD as C}from"./index.471dd628.js";/* empty css               */import{_ as I}from"./index.a3d1b0ee.js";import"./index.eda845ea.js";import"./index.390d38e4.js";import"./index.52e334d0.js";import"./index.cd5969b1.js";import"./index.d6fb428e.js";import"./index.421dc287.js";import"./index.45bac158.js";import{l as w}from"./leaflet-src.78f2c9be.js";import"./css.1dd79e5e.js";import"./useState.6c8bc1d5.js";import"./toArray.a705e64c.js";import"./DownOutlined.28f8b5c9.js";import"./index.6fabcdcb.js";import"./createForOfIteratorHelper.d03c2dfd.js";import"./index.f493c4c5.js";import"./index.5684c904.js";import"./Menu.4ded7c00.js";import"./shallowequal.ca34024f.js";import"./_arrayIncludesWith.40afec22.js";import"./Overflow.19621af6.js";import"./collapseMotion.18ffd1c5.js";import"./SearchOutlined.6e9c5033.js";import"./index.6e4f06c4.js";import"./Password.1bba7c26.js";import"./EyeOutlined.2f12ad7c.js";import"./Checkbox.c330b843.js";import"./responsiveObserve.d53c7fd2.js";import"./isMobile.481c1aec.js";const L=f({name:"PropertyTable",props:{geoJsonLayer:{type:w.exports.GeoJSON,default:null},height:{type:Number,default:null}},data:()=>({editableData:{}}),computed:{features(){if(this.geoJsonLayer)try{return this.geoJsonLayer.toGeoJSON().features}catch{return null}return null},propertyList(){return this.features?this.features.map(e=>e.properties):null},tableColumns(){if(this.propertyList&&this.propertyList.length>0){const t=this.getArrayKeys(this.propertyList).map(r=>({title:r,dataIndex:r,key:r,width:150}));return t.push({title:"\u64CD\u4F5C",dataIndex:"operation",width:100,fixed:"right"}),t}else return null},tableScroll(){return{y:this.height-96}}},methods:{getArrayKeys(e){return[...e.reduce((t,r)=>(Object.keys(r).forEach(u=>t.add(u)),t),new Set)]},saveToEditableData(e,t,r){if(e instanceof InputEvent&&t&&r)try{t[r]=JSON.parse(e.currentTarget.value)}catch{t[r]=e.currentTarget.value}},edit(e){this.editableData[e]=k(this.propertyList[e])},save(e){Object.assign(this.propertyList[e],this.editableData[e]),delete this.editableData[e],this.$eventBus.emit("updateEditor")},cancel(e){delete this.editableData[e]},rowEvents(e,t){return{onClick:()=>{this.$eventBus.emit("locationGeo",this.features[t])}}}}}),S={key:0,class:"editable-cell-input-wrapper"},T={key:1,class:"editable-cell-text-wrapper"},$={key:0},E=["onClick"],J=["onClick"],N={key:1},O=["onClick"];function B(e,t,r,u,U,j){const m=D,c=I,h=C;return e.tableColumns?(o(),d(c,{key:0,class:"ant-table-striped",columns:e.tableColumns,"data-source":e.propertyList,"row-key":p=>p.key,pagination:!1,bordered:"",size:"small",scroll:e.tableScroll,"custom-row":e.rowEvents},{bodyCell:v(({text:p,index:a,column:s})=>[s.dataIndex!=="operation"?(o(),n(y,{key:0},[e.editableData[a]?(o(),n("div",S,[typeof e.editableData[a][s.dataIndex]=="string"?(o(),d(m,{key:0,value:e.editableData[a][s.dataIndex],"onUpdate:value":i=>e.editableData[a][s.dataIndex]=i,onClick:t[0]||(t[0]=l(()=>{},["stop"]))},null,8,["value","onUpdate:value"])):typeof e.editableData[a][s.dataIndex]=="number"?(o(),d(m,{key:1,value:e.editableData[a][s.dataIndex],"onUpdate:value":i=>e.editableData[a][s.dataIndex]=i,valueModifiers:{number:!0},onClick:t[1]||(t[1]=l(()=>{},["stop"]))},null,8,["value","onUpdate:value"])):(o(),d(m,{key:2,value:JSON.stringify(e.editableData[a][s.dataIndex]),onClick:t[2]||(t[2]=l(()=>{},["stop"])),onChange:i=>e.saveToEditableData(i,e.editableData[a],s.dataIndex)},null,8,["value","onChange"]))])):(o(),n("div",T,g(typeof p=="object"?JSON.stringify(p):p),1))],64)):(o(),n(y,{key:1},[e.editableData[a]?(o(),n("span",$,[b("a",{onClick:l(i=>e.save(a),["stop"])}," \u4FDD\u5B58\u5C5E\u6027 ",8,E),b("a",{onClick:l(i=>e.cancel(a),["stop"])}," \u53D6\u6D88\u7F16\u8F91 ",8,J)])):(o(),n("span",N,[b("a",{onClick:l(i=>e.edit(a),["stop"])}," \u7F16\u8F91\u5C5E\u6027 ",8,O)]))],64))]),_:1},8,["columns","data-source","row-key","scroll","custom-row"])):(o(),d(h,{key:1}))}const ye=_(L,[["render",B],["__scopeId","data-v-beb73b2f"]]);export{ye as default};
