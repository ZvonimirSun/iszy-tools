import{t as h,a0 as x,a1 as p,J as N,X as i,u as w,aw as y,ar as d,a$ as E,az as V,as as k}from"./index-KGscBgKV.js";import{E as b}from"./el-space-CRKgVUpE.js";const m=[16,8,4,2,1],v="0123456789bcdefghjkmnpqrstuvwxyz",g=function(o,t,e){t&e?o[0]=(o[0]+o[1])/2:o[1]=(o[0]+o[1])/2};function B(o,t){if(typeof o=="string"){const n=o.split(",");if(n.length>=2){if(o=Number.parseFloat(n[0]),t=Number.parseFloat(n[1]),isNaN(o)||isNaN(t))throw new TypeError("Not Supported")}else throw new Error("Not Supported")}let e=1;const l=[],s=[];let c=0,a=0;const r=12;let u="";for(l[0]=-90,l[1]=90,s[0]=-180,s[1]=180;u.length<r;){if(e){const n=(s[0]+s[1])/2;t>n?(a|=m[c],s[0]=n):s[1]=n}else{const n=(l[0]+l[1])/2;o>n?(a|=m[c],l[0]=n):l[1]=n}e=!e,c<4?c++:(u+=v[a],c=0,a=0)}return u}function S(o){let t=1;const e=[],l=[];e[0]=-90,e[1]=90,l[0]=-180,l[1]=180;for(let s=0;s<o.length;s++){const c=o[s],a=v.indexOf(c);for(let r=0;r<5;r++){const u=m[r];g(t?l:e,a,u),t=!t}}return e[2]=(e[0]+e[1])/2,l[2]=(l[0]+l[1])/2,{latitude:e[2],longitude:l[2]}}const G={__name:"geohash",setup(o){const t=h(""),e=h("");function l(){try{e.value=B(t.value)}catch(a){E.error(`编码失败，${a.message}`)}}function s(){try{const{latitude:a,longitude:r}=S(t.value);e.value=`${a},${r}`}catch(a){E.error(`解码失败，${a.message}`)}}function c(){const a=t.value;t.value=e.value,e.value=a}return(a,r)=>{const u=V,n=k,_=b;return N(),x(_,{direction:"vertical",fill:!0,"w-full":""},{default:p(()=>[i(u,{modelValue:w(t),"onUpdate:modelValue":r[0]||(r[0]=f=>y(t)?t.value=f:null),type:"textarea",rows:5,placeholder:"请输入要进行 GeoHash 编码或解码的字符"},null,8,["modelValue"]),i(_,{style:{"flex-wrap":"wrap"}},{default:p(()=>[i(n,{type:"primary",onClick:l},{default:p(()=>[d(" 编码 (Encode) ")]),_:1}),i(n,{onClick:s},{default:p(()=>[d(" 解码 (Decode) ")]),_:1}),i(n,{onClick:c},{default:p(()=>[d(" ↕交换 ")]),_:1})]),_:1}),i(u,{modelValue:w(e),"onUpdate:modelValue":r[1]||(r[1]=f=>y(e)?e.value=f:null),type:"textarea",rows:5,readonly:"",placeholder:"GeoHash 编码或解码的结果"},null,8,["modelValue"])]),_:1})}}};export{G as default};
