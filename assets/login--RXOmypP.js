import{j as q,a6 as I,R as f,J as z,aw as C,ax as S,a9 as B,T as K,o as F,F as R,G as h,K as s,w as o,m as r,bp as v,L as b,aE as U,aD as g,$ as L,N as M,a0 as Q,a1 as T,a2 as j}from"./index-CReUdWLV.js";import{a as D,E as G}from"./el-form-item-JgszK9Qb.js";import"./castArray-DEQpzWzP.js";const N=n=>(Q("data-v-ababdcc1"),n=n(),T(),n),J={class:"login-container"},O={class:"main"},P=N(()=>h("span",{class:"i-icon-park-outline-user"},null,-1)),$=N(()=>h("span",{class:"i-icon-park-outline-lock"},null,-1)),A=q({__name:"login",setup(n){const a=I({userName:"",password:""}),i=f(),c=f({}),l=f(!1),d=z(),k=C(),w=S();B(k,t=>{const e=t.query;e&&(typeof e.redirect=="string"&&(i.value=e.redirect),c.value=V(e))},{immediate:!0}),K(()=>{w.logged&&d.push({path:i.value||"/",query:c.value})});async function p(){if(!navigator.onLine){g.warning("已离线！");return}if(a.userName!=null&&a.password!=null){l.value=!0;try{await w.login({userName:a.userName,password:a.password}),g.success("登录成功！"),d.push({path:i.value||"/",query:c.value})}catch(t){t instanceof Error&&g.error(t.message)}l.value=!1}}function E(){d.push("/register")}function V(t){const{redirect:e,...u}=t;return u}return(t,e)=>{const u=L,m=D,y=M,x=G;return F(),R("div",J,[h("div",O,[s(x,U({layout:"horizontal",model:r(a)},{wrapperCol:{span:24}}),{default:o(()=>[s(m,{required:""},{default:o(()=>[s(u,{modelValue:r(a).userName,"onUpdate:modelValue":e[0]||(e[0]=_=>r(a).userName=_),placeholder:"账户",size:"large",onKeypress:v(p,["enter"])},{prefix:o(()=>[P]),_:1},8,["modelValue"])]),_:1}),s(m,{required:""},{default:o(()=>[s(u,{modelValue:r(a).password,"onUpdate:modelValue":e[1]||(e[1]=_=>r(a).password=_),type:"password",placeholder:"密码",size:"large","show-password":"",onKeypress:v(p,["enter"])},{prefix:o(()=>[$]),_:1},8,["modelValue"])]),_:1}),s(m,null,{default:o(()=>[s(y,{type:"primary",block:"",size:"large",loading:r(l),onClick:p},{default:o(()=>[b(" 登录 ")]),_:1},8,["loading"]),s(y,{block:"",size:"large",disabled:r(l),onClick:E},{default:o(()=>[b(" 注册 ")]),_:1},8,["disabled"])]),_:1})]),_:1},16,["model"])])])}}}),Y=j(A,[["__scopeId","data-v-ababdcc1"]]);export{Y as default};
