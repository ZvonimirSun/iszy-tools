function oe(e){"@babel/helpers - typeof";return oe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oe(e)}function Ne(e){return Array.isArray(e)}function Oe(e){return e!==null&&oe(e)==="object"&&e.constructor===Object}function Zn(e){return e&&oe(e)==="object"?e.op==="add":!1}function xn(e){return e&&oe(e)==="object"?e.op==="remove":!1}function es(e){return e&&oe(e)==="object"?e.op==="replace":!1}function ts(e){return e&&oe(e)==="object"?e.op==="copy":!1}function rs(e){return e&&oe(e)==="object"?e.op==="move":!1}function Fe(e){"@babel/helpers - typeof";return Fe=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fe(e)}function tr(e,t){return JSON.stringify(e)===JSON.stringify(t)}function rr(e,t){return e===t}function ht(e){return e.slice(0,e.length-1)}function nr(e){return e[e.length-1]}function ns(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:rr;if(e.length<t.length)return!1;for(var n=0;n<t.length;n++)if(!r(e[n],t[n]))return!1;return!0}function mt(e){return Fe(e)==="object"&&e!==null}function _e(e){"@babel/helpers - typeof";return _e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_e(e)}function nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function sr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nt(Object(r),!0).forEach(function(n){or(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nt(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function or(e,t,r){return t=ar(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ar(e){var t=ir(e,"string");return _e(t)==="symbol"?t:String(t)}function ir(e,t){if(_e(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(_e(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ue(e){if(Ne(e)){var t=e.slice();return Object.getOwnPropertySymbols(e).forEach(function(n){t[n]=e[n]}),t}else if(Oe(e)){var r=sr({},e);return Object.getOwnPropertySymbols(e).forEach(function(n){r[n]=e[n]}),r}else return e}function Ge(e,t,r){if(e[t]===r)return e;var n=Ue(e);return n[t]=r,n}function de(e,t){for(var r=e,n=0;n<t.length;)Oe(r)?r=r[t[n]]:Ne(r)?r=r[parseInt(t[n])]:r=void 0,n++;return r}function ve(e,t,r){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(t.length===0)return r;var s=t[0],i=ve(e?e[s]:void 0,t.slice(1),r,n);if(Oe(e)||Ne(e))return Ge(e,s,i);if(n){var f=cr.test(s)?[]:{};return f[s]=i,f}else throw new Error("Path does not exist")}var cr=/^\d+$/;function pt(e,t,r){if(t.length===0)return r(e);if(!mt(e))throw new Error("Path doesn't exist");var n=t[0],s=pt(e[n],t.slice(1),r);return Ge(e,n,s)}function He(e,t){if(t.length===0)return e;if(!mt(e))throw new Error("Path does not exist");if(t.length===1){var r=t[0];if(r in e){var n=Ue(e);return Ne(n)&&n.splice(parseInt(r),1),Oe(n)&&delete n[r],n}else return e}var s=t[0],i=He(e[s],t.slice(1));return Ge(e,s,i)}function Le(e,t,r){var n=t.slice(0,t.length-1),s=t[t.length-1];return pt(e,n,function(i){if(!Array.isArray(i))throw new TypeError("Array expected at path "+JSON.stringify(n));var f=Ue(i);return f.splice(parseInt(s),0,r),f})}function yt(e,t){return e===void 0?!1:t.length===0?!0:e===null?!1:yt(e[t[0]],t.slice(1))}function _t(e){var t=e.split("/");return t.shift(),t.map(function(r){return r.replace(/~1/g,"/").replace(/~0/g,"~")})}function Ae(e){return e.map($t).join("")}function $t(e){return"/"+String(e).replace(/~/g,"~0").replace(/\//g,"~1")}function ss(e,t){return e+$t(t)}function os(e,t){return e.startsWith(t)&&(e.length===t.length||e[t.length]==="/")}function as(e,t,r){for(var n=e,s=0;s<t.length;s++){yr(t[s]);var i=t[s];if(r&&r.before){var f=r.before(n,i);if(f!==void 0){if(f.document!==void 0&&(n=f.document),f.json!==void 0)throw new Error('Deprecation warning: returned object property ".json" has been renamed to ".document"');f.operation!==void 0&&(i=f.operation)}}var p=n,$=_r(n,i.path);if(i.op==="add")n=fr(n,$,i.value);else if(i.op==="remove")n=lr(n,$);else if(i.op==="replace")n=ur(n,$,i.value);else if(i.op==="copy")n=dr(n,$,st(i.from));else if(i.op==="move")n=hr(n,$,st(i.from));else if(i.op==="test")mr(n,$,i.value);else throw new Error("Unknown JSONPatch operation "+JSON.stringify(i));if(r&&r.after){var m=r.after(n,i,p);m!==void 0&&(n=m)}}return n}function ur(e,t,r){return ve(e,t,r)}function lr(e,t){return He(e,t)}function fr(e,t,r){return qe(e,t)?Le(e,t,r):ve(e,t,r)}function dr(e,t,r){var n=de(e,r);if(qe(e,t))return Le(e,t,n);var s=de(e,r);return ve(e,t,s)}function hr(e,t,r){var n=de(e,r),s=He(e,r);return qe(s,t)?Le(s,t,n):ve(s,t,n)}function mr(e,t,r){if(r===void 0)throw new Error('Test failed: no value provided (path: "'.concat(Ae(t),'")'));if(!yt(e,t))throw new Error('Test failed: path not found (path: "'.concat(Ae(t),'")'));var n=de(e,t);if(!tr(n,r))throw new Error('Test failed, value differs (path: "'.concat(Ae(t),'")'))}function qe(e,t){if(t.length===0)return!1;var r=de(e,ht(t));return Array.isArray(r)}function pr(e,t){if(nr(t)!=="-")return t;var r=ht(t),n=de(e,r);return r.concat(n.length)}function yr(e){var t=["add","remove","replace","copy","move","test"];if(!t.includes(e.op))throw new Error("Unknown JSONPatch op "+JSON.stringify(e.op));if(typeof e.path!="string")throw new Error('Required property "path" missing or not a string in operation '+JSON.stringify(e));if((e.op==="copy"||e.op==="move")&&typeof e.from!="string")throw new Error('Required property "from" missing or not a string in operation '+JSON.stringify(e))}function _r(e,t){return pr(e,_t(t))}function st(e){return _t(e)}class is extends Error{constructor(t,r){super(t+" at position "+r),this.position=r}}var ne={},he={},ge={},G={},$e={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class r extends t{constructor(h){if(super(),!e.IDENTIFIER.test(h))throw new Error("CodeGen: name must be a valid identifier");this.str=h}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=r;class n extends t{constructor(h){super(),this._items=typeof h=="string"?[h]:h}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const h=this._items[0];return h===""||h==='""'}get str(){var h;return(h=this._str)!==null&&h!==void 0?h:this._str=this._items.reduce((d,E)=>`${d}${E}`,"")}get names(){var h;return(h=this._names)!==null&&h!==void 0?h:this._names=this._items.reduce((d,E)=>(E instanceof r&&(d[E.str]=(d[E.str]||0)+1),d),{})}}e._Code=n,e.nil=new n("");function s(c,...h){const d=[c[0]];let E=0;for(;E<h.length;)p(d,h[E]),d.push(c[++E]);return new n(d)}e._=s;const i=new n("+");function f(c,...h){const d=[P(c[0])];let E=0;for(;E<h.length;)d.push(i),p(d,h[E]),d.push(i,P(c[++E]));return $(d),new n(d)}e.str=f;function p(c,h){h instanceof n?c.push(...h._items):h instanceof r?c.push(h):c.push(w(h))}e.addCodeArg=p;function $(c){let h=1;for(;h<c.length-1;){if(c[h]===i){const d=m(c[h-1],c[h+1]);if(d!==void 0){c.splice(h-1,3,d);continue}c[h++]="+"}h++}}function m(c,h){if(h==='""')return c;if(c==='""')return h;if(typeof c=="string")return h instanceof r||c[c.length-1]!=='"'?void 0:typeof h!="string"?`${c.slice(0,-1)}${h}"`:h[0]==='"'?c.slice(0,-1)+h.slice(1):void 0;if(typeof h=="string"&&h[0]==='"'&&!(c instanceof r))return`"${c}${h.slice(1)}`}function _(c,h){return h.emptyStr()?c:c.emptyStr()?h:f`${c}${h}`}e.strConcat=_;function w(c){return typeof c=="number"||typeof c=="boolean"||c===null?c:P(Array.isArray(c)?c.join(","):c)}function S(c){return new n(P(c))}e.stringify=S;function P(c){return JSON.stringify(c).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=P;function R(c){return typeof c=="string"&&e.IDENTIFIER.test(c)?new n(`.${c}`):s`[${c}]`}e.getProperty=R;function I(c){if(typeof c=="string"&&e.IDENTIFIER.test(c))return new n(`${c}`);throw new Error(`CodeGen: invalid export name: ${c}, use explicit $id name mapping`)}e.getEsmExportName=I;function y(c){return new n(c.toString())}e.regexpCode=y})($e);var Me={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=$e;class r extends Error{constructor(m){super(`CodeGen: "code" for ${m} not defined`),this.value=m.value}}var n;(function($){$[$.Started=0]="Started",$[$.Completed=1]="Completed"})(n=e.UsedValueState||(e.UsedValueState={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class s{constructor({prefixes:m,parent:_}={}){this._names={},this._prefixes=m,this._parent=_}toName(m){return m instanceof t.Name?m:this.name(m)}name(m){return new t.Name(this._newName(m))}_newName(m){const _=this._names[m]||this._nameGroup(m);return`${m}${_.index++}`}_nameGroup(m){var _,w;if(!((w=(_=this._parent)===null||_===void 0?void 0:_._prefixes)===null||w===void 0)&&w.has(m)||this._prefixes&&!this._prefixes.has(m))throw new Error(`CodeGen: prefix "${m}" is not allowed in this scope`);return this._names[m]={prefix:m,index:0}}}e.Scope=s;class i extends t.Name{constructor(m,_){super(_),this.prefix=m}setValue(m,{property:_,itemIndex:w}){this.value=m,this.scopePath=(0,t._)`.${new t.Name(_)}[${w}]`}}e.ValueScopeName=i;const f=(0,t._)`\n`;class p extends s{constructor(m){super(m),this._values={},this._scope=m.scope,this.opts={...m,_n:m.lines?f:t.nil}}get(){return this._scope}name(m){return new i(m,this._newName(m))}value(m,_){var w;if(_.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const S=this.toName(m),{prefix:P}=S,R=(w=_.key)!==null&&w!==void 0?w:_.ref;let I=this._values[P];if(I){const h=I.get(R);if(h)return h}else I=this._values[P]=new Map;I.set(R,S);const y=this._scope[P]||(this._scope[P]=[]),c=y.length;return y[c]=_.ref,S.setValue(_,{property:P,itemIndex:c}),S}getValue(m,_){const w=this._values[m];if(w)return w.get(_)}scopeRefs(m,_=this._values){return this._reduceValues(_,w=>{if(w.scopePath===void 0)throw new Error(`CodeGen: name "${w}" has no value`);return(0,t._)`${m}${w.scopePath}`})}scopeCode(m=this._values,_,w){return this._reduceValues(m,S=>{if(S.value===void 0)throw new Error(`CodeGen: name "${S}" has no value`);return S.value.code},_,w)}_reduceValues(m,_,w={},S){let P=t.nil;for(const R in m){const I=m[R];if(!I)continue;const y=w[R]=w[R]||new Map;I.forEach(c=>{if(y.has(c))return;y.set(c,n.Started);let h=_(c);if(h){const d=this.opts.es5?e.varKinds.var:e.varKinds.const;P=(0,t._)`${P}${d} ${c} = ${h};${this.opts._n}`}else if(h=S==null?void 0:S(c))P=(0,t._)`${P}${h}${this.opts._n}`;else throw new r(c);y.set(c,n.Completed)})}return P}}e.ValueScope=p})(Me);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=$e,r=Me;var n=$e;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return n.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return n.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return n.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}});var s=Me;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class i{optimizeNodes(){return this}optimizeNames(o,a){return this}}class f extends i{constructor(o,a,v){super(),this.varKind=o,this.name=a,this.rhs=v}render({es5:o,_n:a}){const v=o?r.varKinds.var:this.varKind,T=this.rhs===void 0?"":` = ${this.rhs}`;return`${v} ${this.name}${T};`+a}optimizeNames(o,a){if(o[this.name.str])return this.rhs&&(this.rhs=Q(this.rhs,o,a)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class p extends i{constructor(o,a,v){super(),this.lhs=o,this.rhs=a,this.sideEffects=v}render({_n:o}){return`${this.lhs} = ${this.rhs};`+o}optimizeNames(o,a){if(!(this.lhs instanceof t.Name&&!o[this.lhs.str]&&!this.sideEffects))return this.rhs=Q(this.rhs,o,a),this}get names(){const o=this.lhs instanceof t.Name?{}:{...this.lhs.names};return ue(o,this.rhs)}}class $ extends p{constructor(o,a,v,T){super(o,v,T),this.op=a}render({_n:o}){return`${this.lhs} ${this.op}= ${this.rhs};`+o}}class m extends i{constructor(o){super(),this.label=o,this.names={}}render({_n:o}){return`${this.label}:`+o}}class _ extends i{constructor(o){super(),this.label=o,this.names={}}render({_n:o}){return`break${this.label?` ${this.label}`:""};`+o}}class w extends i{constructor(o){super(),this.error=o}render({_n:o}){return`throw ${this.error};`+o}get names(){return this.error.names}}class S extends i{constructor(o){super(),this.code=o}render({_n:o}){return`${this.code};`+o}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(o,a){return this.code=Q(this.code,o,a),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class P extends i{constructor(o=[]){super(),this.nodes=o}render(o){return this.nodes.reduce((a,v)=>a+v.render(o),"")}optimizeNodes(){const{nodes:o}=this;let a=o.length;for(;a--;){const v=o[a].optimizeNodes();Array.isArray(v)?o.splice(a,1,...v):v?o[a]=v:o.splice(a,1)}return o.length>0?this:void 0}optimizeNames(o,a){const{nodes:v}=this;let T=v.length;for(;T--;){const j=v[T];j.optimizeNames(o,a)||(Qt(o,j.names),v.splice(T,1))}return v.length>0?this:void 0}get names(){return this.nodes.reduce((o,a)=>K(o,a.names),{})}}class R extends P{render(o){return"{"+o._n+super.render(o)+"}"+o._n}}class I extends P{}class y extends R{}y.kind="else";class c extends R{constructor(o,a){super(a),this.condition=o}render(o){let a=`if(${this.condition})`+super.render(o);return this.else&&(a+="else "+this.else.render(o)),a}optimizeNodes(){super.optimizeNodes();const o=this.condition;if(o===!0)return this.nodes;let a=this.else;if(a){const v=a.optimizeNodes();a=this.else=Array.isArray(v)?new y(v):v}if(a)return o===!1?a instanceof c?a:a.nodes:this.nodes.length?this:new c(tt(o),a instanceof c?[a]:a.nodes);if(!(o===!1||!this.nodes.length))return this}optimizeNames(o,a){var v;if(this.else=(v=this.else)===null||v===void 0?void 0:v.optimizeNames(o,a),!!(super.optimizeNames(o,a)||this.else))return this.condition=Q(this.condition,o,a),this}get names(){const o=super.names;return ue(o,this.condition),this.else&&K(o,this.else.names),o}}c.kind="if";class h extends R{}h.kind="for";class d extends h{constructor(o){super(),this.iteration=o}render(o){return`for(${this.iteration})`+super.render(o)}optimizeNames(o,a){if(super.optimizeNames(o,a))return this.iteration=Q(this.iteration,o,a),this}get names(){return K(super.names,this.iteration.names)}}class E extends h{constructor(o,a,v,T){super(),this.varKind=o,this.name=a,this.from=v,this.to=T}render(o){const a=o.es5?r.varKinds.var:this.varKind,{name:v,from:T,to:j}=this;return`for(${a} ${v}=${T}; ${v}<${j}; ${v}++)`+super.render(o)}get names(){const o=ue(super.names,this.from);return ue(o,this.to)}}class C extends h{constructor(o,a,v,T){super(),this.loop=o,this.varKind=a,this.name=v,this.iterable=T}render(o){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(o)}optimizeNames(o,a){if(super.optimizeNames(o,a))return this.iterable=Q(this.iterable,o,a),this}get names(){return K(super.names,this.iterable.names)}}class u extends R{constructor(o,a,v){super(),this.name=o,this.args=a,this.async=v}render(o){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(o)}}u.kind="func";class l extends P{render(o){return"return "+super.render(o)}}l.kind="return";class g extends R{render(o){let a="try"+super.render(o);return this.catch&&(a+=this.catch.render(o)),this.finally&&(a+=this.finally.render(o)),a}optimizeNodes(){var o,a;return super.optimizeNodes(),(o=this.catch)===null||o===void 0||o.optimizeNodes(),(a=this.finally)===null||a===void 0||a.optimizeNodes(),this}optimizeNames(o,a){var v,T;return super.optimizeNames(o,a),(v=this.catch)===null||v===void 0||v.optimizeNames(o,a),(T=this.finally)===null||T===void 0||T.optimizeNames(o,a),this}get names(){const o=super.names;return this.catch&&K(o,this.catch.names),this.finally&&K(o,this.finally.names),o}}class k extends R{constructor(o){super(),this.error=o}render(o){return`catch(${this.error})`+super.render(o)}}k.kind="catch";class A extends R{render(o){return"finally"+super.render(o)}}A.kind="finally";class M{constructor(o,a={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...a,_n:a.lines?`
`:""},this._extScope=o,this._scope=new r.Scope({parent:o}),this._nodes=[new I]}toString(){return this._root.render(this.opts)}name(o){return this._scope.name(o)}scopeName(o){return this._extScope.name(o)}scopeValue(o,a){const v=this._extScope.value(o,a);return(this._values[v.prefix]||(this._values[v.prefix]=new Set)).add(v),v}getScopeValue(o,a){return this._extScope.getValue(o,a)}scopeRefs(o){return this._extScope.scopeRefs(o,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(o,a,v,T){const j=this._scope.toName(a);return v!==void 0&&T&&(this._constants[j.str]=v),this._leafNode(new f(o,j,v)),j}const(o,a,v){return this._def(r.varKinds.const,o,a,v)}let(o,a,v){return this._def(r.varKinds.let,o,a,v)}var(o,a,v){return this._def(r.varKinds.var,o,a,v)}assign(o,a,v){return this._leafNode(new p(o,a,v))}add(o,a){return this._leafNode(new $(o,e.operators.ADD,a))}code(o){return typeof o=="function"?o():o!==t.nil&&this._leafNode(new S(o)),this}object(...o){const a=["{"];for(const[v,T]of o)a.length>1&&a.push(","),a.push(v),(v!==T||this.opts.es5)&&(a.push(":"),(0,t.addCodeArg)(a,T));return a.push("}"),new t._Code(a)}if(o,a,v){if(this._blockNode(new c(o)),a&&v)this.code(a).else().code(v).endIf();else if(a)this.code(a).endIf();else if(v)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(o){return this._elseNode(new c(o))}else(){return this._elseNode(new y)}endIf(){return this._endBlockNode(c,y)}_for(o,a){return this._blockNode(o),a&&this.code(a).endFor(),this}for(o,a){return this._for(new d(o),a)}forRange(o,a,v,T,j=this.opts.es5?r.varKinds.var:r.varKinds.let){const F=this._scope.toName(o);return this._for(new E(j,F,a,v),()=>T(F))}forOf(o,a,v,T=r.varKinds.const){const j=this._scope.toName(o);if(this.opts.es5){const F=a instanceof t.Name?a:this.var("_arr",a);return this.forRange("_i",0,(0,t._)`${F}.length`,er=>{this.var(j,(0,t._)`${F}[${er}]`),v(j)})}return this._for(new C("of",T,j,a),()=>v(j))}forIn(o,a,v,T=this.opts.es5?r.varKinds.var:r.varKinds.const){if(this.opts.ownProperties)return this.forOf(o,(0,t._)`Object.keys(${a})`,v);const j=this._scope.toName(o);return this._for(new C("in",T,j,a),()=>v(j))}endFor(){return this._endBlockNode(h)}label(o){return this._leafNode(new m(o))}break(o){return this._leafNode(new _(o))}return(o){const a=new l;if(this._blockNode(a),this.code(o),a.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(l)}try(o,a,v){if(!a&&!v)throw new Error('CodeGen: "try" without "catch" and "finally"');const T=new g;if(this._blockNode(T),this.code(o),a){const j=this.name("e");this._currNode=T.catch=new k(j),a(j)}return v&&(this._currNode=T.finally=new A,this.code(v)),this._endBlockNode(k,A)}throw(o){return this._leafNode(new w(o))}block(o,a){return this._blockStarts.push(this._nodes.length),o&&this.code(o).endBlock(a),this}endBlock(o){const a=this._blockStarts.pop();if(a===void 0)throw new Error("CodeGen: not in self-balancing block");const v=this._nodes.length-a;if(v<0||o!==void 0&&v!==o)throw new Error(`CodeGen: wrong number of nodes: ${v} vs ${o} expected`);return this._nodes.length=a,this}func(o,a=t.nil,v,T){return this._blockNode(new u(o,a,v)),T&&this.code(T).endFunc(),this}endFunc(){return this._endBlockNode(u)}optimize(o=1){for(;o-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(o){return this._currNode.nodes.push(o),this}_blockNode(o){this._currNode.nodes.push(o),this._nodes.push(o)}_endBlockNode(o,a){const v=this._currNode;if(v instanceof o||a&&v instanceof a)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${a?`${o.kind}/${a.kind}`:o.kind}"`)}_elseNode(o){const a=this._currNode;if(!(a instanceof c))throw new Error('CodeGen: "else" without "if"');return this._currNode=a.else=o,this}get _root(){return this._nodes[0]}get _currNode(){const o=this._nodes;return o[o.length-1]}set _currNode(o){const a=this._nodes;a[a.length-1]=o}}e.CodeGen=M;function K(N,o){for(const a in o)N[a]=(N[a]||0)+(o[a]||0);return N}function ue(N,o){return o instanceof t._CodeOrName?K(N,o.names):N}function Q(N,o,a){if(N instanceof t.Name)return v(N);if(!T(N))return N;return new t._Code(N._items.reduce((j,F)=>(F instanceof t.Name&&(F=v(F)),F instanceof t._Code?j.push(...F._items):j.push(F),j),[]));function v(j){const F=a[j.str];return F===void 0||o[j.str]!==1?j:(delete o[j.str],F)}function T(j){return j instanceof t._Code&&j._items.some(F=>F instanceof t.Name&&o[F.str]===1&&a[F.str]!==void 0)}}function Qt(N,o){for(const a in o)N[a]=(N[a]||0)-(o[a]||0)}function tt(N){return typeof N=="boolean"||typeof N=="number"||N===null?!N:(0,t._)`!${je(N)}`}e.not=tt;const Xt=rt(e.operators.AND);function Yt(...N){return N.reduce(Xt)}e.and=Yt;const Zt=rt(e.operators.OR);function xt(...N){return N.reduce(Zt)}e.or=xt;function rt(N){return(o,a)=>o===t.nil?a:a===t.nil?o:(0,t._)`${je(o)} ${N} ${je(a)}`}function je(N){return N instanceof t.Name?N:(0,t._)`(${N})`}})(G);var H={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.checkStrictMode=e.getErrorPath=e.Type=e.useFunc=e.setEvaluated=e.evaluatedPropsToName=e.mergeEvaluated=e.eachItem=e.unescapeJsonPointer=e.escapeJsonPointer=e.escapeFragment=e.unescapeFragment=e.schemaRefOrVal=e.schemaHasRulesButRef=e.schemaHasRules=e.checkUnknownRules=e.alwaysValidSchema=e.toHash=void 0;const t=G,r=$e;function n(u){const l={};for(const g of u)l[g]=!0;return l}e.toHash=n;function s(u,l){return typeof l=="boolean"?l:Object.keys(l).length===0?!0:(i(u,l),!f(l,u.self.RULES.all))}e.alwaysValidSchema=s;function i(u,l=u.schema){const{opts:g,self:k}=u;if(!g.strictSchema||typeof l=="boolean")return;const A=k.RULES.keywords;for(const M in l)A[M]||C(u,`unknown keyword: "${M}"`)}e.checkUnknownRules=i;function f(u,l){if(typeof u=="boolean")return!u;for(const g in u)if(l[g])return!0;return!1}e.schemaHasRules=f;function p(u,l){if(typeof u=="boolean")return!u;for(const g in u)if(g!=="$ref"&&l.all[g])return!0;return!1}e.schemaHasRulesButRef=p;function $({topSchemaRef:u,schemaPath:l},g,k,A){if(!A){if(typeof g=="number"||typeof g=="boolean")return g;if(typeof g=="string")return(0,t._)`${g}`}return(0,t._)`${u}${l}${(0,t.getProperty)(k)}`}e.schemaRefOrVal=$;function m(u){return S(decodeURIComponent(u))}e.unescapeFragment=m;function _(u){return encodeURIComponent(w(u))}e.escapeFragment=_;function w(u){return typeof u=="number"?`${u}`:u.replace(/~/g,"~0").replace(/\//g,"~1")}e.escapeJsonPointer=w;function S(u){return u.replace(/~1/g,"/").replace(/~0/g,"~")}e.unescapeJsonPointer=S;function P(u,l){if(Array.isArray(u))for(const g of u)l(g);else l(u)}e.eachItem=P;function R({mergeNames:u,mergeToName:l,mergeValues:g,resultToName:k}){return(A,M,K,ue)=>{const Q=K===void 0?M:K instanceof t.Name?(M instanceof t.Name?u(A,M,K):l(A,M,K),K):M instanceof t.Name?(l(A,K,M),M):g(M,K);return ue===t.Name&&!(Q instanceof t.Name)?k(A,Q):Q}}e.mergeEvaluated={props:R({mergeNames:(u,l,g)=>u.if((0,t._)`${g} !== true && ${l} !== undefined`,()=>{u.if((0,t._)`${l} === true`,()=>u.assign(g,!0),()=>u.assign(g,(0,t._)`${g} || {}`).code((0,t._)`Object.assign(${g}, ${l})`))}),mergeToName:(u,l,g)=>u.if((0,t._)`${g} !== true`,()=>{l===!0?u.assign(g,!0):(u.assign(g,(0,t._)`${g} || {}`),y(u,g,l))}),mergeValues:(u,l)=>u===!0?!0:{...u,...l},resultToName:I}),items:R({mergeNames:(u,l,g)=>u.if((0,t._)`${g} !== true && ${l} !== undefined`,()=>u.assign(g,(0,t._)`${l} === true ? true : ${g} > ${l} ? ${g} : ${l}`)),mergeToName:(u,l,g)=>u.if((0,t._)`${g} !== true`,()=>u.assign(g,l===!0?!0:(0,t._)`${g} > ${l} ? ${g} : ${l}`)),mergeValues:(u,l)=>u===!0?!0:Math.max(u,l),resultToName:(u,l)=>u.var("items",l)})};function I(u,l){if(l===!0)return u.var("props",!0);const g=u.var("props",(0,t._)`{}`);return l!==void 0&&y(u,g,l),g}e.evaluatedPropsToName=I;function y(u,l,g){Object.keys(g).forEach(k=>u.assign((0,t._)`${l}${(0,t.getProperty)(k)}`,!0))}e.setEvaluated=y;const c={};function h(u,l){return u.scopeValue("func",{ref:l,code:c[l.code]||(c[l.code]=new r._Code(l.code))})}e.useFunc=h;var d;(function(u){u[u.Num=0]="Num",u[u.Str=1]="Str"})(d=e.Type||(e.Type={}));function E(u,l,g){if(u instanceof t.Name){const k=l===d.Num;return g?k?(0,t._)`"[" + ${u} + "]"`:(0,t._)`"['" + ${u} + "']"`:k?(0,t._)`"/" + ${u}`:(0,t._)`"/" + ${u}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return g?(0,t.getProperty)(u).toString():"/"+w(u)}e.getErrorPath=E;function C(u,l,g=u.opts.strictSchema){if(g){if(l=`strict mode: ${l}`,g===!0)throw new Error(l);u.self.logger.warn(l)}}e.checkStrictMode=C})(H);var ee={};Object.defineProperty(ee,"__esModule",{value:!0});const z=G,$r={data:new z.Name("data"),valCxt:new z.Name("valCxt"),instancePath:new z.Name("instancePath"),parentData:new z.Name("parentData"),parentDataProperty:new z.Name("parentDataProperty"),rootData:new z.Name("rootData"),dynamicAnchors:new z.Name("dynamicAnchors"),vErrors:new z.Name("vErrors"),errors:new z.Name("errors"),this:new z.Name("this"),self:new z.Name("self"),scope:new z.Name("scope"),json:new z.Name("json"),jsonPos:new z.Name("jsonPos"),jsonLen:new z.Name("jsonLen"),jsonPart:new z.Name("jsonPart")};ee.default=$r;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=G,r=H,n=ee;e.keywordError={message:({keyword:y})=>(0,t.str)`must pass "${y}" keyword validation`},e.keyword$DataError={message:({keyword:y,schemaType:c})=>c?(0,t.str)`"${y}" keyword must be ${c} ($data)`:(0,t.str)`"${y}" keyword is invalid ($data)`};function s(y,c=e.keywordError,h,d){const{it:E}=y,{gen:C,compositeRule:u,allErrors:l}=E,g=w(y,c,h);d??(u||l)?$(C,g):m(E,(0,t._)`[${g}]`)}e.reportError=s;function i(y,c=e.keywordError,h){const{it:d}=y,{gen:E,compositeRule:C,allErrors:u}=d,l=w(y,c,h);$(E,l),C||u||m(d,n.default.vErrors)}e.reportExtraError=i;function f(y,c){y.assign(n.default.errors,c),y.if((0,t._)`${n.default.vErrors} !== null`,()=>y.if(c,()=>y.assign((0,t._)`${n.default.vErrors}.length`,c),()=>y.assign(n.default.vErrors,null)))}e.resetErrorsCount=f;function p({gen:y,keyword:c,schemaValue:h,data:d,errsCount:E,it:C}){if(E===void 0)throw new Error("ajv implementation error");const u=y.name("err");y.forRange("i",E,n.default.errors,l=>{y.const(u,(0,t._)`${n.default.vErrors}[${l}]`),y.if((0,t._)`${u}.instancePath === undefined`,()=>y.assign((0,t._)`${u}.instancePath`,(0,t.strConcat)(n.default.instancePath,C.errorPath))),y.assign((0,t._)`${u}.schemaPath`,(0,t.str)`${C.errSchemaPath}/${c}`),C.opts.verbose&&(y.assign((0,t._)`${u}.schema`,h),y.assign((0,t._)`${u}.data`,d))})}e.extendErrors=p;function $(y,c){const h=y.const("err",c);y.if((0,t._)`${n.default.vErrors} === null`,()=>y.assign(n.default.vErrors,(0,t._)`[${h}]`),(0,t._)`${n.default.vErrors}.push(${h})`),y.code((0,t._)`${n.default.errors}++`)}function m(y,c){const{gen:h,validateName:d,schemaEnv:E}=y;E.$async?h.throw((0,t._)`new ${y.ValidationError}(${c})`):(h.assign((0,t._)`${d}.errors`,c),h.return(!1))}const _={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function w(y,c,h){const{createErrors:d}=y.it;return d===!1?(0,t._)`{}`:S(y,c,h)}function S(y,c,h={}){const{gen:d,it:E}=y,C=[P(E,h),R(y,h)];return I(y,c,C),d.object(...C)}function P({errorPath:y},{instancePath:c}){const h=c?(0,t.str)`${y}${(0,r.getErrorPath)(c,r.Type.Str)}`:y;return[n.default.instancePath,(0,t.strConcat)(n.default.instancePath,h)]}function R({keyword:y,it:{errSchemaPath:c}},{schemaPath:h,parentSchema:d}){let E=d?c:(0,t.str)`${c}/${y}`;return h&&(E=(0,t.str)`${E}${(0,r.getErrorPath)(h,r.Type.Str)}`),[_.schemaPath,E]}function I(y,{params:c,message:h},d){const{keyword:E,data:C,schemaValue:u,it:l}=y,{opts:g,propertyName:k,topSchemaRef:A,schemaPath:M}=l;d.push([_.keyword,E],[_.params,typeof c=="function"?c(y):c||(0,t._)`{}`]),g.messages&&d.push([_.message,typeof h=="function"?h(y):h]),g.verbose&&d.push([_.schema,u],[_.parentSchema,(0,t._)`${A}${M}`],[n.default.data,C]),k&&d.push([_.propertyName,k])}})(ge);Object.defineProperty(he,"__esModule",{value:!0});he.boolOrEmptySchema=he.topBoolOrEmptySchema=void 0;const vr=ge,gr=G,wr=ee,Er={message:"boolean schema is false"};function Sr(e){const{gen:t,schema:r,validateName:n}=e;r===!1?vt(e,!1):typeof r=="object"&&r.$async===!0?t.return(wr.default.data):(t.assign((0,gr._)`${n}.errors`,null),t.return(!0))}he.topBoolOrEmptySchema=Sr;function br(e,t){const{gen:r,schema:n}=e;n===!1?(r.var(t,!1),vt(e)):r.var(t,!0)}he.boolOrEmptySchema=br;function vt(e,t){const{gen:r,data:n}=e,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,vr.reportError)(s,Er,void 0,t)}var Be={},me={};Object.defineProperty(me,"__esModule",{value:!0});me.getRules=me.isJSONType=void 0;const Pr=["string","number","integer","boolean","null","object","array"],Nr=new Set(Pr);function Or(e){return typeof e=="string"&&Nr.has(e)}me.isJSONType=Or;function Rr(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}me.getRules=Rr;var Z={};Object.defineProperty(Z,"__esModule",{value:!0});Z.shouldUseRule=Z.shouldUseGroup=Z.schemaHasRulesForType=void 0;function Cr({schema:e,self:t},r){const n=t.RULES.types[r];return n&&n!==!0&&gt(e,n)}Z.schemaHasRulesForType=Cr;function gt(e,t){return t.rules.some(r=>wt(e,r))}Z.shouldUseGroup=gt;function wt(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(n=>e[n]!==void 0))}Z.shouldUseRule=wt;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.reportTypeError=e.checkDataTypes=e.checkDataType=e.coerceAndCheckDataType=e.getJSONTypes=e.getSchemaTypes=e.DataType=void 0;const t=me,r=Z,n=ge,s=G,i=H;var f;(function(d){d[d.Correct=0]="Correct",d[d.Wrong=1]="Wrong"})(f=e.DataType||(e.DataType={}));function p(d){const E=$(d.type);if(E.includes("null")){if(d.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!E.length&&d.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');d.nullable===!0&&E.push("null")}return E}e.getSchemaTypes=p;function $(d){const E=Array.isArray(d)?d:d?[d]:[];if(E.every(t.isJSONType))return E;throw new Error("type must be JSONType or JSONType[]: "+E.join(","))}e.getJSONTypes=$;function m(d,E){const{gen:C,data:u,opts:l}=d,g=w(E,l.coerceTypes),k=E.length>0&&!(g.length===0&&E.length===1&&(0,r.schemaHasRulesForType)(d,E[0]));if(k){const A=I(E,u,l.strictNumbers,f.Wrong);C.if(A,()=>{g.length?S(d,E,g):c(d)})}return k}e.coerceAndCheckDataType=m;const _=new Set(["string","number","integer","boolean","null"]);function w(d,E){return E?d.filter(C=>_.has(C)||E==="array"&&C==="array"):[]}function S(d,E,C){const{gen:u,data:l,opts:g}=d,k=u.let("dataType",(0,s._)`typeof ${l}`),A=u.let("coerced",(0,s._)`undefined`);g.coerceTypes==="array"&&u.if((0,s._)`${k} == 'object' && Array.isArray(${l}) && ${l}.length == 1`,()=>u.assign(l,(0,s._)`${l}[0]`).assign(k,(0,s._)`typeof ${l}`).if(I(E,l,g.strictNumbers),()=>u.assign(A,l))),u.if((0,s._)`${A} !== undefined`);for(const K of C)(_.has(K)||K==="array"&&g.coerceTypes==="array")&&M(K);u.else(),c(d),u.endIf(),u.if((0,s._)`${A} !== undefined`,()=>{u.assign(l,A),P(d,A)});function M(K){switch(K){case"string":u.elseIf((0,s._)`${k} == "number" || ${k} == "boolean"`).assign(A,(0,s._)`"" + ${l}`).elseIf((0,s._)`${l} === null`).assign(A,(0,s._)`""`);return;case"number":u.elseIf((0,s._)`${k} == "boolean" || ${l} === null
              || (${k} == "string" && ${l} && ${l} == +${l})`).assign(A,(0,s._)`+${l}`);return;case"integer":u.elseIf((0,s._)`${k} === "boolean" || ${l} === null
              || (${k} === "string" && ${l} && ${l} == +${l} && !(${l} % 1))`).assign(A,(0,s._)`+${l}`);return;case"boolean":u.elseIf((0,s._)`${l} === "false" || ${l} === 0 || ${l} === null`).assign(A,!1).elseIf((0,s._)`${l} === "true" || ${l} === 1`).assign(A,!0);return;case"null":u.elseIf((0,s._)`${l} === "" || ${l} === 0 || ${l} === false`),u.assign(A,null);return;case"array":u.elseIf((0,s._)`${k} === "string" || ${k} === "number"
              || ${k} === "boolean" || ${l} === null`).assign(A,(0,s._)`[${l}]`)}}}function P({gen:d,parentData:E,parentDataProperty:C},u){d.if((0,s._)`${E} !== undefined`,()=>d.assign((0,s._)`${E}[${C}]`,u))}function R(d,E,C,u=f.Correct){const l=u===f.Correct?s.operators.EQ:s.operators.NEQ;let g;switch(d){case"null":return(0,s._)`${E} ${l} null`;case"array":g=(0,s._)`Array.isArray(${E})`;break;case"object":g=(0,s._)`${E} && typeof ${E} == "object" && !Array.isArray(${E})`;break;case"integer":g=k((0,s._)`!(${E} % 1) && !isNaN(${E})`);break;case"number":g=k();break;default:return(0,s._)`typeof ${E} ${l} ${d}`}return u===f.Correct?g:(0,s.not)(g);function k(A=s.nil){return(0,s.and)((0,s._)`typeof ${E} == "number"`,A,C?(0,s._)`isFinite(${E})`:s.nil)}}e.checkDataType=R;function I(d,E,C,u){if(d.length===1)return R(d[0],E,C,u);let l;const g=(0,i.toHash)(d);if(g.array&&g.object){const k=(0,s._)`typeof ${E} != "object"`;l=g.null?k:(0,s._)`!${E} || ${k}`,delete g.null,delete g.array,delete g.object}else l=s.nil;g.number&&delete g.integer;for(const k in g)l=(0,s.and)(l,R(k,E,C,u));return l}e.checkDataTypes=I;const y={message:({schema:d})=>`must be ${d}`,params:({schema:d,schemaValue:E})=>typeof d=="string"?(0,s._)`{type: ${d}}`:(0,s._)`{type: ${E}}`};function c(d){const E=h(d);(0,n.reportError)(E,y)}e.reportTypeError=c;function h(d){const{gen:E,data:C,schema:u}=d,l=(0,i.schemaRefOrVal)(d,u,"type");return{gen:E,keyword:"type",data:C,schema:u.type,schemaCode:l,schemaValue:l,parentSchema:u,params:{},it:d}}})(Be);var Re={};Object.defineProperty(Re,"__esModule",{value:!0});Re.assignDefaults=void 0;const le=G,kr=H;function Tr(e,t){const{properties:r,items:n}=e.schema;if(t==="object"&&r)for(const s in r)ot(e,s,r[s].default);else t==="array"&&Array.isArray(n)&&n.forEach((s,i)=>ot(e,i,s.default))}Re.assignDefaults=Tr;function ot(e,t,r){const{gen:n,compositeRule:s,data:i,opts:f}=e;if(r===void 0)return;const p=(0,le._)`${i}${(0,le.getProperty)(t)}`;if(s){(0,kr.checkStrictMode)(e,`default is ignored for: ${p}`);return}let $=(0,le._)`${p} === undefined`;f.useDefaults==="empty"&&($=(0,le._)`${$} || ${p} === null || ${p} === ""`),n.if($,(0,le._)`${p} = ${(0,le.stringify)(r)}`)}var Y={},D={};Object.defineProperty(D,"__esModule",{value:!0});D.validateUnion=D.validateArray=D.usePattern=D.callValidateCode=D.schemaProperties=D.allSchemaProperties=D.noPropertyInData=D.propertyInData=D.isOwnProperty=D.hasPropFunc=D.reportMissingProp=D.checkMissingProp=D.checkReportMissingProp=void 0;const V=G,We=H,te=ee,Ir=H;function jr(e,t){const{gen:r,data:n,it:s}=e;r.if(Xe(r,n,t,s.opts.ownProperties),()=>{e.setParams({missingProperty:(0,V._)`${t}`},!0),e.error()})}D.checkReportMissingProp=jr;function Ar({gen:e,data:t,it:{opts:r}},n,s){return(0,V.or)(...n.map(i=>(0,V.and)(Xe(e,t,i,r.ownProperties),(0,V._)`${s} = ${i}`)))}D.checkMissingProp=Ar;function Dr(e,t){e.setParams({missingProperty:t},!0),e.error()}D.reportMissingProp=Dr;function Et(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,V._)`Object.prototype.hasOwnProperty`})}D.hasPropFunc=Et;function Qe(e,t,r){return(0,V._)`${Et(e)}.call(${t}, ${r})`}D.isOwnProperty=Qe;function Vr(e,t,r,n){const s=(0,V._)`${t}${(0,V.getProperty)(r)} !== undefined`;return n?(0,V._)`${s} && ${Qe(e,t,r)}`:s}D.propertyInData=Vr;function Xe(e,t,r,n){const s=(0,V._)`${t}${(0,V.getProperty)(r)} === undefined`;return n?(0,V.or)(s,(0,V.not)(Qe(e,t,r))):s}D.noPropertyInData=Xe;function St(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}D.allSchemaProperties=St;function Kr(e,t){return St(t).filter(r=>!(0,We.alwaysValidSchema)(e,t[r]))}D.schemaProperties=Kr;function Fr({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:f},p,$,m){const _=m?(0,V._)`${e}, ${t}, ${n}${s}`:t,w=[[te.default.instancePath,(0,V.strConcat)(te.default.instancePath,i)],[te.default.parentData,f.parentData],[te.default.parentDataProperty,f.parentDataProperty],[te.default.rootData,te.default.rootData]];f.opts.dynamicRef&&w.push([te.default.dynamicAnchors,te.default.dynamicAnchors]);const S=(0,V._)`${_}, ${r.object(...w)}`;return $!==V.nil?(0,V._)`${p}.call(${$}, ${S})`:(0,V._)`${p}(${S})`}D.callValidateCode=Fr;const Mr=(0,V._)`new RegExp`;function zr({gen:e,it:{opts:t}},r){const n=t.unicodeRegExp?"u":"",{regExp:s}=t.code,i=s(r,n);return e.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,V._)`${s.code==="new RegExp"?Mr:(0,Ir.useFunc)(e,s)}(${r}, ${n})`})}D.usePattern=zr;function Jr(e){const{gen:t,data:r,keyword:n,it:s}=e,i=t.name("valid");if(s.allErrors){const p=t.let("valid",!0);return f(()=>t.assign(p,!1)),p}return t.var(i,!0),f(()=>t.break()),i;function f(p){const $=t.const("len",(0,V._)`${r}.length`);t.forRange("i",0,$,m=>{e.subschema({keyword:n,dataProp:m,dataPropType:We.Type.Num},i),t.if((0,V.not)(i),p)})}}D.validateArray=Jr;function Ur(e){const{gen:t,schema:r,keyword:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some($=>(0,We.alwaysValidSchema)(s,$))&&!s.opts.unevaluated)return;const f=t.let("valid",!1),p=t.name("_valid");t.block(()=>r.forEach(($,m)=>{const _=e.subschema({keyword:n,schemaProp:m,compositeRule:!0},p);t.assign(f,(0,V._)`${f} || ${p}`),e.mergeValidEvaluated(_,p)||t.if((0,V.not)(f))})),e.result(f,()=>e.reset(),()=>e.error(!0))}D.validateUnion=Ur;Object.defineProperty(Y,"__esModule",{value:!0});Y.validateKeywordUsage=Y.validSchemaType=Y.funcKeywordCode=Y.macroKeywordCode=void 0;const U=G,ie=ee,Gr=D,Hr=ge;function Lr(e,t){const{gen:r,keyword:n,schema:s,parentSchema:i,it:f}=e,p=t.macro.call(f.self,s,i,f),$=bt(r,n,p);f.opts.validateSchema!==!1&&f.self.validateSchema(p,!0);const m=r.name("valid");e.subschema({schema:p,schemaPath:U.nil,errSchemaPath:`${f.errSchemaPath}/${n}`,topSchemaRef:$,compositeRule:!0},m),e.pass(m,()=>e.error(!0))}Y.macroKeywordCode=Lr;function qr(e,t){var r;const{gen:n,keyword:s,schema:i,parentSchema:f,$data:p,it:$}=e;Wr($,t);const m=!p&&t.compile?t.compile.call($.self,i,f,$):t.validate,_=bt(n,s,m),w=n.let("valid");e.block$data(w,S),e.ok((r=t.valid)!==null&&r!==void 0?r:w);function S(){if(t.errors===!1)I(),t.modifying&&at(e),y(()=>e.error());else{const c=t.async?P():R();t.modifying&&at(e),y(()=>Br(e,c))}}function P(){const c=n.let("ruleErrs",null);return n.try(()=>I((0,U._)`await `),h=>n.assign(w,!1).if((0,U._)`${h} instanceof ${$.ValidationError}`,()=>n.assign(c,(0,U._)`${h}.errors`),()=>n.throw(h))),c}function R(){const c=(0,U._)`${_}.errors`;return n.assign(c,null),I(U.nil),c}function I(c=t.async?(0,U._)`await `:U.nil){const h=$.opts.passContext?ie.default.this:ie.default.self,d=!("compile"in t&&!p||t.schema===!1);n.assign(w,(0,U._)`${c}${(0,Gr.callValidateCode)(e,_,h,d)}`,t.modifying)}function y(c){var h;n.if((0,U.not)((h=t.valid)!==null&&h!==void 0?h:w),c)}}Y.funcKeywordCode=qr;function at(e){const{gen:t,data:r,it:n}=e;t.if(n.parentData,()=>t.assign(r,(0,U._)`${n.parentData}[${n.parentDataProperty}]`))}function Br(e,t){const{gen:r}=e;r.if((0,U._)`Array.isArray(${t})`,()=>{r.assign(ie.default.vErrors,(0,U._)`${ie.default.vErrors} === null ? ${t} : ${ie.default.vErrors}.concat(${t})`).assign(ie.default.errors,(0,U._)`${ie.default.vErrors}.length`),(0,Hr.extendErrors)(e)},()=>e.error())}function Wr({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function bt(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,U.stringify)(r)})}function Qr(e,t,r=!1){return!t.length||t.some(n=>n==="array"?Array.isArray(e):n==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==n||r&&typeof e>"u")}Y.validSchemaType=Qr;function Xr({schema:e,opts:t,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");const f=s.dependencies;if(f!=null&&f.some(p=>!Object.prototype.hasOwnProperty.call(e,p)))throw new Error(`parent schema must have dependencies of ${i}: ${f.join(",")}`);if(s.validateSchema&&!s.validateSchema(e[i])){const $=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(t.validateSchema==="log")r.logger.error($);else throw new Error($)}}Y.validateKeywordUsage=Xr;var se={};Object.defineProperty(se,"__esModule",{value:!0});se.extendSubschemaMode=se.extendSubschemaData=se.getSubschema=void 0;const X=G,Pt=H;function Yr(e,{keyword:t,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:f}){if(t!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const p=e.schema[t];return r===void 0?{schema:p,schemaPath:(0,X._)`${e.schemaPath}${(0,X.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:p[r],schemaPath:(0,X._)`${e.schemaPath}${(0,X.getProperty)(t)}${(0,X.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,Pt.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||f===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:f,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}se.getSubschema=Yr;function Zr(e,t,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:f}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:p}=t;if(r!==void 0){const{errorPath:m,dataPathArr:_,opts:w}=t,S=p.let("data",(0,X._)`${t.data}${(0,X.getProperty)(r)}`,!0);$(S),e.errorPath=(0,X.str)`${m}${(0,Pt.getErrorPath)(r,n,w.jsPropertySyntax)}`,e.parentDataProperty=(0,X._)`${r}`,e.dataPathArr=[..._,e.parentDataProperty]}if(s!==void 0){const m=s instanceof X.Name?s:p.let("data",s,!0);$(m),f!==void 0&&(e.propertyName=f)}i&&(e.dataTypes=i);function $(m){e.data=m,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,m]}}se.extendSubschemaData=Zr;function xr(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(e.compositeRule=n),s!==void 0&&(e.createErrors=s),i!==void 0&&(e.allErrors=i),e.jtdDiscriminator=t,e.jtdMetadata=r}se.extendSubschemaMode=xr;var J={},Nt=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var f=i[s];if(!e(t[f],r[f]))return!1}return!0}return t!==t&&r!==r},Ot={exports:{}},re=Ot.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};Se(t,n,s,e,"",e)};re.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};re.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};re.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};re.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function Se(e,t,r,n,s,i,f,p,$,m){if(n&&typeof n=="object"&&!Array.isArray(n)){t(n,s,i,f,p,$,m);for(var _ in n){var w=n[_];if(Array.isArray(w)){if(_ in re.arrayKeywords)for(var S=0;S<w.length;S++)Se(e,t,r,w[S],s+"/"+_+"/"+S,i,s,_,n,S)}else if(_ in re.propsKeywords){if(w&&typeof w=="object")for(var P in w)Se(e,t,r,w[P],s+"/"+_+"/"+en(P),i,s,_,n,P)}else(_ in re.keywords||e.allKeys&&!(_ in re.skipKeywords))&&Se(e,t,r,w,s+"/"+_,i,s,_,n)}r(n,s,i,f,p,$,m)}}function en(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var tn=Ot.exports;Object.defineProperty(J,"__esModule",{value:!0});J.getSchemaRefs=J.resolveUrl=J.normalizeId=J._getFullPath=J.getFullPath=J.inlineRef=void 0;const rn=H,nn=Nt,sn=tn,on=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function an(e,t=!0){return typeof e=="boolean"?!0:t===!0?!ze(e):t?Rt(e)<=t:!1}J.inlineRef=an;const cn=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function ze(e){for(const t in e){if(cn.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(ze)||typeof r=="object"&&ze(r))return!0}return!1}function Rt(e){let t=0;for(const r in e){if(r==="$ref")return 1/0;if(t++,!on.has(r)&&(typeof e[r]=="object"&&(0,rn.eachItem)(e[r],n=>t+=Rt(n)),t===1/0))return 1/0}return t}function Ct(e,t="",r){r!==!1&&(t=fe(t));const n=e.parse(t);return kt(e,n)}J.getFullPath=Ct;function kt(e,t){return e.serialize(t).split("#")[0]+"#"}J._getFullPath=kt;const un=/#\/?$/;function fe(e){return e?e.replace(un,""):""}J.normalizeId=fe;function ln(e,t,r){return r=fe(r),e.resolve(t,r)}J.resolveUrl=ln;const fn=/^[a-z_][-a-z0-9._]*$/i;function dn(e,t){if(typeof e=="boolean")return{};const{schemaId:r,uriResolver:n}=this.opts,s=fe(e[r]||t),i={"":s},f=Ct(n,s,!1),p={},$=new Set;return sn(e,{allKeys:!0},(w,S,P,R)=>{if(R===void 0)return;const I=f+S;let y=i[R];typeof w[r]=="string"&&(y=c.call(this,w[r])),h.call(this,w.$anchor),h.call(this,w.$dynamicAnchor),i[S]=y;function c(d){const E=this.opts.uriResolver.resolve;if(d=fe(y?E(y,d):d),$.has(d))throw _(d);$.add(d);let C=this.refs[d];return typeof C=="string"&&(C=this.refs[C]),typeof C=="object"?m(w,C.schema,d):d!==fe(I)&&(d[0]==="#"?(m(w,p[d],d),p[d]=w):this.refs[d]=I),d}function h(d){if(typeof d=="string"){if(!fn.test(d))throw new Error(`invalid anchor "${d}"`);c.call(this,`#${d}`)}}}),p;function m(w,S,P){if(S!==void 0&&!nn(w,S))throw _(P)}function _(w){return new Error(`reference "${w}" resolves to more than one schema`)}}J.getSchemaRefs=dn;Object.defineProperty(ne,"__esModule",{value:!0});ne.getData=ne.KeywordCxt=ne.validateFunctionCode=void 0;const Tt=he,it=Be,Ye=Z,Pe=Be,hn=Re,ye=Y,De=se,b=G,O=ee,mn=J,x=H,pe=ge;function pn(e){if(At(e)&&(Dt(e),jt(e))){$n(e);return}It(e,()=>(0,Tt.topBoolOrEmptySchema)(e))}ne.validateFunctionCode=pn;function It({gen:e,validateName:t,schema:r,schemaEnv:n,opts:s},i){s.code.es5?e.func(t,(0,b._)`${O.default.data}, ${O.default.valCxt}`,n.$async,()=>{e.code((0,b._)`"use strict"; ${ct(r,s)}`),_n(e,s),e.code(i)}):e.func(t,(0,b._)`${O.default.data}, ${yn(s)}`,n.$async,()=>e.code(ct(r,s)).code(i))}function yn(e){return(0,b._)`{${O.default.instancePath}="", ${O.default.parentData}, ${O.default.parentDataProperty}, ${O.default.rootData}=${O.default.data}${e.dynamicRef?(0,b._)`, ${O.default.dynamicAnchors}={}`:b.nil}}={}`}function _n(e,t){e.if(O.default.valCxt,()=>{e.var(O.default.instancePath,(0,b._)`${O.default.valCxt}.${O.default.instancePath}`),e.var(O.default.parentData,(0,b._)`${O.default.valCxt}.${O.default.parentData}`),e.var(O.default.parentDataProperty,(0,b._)`${O.default.valCxt}.${O.default.parentDataProperty}`),e.var(O.default.rootData,(0,b._)`${O.default.valCxt}.${O.default.rootData}`),t.dynamicRef&&e.var(O.default.dynamicAnchors,(0,b._)`${O.default.valCxt}.${O.default.dynamicAnchors}`)},()=>{e.var(O.default.instancePath,(0,b._)`""`),e.var(O.default.parentData,(0,b._)`undefined`),e.var(O.default.parentDataProperty,(0,b._)`undefined`),e.var(O.default.rootData,O.default.data),t.dynamicRef&&e.var(O.default.dynamicAnchors,(0,b._)`{}`)})}function $n(e){const{schema:t,opts:r,gen:n}=e;It(e,()=>{r.$comment&&t.$comment&&Kt(e),Sn(e),n.let(O.default.vErrors,null),n.let(O.default.errors,0),r.unevaluated&&vn(e),Vt(e),Nn(e)})}function vn(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,b._)`${r}.evaluated`),t.if((0,b._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,b._)`${e.evaluated}.props`,(0,b._)`undefined`)),t.if((0,b._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,b._)`${e.evaluated}.items`,(0,b._)`undefined`))}function ct(e,t){const r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,b._)`/*# sourceURL=${r} */`:b.nil}function gn(e,t){if(At(e)&&(Dt(e),jt(e))){wn(e,t);return}(0,Tt.boolOrEmptySchema)(e,t)}function jt({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function At(e){return typeof e.schema!="boolean"}function wn(e,t){const{schema:r,gen:n,opts:s}=e;s.$comment&&r.$comment&&Kt(e),bn(e),Pn(e);const i=n.const("_errs",O.default.errors);Vt(e,i),n.var(t,(0,b._)`${i} === ${O.default.errors}`)}function Dt(e){(0,x.checkUnknownRules)(e),En(e)}function Vt(e,t){if(e.opts.jtd)return ut(e,[],!1,t);const r=(0,it.getSchemaTypes)(e.schema),n=(0,it.coerceAndCheckDataType)(e,r);ut(e,r,!n,t)}function En(e){const{schema:t,errSchemaPath:r,opts:n,self:s}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,x.schemaHasRulesButRef)(t,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function Sn(e){const{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,x.checkStrictMode)(e,"default is ignored in the schema root")}function bn(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,mn.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function Pn(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function Kt({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:s}){const i=r.$comment;if(s.$comment===!0)e.code((0,b._)`${O.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){const f=(0,b.str)`${n}/$comment`,p=e.scopeValue("root",{ref:t.root});e.code((0,b._)`${O.default.self}.opts.$comment(${i}, ${f}, ${p}.schema)`)}}function Nn(e){const{gen:t,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=e;r.$async?t.if((0,b._)`${O.default.errors} === 0`,()=>t.return(O.default.data),()=>t.throw((0,b._)`new ${s}(${O.default.vErrors})`)):(t.assign((0,b._)`${n}.errors`,O.default.vErrors),i.unevaluated&&On(e),t.return((0,b._)`${O.default.errors} === 0`))}function On({gen:e,evaluated:t,props:r,items:n}){r instanceof b.Name&&e.assign((0,b._)`${t}.props`,r),n instanceof b.Name&&e.assign((0,b._)`${t}.items`,n)}function ut(e,t,r,n){const{gen:s,schema:i,data:f,allErrors:p,opts:$,self:m}=e,{RULES:_}=m;if(i.$ref&&($.ignoreKeywordsWithRef||!(0,x.schemaHasRulesButRef)(i,_))){s.block(()=>zt(e,"$ref",_.all.$ref.definition));return}$.jtd||Rn(e,t),s.block(()=>{for(const S of _.rules)w(S);w(_.post)});function w(S){(0,Ye.shouldUseGroup)(i,S)&&(S.type?(s.if((0,Pe.checkDataType)(S.type,f,$.strictNumbers)),lt(e,S),t.length===1&&t[0]===S.type&&r&&(s.else(),(0,Pe.reportTypeError)(e)),s.endIf()):lt(e,S),p||s.if((0,b._)`${O.default.errors} === ${n||0}`))}}function lt(e,t){const{gen:r,schema:n,opts:{useDefaults:s}}=e;s&&(0,hn.assignDefaults)(e,t.type),r.block(()=>{for(const i of t.rules)(0,Ye.shouldUseRule)(n,i)&&zt(e,i.keyword,i.definition,t.type)})}function Rn(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(Cn(e,t),e.opts.allowUnionTypes||kn(e,t),Tn(e,e.dataTypes))}function Cn(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{Ft(e.dataTypes,r)||Ze(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),jn(e,t)}}function kn(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&Ze(e,"use allowUnionTypes to allow union type keyword")}function Tn(e,t){const r=e.self.RULES.all;for(const n in r){const s=r[n];if(typeof s=="object"&&(0,Ye.shouldUseRule)(e.schema,s)){const{type:i}=s.definition;i.length&&!i.some(f=>In(t,f))&&Ze(e,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function In(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function Ft(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function jn(e,t){const r=[];for(const n of e.dataTypes)Ft(t,n)?r.push(n):t.includes("integer")&&n==="number"&&r.push("integer");e.dataTypes=r}function Ze(e,t){const r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,x.checkStrictMode)(e,t,e.opts.strictTypes)}class Mt{constructor(t,r,n){if((0,ye.validateKeywordUsage)(t,r,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,x.schemaRefOrVal)(t,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",Jt(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,ye.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",O.default.errors))}result(t,r,n){this.failResult((0,b.not)(t),r,n)}failResult(t,r,n){this.gen.if(t),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,b.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:r}=this;this.fail((0,b._)`${r} !== undefined && (${(0,b.or)(this.invalid$data(),t)})`)}error(t,r,n){if(r){this.setParams(r),this._error(t,n),this.setParams({});return}this._error(t,n)}_error(t,r){(t?pe.reportExtraError:pe.reportError)(this,this.def.error,r)}$dataError(){(0,pe.reportError)(this,this.def.$dataError||pe.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,pe.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,n=b.nil){this.gen.block(()=>{this.check$data(t,n),r()})}check$data(t=b.nil,r=b.nil){if(!this.$data)return;const{gen:n,schemaCode:s,schemaType:i,def:f}=this;n.if((0,b.or)((0,b._)`${s} === undefined`,r)),t!==b.nil&&n.assign(t,!0),(i.length||f.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),t!==b.nil&&n.assign(t,!1)),n.else()}invalid$data(){const{gen:t,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,b.or)(f(),p());function f(){if(n.length){if(!(r instanceof b.Name))throw new Error("ajv implementation error");const $=Array.isArray(n)?n:[n];return(0,b._)`${(0,Pe.checkDataTypes)($,r,i.opts.strictNumbers,Pe.DataType.Wrong)}`}return b.nil}function p(){if(s.validateSchema){const $=t.scopeValue("validate$data",{ref:s.validateSchema});return(0,b._)`!${$}(${r})`}return b.nil}}subschema(t,r){const n=(0,De.getSubschema)(this.it,t);(0,De.extendSubschemaData)(n,this.it,t),(0,De.extendSubschemaMode)(n,t);const s={...this.it,...n,items:void 0,props:void 0};return gn(s,r),s}mergeEvaluated(t,r){const{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&t.props!==void 0&&(n.props=x.mergeEvaluated.props(s,t.props,n.props,r)),n.items!==!0&&t.items!==void 0&&(n.items=x.mergeEvaluated.items(s,t.items,n.items,r)))}mergeValidEvaluated(t,r){const{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(t,b.Name)),!0}}ne.KeywordCxt=Mt;function zt(e,t,r,n){const s=new Mt(e,r,t);"code"in r?r.code(s,n):s.$data&&r.validate?(0,ye.funcKeywordCode)(s,r):"macro"in r?(0,ye.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,ye.funcKeywordCode)(s,r)}const An=/^\/(?:[^~]|~0|~1)*$/,Dn=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function Jt(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let s,i;if(e==="")return O.default.rootData;if(e[0]==="/"){if(!An.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);s=e,i=O.default.rootData}else{const m=Dn.exec(e);if(!m)throw new Error(`Invalid JSON-pointer: ${e}`);const _=+m[1];if(s=m[2],s==="#"){if(_>=t)throw new Error($("property/index",_));return n[t-_]}if(_>t)throw new Error($("data",_));if(i=r[t-_],!s)return i}let f=i;const p=s.split("/");for(const m of p)m&&(i=(0,b._)`${i}${(0,b.getProperty)((0,x.unescapeJsonPointer)(m))}`,f=(0,b._)`${f} && ${i}`);return f;function $(m,_){return`Cannot access ${m} ${_} levels up, current level is ${t}`}}ne.getData=Jt;var xe={};Object.defineProperty(xe,"__esModule",{value:!0});class Vn extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}xe.default=Vn;var Ut={};Object.defineProperty(Ut,"__esModule",{value:!0});const Ve=J;class Kn extends Error{constructor(t,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,Ve.resolveUrl)(t,r,n),this.missingSchema=(0,Ve.normalizeId)((0,Ve.getFullPath)(t,this.missingRef))}}Ut.default=Kn;var B={};Object.defineProperty(B,"__esModule",{value:!0});B.resolveSchema=B.getCompilingSchema=B.resolveRef=B.compileSchema=B.SchemaEnv=void 0;const L=G,Fn=xe,ae=ee,W=J,ft=H,Mn=ne;class Ce{constructor(t){var r;this.refs={},this.dynamicAnchors={};let n;typeof t.schema=="object"&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,W.normalizeId)(n==null?void 0:n[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=n==null?void 0:n.$async,this.refs={}}}B.SchemaEnv=Ce;function et(e){const t=Gt.call(this,e);if(t)return t;const r=(0,W.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,f=new L.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i});let p;e.$async&&(p=f.scopeValue("Error",{ref:Fn.default,code:(0,L._)`require("ajv/dist/runtime/validation_error").default`}));const $=f.scopeName("validate");e.validateName=$;const m={gen:f,allErrors:this.opts.allErrors,data:ae.default.data,parentData:ae.default.parentData,parentDataProperty:ae.default.parentDataProperty,dataNames:[ae.default.data],dataPathArr:[L.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:f.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,L.stringify)(e.schema)}:{ref:e.schema}),validateName:$,ValidationError:p,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:L.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,L._)`""`,opts:this.opts,self:this};let _;try{this._compilations.add(e),(0,Mn.validateFunctionCode)(m),f.optimize(this.opts.code.optimize);const w=f.toString();_=`${f.scopeRefs(ae.default.scope)}return ${w}`,this.opts.code.process&&(_=this.opts.code.process(_,e));const P=new Function(`${ae.default.self}`,`${ae.default.scope}`,_)(this,this.scope.get());if(this.scope.value($,{ref:P}),P.errors=null,P.schema=e.schema,P.schemaEnv=e,e.$async&&(P.$async=!0),this.opts.code.source===!0&&(P.source={validateName:$,validateCode:w,scopeValues:f._values}),this.opts.unevaluated){const{props:R,items:I}=m;P.evaluated={props:R instanceof L.Name?void 0:R,items:I instanceof L.Name?void 0:I,dynamicProps:R instanceof L.Name,dynamicItems:I instanceof L.Name},P.source&&(P.source.evaluated=(0,L.stringify)(P.evaluated))}return e.validate=P,e}catch(w){throw delete e.validate,delete e.validateName,_&&this.logger.error("Error compiling schema, function code:",_),w}finally{this._compilations.delete(e)}}B.compileSchema=et;function zn(e,t,r){var n;r=(0,W.resolveUrl)(this.opts.uriResolver,t,r);const s=e.refs[r];if(s)return s;let i=Gn.call(this,e,r);if(i===void 0){const f=(n=e.localRefs)===null||n===void 0?void 0:n[r],{schemaId:p}=this.opts;f&&(i=new Ce({schema:f,schemaId:p,root:e,baseId:t}))}if(i!==void 0)return e.refs[r]=Jn.call(this,i)}B.resolveRef=zn;function Jn(e){return(0,W.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:et.call(this,e)}function Gt(e){for(const t of this._compilations)if(Un(t,e))return t}B.getCompilingSchema=Gt;function Un(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function Gn(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||ke.call(this,e,t)}function ke(e,t){const r=this.opts.uriResolver.parse(t),n=(0,W._getFullPath)(this.opts.uriResolver,r);let s=(0,W.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===s)return Ke.call(this,r,e);const i=(0,W.normalizeId)(n),f=this.refs[i]||this.schemas[i];if(typeof f=="string"){const p=ke.call(this,e,f);return typeof(p==null?void 0:p.schema)!="object"?void 0:Ke.call(this,r,p)}if(typeof(f==null?void 0:f.schema)=="object"){if(f.validate||et.call(this,f),i===(0,W.normalizeId)(t)){const{schema:p}=f,{schemaId:$}=this.opts,m=p[$];return m&&(s=(0,W.resolveUrl)(this.opts.uriResolver,s,m)),new Ce({schema:p,schemaId:$,root:e,baseId:s})}return Ke.call(this,r,f)}}B.resolveSchema=ke;const Hn=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function Ke(e,{baseId:t,schema:r,root:n}){var s;if(((s=e.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(const p of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;const $=r[(0,ft.unescapeFragment)(p)];if($===void 0)return;r=$;const m=typeof r=="object"&&r[this.opts.schemaId];!Hn.has(p)&&m&&(t=(0,W.resolveUrl)(this.opts.uriResolver,t,m))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,ft.schemaHasRulesButRef)(r,this.RULES)){const p=(0,W.resolveUrl)(this.opts.uriResolver,t,r.$ref);i=ke.call(this,n,p)}const{schemaId:f}=this.opts;if(i=i||new Ce({schema:r,schemaId:f,root:n,baseId:t}),i.schema!==i.root.schema)return i}var Ht={};Object.defineProperty(Ht,"__esModule",{value:!0});const Lt=Nt;Lt.code='require("ajv/dist/runtime/equal").default';Ht.default=Lt;var Te={};Object.defineProperty(Te,"__esModule",{value:!0});Te.validateAdditionalItems=void 0;const ce=G,Je=H,Ln={message:({params:{len:e}})=>(0,ce.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,ce._)`{limit: ${e}}`},qn={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:Ln,code(e){const{parentSchema:t,it:r}=e,{items:n}=t;if(!Array.isArray(n)){(0,Je.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}qt(e,n)}};function qt(e,t){const{gen:r,schema:n,data:s,keyword:i,it:f}=e;f.items=!0;const p=r.const("len",(0,ce._)`${s}.length`);if(n===!1)e.setParams({len:t.length}),e.pass((0,ce._)`${p} <= ${t.length}`);else if(typeof n=="object"&&!(0,Je.alwaysValidSchema)(f,n)){const m=r.var("valid",(0,ce._)`${p} <= ${t.length}`);r.if((0,ce.not)(m),()=>$(m)),e.ok(m)}function $(m){r.forRange("i",t.length,p,_=>{e.subschema({keyword:i,dataProp:_,dataPropType:Je.Type.Num},m),f.allErrors||r.if((0,ce.not)(m),()=>r.break())})}}Te.validateAdditionalItems=qt;Te.default=qn;var Ie={};Object.defineProperty(Ie,"__esModule",{value:!0});Ie.validateTuple=void 0;const dt=G,be=H,Bn=D,Wn={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return Bt(e,"additionalItems",t);r.items=!0,!(0,be.alwaysValidSchema)(r,t)&&e.ok((0,Bn.validateArray)(e))}};function Bt(e,t,r=e.schema){const{gen:n,parentSchema:s,data:i,keyword:f,it:p}=e;_(s),p.opts.unevaluated&&r.length&&p.items!==!0&&(p.items=be.mergeEvaluated.items(n,r.length,p.items));const $=n.name("valid"),m=n.const("len",(0,dt._)`${i}.length`);r.forEach((w,S)=>{(0,be.alwaysValidSchema)(p,w)||(n.if((0,dt._)`${m} > ${S}`,()=>e.subschema({keyword:f,schemaProp:S,dataProp:S},$)),e.ok($))});function _(w){const{opts:S,errSchemaPath:P}=p,R=r.length,I=R===w.minItems&&(R===w.maxItems||w[t]===!1);if(S.strictTuples&&!I){const y=`"${f}" is ${R}-tuple, but minItems or maxItems/${t} are not specified or different at path "${P}"`;(0,be.checkStrictMode)(p,y,S.strictTuples)}}}Ie.validateTuple=Bt;Ie.default=Wn;var Wt={};Object.defineProperty(Wt,"__esModule",{value:!0});const we=D,q=G,Qn=ee,Ee=H,Xn={message:"must NOT have additional properties",params:({params:e})=>(0,q._)`{additionalProperty: ${e.additionalProperty}}`},Yn={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:Xn,code(e){const{gen:t,schema:r,parentSchema:n,data:s,errsCount:i,it:f}=e;if(!i)throw new Error("ajv implementation error");const{allErrors:p,opts:$}=f;if(f.props=!0,$.removeAdditional!=="all"&&(0,Ee.alwaysValidSchema)(f,r))return;const m=(0,we.allSchemaProperties)(n.properties),_=(0,we.allSchemaProperties)(n.patternProperties);w(),e.ok((0,q._)`${i} === ${Qn.default.errors}`);function w(){t.forIn("key",s,y=>{!m.length&&!_.length?R(y):t.if(S(y),()=>R(y))})}function S(y){let c;if(m.length>8){const h=(0,Ee.schemaRefOrVal)(f,n.properties,"properties");c=(0,we.isOwnProperty)(t,h,y)}else m.length?c=(0,q.or)(...m.map(h=>(0,q._)`${y} === ${h}`)):c=q.nil;return _.length&&(c=(0,q.or)(c,..._.map(h=>(0,q._)`${(0,we.usePattern)(e,h)}.test(${y})`))),(0,q.not)(c)}function P(y){t.code((0,q._)`delete ${s}[${y}]`)}function R(y){if($.removeAdditional==="all"||$.removeAdditional&&r===!1){P(y);return}if(r===!1){e.setParams({additionalProperty:y}),e.error(),p||t.break();return}if(typeof r=="object"&&!(0,Ee.alwaysValidSchema)(f,r)){const c=t.name("valid");$.removeAdditional==="failing"?(I(y,c,!1),t.if((0,q.not)(c),()=>{e.reset(),P(y)})):(I(y,c),p||t.if((0,q.not)(c),()=>t.break()))}}function I(y,c,h){const d={keyword:"additionalProperties",dataProp:y,dataPropType:Ee.Type.Str};h===!1&&Object.assign(d,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(d,c)}}};Wt.default=Yn;export{Oe as A,Ne as B,os as C,Zn as D,es as E,xn as F,ts as G,rs as H,is as J,st as a,qe as b,Ae as c,G as d,yt as e,xe as f,de as g,me as h,as as i,B as j,J as k,Be as l,D as m,ee as n,Ht as o,_r as p,Ie as q,Ut as r,ns as s,Te as t,H as u,ne as v,Wt as w,ve as x,ss as y,_t as z};
