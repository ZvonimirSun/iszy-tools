import{d as D,r as F,H as h,O as w,o as x,c as A,w as v,a as B,k as b,$ as o,bh as S,bi as I,M as n,b as E,_ as T}from"./index.ae07ae9c.js";import{S as U}from"./index.9d64e12e.js";import{U as k}from"./index.f529f3f1.js";import"./index.4f773309.js";import{u as M}from"./index.8f71a705.js";import{u as C}from"./imgHosting.de65dfc6.js";import"./Form.2526de11.js";import"./Col.e66b75c0.js";import"./responsiveObserve.ee522443.js";import"./useFlexGapSupport.2c8ccc1e.js";import"./toArray.88a764c0.js";import"./get.c61b3778.js";import"./_baseGet.2820b254.js";import"./toString.91d5579e.js";import"./_arrayMap.dc1f124f.js";import"./_flatRest.6a791d79.js";import"./toInteger.64c43e44.js";import"./toFinite.c10c9a20.js";import"./_arrayIncludesWith.40afec22.js";import"./collapseMotion.8c55a50b.js";import"./EyeOutlined.90806b6b.js";import"./index.1cd5bf43.js";import"./useRefs.f6d03394.js";import"./v4.0e237c76.js";const m=u=>(S("data-v-f36240fe"),u=u(),I(),u),j=m(()=>n("p",{class:"ant-upload-drag-icon"},[n("span",{class:"i-icon-park-upload-one"})],-1)),H=m(()=>n("p",{class:"ant-upload-text"},[E(" \u76F4\u63A5\u7C98\u8D34\u56FE\u7247\u6216\u62D6\u62FD\u56FE\u7247\u5230\u8FD9\u91CC\u4E0A\u4F20"),n("br"),E("\u6216\u8005\u76F4\u63A5\u70B9\u51FB\u9009\u62E9\u6587\u4EF6\u4E0A\u4F20 ")],-1)),L=m(()=>n("p",{class:"ant-upload-hint"}," \u6682\u65F6\u4EC5\u652F\u6301\u5355\u6587\u4EF6\u4E0A\u4F20\u3002 ",-1)),N=D({__name:"upload",props:{activeKey:{type:String,default:""}},setup(u){const y=u,p=F(!1),a=F(),l=C(),d=l.config,r=l.uploader,c=l.commonConfig;h(()=>{document.addEventListener("paste",g)}),w(()=>{document.removeEventListener("paste",g)});async function f({file:s}={}){let t=s;if(p.value=!0,r&&d(r)){if(c.renameTimeStamp){const e=t.name||"";t=new File([t],(new Date().getTime()+e.substring(e.lastIndexOf("."))).toLowerCase(),{type:t.type,lastModified:t.lastModified})}try{const e=await M[r].handle(d(r),t);if(C().addImage(e),c.copyUrlAfterUpload)try{c.customCopyContent?await navigator.clipboard.writeText(c.customCopyContent.replace(/\$url/g,e.url)):await navigator.clipboard.writeText(e.url),o.success("\u4E0A\u4F20\u6210\u529F\uFF0C\u5730\u5740\u5DF2\u590D\u5236\u5230\u526A\u8D34\u677F")}catch{o.error("\u4E0A\u4F20\u6210\u529F\uFF0C\u4F46\u5730\u5740\u590D\u5236\u5931\u8D25")}else o.success("\u4E0A\u4F20\u6210\u529F")}catch(e){console.log(e),o.error("\u4E0A\u4F20\u5931\u8D25")}}else o.warn("\u8BF7\u5148\u8FDB\u884C\u8BBE\u7F6E");p.value=!1}function _(){o.warning("\u4E0D\u652F\u6301\u7684\u6587\u4EF6\u7C7B\u578B\uFF01")}function g(s){if(y.activeKey==="home"&&!p.value&&!a.value){a.value=setTimeout(()=>{a.value=void 0},500);const t=s.clipboardData&&s.clipboardData.items;let e;if(t&&t.length)for(const i of t)i.type.indexOf("image")!==-1&&(e=i.getAsFile());e?f({file:e}):(_(),clearTimeout(a.value),a.value=void 0)}}return(s,t)=>{const e=k,i=U;return x(),A(i,{spinning:b(p)},{default:v(()=>[B(e,{"file-list":[],accept:"image/bmp,image/gif,image/jpeg,image/png,image/webp","show-upload-list":!1,"custom-request":f,onReject:_},{default:v(()=>[j,H,L]),_:1})]),_:1},8,["spinning"])}}});const re=T(N,[["__scopeId","data-v-f36240fe"]]);export{re as default};
