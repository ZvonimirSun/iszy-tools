import{F as I,h as B,u as D,de as M,G as R,k as F,o as f,l as h,a as e,w as t,b as o,n as l,m as _,t as V,c as j,H as y,s as v,A as g,E as J,J as P,K as q,_ as A}from"./index-d6c1c1ad.js";import{E as G}from"./el-space-93fff873.js";import{E as H}from"./el-checkbox-e9b2c3e6.js";import{E as K}from"./el-popover-962c6a03.js";import"./el-popper-c04afbe2.js";import{E as z}from"./el-divider-dde66e50.js";import"./index-c421e38d.js";import{_ as L}from"./Title-d3c11472.js";import"./isEqual-ffe50a41.js";import"./ResizeObserver.es-0f9f8adb.js";const Q=I("main",{persist:!0,state:()=>({_cache:{},clearOfflineCacheTag:!1}),getters:{getData:d=>i=>{if(i)return(d._cache||{})[i]}},actions:{setData({key:d,val:i}={}){d&&(this._cache=this._cache||{},this._cache[d]=i)},clear(){this._cache={}},clearOfflineCache(){console.log("clearOfflineCache"),this.clearOfflineCacheTag=!0}}}),w=d=>(P("data-v-83343c34"),d=d(),q(),d),W={key:0,flex:"","flex-col":"","text-7":"","gap-4":"","items-start":""},X={flex:""},Y=w(()=>_("div",{"w-25":"","font-bold":""}," 昵称: ",-1)),Z={flex:""},$=w(()=>_("div",{"w-25":"","font-bold":""}," 邮箱: ",-1)),ee=B({__name:"settings",setup(d){const i=D(),C=M(),u=R(),n=F(()=>u.settings),S=()=>Q().clearOfflineCache(),k=()=>u.uploadSettings(),x=()=>u.downloadSettings();async function E(){await k()?g.success("同步成功"):g.error("同步失败")}async function b(){await x()?g.success("同步成功"):g.error("同步失败")}function N(){i.push({path:"/login",query:{redirect:C.fullPath}})}function T(){i.push("/logout")}return(te,a)=>{const r=L,p=J,U=z,O=K,c=H,m=G;return f(),h(y,null,[e(r,{level:3},{default:t(()=>[o(" 账户信息 ")]),_:1}),l(u)._user.token?(f(),h("div",W,[_("div",X,[Y,_("div",null,V(l(u)._user.profile.nickName),1)]),_("div",Z,[$,_("div",null,V(l(u)._user.profile.email),1)]),e(p,{type:"primary",onClick:T},{default:t(()=>[o(" 登出 ")]),_:1})])):(f(),j(p,{key:1,type:"primary",onClick:N},{default:t(()=>[o(" 登录 ")]),_:1})),e(U),e(r,{level:3},{default:t(()=>[o(" 网站设置 ")]),_:1}),e(O,{title:"您是否确定要清空本地缓存？","confirm-button-text":"清空",onConfirm:S},{reference:t(()=>[e(p,{type:"danger",plain:""},{default:t(()=>[o(" 清空本地缓存 ")]),_:1})]),_:1}),l(u)._user.token?(f(),h(y,{key:2},[e(r,{level:4},{default:t(()=>[o(" 设置云端同步 ")]),_:1}),e(m,null,{default:t(()=>[e(p,{type:"primary",onClick:E},{default:t(()=>[o(" 同步到云端 ")]),_:1}),e(p,{type:"primary",onClick:b},{default:t(()=>[o(" 从云端同步 ")]),_:1}),e(c,{modelValue:l(n).autoSync,"onUpdate:modelValue":a[0]||(a[0]=s=>l(n).autoSync=s)},{default:t(()=>[o(" 自动同步 ")]),_:1},8,["modelValue"])]),_:1})],64)):v("",!0),e(r,{level:4},{default:t(()=>[o(" 全局设置 ")]),_:1}),e(r,{level:5},{default:t(()=>[o(" 访问统计 ")]),_:1}),e(m,null,{default:t(()=>[e(c,{modelValue:l(n).showMost,"onUpdate:modelValue":a[1]||(a[1]=s=>l(n).showMost=s)},{default:t(()=>[o(" 最常访问 ")]),_:1},8,["modelValue"]),e(c,{modelValue:l(n).showRecent,"onUpdate:modelValue":a[2]||(a[2]=s=>l(n).showRecent=s)},{default:t(()=>[o(" 最近访问 ")]),_:1},8,["modelValue"])]),_:1}),e(r,{level:5},{default:t(()=>[o(" 其他设置 ")]),_:1}),e(m,null,{default:t(()=>[e(c,{modelValue:l(n).showSearch,"onUpdate:modelValue":a[3]||(a[3]=s=>l(n).showSearch=s)},{default:t(()=>[o(" 显示搜索 ")]),_:1},8,["modelValue"]),e(c,{modelValue:l(n).showType,"onUpdate:modelValue":a[4]||(a[4]=s=>l(n).showType=s)},{default:t(()=>[o(" 显示分类 ")]),_:1},8,["modelValue"]),e(c,{modelValue:l(n).openInNewTab,"onUpdate:modelValue":a[5]||(a[5]=s=>l(n).openInNewTab=s)},{default:t(()=>[o(" 新标签页打开工具 ")]),_:1},8,["modelValue"])]),_:1}),l(u)._user.token?(f(),h(y,{key:3},[e(r,{level:4},{default:t(()=>[o(" 应用设置 ")]),_:1}),e(r,{level:5},{default:t(()=>[o(" JSON 编辑器 ")]),_:1}),e(m,null,{default:t(()=>[e(c,{modelValue:l(u).modules.jsonEditor.syncCloud,"onUpdate:modelValue":a[6]||(a[6]=s=>l(u).modules.jsonEditor.syncCloud=s)},{default:t(()=>[o(" 从云端获取 ")]),_:1},8,["modelValue"])]),_:1})],64)):v("",!0)],64)}}});const _e=A(ee,[["__scopeId","data-v-83343c34"]]);export{_e as default};
