import{F as K,t as i,o as O,aV as B,w as X,bs as j,K as _,X as e,a1 as a,ap as U,u as r,ax as k,T as w,J as c,ar as m,av as q,a0 as E,a3 as F,a$ as I,az as Q,as as W,aC as Y}from"./index-2G9LXyMG.js";import{E as Z,a as ee}from"./el-tab-pane-tiJXKL_-.js";import{a as oe,E as ae}from"./el-form-item-h8Wr1SYk.js";import{E as le}from"./el-divider-IulspnH9.js";import{E as te,a as ne}from"./el-radio-group-ee-7bP44.js";/* empty css                 */import{b as ue,h as se}from"./Router-Isf4x3kO.js";import{E as re}from"./el-switch-AOSvMgBo.js";import{u as N}from"./index-J6KlfRLH.js";import{u as h}from"./imgHosting-OhOV75ly.js";import"./strings-dEV00HOF.js";import"./castArray-hc2dqAj8.js";const de={class:"commonConfigPanel"},ce={key:0,class:"configPanel"},me={class:"configTable"},pe={class:"configOperator"},ie=K({__name:"settings",setup(_e){const T=h(),l=T.commonConfig,R=T.config,A={renameBeforeUpload:!1,renameTimeStamp:!0,copyUrlAfterUpload:!0,customCopyContent:"$url"},d=i("standard"),p=i("$url"),s=i("aliyun"),f=i([]);O(()=>{const u=h().uploader;switch(u!=null&&(s.value=u),B(l,B({},A,l)),l.customCopyContent){case"$url":d.value="standard";break;case"![]($url)":d.value="markdown";break;default:d.value="custom",p.value=l.customCopyContent}x()});function D(u){switch(u){case"standard":l.customCopyContent="$url";break;case"markdown":l.customCopyContent="![]($url)";break;case"custom":l.customCopyContent=p.value;break}}X(p,u=>{d.value==="custom"&&(l.customCopyContent=u)});function x(){s.value==="aliyun"&&(f.value=j(N[s.value].config(R(s.value))))}function M(){const u={};for(const o of f.value){if(o.required&&(o.default==null||o.default==="")){I.warning("必填项未填写完整");return}u[o.name]=o.default}h().saveConfig({uploader:s.value,config:u}),I.success("保存成功")}return(u,o)=>{const C=ue,$=re,g=oe,S=se,y=ne,v=Q,P=te,H=le,L=ae,z=W,G=ee,J=Z;return c(),_(w,null,[e(C,{level:4},{default:a(()=>[m(" 通用配置 ")]),_:1}),U("div",de,[e(g,{label:"时间戳重命名"},{default:a(()=>[e($,{modelValue:r(l).renameTimeStamp,"onUpdate:modelValue":o[0]||(o[0]=t=>r(l).renameTimeStamp=t)},null,8,["modelValue"])]),_:1}),e(g,{label:"上传后自动复制URL"},{default:a(()=>[e($,{modelValue:r(l).copyUrlAfterUpload,"onUpdate:modelValue":o[1]||(o[1]=t=>r(l).copyUrlAfterUpload=t)},null,8,["modelValue"])]),_:1}),e(C,{level:5},{default:a(()=>[m(" 链接复制格式 ")]),_:1}),e(P,{modelValue:r(d),"onUpdate:modelValue":o[3]||(o[3]=t=>k(d)?d.value=t:null),class:"custom-copy-wrapper",onChange:D},{default:a(()=>[e(y,{label:"standard"},{default:a(()=>[m(" 标准 "),e(S,{code:"",content:"$url"})]),_:1}),e(y,{label:"markdown"},{default:a(()=>[m(" MarkDown "),e(S,{code:"",content:"![]($url)"})]),_:1}),e(y,{label:"custom"},{default:a(()=>[m(" 自定义 "),e(v,{modelValue:r(p),"onUpdate:modelValue":o[2]||(o[2]=t=>k(p)?p.value=t:null),style:{width:"100px","margin-left":"10px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),e(H),e(C,{level:4},{default:a(()=>[m(" 图床设置 ")]),_:1}),e(J,{modelValue:r(s),"onUpdate:modelValue":o[4]||(o[4]=t=>k(s)?s.value=t:null),type:"card",onTabChange:x},{default:a(()=>[(c(),_(w,null,q(N,(t,V)=>e(G,{key:V,name:V,label:t.name},{default:a(()=>[r(s)===V?(c(),_("div",ce,[U("div",me,[e(L,{"label-position":"top"},{default:a(()=>[(c(!0),_(w,null,q(r(f),n=>(c(),E(g,{key:n.name,label:n.label,required:n.required},{default:a(()=>[n.type==="input"?(c(),E(v,{key:0,modelValue:n.default,"onUpdate:modelValue":b=>n.default=b,"allow-clear":"",placeholder:n.hint},null,8,["modelValue","onUpdate:modelValue","placeholder"])):n.type==="password"?(c(),E(v,{key:1,modelValue:n.default,"onUpdate:modelValue":b=>n.default=b,type:"password","allow-clear":"",placeholder:n.hint},null,8,["modelValue","onUpdate:modelValue","placeholder"])):F("",!0)]),_:2},1032,["label","required"]))),128))]),_:2},1024)]),U("div",pe,[e(z,{type:"primary",onClick:M},{default:a(()=>[m(" 保存 ")]),_:1})])])):F("",!0)]),_:2},1032,["name","label"])),64))]),_:1},8,["modelValue"])],64)}}}),Te=Y(ie,[["__scopeId","data-v-70f2c4ba"]]);export{Te as default};
