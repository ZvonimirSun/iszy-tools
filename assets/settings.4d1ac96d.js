import{_ as H,S as I,cb as V,a0 as k,aM as K,o as s,L as _,a as t,w as a,M as i,F as f,N as L,b as u,cc as g,T as b,c as p,a1 as $,cd as M,I as R,B as D}from"./index.1467a21b.js";import{T as P,_ as z}from"./index.20b10b9d.js";/* empty css              *//* empty css               */import{_ as E}from"./index.90dd6d13.js";import{_ as G}from"./index.11edb692.js";import{R as O}from"./index.632856de.js";import{_ as j}from"./index.a50cb93d.js";import{u as w}from"./index.3fec22d5.js";import"./index.64a3a205.js";import{_ as J}from"./Password.69e93bee.js";import"./index.0dbda9cb.js";import{_ as Q,F as W}from"./Form.6fe69b90.js";import"./index.de812037.js";import"./Menu.e89d2cce.js";import"./shallowequal.ee64c49e.js";import"./_arrayIncludesWith.15e56e3a.js";import"./Overflow.72056a43.js";import"./collapseMotion.e05c3cc9.js";import"./useState.37f031eb.js";import"./useRefs.2835f711.js";import"./hasIn.6a514662.js";import"./isMobile.481c1aec.js";import"./useFlexGapSupport.492ea448.js";import"./Checkbox.92b2081b.js";import"./EyeOutlined.e161d9e4.js";import"./SearchOutlined.2b2c9b2c.js";import"./Col.c37abaa5.js";import"./responsiveObserve.de63f7f4.js";import"./toArray.bad0c157.js";import"./get.8ddc54f7.js";import"./toInteger.c9d8dd81.js";import"./toFinite.2dc4e127.js";const{mapGetters:X,mapActions:Y}=I("imgHosting"),Z={name:"ImgHostingSettings",data:()=>({uploaders:w,currentUploader:"aliyun",currentConfig:[],currentCommonConfig:{renameBeforeUpload:!1,renameTimeStamp:!0,copyUrlAfterUpload:!0,customCopyContent:"$url"},radioStyle:{display:"flex",height:"32px",lineHeight:"32px"},customContent:"$url"}),computed:{...X(["config","uploader","commonConfig"])},mounted(){this.uploader&&(this.currentUploader=this.uploader),this.changeUploader(),this.currentCommonConfig=V(this.currentCommonConfig,k(this.commonConfig||{})),this.currentCommonConfig.customCopyContent!=="$url"&&this.currentCommonConfig.customCopyContent!=="![]($url)"&&(this.customContent=this.currentCommonConfig.customCopyContent)},methods:{...Y(["saveConfig","saveCommonConfig","importConfig"]),changeUploader(){this.currentConfig=k(w[this.currentUploader].config(this.config(this.currentUploader)))},save(){const e={};for(const o of this.currentConfig){if(o.required&&(o.default==null||o.default==="")){this.$msg.warn("\u5FC5\u586B\u9879\u672A\u586B\u5199\u5B8C\u6574");return}e[o.name]=o.default}this.saveConfig({uploader:this.currentUploader,config:e}),this.$msg.success("\u4FDD\u5B58\u6210\u529F")},handler(){this.$refs.file.click()},updateConfig:K(function(){this.saveCommonConfig(this.currentCommonConfig)},100),updateCustomCopyContent(e){this.currentCommonConfig.customCopyContent=e,this.updateConfig()}}},x={class:"commonConfigPanel"},ee={class:"configPanel"},oe={class:"configTable"},te={class:"configOperator"};function ne(e,o,ae,re,le,l){const m=L,h=j,c=Q,y=M,d=O,v=R,S=G,T=E,B=J,N=W,q=D,A=z,F=P;return s(),_(f,null,[t(m,{level:4},{default:a(()=>[u(" \u901A\u7528\u914D\u7F6E ")]),_:1}),i("div",x,[t(c,{label:"\u65F6\u95F4\u6233\u91CD\u547D\u540D"},{default:a(()=>[t(h,{checked:e.currentCommonConfig.renameTimeStamp,"onUpdate:checked":o[0]||(o[0]=n=>e.currentCommonConfig.renameTimeStamp=n),onChange:l.updateConfig},null,8,["checked","onChange"])]),_:1}),t(c,{label:"\u4E0A\u4F20\u540E\u81EA\u52A8\u590D\u5236URL"},{default:a(()=>[t(h,{checked:e.currentCommonConfig.copyUrlAfterUpload,"onUpdate:checked":o[1]||(o[1]=n=>e.currentCommonConfig.copyUrlAfterUpload=n),onChange:l.updateConfig},null,8,["checked","onChange"])]),_:1}),t(m,{level:5},{default:a(()=>[u(" \u94FE\u63A5\u590D\u5236\u683C\u5F0F ")]),_:1}),t(S,null,{default:a(()=>[t(d,{style:g(e.radioStyle),checked:e.currentCommonConfig.customCopyContent==="$url",onChange:o[2]||(o[2]=n=>l.updateCustomCopyContent("$url"))},{default:a(()=>[u(" \u6807\u51C6"),t(y,{code:"",content:"$url"})]),_:1},8,["style","checked"]),t(d,{style:g(e.radioStyle),checked:e.currentCommonConfig.customCopyContent==="![]($url)",onChange:o[3]||(o[3]=n=>l.updateCustomCopyContent("![]($url)"))},{default:a(()=>[u(" MarkDown"),t(y,{code:"",content:"![]($url)"})]),_:1},8,["style","checked"]),t(d,{style:g(e.radioStyle),checked:e.currentCommonConfig.customCopyContent===e.customContent,onChange:o[6]||(o[6]=n=>l.updateCustomCopyContent(e.customContent))},{default:a(()=>[u(" \u81EA\u5B9A\u4E49"),t(v,{value:e.customContent,"onUpdate:value":o[4]||(o[4]=n=>e.customContent=n),style:{width:"100px","margin-left":"10px"},onChange:o[5]||(o[5]=n=>l.updateCustomCopyContent(n.target.value))},null,8,["value"])]),_:1},8,["style","checked"])]),_:1})]),t(T),t(m,{level:4},{default:a(()=>[u(" \u56FE\u5E8A\u8BBE\u7F6E ")]),_:1}),t(F,{activeKey:e.currentUploader,"onUpdate:activeKey":o[7]||(o[7]=n=>e.currentUploader=n),type:"card",onChange:l.changeUploader},{default:a(()=>[(s(!0),_(f,null,b(e.uploaders,(n,U)=>(s(),p(A,{key:U,tab:n.name},{default:a(()=>[i("div",ee,[i("div",oe,[e.currentUploader===U?(s(),p(N,{key:0,layout:"vertical"},{default:a(()=>[(s(!0),_(f,null,b(e.currentConfig,r=>(s(),p(c,{key:r.name,label:r.label,required:r.required},{default:a(()=>[r.type==="input"?(s(),p(v,{key:0,value:r.default,"onUpdate:value":C=>r.default=C,"allow-clear":"",placeholder:r.hint},null,8,["value","onUpdate:value","placeholder"])):r.type==="password"?(s(),p(B,{key:1,value:r.default,"onUpdate:value":C=>r.default=C,"allow-clear":"",placeholder:r.hint},null,8,["value","onUpdate:value","placeholder"])):$("",!0)]),_:2},1032,["label","required"]))),128))]),_:2},1024)):$("",!0)]),i("div",te,[t(q,{type:"primary",onClick:l.save},{default:a(()=>[u(" \u4FDD\u5B58 ")]),_:1},8,["onClick"])])])]),_:2},1032,["tab"]))),128))]),_:1},8,["activeKey","onChange"])],64)}const De=H(Z,[["render",ne],["__scopeId","data-v-ea531f52"]]);export{De as default};
