import{r as l}from"../../common-jZmGe4Rr.js";const h=l.TileLayer.extend({initialize:function(t,s={}){const a=this.providers,n=t.split("."),o=n[0],e=n[1],r=n[2],c=a[o][e][r];s.subdomains=a[o].Subdomains,"tms"in a[o]&&(s.tms=a[o].tms),l.TileLayer.prototype.initialize.call(this,c,s)}});function T(t,s={}){return s.csysType=a(t),new h(t,s);function a(n){const e=n.split(".")[0];let r="wgs84";switch(e){case"Geoq":case"GaoDe":case"Google":r="gcj02";break;case"Baidu":r="bd09";break;case"OSM":case"TianDiTu":r="wgs84";break}return r}}const i=Math.PI,m=6378245,p=.006693421622965943,g=i*3e3/180;h.include({providers:{TianDiTu:{Normal:{Map:"//t{s}.tianditu.gov.cn/DataServer?T=vec_w&X={x}&Y={y}&L={z}&tk={key}",Annotation:"//t{s}.tianditu.gov.cn/DataServer?T=cva_w&X={x}&Y={y}&L={z}&tk={key}"},Satellite:{Map:"//t{s}.tianditu.gov.cn/DataServer?T=img_w&X={x}&Y={y}&L={z}&tk={key}",Annotation:"//t{s}.tianditu.gov.cn/DataServer?T=cia_w&X={x}&Y={y}&L={z}&tk={key}"},Terrain:{Map:"//t{s}.tianditu.gov.cn/DataServer?T=ter_w&X={x}&Y={y}&L={z}&tk={key}",Annotation:"//t{s}.tianditu.gov.cn/DataServer?T=cta_w&X={x}&Y={y}&L={z}&tk={key}"},Subdomains:["0","1","2","3","4","5","6","7"],key:""},GaoDe:{Normal:{Map:"//webrd0{s}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=8&x={x}&y={y}&z={z}"},Satellite:{Map:"//webst0{s}.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}",Annotation:"//webst0{s}.is.autonavi.com/appmaptile?style=8&x={x}&y={y}&z={z}"},Subdomains:["1","2","3","4"]},Google:{Normal:{Map:"//www.google.com/maps/vt?lyrs=m@189&gl=cn&x={x}&y={y}&z={z}"},Satellite:{Map:"//www.google.com/maps/vt?lyrs=s@189&gl=cn&x={x}&y={y}&z={z}",Annotation:"//www.google.com/maps/vt?lyrs=y@189&gl=cn&x={x}&y={y}&z={z}"},Subdomains:[]},Geoq:{Normal:{Map:"//map.geoq.cn/ArcGIS/rest/services/ChinaOnlineCommunity/MapServer/tile/{z}/{y}/{x}",PurplishBlue:"//map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetPurplishBlue/MapServer/tile/{z}/{y}/{x}",Gray:"//map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetGray/MapServer/tile/{z}/{y}/{x}",Warm:"//map.geoq.cn/ArcGIS/rest/services/ChinaOnlineStreetWarm/MapServer/tile/{z}/{y}/{x}"},Theme:{Hydro:"//thematic.geoq.cn/arcgis/rest/services/ThematicMaps/WorldHydroMap/MapServer/tile/{z}/{y}/{x}"},Subdomains:[]},OSM:{Normal:{Map:"//{s}.tile.osm.org/{z}/{x}/{y}.png"},Subdomains:["a","b","c"]},Baidu:{Normal:{Map:"//online{s}.map.bdimg.com/onlinelabel/?qt=tile&x={x}&y={y}&z={z}&styles=pl&scaler=1&p=1"},Satellite:{Map:"//shangetu{s}.map.bdimg.com/it/u=x={x};y={y};z={z};v=009;type=sate&fm=46",Annotation:"//online{s}.map.bdimg.com/tile/?qt=tile&x={x}&y={y}&z={z}&styles=sl&v=020"},Subdomains:"0123456789",tms:!0}},csysConvert:{bd09_To_gps84:function(t,s){const a=this.bd09_To_gcj02(t,s);return this.gcj02_To_gps84(a.lng,a.lat)},gps84_To_bd09:function(t,s){const a=this.gps84_To_gcj02(t,s);return this.gcj02_To_bd09(a.lng,a.lat)},gps84_To_gcj02:function(t,s){let a=y(t-105,s-35),n=u(t-105,s-35);const o=s/180*i;let e=Math.sin(o);e=1-p*e*e;const r=Math.sqrt(e);a=a*180/(m*(1-p)/(e*r)*i),n=n*180/(m/r*Math.cos(o)*i);const c=s+a;return{lng:t+n,lat:c}},gcj02_To_gps84:function(t,s){const a=M(t,s),n=t*2-a.lng,o=s*2-a.lat;return{lng:n,lat:o}},gcj02_To_bd09:function(t,s){const a=Math.sqrt(t*t+s*s)+2e-5*Math.sin(s*g),n=Math.atan2(s,t)+3e-6*Math.cos(t*g),o=a*Math.cos(n)+.0065,e=a*Math.sin(n)+.006;return{lng:o,lat:e}},bd09_To_gcj02:function(t,s){const a=t-.0065,n=s-.006,o=Math.sqrt(a*a+n*n)-2e-5*Math.sin(n*g),e=Math.atan2(n,a)-3e-6*Math.cos(a*g),r=o*Math.cos(e),c=o*Math.sin(e);return{lng:r,lat:c}}},_setZoomTransform:function(t,s,a){let n=s;n!=null&&this.options&&(this.options.csysType==="gcj02"?n=this.csysConvert.gps84_To_gcj02(s.lng,s.lat):this.options.csysType==="bd09"&&(n=this.csysConvert.gps84_To_bd09(s.lng,s.lat)));const o=this._map.getZoomScale(a,t.zoom),e=t.origin.multiplyBy(o).subtract(this._map._getNewPixelOrigin(n,a)).round();l.Browser.any3d?l.DomUtil.setTransform(t.el,e,o):l.DomUtil.setPosition(t.el,e)},_getTiledPixelBounds:function(t){let s=t;s!=null&&this.options&&(this.options.csysType==="gcj02"?s=this.csysConvert.gps84_To_gcj02(t.lng,t.lat):this.options.csysType==="bd09"&&(s=this.csysConvert.gps84_To_bd09(t.lng,t.lat)));const a=this._map,n=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),o=a.getZoomScale(n,this._tileZoom),e=a.project(s,this._tileZoom).floor(),r=a.getSize().divideBy(o*2);return new l.Bounds(e.subtract(r),e.add(r))}});function M(t,s){let a=y(t-105,s-35),n=u(t-105,s-35);const o=s/180*i;let e=Math.sin(o);e=1-p*e*e;const r=Math.sqrt(e);a=a*180/(m*(1-p)/(e*r)*i),n=n*180/(m/r*Math.cos(o)*i);const c=s+a;return{lng:t+n,lat:c}}function y(t,s){let a=-100+2*t+3*s+.2*s*s+.1*t*s+.2*Math.sqrt(Math.abs(t));return a+=(20*Math.sin(6*t*i)+20*Math.sin(2*t*i))*2/3,a+=(20*Math.sin(s*i)+40*Math.sin(s/3*i))*2/3,a+=(160*Math.sin(s/12*i)+320*Math.sin(s*i/30))*2/3,a}function u(t,s){let a=300+t+2*s+.1*t*t+.1*t*s+.1*Math.sqrt(Math.abs(t));return a+=(20*Math.sin(6*t*i)+20*Math.sin(2*t*i))*2/3,a+=(20*Math.sin(t*i)+40*Math.sin(t/3*i))*2/3,a+=(150*Math.sin(t/12*i)+300*Math.sin(t/30*i))*2/3,a}export{h as C,T as c};
