var B={startsWith:function(i,t){return i.indexOf(t)==0},contains:function(i,t){return i.indexOf(t)!=-1},trim:function(i){return i.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(i){for(var t=i.split("-"),e=t[0],r=1,n=t.length;r<n;r++){var s=t[r];e+=s.charAt(0).toUpperCase()+s.substring(1)}return e},format:function(i,t,e){t||(t=window);var r=function(n,s){for(var l,o=s.split(/\.+/),h=0;h<o.length;h++)h==0&&(l=t),l=l[o[h]];return typeof l=="function"&&(l=e?l.apply(null,e):l()),typeof l>"u"?"undefined":l};return i.replace(B.tokenRegEx,r)},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(i){return B.numberRegEx.test(i)},numericIf:function(i){return B.isNumeric(i)?parseFloat(i):i}},U={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(i,t){var e=0;return t>0&&(e=parseFloat(i.toPrecision(t))),e},format:function(i,t,e,r){t=typeof t<"u"?t:0,e=typeof e<"u"?e:U.thousandsSeparator,r=typeof r<"u"?r:U.decimalSeparator,t!=null&&(i=parseFloat(i.toFixed(t)));var n=i.toString().split(".");n.length===1&&t==null&&(t=0);var s=n[0];if(e)for(var l=/(-?[0-9]+)([0-9]{3})/;l.test(s);)s=s.replace(l,"$1"+e+"$2");var o;if(t==0)o=s;else{var h=n.length>1?n[1]:"0";t!=null&&(h=h+new Array(t-h.length+1).join("0")),o=s+r+h}return o}};Number.prototype.limitSigDigs||(Number.prototype.limitSigDigs=function(i){return U.limitSigDigs(this,i)});class q{constructor(){this.CLASS_NAME="SuperMap.Geometry",this.id=v.createUniqueID(this.CLASS_NAME+"_"),this.parent=null,this.bounds=null,this.SRID=null}destroy(){this.id=null,this.bounds=null,this.SRID=null}clone(){return new q}setBounds(t){t&&(this.bounds=t.clone())}clearBounds(){this.bounds=null,this.parent&&this.parent.clearBounds()}extendBounds(t){var e=this.getBounds();e?this.bounds.extend(t):this.setBounds(t)}getBounds(){return this.bounds==null&&this.calculateBounds(),this.bounds}calculateBounds(){}getVertices(t){}getArea(){return 0}}const Z=function(){var i="",t="",e="pc",r,n=navigator.userAgent.toLowerCase();return n.indexOf("msie")>-1||n.indexOf("trident")>-1&&n.indexOf("rv")>-1?(i="msie",r=n.match(/msie ([\d.]+)/)||n.match(/rv:([\d.]+)/)):n.indexOf("chrome")>-1?(i="chrome",r=n.match(/chrome\/([\d.]+)/)):n.indexOf("firefox")>-1?(i="firefox",r=n.match(/firefox\/([\d.]+)/)):n.indexOf("opera")>-1?(i="opera",r=n.match(/version\/([\d.]+)/)):n.indexOf("safari")>-1&&(i="safari",r=n.match(/version\/([\d.]+)/)),t=r?r[1]:"",n.indexOf("ipad")>-1||n.indexOf("ipod")>-1||n.indexOf("iphone")>-1?e="apple":n.indexOf("android")>-1&&(r=n.match(/version\/([\d.]+)/),t=r?r[1]:"",e="android"),{name:i,version:t,device:e}}(),tt=function(){var i=!0,t=Z;return document.createElement("canvas").getContext?(t.name==="firefox"&&parseFloat(t.version)<5&&(i=!1),t.name==="safari"&&parseFloat(t.version)<4&&(i=!1),t.name==="opera"&&parseFloat(t.version)<10&&(i=!1),t.name==="msie"&&parseFloat(t.version)<9&&(i=!1)):i=!1,i}();(function(){var i=navigator.userAgent.toLowerCase();return i.indexOf("webkit")===-1&&i.indexOf("gecko")!==-1})();const K=96,v={assign(i){for(var t=0;t<Object.getOwnPropertyNames(arguments).length;t++){var e=Object.getOwnPropertyNames(arguments)[t];if(!(e=="caller"||e=="callee"||e=="length"||e=="arguments")){var r=arguments[e];if(r)for(var n=0;n<Object.getOwnPropertyNames(r).length;n++){var s=Object.getOwnPropertyNames(r)[n];e=="caller"||e=="callee"||e=="length"||e=="arguments"||(i[s]=r[s])}}}return i},extend:function(i,t){if(i=i||{},t){for(var e in t){var r=t[e];r!==void 0&&(i[e]=r)}var n=typeof window.Event=="function"&&t instanceof window.Event;!n&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&(i.toString=t.toString)}return i},copy:function(i,t){i=i||{};var e;if(t)for(var r in i)e=t[r],typeof e<"u"&&(i[r]=e)},reset:function(i){i=i||{};for(var t in i)if(i.hasOwnProperty(t)){if(typeof i[t]=="object"&&i[t]instanceof Array){for(var e in i[t])i[t][e].destroy&&i[t][e].destroy();i[t].length=0}else typeof i[t]=="object"&&i[t]instanceof Object&&i[t].destroy&&i[t].destroy();i[t]=null}},getElement:function(){for(var i=[],t=0,e=arguments.length;t<e;t++){var r=arguments[t];if(typeof r=="string"&&(r=document.getElementById(r)),arguments.length===1)return r;i.push(r)}return i},isElement:function(i){return!!(i&&i.nodeType===1)},isArray:function(i){return Object.prototype.toString.call(i)==="[object Array]"},removeItem:function(i,t){for(var e=i.length-1;e>=0;e--)i[e]===t&&i.splice(e,1);return i},indexOf:function(i,t){if(i==null)return-1;if(typeof i.indexOf=="function")return i.indexOf(t);for(var e=0,r=i.length;e<r;e++)if(i[e]===t)return e;return-1},modifyDOMElement:function(i,t,e,r,n,s,l,o){t&&(i.id=t),e&&(i.style.left=e.x+"px",i.style.top=e.y+"px"),r&&(i.style.width=r.w+"px",i.style.height=r.h+"px"),n&&(i.style.position=n),s&&(i.style.border=s),l&&(i.style.overflow=l),parseFloat(o)>=0&&parseFloat(o)<1?(i.style.filter="alpha(opacity="+o*100+")",i.style.opacity=o):parseFloat(o)===1&&(i.style.filter="",i.style.opacity="")},applyDefaults:function(i,t){i=i||{};var e=typeof window.Event=="function"&&t instanceof window.Event;for(var r in t)(i[r]===void 0||!e&&t.hasOwnProperty&&t.hasOwnProperty(r)&&!i.hasOwnProperty(r))&&(i[r]=t[r]);return!e&&t&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&!i.hasOwnProperty("toString")&&(i.toString=t.toString),i},getParameterString:function(i){var t=[];for(var e in i){var r=i[e];if(r!=null&&typeof r!="function"){var n;Array.isArray(r)||r.toString()==="[object Object]"?n=encodeURIComponent(JSON.stringify(r)):n=encodeURIComponent(r),t.push(encodeURIComponent(e)+"="+n)}}return t.join("&")},urlAppend:function(i,t){var e=i;if(t){t.indexOf("?")===0&&(t=t.substring(1));var r=(i+" ").split(/[?&]/);e+=r.pop()===" "?t:r.length?"&"+t:"?"+t}return e},urlPathAppend:function(i,t){let e=i;if(!t)return e;t.indexOf("/")===0&&(t=t.substring(1));const r=i.split("?");return r[0].indexOf("/",r[0].length-1)<0&&(r[0]+="/"),e=`${r[0]}${t}${r.length>1?`?${r[1]}`:""}`,e},DEFAULT_PRECISION:14,toFloat:function(i,t){return t==null&&(t=v.DEFAULT_PRECISION),typeof i!="number"&&(i=parseFloat(i)),t===0?i:parseFloat(i.toPrecision(t))},rad:function(i){return i*Math.PI/180},getParameters:function(i){i=i??window.location.href;var t="";if(B.contains(i,"?")){var e=i.indexOf("?")+1,r=B.contains(i,"#")?i.indexOf("#"):i.length;t=i.substring(e,r)}for(var n={},s=t.split(/[&;]/),l=0,o=s.length;l<o;++l){var h=s[l].split("=");if(h[0]){var u=h[0];try{u=decodeURIComponent(u)}catch{u=unescape(u)}var a=(h[1]||"").replace(/\+/g," ");try{a=decodeURIComponent(a)}catch{a=unescape(a)}a=a.split(","),a.length==1&&(a=a[0]),n[u]=a}}return n},lastSeqID:0,createUniqueID:function(i){return i==null&&(i="id_"),v.lastSeqID+=1,i+v.lastSeqID},normalizeScale:function(i){var t=i>1?1/i:i;return t},getResolutionFromScale:function(i,t){var e;if(i){t==null&&(t="degrees");var r=v.normalizeScale(i);e=1/(r*y[t]*K)}return e},getScaleFromResolution:function(i,t){t==null&&(t="degrees");var e=i*y[t]*K;return e},getBrowser:function(){return Z},isSupportCanvas:tt,supportCanvas:function(){return v.isSupportCanvas},isInTheSameDomain:function(i){if(!i)return!0;var t=i.indexOf("//"),e=document.location.toString(),r=e.indexOf("//");if(t===-1)return!0;var n,s=n=i.substring(0,t),l=e.substring(r+2);r=l.indexOf("/");var o=l.indexOf(":"),h=l.substring(0,r),u=document.location.protocol;if(o!==-1||(h+=":"+(u.toLowerCase()==="http:"?80:443)),u.toLowerCase()!==s.toLowerCase())return!1;s=i.substring(t+2);var a=s.indexOf(":");t=s.indexOf("/");var p=s.substring(0,t),g;a!==-1?g=s.substring(0,a):(g=s.substring(0,t),p+=":"+(n.toLowerCase()==="http:"?80:443));var d=document.domain;return g===d&&p===h},calculateDpi:function(i,t,e,r,n){if(!(!i||!t||!e)){var s=1e4,l=i.getWidth(),o=i.getHeight(),h=t.w,u=t.h;n=n||6378137,r=r||"degrees";var a;if(r.toLowerCase()==="degree"||r.toLowerCase()==="degrees"||r.toLowerCase()==="dd"){let p=l/h,g=o/u,d=p>g?p:g;a=.0254*s/d/e/(Math.PI*2*n/360)/s}else{let p=l/h;a=.0254*s/p/e/s}return a}},toJSON:function(i){var t=i;if(t==null)return null;switch(t.constructor){case String:return t='"'+t.replace(/(["\\])/g,"\\$1")+'"',t=t.replace(/\n/g,"\\n"),t=t.replace(/\r/g,"\\r"),t=t.replace("<","&lt;"),t=t.replace(">","&gt;"),t=t.replace(/%/g,"%25"),t=t.replace(/&/g,"%26"),t;case Array:for(var e="",r=0,n=t.length;r<n;r++)e+=v.toJSON(t[r]),r!==t.length-1&&(e+=",");return"["+e+"]";case Number:return isFinite(t)?String(t):null;case Boolean:return String(t);case Date:var s=`{'__type':"System.DateTime",'Year':`+t.getFullYear()+",'Month':"+(t.getMonth()+1)+",'Day':"+t.getDate()+",'Hour':"+t.getHours()+",'Minute':"+t.getMinutes()+",'Second':"+t.getSeconds()+",'Millisecond':"+t.getMilliseconds()+",'TimezoneOffset':"+t.getTimezoneOffset()+"}";return s;default:if(t.toJSON!=null&&typeof t.toJSON=="function")return t.toJSON();if(typeof t=="object"){if(t.length){let o=[];for(let h=0,u=t.length;h<u;h++)o.push(v.toJSON(t[h]));return"["+o.join(",")+"]"}let l=[];for(let o in t)typeof t[o]!="function"&&o!=="CLASS_NAME"&&o!=="parent"&&l.push("'"+o+"':"+v.toJSON(t[o]));return l.length>0?"{"+l.join(",")+"}":"{}"}return t.toString()}},getResolutionFromScaleDpi:function(i,t,e,r){var n=null,s=1e4;return r=r||6378137,e=e||"",i>0&&t>0?(i=v.normalizeScale(i),e.toLowerCase()==="degree"||e.toLowerCase()==="degrees"||e.toLowerCase()==="dd"?(n=.0254*s/t/i/(Math.PI*2*r/360)/s,n):(n=.0254*s/t/i/s,n)):-1},getScaleFromResolutionDpi:function(i,t,e,r){var n=null,s=1e4;return r=r||6378137,e=e||"",i>0&&t>0?e.toLowerCase()==="degree"||e.toLowerCase()==="degrees"||e.toLowerCase()==="dd"?(n=.0254*s/t/i/(Math.PI*2*r/360)/s,n):(n=.0254*s/t/i/s,n):-1},transformResult:function(i){return i.responseText&&typeof i.responseText=="string"&&(i=JSON.parse(i.responseText)),i},copyAttributes:function(i,t){if(i=i||{},t)for(var e in t){var r=t[e];r!==void 0&&e!=="CLASS_NAME"&&typeof r!="function"&&(i[e]=r)}return i},copyAttributesWithClip:function(i,t,e){if(i=i||{},t)for(var r in t){var n=!1;if(e&&e.length){for(var s=0,l=e.length;s<l;s++)if(r===e[s]){n=!0;break}}if(n!==!0){var o=t[r];o!==void 0&&r!=="CLASS_NAME"&&typeof o!="function"&&(i[r]=o)}}return i},cloneObject:function(i){if(i===null||typeof i!="object")return i;if(i instanceof Date){let e=new Date;return e.setTime(i.getTime()),e}if(i instanceof Array)return i.slice(0);if(i instanceof Object){let e={};for(var t in i)i.hasOwnProperty(t)&&(e[t]=v.cloneObject(i[t]));return e}throw new Error("Unable to copy obj! Its type isn't supported.")},lineIntersection:function(i,t,e,r){var n=null,s,l,o=(r.x-e.x)*(i.y-e.y)-(r.y-e.y)*(i.x-e.x),h=(t.x-i.x)*(i.y-e.y)-(t.y-i.y)*(i.x-e.x),u=(r.y-e.y)*(t.x-i.x)-(r.x-e.x)*(t.y-i.y);if(u!=0)s=o/u,l=h/u,s>=0&&l<=1&&s<=1&&l>=0?n=new q.Point(i.x+s*(t.x-i.x),i.y+s*(t.y-i.y)):n="No Intersection";else if(o==0&&h==0){var a=Math.max(i.y,t.y),p=Math.min(i.y,t.y),g=Math.max(i.x,t.x),d=Math.min(i.x,t.x);(e.y>=p&&e.y<=a||r.y>=p&&r.y<=a)&&e.x>=d&&e.x<=g||r.x>=d&&r.x<=g?n="Coincident":n="Parallel"}else n="Parallel";return n},getTextBounds:function(i,t,e){document.body.appendChild(e),e.style.width="auto",e.style.height="auto",i.fontSize&&(e.style.fontSize=i.fontSize),i.fontFamily&&(e.style.fontFamily=i.fontFamily),i.fontWeight&&(e.style.fontWeight=i.fontWeight),e.style.position="relative",e.style.visibility="hidden",e.style.display="inline-block",e.innerHTML=t;var r=e.clientWidth,n=e.clientHeight;return document.body.removeChild(e),{textWidth:r,textHeight:n}},convertPath:function(i,t){return t?i.replace(/\{([\w-\.]+)\}/g,(e,r)=>{var n;return t.hasOwnProperty(r)?n=et(t[r]):n=e,encodeURIComponent(n)}):i}},y={inches:1,ft:12,mi:63360,m:39.3701,km:39370.1,dd:4374754,yd:36};y.in=y.inches;y.degrees=y.dd;y.nmi=1852*y.m;const f=.0254000508001016;v.extend(y,{Inch:y.inches,Meter:1/f,Foot:.3048006096012192/f,IFoot:.3048/f,ClarkeFoot:.3047972651151/f,SearsFoot:.30479947153867626/f,GoldCoastFoot:.3047997101815088/f,IInch:.0254/f,MicroInch:254e-7/f,Mil:254e-10/f,Centimeter:.01/f,Kilometer:1e3/f,Yard:.9144018288036576/f,SearsYard:.914398414616029/f,IndianYard:.9143985307444408/f,IndianYd37:.91439523/f,IndianYd62:.9143988/f,IndianYd75:.9143985/f,IndianFoot:.30479951/f,IndianFt37:.30479841/f,IndianFt62:.3047996/f,IndianFt75:.3047995/f,Mile:1609.3472186944373/f,IYard:.9144/f,IMile:1609.344/f,NautM:1852/f,"Lat-66":110943.31648893273/f,"Lat-83":110946.25736872235/f,Decimeter:.1/f,Millimeter:.001/f,Dekameter:10/f,Decameter:10/f,Hectometer:100/f,GermanMeter:1.0000135965/f,CaGrid:.999738/f,ClarkeChain:20.1166194976/f,GunterChain:20.11684023368047/f,BenoitChain:20.116782494375872/f,SearsChain:20.11676512155/f,ClarkeLink:.201166194976/f,GunterLink:.2011684023368047/f,BenoitLink:.20116782494375873/f,SearsLink:.2011676512155/f,Rod:5.02921005842012/f,IntnlChain:20.1168/f,IntnlLink:.201168/f,Perch:5.02921005842012/f,Pole:5.02921005842012/f,Furlong:201.1684023368046/f,Rood:3.778266898/f,CapeFoot:.3047972615/f,Brealey:375/f,ModAmFt:.304812252984506/f,Fathom:1.8288/f,"NautM-UK":1853.184/f,"50kilometers":5e4/f,"150kilometers":15e4/f});v.extend(y,{mm:y.Meter/1e3,cm:y.Meter/100,dm:y.Meter*100,km:y.Meter*1e3,kmi:y.nmi,fath:y.Fathom,ch:y.IntnlChain,link:y.IntnlLink,"us-in":y.inches,"us-ft":y.Foot,"us-yd":y.Yard,"us-ch":y.GunterChain,"us-mi":y.Mile,"ind-yd":y.IndianYd37,"ind-ft":y.IndianFt37,"ind-ch":20.11669506/f});y.degree=y.dd;y.meter=y.m;y.foot=y.ft;y.inch=y.inches;y.mile=y.mi;y.kilometer=y.km;y.yard=y.yd;function et(i){return i==null||i==null?"":i instanceof Date?i.toJSON():rt(i)?JSON.stringify(i):i.toString()}function rt(i){if(typeof i!="string"&&typeof i!="object")return!1;try{const t=i.toString();return t==="[object Object]"||t==="[object Array]"}catch{return!1}}var L={LINE:"LINE",LINEM:"LINEM",POINT:"POINT",REGION:"REGION",POINTEPS:"POINTEPS",LINEEPS:"LINEEPS",REGIONEPS:"REGIONEPS",ELLIPSE:"ELLIPSE",CIRCLE:"CIRCLE",TEXT:"TEXT",RECTANGLE:"RECTANGLE",UNKNOWN:"UNKNOWN",GEOCOMPOUND:"GEOCOMPOUND"},it={METER:"METER",KILOMETER:"KILOMETER",MILE:"MILE",YARD:"YARD",DEGREE:"DEGREE",MILLIMETER:"MILLIMETER",CENTIMETER:"CENTIMETER",INCH:"INCH",DECIMETER:"DECIMETER",FOOT:"FOOT",SECOND:"SECOND",MINUTE:"MINUTE",RADIAN:"RADIAN"};class Y{constructor(t,e){this.w=t?parseFloat(t):0,this.h=t?parseFloat(e):0,this.CLASS_NAME="SuperMap.Size"}toString(){return"w="+this.w+",h="+this.h}clone(){return new Y(this.w,this.h)}equals(t){var e=!1;return t!=null&&(e=this.w===t.w&&this.h===t.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(t.w)&&isNaN(t.h)),e}destroy(){this.w=null,this.h=null}}class k{constructor(t,e,r){this.x=t?parseFloat(t):0,this.y=e?parseFloat(e):0,this.mode=r,this.CLASS_NAME="SuperMap.Pixel"}toString(){return"x="+this.x+",y="+this.y}clone(){return new k(this.x,this.y,this.mode)}equals(t){var e=!1;return t!=null&&(e=this.x==t.x&&this.y==t.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(t.x)&&isNaN(t.y)),e}distanceTo(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}add(t,e){if(t==null||e==null)throw new TypeError("Pixel.add cannot receive null values");return new k(this.x+t,this.y+e)}offset(t){var e=this.clone();return t&&(e=this.add(t.x,t.y)),e}destroy(){this.x=null,this.y=null,this.mode=null}}k.Mode={LeftTop:"lefttop",RightTop:"righttop",RightBottom:"rightbottom",LeftBottom:"leftbottom"};class F{constructor(t,e){v.isArray(t)&&(e=t[1],t=t[0]),this.lon=t?v.toFloat(t):0,this.lat=e?v.toFloat(e):0,this.CLASS_NAME="SuperMap.LonLat"}toString(){return"lon="+this.lon+",lat="+this.lat}toShortString(){return this.lon+","+this.lat}clone(){return new F(this.lon,this.lat)}add(t,e){if(t==null||e==null)throw new TypeError("LonLat.add cannot receive null values");return new F(this.lon+v.toFloat(t),this.lat+v.toFloat(e))}equals(t){var e=!1;return t!=null&&(e=this.lon===t.lon&&this.lat===t.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(t.lon)&&isNaN(t.lat)),e}wrapDateLine(t){var e=this.clone();if(t){for(;e.lon<t.left;)e.lon+=t.getWidth();for(;e.lon>t.right;)e.lon-=t.getWidth()}return e}destroy(){this.lon=null,this.lat=null}static fromString(t){var e=t.split(",");return new F(e[0],e[1])}static fromArray(t){var e=v.isArray(t),r=e&&t[0],n=e&&t[1];return new F(r,n)}}class P{constructor(t,e,r,n){v.isArray(t)&&(n=t[3],r=t[2],e=t[1],t=t[0]),this.left=t!=null?v.toFloat(t):this.left,this.bottom=e!=null?v.toFloat(e):this.bottom,this.right=r!=null?v.toFloat(r):this.right,this.top=n!=null?v.toFloat(n):this.top,this.centerLonLat=null,this.CLASS_NAME="SuperMap.Bounds"}clone(){return new P(this.left,this.bottom,this.right,this.top)}equals(t){var e=!1;return t!=null&&(e=this.left===t.left&&this.right===t.right&&this.top===t.top&&this.bottom===t.bottom),e}toString(){return[this.left,this.bottom,this.right,this.top].join(",")}toArray(t){return t===!0?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]}toBBOX(t,e){t==null&&(t=6);var r=Math.pow(10,t),n=Math.round(this.left*r)/r,s=Math.round(this.bottom*r)/r,l=Math.round(this.right*r)/r,o=Math.round(this.top*r)/r;return e===!0?s+","+n+","+o+","+l:n+","+s+","+l+","+o}getWidth(){return this.right-this.left}getHeight(){return this.top-this.bottom}getSize(){return new Y(this.getWidth(),this.getHeight())}getCenterPixel(){return new k((this.left+this.right)/2,(this.bottom+this.top)/2)}getCenterLonLat(){return this.centerLonLat||(this.centerLonLat=new F((this.left+this.right)/2,(this.bottom+this.top)/2)),this.centerLonLat}scale(t,e){t=t||1,e==null&&(e=this.getCenterLonLat());var r,n;e.CLASS_NAME==="SuperMap.LonLat"?(r=e.lon,n=e.lat):(r=e.x,n=e.y);var s=(this.left-r)*t+r,l=(this.bottom-n)*t+n,o=(this.right-r)*t+r,h=(this.top-n)*t+n;return new P(s,l,o,h)}add(t,e){if(t==null||e==null)throw new TypeError("Bounds.add cannot receive null values");return new P(this.left+t,this.bottom+e,this.right+t,this.top+e)}extend(t){var e=null;if(t){switch(t.CLASS_NAME){case"SuperMap.LonLat":e=new P(t.lon,t.lat,t.lon,t.lat);break;case"SuperMap.Geometry.Point":e=new P(t.x,t.y,t.x,t.y);break;case"SuperMap.Bounds":e=t;break}e&&(this.centerLonLat=null,(this.left==null||e.left<this.left)&&(this.left=e.left),(this.bottom==null||e.bottom<this.bottom)&&(this.bottom=e.bottom),(this.right==null||e.right>this.right)&&(this.right=e.right),(this.top==null||e.top>this.top)&&(this.top=e.top))}}containsLonLat(t,e){typeof e=="boolean"&&(e={inclusive:e}),e=e||{};var r=this.contains(t.lon,t.lat,e.inclusive),n=e.worldBounds;if(n&&!r){var s=n.getWidth(),l=(n.left+n.right)/2,o=Math.round((t.lon-l)/s);r=this.containsLonLat({lon:t.lon-o*s,lat:t.lat},{inclusive:e.inclusive})}return r}containsPixel(t,e){return this.contains(t.x,t.y,e)}contains(t,e,r){if(r==null&&(r=!0),t==null||e==null)return!1;var n=!1;return r?n=t>=this.left&&t<=this.right&&e>=this.bottom&&e<=this.top:n=t>this.left&&t<this.right&&e>this.bottom&&e<this.top,n}intersectsBounds(t,e){if(typeof e=="boolean"&&(e={inclusive:e}),e=e||{},e.worldBounds){var r=this.wrapDateLine(e.worldBounds);t=t.wrapDateLine(e.worldBounds)}else r=this;e.inclusive==null&&(e.inclusive=!0);var n=!1,s=r.left===t.right||r.right===t.left||r.top===t.bottom||r.bottom===t.top;if(e.inclusive||!s){var l=t.bottom>=r.bottom&&t.bottom<=r.top||r.bottom>=t.bottom&&r.bottom<=t.top,o=t.top>=r.bottom&&t.top<=r.top||r.top>t.bottom&&r.top<t.top,h=t.left>=r.left&&t.left<=r.right||r.left>=t.left&&r.left<=t.right,u=t.right>=r.left&&t.right<=r.right||r.right>=t.left&&r.right<=t.right;n=(l||o)&&(h||u)}if(e.worldBounds&&!n){var a=e.worldBounds,p=a.getWidth(),g=!a.containsBounds(r),d=!a.containsBounds(t);g&&!d?(t=t.add(-p,0),n=r.intersectsBounds(t,{inclusive:e.inclusive})):d&&!g&&(r=r.add(-p,0),n=t.intersectsBounds(r,{inclusive:e.inclusive}))}return n}containsBounds(t,e,r){e==null&&(e=!1),r==null&&(r=!0);var n=this.contains(t.left,t.bottom,r),s=this.contains(t.right,t.bottom,r),l=this.contains(t.left,t.top,r),o=this.contains(t.right,t.top,r);return e?n||s||l||o:n&&s&&l&&o}determineQuadrant(t){var e="",r=this.getCenterLonLat();return e+=t.lat<r.lat?"b":"t",e+=t.lon<r.lon?"l":"r",e}wrapDateLine(t,e){e=e||{};var r=e.leftTolerance||0,n=e.rightTolerance||0,s=this.clone();if(t){for(var l=t.getWidth();s.left<t.left&&s.right-n<=t.left;)s=s.add(l,0);for(;s.left+r>=t.right&&s.right>t.right;)s=s.add(-l,0);var o=s.left+r;o<t.right&&o>t.left&&s.right-n>t.right&&(s=s.add(-l,0))}return s}toServerJSONObject(){var t={rightTop:{x:this.right,y:this.top},leftBottom:{x:this.left,y:this.bottom},left:this.left,right:this.right,top:this.top,bottom:this.bottom};return t}destroy(){this.left=null,this.right=null,this.top=null,this.bottom=null,this.centerLonLat=null}static fromString(t,e){var r=t.split(",");return P.fromArray(r,e)}static fromArray(t,e){return e===!0?new P(t[1],t[0],t[3],t[2]):new P(t[0],t[1],t[2],t[3])}static fromSize(t){return new P(0,t.h,t.w,0)}static oppositeQuadrant(t){var e="";return e+=t.charAt(0)==="t"?"b":"t",e+=t.charAt(1)==="l"?"r":"l",e}}class M extends q{constructor(t,e,r,n){super(t,e,r,n),this.x=parseFloat(t),this.y=parseFloat(e),this.tag=n||n==0?parseFloat(n):null,this.type=r||"Point",this.CLASS_NAME="SuperMap.Geometry.Point",this.geometryType="Point"}clone(t){return t==null&&(t=new M(this.x,this.y)),v.applyDefaults(t,this),t}calculateBounds(){this.bounds=new P(this.x,this.y,this.x,this.y)}equals(t){var e=!1;return t!=null&&(e=this.x===t.x&&this.y===t.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(t.x)&&isNaN(t.y)),e}move(t,e){this.x=this.x+t,this.y=this.y+e,this.clearBounds()}toShortString(){return this.x+", "+this.y}destroy(){this.x=null,this.y=null,this.tag=null,super.destroy()}getVertices(){return[this]}}class T extends q{constructor(t){super(),this.components=[],this.componentTypes=null,t!=null&&this.addComponents(t),this.CLASS_NAME="SuperMap.Geometry.Collection",this.geometryType="Collection"}destroy(){this.components.length=0,this.components=null,super.destroy()}clone(){for(var t=new T,e=0,r=this.components.length;e<r;e++)t.addComponent(this.components[e].clone());return v.applyDefaults(t,this),t}getComponentsString(){for(var t=[],e=0,r=this.components.length;e<r;e++)t.push(this.components[e].toShortString());return t.join(",")}calculateBounds(){this.bounds=null;var t=new P,e=this.components;if(e)for(var r=0,n=e.length;r<n;r++)t.extend(e[r].getBounds());t.left!=null&&t.bottom!=null&&t.right!=null&&t.top!=null&&this.setBounds(t)}addComponents(t){v.isArray(t)||(t=[t]);for(var e=0,r=t.length;e<r;e++)this.addComponent(t[e])}addComponent(t,e){var r=!1;if(t&&(this.componentTypes==null||v.indexOf(this.componentTypes,t.CLASS_NAME)>-1)){if(e!=null&&e<this.components.length){var n=this.components.slice(0,e),s=this.components.slice(e,this.components.length);n.push(t),this.components=n.concat(s)}else this.components.push(t);t.parent=this,this.clearBounds(),r=!0}return r}removeComponents(t){var e=!1;v.isArray(t)||(t=[t]);for(var r=t.length-1;r>=0;--r)e=this.removeComponent(t[r])||e;return e}removeComponent(t){return v.removeItem(this.components,t),this.clearBounds(),!0}getArea(){for(var t=0,e=0,r=this.components.length;e<r;e++)t+=this.components[e].getArea();return t}equals(t){var e=!0;if(!t||!t.CLASS_NAME||this.CLASS_NAME!==t.CLASS_NAME)e=!1;else if(!v.isArray(t.components)||t.components.length!==this.components.length)e=!1;else for(var r=0,n=this.components.length;r<n;++r)if(!this.components[r].equals(t.components[r])){e=!1;break}return e}getVertices(t){for(var e=[],r=0,n=this.components.length;r<n;++r)Array.prototype.push.apply(e,this.components[r].getVertices(t));return e}}class z extends T{constructor(t){super(t),this.componentTypes=["SuperMap.Geometry.Point"],this.CLASS_NAME="SuperMap.Geometry.MultiPoint",this.geometryType="MultiPoint"}addPoint(t,e){this.addComponent(t,e)}removePoint(t){this.removeComponent(t)}}class nt extends z{constructor(t){super(t),this.componentTypes=["SuperMap.Geometry.Point","SuperMap.PointWithMeasure"],this.CLASS_NAME="SuperMap.Geometry.Curve",this.geometryType="Curve"}}class w extends nt{constructor(t){super(t),this.CLASS_NAME="SuperMap.Geometry.LineString",this.geometryType="LineString"}removeComponent(t){var e=this.components&&this.components.length>2;return e&&super.removeComponent.apply(this,arguments),e}getSortedSegments(){for(var t=this.components.length-1,e=new Array(t),r,n,s=0;s<t;++s)r=this.components[s],n=this.components[s+1],r.x<n.x?e[s]={x1:r.x,y1:r.y,x2:n.x,y2:n.y}:e[s]={x1:n.x,y1:n.y,x2:r.x,y2:r.y};function l(o,h){return o.x1-h.x1}return e.sort(l)}getVertices(t){var e;return t===!0?e=[this.components[0],this.components[this.components.length-1]]:t===!1?e=this.components.slice(1,this.components.length-1):e=this.components.slice(),e}static calculateCircle(t){if(t.length<3)return t;var e={},r=t[0],n=t[1],s=t[2],l=0,o=0,h=!0,u=0,a=0,p=0,g=72,d=[],S=(s.y-r.y)/(s.x-r.x),C=s.y-S*s.x;if(s.x!=r.x&&s.y!=r.y&&n.y==S*n.x+C||s.x==r.x&&n.x==r.x||s.y==r.y&&n.y==r.y||s.x==r.x&&s.y==r.y||s.x==n.x&&s.y==n.y||r.x==n.x&&r.y==n.y)d.push(r),d.push(n),d.push(s);else{var c=(n.x*n.x+n.y*n.y-(r.x*r.x+r.y*r.y))*(2*(s.y-r.y))-(s.x*s.x+s.y*s.y-(r.x*r.x+r.y*r.y))*(2*(n.y-r.y)),x=2*(n.x-r.x)*(s.x*s.x+s.y*s.y-(r.x*r.x+r.y*r.y))-2*(s.x-r.x)*(n.x*n.x+n.y*n.y-(r.x*r.x+r.y*r.y)),m=4*((n.x-r.x)*(s.y-r.y)-(s.x-r.x)*(n.y-r.y));e.x=c/m,e.y=x/m,l=Math.sqrt((r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y));var N=(r.x-s.x)*(r.x-s.x)+(r.y-s.y)*(r.y-s.y),E=(2*l*l-N)/(2*l*l);E=E>=1?1:E,E=E<=-1?-1:E,p=Math.acos(E)*180/Math.PI,s.x==r.x?p=e.x>r.x&&n.x>r.x||e.x<r.x&&n.x<r.x?360-p:p:p=e.y>S*e.x+C&&n.y>S*n.x+C||e.y<S*e.x+C&&n.y<S*n.x+C?360-p:p,o=p/72,s.y!=r.y?s.x==r.x?s.y>r.y?n.x<r.x&&(h=!1):n.x>r.x&&(h=!1):s.x<r.x?n.y<S*n.x+C&&(h=!1):n.y>S*n.x+C&&(h=!1):s.x>r.x?n.y>r.y&&(h=!1):n.y<r.y&&(h=!1);var O=(r.y-e.y)/(r.x-e.x),J=O>=0?Math.atan(O)*180/Math.PI:Math.abs(Math.atan(O)*180/Math.PI)+90,_=Math.abs(e.y);r.y==_&&_==s.y&&r.x<s.x&&(J=J+180);var Q=r.y-e.y;d.push(r);for(var W=1;W<g;W++){u=o*W,a=J,h?Q>=0?O>=0?a=a+u:a=180-(a-90)+u:O>0?a=a-180+u:a=90-a+u:Q>=0?O>=0?a=a-u:a=180-(a-90)-u:O>=0?a=a-180-u:a=90-a-u,a=a*Math.PI/180;var b=e.x+l*Math.cos(a),j=e.y+l*Math.sin(a);d.push(new M(b,j))}d.push(s)}return d}static createLineEPS(t){var e=[],r=t.length;if(r<2)return t;for(var n=0;n<r;){var s=t[n].type;if(s=="LTypeArc"){var l=w.createLineArc(e,n,r,t);e=l[0],n=l[1]}else e.push(t[n]),n++}return e}static createLineArc(t,e,r,n){if(e==0){let o=w.addPointEPS(n,e,r,"LTypeArc");Array.prototype.push.apply(t,o[0]),e=o[1]+1}else if(e==r-1){var s=[n[e-1],n[e]],l=w.calculateCircle(s);Array.prototype.push.apply(t,l),e++}else{let o=w.addPointEPS(n,e,r,"LTypeArc");t.pop(),Array.prototype.push.apply(t,o[0]),e=o[1]+1}return[t,e]}static addPointEPS(t,e,r,n){var s=[],l=e+1;e==0?Array.prototype.push.apply(s,[t[e],t[e+1]]):e==r-1?Array.prototype.push.apply(s,[t[e-1],t[e]]):Array.prototype.push.apply(s,[t[e-1],t[e],t[e+1]]);var o;return n=="LTypeCurve"?o=w.calculatePointsFBZN(s):n=="LTypeArc"&&(o=w.calculateCircle(s)),[o,l]}}class I extends w{constructor(t){super(t),this.componentTypes=["SuperMap.Geometry.Point"],this.CLASS_NAME="SuperMap.Geometry.LinearRing",this.geometryType="LinearRing"}addComponent(t,e){var r=!1,n=this.components.pop();(e!=null||!t.equals(n))&&(r=super.addComponent.apply(this,arguments));var s=this.components[0];return super.addComponent.apply(this,[s]),r}removeComponent(t){var e=this.components&&this.components.length>3;if(e){this.components.pop(),super.removeComponent.apply(this,arguments);var r=this.components[0];super.addComponent.apply(this,[r])}return e}getArea(){var t=0;if(this.components&&this.components.length>2){for(var e=0,r=0,n=this.components.length;r<n-1;r++){var s=this.components[r],l=this.components[r+1];e+=(s.x+l.x)*(l.y-s.y)}t=-e/2}return t}getVertices(t){return t===!0?[]:this.components.slice(0,this.components.length-1)}}class H extends T{constructor(t){super(t),this.componentTypes=["SuperMap.Geometry.LineString"],this.CLASS_NAME="SuperMap.Geometry.MultiLineString",this.geometryType="MultiLineString"}}class R extends T{constructor(t){super(t),this.componentTypes=["SuperMap.Geometry.LinearRing"],this.CLASS_NAME="SuperMap.Geometry.Polygon",this.geometryType="Polygon"}getArea(){var t=0;if(this.components&&this.components.length>0){t+=Math.abs(this.components[0].getArea());for(var e=1,r=this.components.length;e<r;e++)t-=Math.abs(this.components[e].getArea())}return t}}class D extends T{constructor(t){super(t),this.componentTypes=["SuperMap.Geometry.Polygon"],this.CLASS_NAME="SuperMap.Geometry.MultiPolygon",this.geometryType="MultiPolygon"}}class A{constructor(t,e,r){this.red=!t&&t!=0?255:t,this.green=e||0,this.blue=r||0,this.CLASS_NAME="SuperMap.ServerColor"}destroy(){var t=this;t.red=null,t.green=null,t.blue=null}static fromJson(t){if(t){var e=new A,r=255;t.red!==null&&(r=Number(t.red)),e.red=r;var n=0;t.green!==null&&(n=Number(t.green)),e.green=n;var s=0;return t.blue!==null&&(s=Number(t.blue)),e.blue=s,e}}}class ${constructor(t){this.fillBackColor=new A(255,255,255),this.fillBackOpaque=!1,this.fillForeColor=new A(255,0,0),this.fillGradientMode=null,this.fillGradientAngle=0,this.fillGradientOffsetRatioX=0,this.fillGradientOffsetRatioY=0,this.fillOpaqueRate=100,this.fillSymbolID=0,this.lineColor=new A(0,0,0),this.lineSymbolID=0,this.lineWidth=1,this.markerAngle=0,this.markerSize=1,this.markerSymbolID=-1,t&&v.extend(this,t),this.CLASS_NAME="SuperMap.ServerStyle"}destroy(){var t=this;t.fillBackColor&&(t.fillBackColor.destroy(),t.fillBackColor=null),t.fillBackOpaque=null,t.fillForeColor&&(t.fillForeColor.destroy(),t.fillForeColor=null),t.fillGradientMode=null,t.fillGradientAngle=null,t.fillGradientOffsetRatioX=null,t.fillGradientOffsetRatioY=null,t.fillOpaqueRate=null,t.fillSymbolID=null,t.lineColor&&(t.lineColor.destroy(),t.lineColor=null),t.lineSymbolID=null,t.lineWidth=null,t.markerAngle=null,t.markerSize=null,t.markerSymbolID=null}toServerJSONObject(){var t={};return t=v.copyAttributes(t,this),t}static fromJson(t){if(t)return new $({fillBackColor:A.fromJson(t.fillBackColor),fillBackOpaque:t.fillBackOpaque,fillForeColor:A.fromJson(t.fillForeColor),fillGradientMode:t.fillGradientMode,fillGradientAngle:t.fillGradientAngle,fillGradientOffsetRatioX:t.fillGradientOffsetRatioX,fillGradientOffsetRatioY:t.fillGradientOffsetRatioY,fillOpaqueRate:t.fillOpaqueRate,fillSymbolID:t.fillSymbolID,lineColor:A.fromJson(t.lineColor),lineSymbolID:t.lineSymbolID,lineWidth:t.lineWidth,markerAngle:t.markerAngle,markerSize:t.markerSize,markerSymbolID:t.markerSymbolID})}}class V extends M{constructor(t){super(t),this.measure=null,t&&v.extend(this,t),this.CLASS_NAME="SuperMap.PointWithMeasure"}equals(t){var e=!1;if(t!=null){var r=this.x===t.x&&this.y===t.y&&this.measure===t.measure,n=isNaN(this.x)&&isNaN(this.y)&&isNaN(this.measure),s=isNaN(t.x)&&isNaN(t.y)&&isNaN(t.measure);e=r||n&&s}return e}toJson(){var t="{";return this.measure!=null&&this.measure!=null&&(t+='"measure":'+this.measure+","),t+='"x":'+this.x+",",t+='"y":'+this.y,t+="}",t}destroy(){var t=this;t.measure=null,t.x=null,t.y=null}static fromJson(t){if(t)return new V({x:t.x,y:t.y,measure:t.measure})}}class X extends T{constructor(t,e){super(t,e),this.id=null,this.center=null,this.style=null,this.length=null,this.maxM=null,this.minM=null,this.parts=null,this.points=null,this.type=null,this.componentTypes=["SuperMap.Geometry.LinearRing","SuperMap.Geometry.LineString"],e&&v.extend(this,e),this.CLASS_NAME="SuperMap.Route",this.geometryType="LINEM"}toJson(){var t="{";if(this.id!=null&&this.id!=null&&(t+='"id":'+this.id+","),this.center!=null&&this.center!=null&&(t+='"center":'+this.center+","),this.style!=null&&this.style!=null&&(t+='"style":'+this.style+","),this.length!=null&&this.length!=null&&(t+='"length":'+this.length+","),this.maxM!=null&&this.maxM!=null&&(t+='"maxM":'+this.maxM+","),this.minM!=null&&this.minM!=null&&(t+='"minM":'+this.minM+","),this.type!=null&&this.type!=null&&(t+='"type":"'+this.type+'",'),this.parts!=null&&this.parts!=null){t+='"parts":['+this.parts[0];for(var e=1;e<this.parts.length;e++)t+=","+this.parts[e];t+="],"}if(this.components!=null&&this.components.length>0){t+='"points":[';for(var r=0,n=this.components.length;r<n;r++)for(var s=0,l=this.components[r].components.length;s<l;s++)t+=this.components[r].components[s].toJson()+",";t=t.replace(/,$/g,""),t+="]"}return t=t.replace(/,$/g,""),t+="}",t}destroy(){var t=this;t.id=null,t.center=null,t.style=null,t.length=null,t.maxM=null,t.minM=null,t.type=null,t.parts=null,t.components.length=0,t.components=null,t.componentTypes=null}static fromJson(t){if(t){var e=t.parts||[],r=t.points||[],n=e.length,s=[];if(n>0)for(var l=0,o=0,h=[];l<n;l++){for(var u=0;u<e[l];u++)h.push(V.fromJson(r[o+u]));o+=e[l],h[0].equals(h[e[l]-1])?s.push(new I(h)):s.push(new w(h)),h=[]}else return null;return new X(s,{id:t.id,center:t.center,style:t.style,length:t.length,maxM:t.maxM,minM:t.minM,type:t.type,parts:t.parts})}}}class G{constructor(t){this.id=0,this.style=null,this.parts=null,this.points=null,this.type=null,this.prjCoordSys=null,t&&v.extend(this,t),this.CLASS_NAME="SuperMap.ServerGeometry"}destroy(){var t=this;t.id=null,t.style=null,t.parts=null,t.partTopo=null,t.points=null,t.type=null,t.prjCoordSys=null}toGeometry(){var t=this,e=t.type;switch(e.toUpperCase()){case L.POINT:return t.toGeoPoint();case L.LINE:return t.toGeoLine();case L.LINEM:return t.toGeoLinem();case L.REGION:return t.toGeoRegion();case L.POINTEPS:return t.toGeoPoint();case L.LINEEPS:return t.toGeoLineEPS();case L.REGIONEPS:return t.toGeoRegionEPS();case L.GEOCOMPOUND:return t.transformGeoCompound()}}toGeoPoint(){var t=this,e=t.parts||[],r=t.points||[],n=e.length;if(n>0){if(n===1)return new M(r[0].x,r[0].y);var s=[];for(let l=0;l<n;l++)s.push(new M(r[l].x,r[l].y));return new z(s)}else return null}toGeoLine(){var t=this,e=t.parts||[],r=t.points||[],n=e.length;if(n>0)if(n===1){let s=[];for(let l=0;l<e[0];l++)s.push(new M(r[l].x,r[l].y));return s[0].equals(s[e[0]-1])?new I(s):new w(s)}else{let s=[];for(let l=0;l<n;l++){let o=[];for(let h=0;h<e[l];h++)o.push(new M(r[h].x,r[h].y));s.push(new w(o)),r.splice(0,e[l])}return new H(s)}else return null}toGeoLineEPS(){var t=this,e=t.parts||[],r=t.points||[],n,s,l,o,h,u=e.length;if(u>0)if(u===1){for(n=0,l=[];n<e[0];n++)l.push(new M(r[n].x,r[n].y,r[n].type));return l[0].equals(l[e[0]-1])?(h=w.createLineEPS(l),new I(h)):(h=w.createLineEPS(l),new w(h))}else{for(n=0,o=[];n<u;n++){for(s=0,l=[];s<e[n];s++)l.push(new M(r[s].x,r[s].y));h=w.createLineEPS(l),o.push(new w(h)),r.splice(0,e[n])}return new H(o)}else return null}toGeoLinem(){var t=this;return X.fromJson(t)}toGeoRegion(){var t=this,e=t.parts||[],r=t.partTopo||[],n=t.points||[],s=e.length;if(s<=0)return null;var l=[],o=[];if(s==1){for(let c=0;c<n.length;c++)o.push(new M(n[c].x,n[c].y));return l.push(new R([new I(o)])),new D(l)}var h=[],u=[],a=[],p=[],g=[];for(let c=0,x=0;c<s;c++){for(let m=0;m<e[c];m++)o.push(new M(n[x+m].x,n[x+m].y));x+=e[c];var d=new R([new I(o)]);o=[],a.push(d),r.length===0&&p.push(d.getBounds()),g.push(1),u.push(d.getArea())}if(r.length===0){G.bubbleSort(u,a,r,p);var S=[];for(let c=1;c<a.length;c++)for(let x=c-1;x>=0;x--)if(S[c]=-1,p[x].containsBounds(p[c])){g[c]=g[x]*-1,g[c]<0&&(S[c]=x);break}for(let c=0;c<a.length;c++)g[c]>0?l.push(a[c]):(l[S[c]].components=l[S[c]].components.concat(a[c].components),l.push(""))}else{l=new Array;for(let c=0;c<a.length;c++)if(r[c]&&r[c]==-1?h=h.concat(a[c].components):(h.length>0&&l.length>0&&(l[l.length-1].components=l[l.length-1].components.concat(h),h=[]),l.push(a[c])),c==s-1){var C=l.length;if(C)l[C-1].components=l[C-1].components.concat(h);else for(let x=0,m=h.length;x<m;x++)l.push(new R(h))}}return new D(l)}toGeoRegionEPS(){var t=this,e=t.parts||[],r=t.partTopo||[],n=t.points||[],s=e.length;if(s<=0)return null;var l=[],o=[],h;if(s==1){for(var u=0;u<n.length;u++)o.push(new M(n[u].x,n[u].y));return h=w.createLineEPS(o),l.push(new R([new I(h)])),new D(l)}var a=[],p=[],g=[],d=[],S=[];for(let m=0,N=0;m<s;m++){for(let E=0;E<e[m];E++)o.push(new M(n[N+E].x,n[N+E].y));N+=e[m],h=w.createLineEPS(o);var C=new R([new I(h)]);o=[],g.push(C),r.length===0&&d.push(C.getBounds()),S.push(1),p.push(C.getArea())}if(r.length===0){G.bubbleSort(p,g,r,d);var c=[];for(let m=1;m<g.length;m++)for(let N=m-1;N>=0;N--)if(c[m]=-1,d[N].containsBounds(d[m])){S[m]=S[N]*-1,S[m]<0&&(c[m]=N);break}for(let m=0;m<g.length;m++)S[m]>0?l.push(g[m]):(l[c[m]].components=l[c[m]].components.concat(g[m].components),l.push(""))}else{l=new Array;for(let m=0;m<g.length;m++)if(r[m]&&r[m]==-1?a=a.concat(g[m].components):(a.length>0&&l.length>0&&(l[l.length-1].components=l[l.length-1].components.concat(a),a=[]),l.push(g[m])),m==s-1){var x=l.length;if(x)l[x-1].components=l[x-1].components.concat(a);else for(let N=0,E=a.length;N<E;N++)l.push(new R(a))}}return new D(l)}transformGeoCompound(){const t=this,e=t.geoParts||[],r=e.length;if(r<=0)return null;const n=[];for(let s=0;s<r;s++){const l=e[s];n.push(new G(l).toGeometry())}return new T(n)}static fromJson(t){if(t)return new G({id:t.id,style:$.fromJson(t.style),parts:t.parts,partTopo:t.partTopo,points:t.points,center:t.center,length:t.length,maxM:t.maxM,minM:t.minM,type:t.type})}static fromGeometry(t){if(t){var e=0,r=[],n=[],s=null,l=t.components,o=t.CLASS_NAME,h={epsgCode:t.SRID};if(isNaN(t.id)||(e=t.id),o!="SuperMap.Geometry.LinearRing"&&o!="SuperMap.Geometry.LineString"&&(t instanceof z||t instanceof H)){let u=l.length;for(let a=0;a<u;a++){const p=l[a].getVertices();let g=p.length;r.push(g);for(let d=0;d<g;d++)n.push(new M(p[d].x,p[d].y))}s=o=="SuperMap.Geometry.MultiPoint"?L.POINT:L.LINE}else if(t instanceof D){let u=l.length;for(let a=0;a<u;a++){let p=l[a],g=p.components,d=g.length;for(let S=0;S<d;S++){const C=g[S].getVertices(),c=C.length+1;r.push(c);for(let x=0;x<c-1;x++)n.push(new M(C[x].x,C[x].y));n.push(new M(C[0].x,C[0].y))}}s=L.REGION}else if(t instanceof R){let u=l.length;for(let a=0;a<u;a++){const p=l[a].getVertices();let g=p.length+1;r.push(g);for(let d=0;d<g-1;d++)n.push(new M(p[d].x,p[d].y));n.push(new M(p[0].x,p[0].y))}s=L.REGION}else{const u=t.getVertices();let a=u.length;for(let p=0;p<a;p++)n.push(new M(u[p].x,u[p].y));t instanceof I&&(n.push(new M(u[0].x,u[0].y)),a++),r.push(a),s=t instanceof M?L.POINT:L.LINE}return new G({id:e,style:null,parts:r,points:n,type:s,prjCoordSys:h})}}static IsClockWise(t){var e=t.length;if(e<3)return 0;var r=t[0].y*(t[e-1].x-t[1].x);t.push(t[0]);for(var n=1;n<e;n++)r+=t[n].y*(t[n-1].x-t[n+1].x);return r*.5}static bubbleSort(t,e,r,n){for(var s=0;s<t.length;s++)for(var l=0;l<t.length;l++)if(t[s]>t[l]){var o=t[l];t[l]=t[s],t[s]=o;var h=e[l];if(e[l]=e[s],e[s]=h,r&&r.length>0){var u=r[l];r[l]=r[s],r[s]=u}if(n&&n.length>0){var a=n[l];n[l]=n[s],n[s]=a}}}}export{P as B,T as C,w as L,z as M,M as P,G as S,v as U,H as a,I as b,R as c,D as d,it as e};
