import{h as Dn,y as Te,R as Bn,V as Ot,$ as Rn,Z as Tn,o as ge,l as Ie,m as me,T as In,n as je,a as jn,w as nn,H as rn,I as An,c as Gn,b as Nn,t as zn,s as Fn,U as Un,J as Vn,K as Kn,_ as Hn}from"./index-3c1c2b99.js";import{E as qn,a as Jn}from"./el-descriptions-item-be01cbbe.js";/* empty css                */import{m as an,c as Bt}from"./marker-shadow-3975724d.js";import{l as kt}from"./leaflet-src-05abfc28.js";(()=>{var Yt={9705:(u,h,o)=>{var c=o(1540);function d(M){var m=[1/0,1/0,-1/0,-1/0];return c.coordEach(M,function(P){m[0]>P[0]&&(m[0]=P[0]),m[1]>P[1]&&(m[1]=P[1]),m[2]<P[0]&&(m[2]=P[0]),m[3]<P[1]&&(m[3]=P[1])}),m}d.default=d,h.Z=d},4102:(u,h)=>{function o(E,C,S){S===void 0&&(S={});var f={type:"Feature"};return(S.id===0||S.id)&&(f.id=S.id),S.bbox&&(f.bbox=S.bbox),f.properties=C||{},f.geometry=E,f}function c(E,C,S){if(S===void 0&&(S={}),!E)throw new Error("coordinates is required");if(!Array.isArray(E))throw new Error("coordinates must be an Array");if(E.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!T(E[0])||!T(E[1]))throw new Error("coordinates must contain numbers");return o({type:"Point",coordinates:E},C,S)}function d(E,C,S){S===void 0&&(S={});for(var f=0,x=E;f<x.length;f++){var D=x[f];if(D.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var F=0;F<D[D.length-1].length;F++)if(D[D.length-1][F]!==D[0][F])throw new Error("First and last Position are not equivalent.")}return o({type:"Polygon",coordinates:E},C,S)}function M(E,C,S){if(S===void 0&&(S={}),E.length<2)throw new Error("coordinates must be an array of two or more positions");return o({type:"LineString",coordinates:E},C,S)}function m(E,C){C===void 0&&(C={});var S={type:"FeatureCollection"};return C.id&&(S.id=C.id),C.bbox&&(S.bbox=C.bbox),S.features=E,S}function P(E,C,S){return S===void 0&&(S={}),o({type:"MultiLineString",coordinates:E},C,S)}function I(E,C,S){return S===void 0&&(S={}),o({type:"MultiPoint",coordinates:E},C,S)}function N(E,C,S){return S===void 0&&(S={}),o({type:"MultiPolygon",coordinates:E},C,S)}function V(E,C){C===void 0&&(C="kilometers");var S=h.factors[C];if(!S)throw new Error(C+" units is invalid");return E*S}function R(E,C){C===void 0&&(C="kilometers");var S=h.factors[C];if(!S)throw new Error(C+" units is invalid");return E/S}function O(E){return 180*(E%(2*Math.PI))/Math.PI}function T(E){return!isNaN(E)&&E!==null&&!Array.isArray(E)}Object.defineProperty(h,"__esModule",{value:!0}),h.earthRadius=63710088e-1,h.factors={centimeters:100*h.earthRadius,centimetres:100*h.earthRadius,degrees:h.earthRadius/111325,feet:3.28084*h.earthRadius,inches:39.37*h.earthRadius,kilometers:h.earthRadius/1e3,kilometres:h.earthRadius/1e3,meters:h.earthRadius,metres:h.earthRadius,miles:h.earthRadius/1609.344,millimeters:1e3*h.earthRadius,millimetres:1e3*h.earthRadius,nauticalmiles:h.earthRadius/1852,radians:1,yards:1.0936*h.earthRadius},h.unitsFactors={centimeters:100,centimetres:100,degrees:8982708286548395e-21,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:.0006213711922373339,millimeters:1e3,millimetres:1e3,nauticalmiles:.0005399568034557236,radians:1/h.earthRadius,yards:1.0936133},h.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},h.feature=o,h.geometry=function(E,C,S){switch(E){case"Point":return c(C).geometry;case"LineString":return M(C).geometry;case"Polygon":return d(C).geometry;case"MultiPoint":return I(C).geometry;case"MultiLineString":return P(C).geometry;case"MultiPolygon":return N(C).geometry;default:throw new Error(E+" is invalid")}},h.point=c,h.points=function(E,C,S){return S===void 0&&(S={}),m(E.map(function(f){return c(f,C)}),S)},h.polygon=d,h.polygons=function(E,C,S){return S===void 0&&(S={}),m(E.map(function(f){return d(f,C)}),S)},h.lineString=M,h.lineStrings=function(E,C,S){return S===void 0&&(S={}),m(E.map(function(f){return M(f,C)}),S)},h.featureCollection=m,h.multiLineString=P,h.multiPoint=I,h.multiPolygon=N,h.geometryCollection=function(E,C,S){return S===void 0&&(S={}),o({type:"GeometryCollection",geometries:E},C,S)},h.round=function(E,C){if(C===void 0&&(C=0),C&&!(C>=0))throw new Error("precision must be a positive number");var S=Math.pow(10,C||0);return Math.round(E*S)/S},h.radiansToLength=V,h.lengthToRadians=R,h.lengthToDegrees=function(E,C){return O(R(E,C))},h.bearingToAzimuth=function(E){var C=E%360;return C<0&&(C+=360),C},h.radiansToDegrees=O,h.degreesToRadians=function(E){return E%360*Math.PI/180},h.convertLength=function(E,C,S){if(C===void 0&&(C="kilometers"),S===void 0&&(S="kilometers"),!(E>=0))throw new Error("length must be a positive number");return V(R(E,C),S)},h.convertArea=function(E,C,S){if(C===void 0&&(C="meters"),S===void 0&&(S="kilometers"),!(E>=0))throw new Error("area must be a positive number");var f=h.areaFactors[C];if(!f)throw new Error("invalid original units");var x=h.areaFactors[S];if(!x)throw new Error("invalid final units");return E/f*x},h.isNumber=T,h.isObject=function(E){return!!E&&E.constructor===Object},h.validateBBox=function(E){if(!E)throw new Error("bbox is required");if(!Array.isArray(E))throw new Error("bbox must be an Array");if(E.length!==4&&E.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");E.forEach(function(C){if(!T(C))throw new Error("bbox must only contain numbers")})},h.validateId=function(E){if(!E)throw new Error("id is required");if(["string","number"].indexOf(typeof E)===-1)throw new Error("id must be a number or a string")}},1540:(u,h,o)=>{Object.defineProperty(h,"__esModule",{value:!0});var c=o(4102);function d(R,O,T){if(R!==null)for(var E,C,S,f,x,D,F,q,H=0,J=0,$=R.type,X=$==="FeatureCollection",Z=$==="Feature",lt=X?R.features.length:1,W=0;W<lt;W++){x=(q=!!(F=X?R.features[W].geometry:Z?R.geometry:R)&&F.type==="GeometryCollection")?F.geometries.length:1;for(var ot=0;ot<x;ot++){var ft=0,ht=0;if((f=q?F.geometries[ot]:F)!==null){D=f.coordinates;var mt=f.type;switch(H=!T||mt!=="Polygon"&&mt!=="MultiPolygon"?0:1,mt){case null:break;case"Point":if(O(D,J,W,ft,ht)===!1)return!1;J++,ft++;break;case"LineString":case"MultiPoint":for(E=0;E<D.length;E++){if(O(D[E],J,W,ft,ht)===!1)return!1;J++,mt==="MultiPoint"&&ft++}mt==="LineString"&&ft++;break;case"Polygon":case"MultiLineString":for(E=0;E<D.length;E++){for(C=0;C<D[E].length-H;C++){if(O(D[E][C],J,W,ft,ht)===!1)return!1;J++}mt==="MultiLineString"&&ft++,mt==="Polygon"&&ht++}mt==="Polygon"&&ft++;break;case"MultiPolygon":for(E=0;E<D.length;E++){for(ht=0,C=0;C<D[E].length;C++){for(S=0;S<D[E][C].length-H;S++){if(O(D[E][C][S],J,W,ft,ht)===!1)return!1;J++}ht++}ft++}break;case"GeometryCollection":for(E=0;E<f.geometries.length;E++)if(d(f.geometries[E],O,T)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function M(R,O){var T;switch(R.type){case"FeatureCollection":for(T=0;T<R.features.length&&O(R.features[T].properties,T)!==!1;T++);break;case"Feature":O(R.properties,0)}}function m(R,O){if(R.type==="Feature")O(R,0);else if(R.type==="FeatureCollection")for(var T=0;T<R.features.length&&O(R.features[T],T)!==!1;T++);}function P(R,O){var T,E,C,S,f,x,D,F,q,H,J=0,$=R.type==="FeatureCollection",X=R.type==="Feature",Z=$?R.features.length:1;for(T=0;T<Z;T++){for(x=$?R.features[T].geometry:X?R.geometry:R,F=$?R.features[T].properties:X?R.properties:{},q=$?R.features[T].bbox:X?R.bbox:void 0,H=$?R.features[T].id:X?R.id:void 0,f=(D=!!x&&x.type==="GeometryCollection")?x.geometries.length:1,C=0;C<f;C++)if((S=D?x.geometries[C]:x)!==null)switch(S.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(O(S,J,F,q,H)===!1)return!1;break;case"GeometryCollection":for(E=0;E<S.geometries.length;E++)if(O(S.geometries[E],J,F,q,H)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(O(null,J,F,q,H)===!1)return!1;J++}}function I(R,O){P(R,function(T,E,C,S,f){var x,D=T===null?null:T.type;switch(D){case null:case"Point":case"LineString":case"Polygon":return O(c.feature(T,C,{bbox:S,id:f}),E,0)!==!1&&void 0}switch(D){case"MultiPoint":x="Point";break;case"MultiLineString":x="LineString";break;case"MultiPolygon":x="Polygon"}for(var F=0;F<T.coordinates.length;F++){var q={type:x,coordinates:T.coordinates[F]};if(O(c.feature(q,C),E,F)===!1)return!1}})}function N(R,O){I(R,function(T,E,C){var S=0;if(T.geometry){var f=T.geometry.type;if(f!=="Point"&&f!=="MultiPoint"){var x,D=0,F=0,q=0;return d(T,function(H,J,$,X,Z){if(x===void 0||E>D||X>F||Z>q)return x=H,D=E,F=X,q=Z,void(S=0);var lt=c.lineString([x,H],T.properties);if(O(lt,E,C,Z,S)===!1)return!1;S++,x=H})!==!1&&void 0}}})}function V(R,O){if(!R)throw new Error("geojson is required");I(R,function(T,E,C){if(T.geometry!==null){var S=T.geometry.type,f=T.geometry.coordinates;switch(S){case"LineString":if(O(T,E,C,0,0)===!1)return!1;break;case"Polygon":for(var x=0;x<f.length;x++)if(O(c.lineString(f[x],T.properties),E,C,x)===!1)return!1}}})}h.coordAll=function(R){var O=[];return d(R,function(T){O.push(T)}),O},h.coordEach=d,h.coordReduce=function(R,O,T,E){var C=T;return d(R,function(S,f,x,D,F){C=f===0&&T===void 0?S:O(C,S,f,x,D,F)},E),C},h.featureEach=m,h.featureReduce=function(R,O,T){var E=T;return m(R,function(C,S){E=S===0&&T===void 0?C:O(E,C,S)}),E},h.findPoint=function(R,O){if(O=O||{},!c.isObject(O))throw new Error("options is invalid");var T,E=O.featureIndex||0,C=O.multiFeatureIndex||0,S=O.geometryIndex||0,f=O.coordIndex||0,x=O.properties;switch(R.type){case"FeatureCollection":E<0&&(E=R.features.length+E),x=x||R.features[E].properties,T=R.features[E].geometry;break;case"Feature":x=x||R.properties,T=R.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":T=R;break;default:throw new Error("geojson is invalid")}if(T===null)return null;var D=T.coordinates;switch(T.type){case"Point":return c.point(D,x,O);case"MultiPoint":return C<0&&(C=D.length+C),c.point(D[C],x,O);case"LineString":return f<0&&(f=D.length+f),c.point(D[f],x,O);case"Polygon":return S<0&&(S=D.length+S),f<0&&(f=D[S].length+f),c.point(D[S][f],x,O);case"MultiLineString":return C<0&&(C=D.length+C),f<0&&(f=D[C].length+f),c.point(D[C][f],x,O);case"MultiPolygon":return C<0&&(C=D.length+C),S<0&&(S=D[C].length+S),f<0&&(f=D[C][S].length-f),c.point(D[C][S][f],x,O)}throw new Error("geojson is invalid")},h.findSegment=function(R,O){if(O=O||{},!c.isObject(O))throw new Error("options is invalid");var T,E=O.featureIndex||0,C=O.multiFeatureIndex||0,S=O.geometryIndex||0,f=O.segmentIndex||0,x=O.properties;switch(R.type){case"FeatureCollection":E<0&&(E=R.features.length+E),x=x||R.features[E].properties,T=R.features[E].geometry;break;case"Feature":x=x||R.properties,T=R.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":T=R;break;default:throw new Error("geojson is invalid")}if(T===null)return null;var D=T.coordinates;switch(T.type){case"Point":case"MultiPoint":return null;case"LineString":return f<0&&(f=D.length+f-1),c.lineString([D[f],D[f+1]],x,O);case"Polygon":return S<0&&(S=D.length+S),f<0&&(f=D[S].length+f-1),c.lineString([D[S][f],D[S][f+1]],x,O);case"MultiLineString":return C<0&&(C=D.length+C),f<0&&(f=D[C].length+f-1),c.lineString([D[C][f],D[C][f+1]],x,O);case"MultiPolygon":return C<0&&(C=D.length+C),S<0&&(S=D[C].length+S),f<0&&(f=D[C][S].length-f-1),c.lineString([D[C][S][f],D[C][S][f+1]],x,O)}throw new Error("geojson is invalid")},h.flattenEach=I,h.flattenReduce=function(R,O,T){var E=T;return I(R,function(C,S,f){E=S===0&&f===0&&T===void 0?C:O(E,C,S,f)}),E},h.geomEach=P,h.geomReduce=function(R,O,T){var E=T;return P(R,function(C,S,f,x,D){E=S===0&&T===void 0?C:O(E,C,S,f,x,D)}),E},h.lineEach=V,h.lineReduce=function(R,O,T){var E=T;return V(R,function(C,S,f,x){E=S===0&&T===void 0?C:O(E,C,S,f,x)}),E},h.propEach=M,h.propReduce=function(R,O,T){var E=T;return M(R,function(C,S){E=S===0&&T===void 0?C:O(E,C,S)}),E},h.segmentEach=N,h.segmentReduce=function(R,O,T){var E=T,C=!1;return N(R,function(S,f,x,D,F){E=C===!1&&T===void 0?S:O(E,S,f,x,D,F),C=!0}),E}},5975:(u,h,o)=>{o(7107);var c=o(2492),d=o.n(c);const M=JSON.parse('{"tooltips":{"placeMarker":"Click to place marker","firstVertex":"Click to place first vertex","continueLine":"Click to continue drawing","finishLine":"Click any existing marker to finish","finishPoly":"Click first marker to finish","finishRect":"Click to finish","startCircle":"Click to place circle center","finishCircle":"Click to finish circle","placeCircleMarker":"Click to place circle marker","placeText":"Click to place text"},"actions":{"finish":"Finish","cancel":"Cancel","removeLastVertex":"Remove Last Vertex"},"buttonTitles":{"drawMarkerButton":"Draw Marker","drawPolyButton":"Draw Polygons","drawLineButton":"Draw Polyline","drawCircleButton":"Draw Circle","drawRectButton":"Draw Rectangle","editButton":"Edit Layers","dragButton":"Drag Layers","cutButton":"Cut Layers","deleteButton":"Remove Layers","drawCircleMarkerButton":"Draw Circle Marker","snappingButton":"Snap dragged marker to other layers and vertices","pinningButton":"Pin shared vertices together","rotateButton":"Rotate Layers","drawTextButton":"Draw Text","scaleButton":"Scale Layers","autoTracingButton":"Auto trace Line"},"measurements":{"totalLength":"Length","segmentLength":"Segment length","area":"Area","radius":"Radius","perimeter":"Perimeter","height":"Height","width":"Width","coordinates":"Position","coordinatesMarker":"Position Marker"}}'),m=JSON.parse('{"tooltips":{"placeMarker":"Platziere den Marker mit Klick","firstVertex":"Platziere den ersten Marker mit Klick","continueLine":"Klicke, um weiter zu zeichnen","finishLine":"Beende mit Klick auf existierenden Marker","finishPoly":"Beende mit Klick auf ersten Marker","finishRect":"Beende mit Klick","startCircle":"Platziere das Kreiszentrum mit Klick","finishCircle":"Beende den Kreis mit Klick","placeCircleMarker":"Platziere den Kreismarker mit Klick","placeText":"Platziere den Text mit Klick"},"actions":{"finish":"Beenden","cancel":"Abbrechen","removeLastVertex":"Letzten Vertex löschen"},"buttonTitles":{"drawMarkerButton":"Marker zeichnen","drawPolyButton":"Polygon zeichnen","drawLineButton":"Polyline zeichnen","drawCircleButton":"Kreis zeichnen","drawRectButton":"Rechteck zeichnen","editButton":"Layer editieren","dragButton":"Layer bewegen","cutButton":"Layer schneiden","deleteButton":"Layer löschen","drawCircleMarkerButton":"Kreismarker zeichnen","snappingButton":"Bewegter Layer an andere Layer oder Vertexe einhacken","pinningButton":"Vertexe an der gleichen Position verknüpfen","rotateButton":"Layer drehen","drawTextButton":"Text zeichnen","scaleButton":"Layer skalieren","autoTracingButton":"Linie automatisch nachzeichen"},"measurements":{"totalLength":"Länge","segmentLength":"Segment Länge","area":"Fläche","radius":"Radius","perimeter":"Umfang","height":"Höhe","width":"Breite","coordinates":"Position","coordinatesMarker":"Position Marker"}}'),P=JSON.parse(`{"tooltips":{"placeMarker":"Clicca per posizionare un Marker","firstVertex":"Clicca per posizionare il primo vertice","continueLine":"Clicca per continuare a disegnare","finishLine":"Clicca qualsiasi marker esistente per terminare","finishPoly":"Clicca il primo marker per terminare","finishRect":"Clicca per terminare","startCircle":"Clicca per posizionare il punto centrale del cerchio","finishCircle":"Clicca per terminare il cerchio","placeCircleMarker":"Clicca per posizionare un Marker del cherchio"},"actions":{"finish":"Termina","cancel":"Annulla","removeLastVertex":"Rimuovi l'ultimo vertice"},"buttonTitles":{"drawMarkerButton":"Disegna Marker","drawPolyButton":"Disegna Poligoni","drawLineButton":"Disegna Polilinea","drawCircleButton":"Disegna Cerchio","drawRectButton":"Disegna Rettangolo","editButton":"Modifica Livelli","dragButton":"Sposta Livelli","cutButton":"Ritaglia Livelli","deleteButton":"Elimina Livelli","drawCircleMarkerButton":"Disegna Marker del Cerchio","snappingButton":"Snap ha trascinato il pennarello su altri strati e vertici","pinningButton":"Pin condiviso vertici insieme"}}`),I=JSON.parse('{"tooltips":{"placeMarker":"Klik untuk menempatkan marker","firstVertex":"Klik untuk menempatkan vertex pertama","continueLine":"Klik untuk meneruskan digitasi","finishLine":"Klik pada sembarang marker yang ada untuk mengakhiri","finishPoly":"Klik marker pertama untuk mengakhiri","finishRect":"Klik untuk mengakhiri","startCircle":"Klik untuk menempatkan titik pusat lingkaran","finishCircle":"Klik untuk mengakhiri lingkaran","placeCircleMarker":"Klik untuk menempatkan penanda lingkarann"},"actions":{"finish":"Selesai","cancel":"Batal","removeLastVertex":"Hilangkan Vertex Terakhir"},"buttonTitles":{"drawMarkerButton":"Digitasi Marker","drawPolyButton":"Digitasi Polygon","drawLineButton":"Digitasi Polyline","drawCircleButton":"Digitasi Lingkaran","drawRectButton":"Digitasi Segi Empat","editButton":"Edit Layer","dragButton":"Geser Layer","cutButton":"Potong Layer","deleteButton":"Hilangkan Layer","drawCircleMarkerButton":"Digitasi Penanda Lingkaran","snappingButton":"Jepretkan penanda yang ditarik ke lapisan dan simpul lain","pinningButton":"Sematkan simpul bersama bersama"}}'),N=JSON.parse('{"tooltips":{"placeMarker":"Adaugă un punct","firstVertex":"Apasă aici pentru a adăuga primul Vertex","continueLine":"Apasă aici pentru a continua desenul","finishLine":"Apasă pe orice obiect pentru a finisa desenul","finishPoly":"Apasă pe primul obiect pentru a finisa","finishRect":"Apasă pentru a finisa","startCircle":"Apasă pentru a desena un cerc","finishCircle":"Apasă pentru a finisa un cerc","placeCircleMarker":"Adaugă un punct"},"actions":{"finish":"Termină","cancel":"Anulează","removeLastVertex":"Șterge ultimul Vertex"},"buttonTitles":{"drawMarkerButton":"Adaugă o bulină","drawPolyButton":"Desenează un poligon","drawLineButton":"Desenează o linie","drawCircleButton":"Desenează un cerc","drawRectButton":"Desenează un dreptunghi","editButton":"Editează straturile","dragButton":"Mută straturile","cutButton":"Taie straturile","deleteButton":"Șterge straturile","drawCircleMarkerButton":"Desenează marcatorul cercului","snappingButton":"Fixați marcatorul glisat pe alte straturi și vârfuri","pinningButton":"Fixați vârfurile partajate împreună"}}'),V=JSON.parse('{"tooltips":{"placeMarker":"Нажмите, чтобы нанести маркер","firstVertex":"Нажмите, чтобы нанести первый объект","continueLine":"Нажмите, чтобы продолжить рисование","finishLine":"Нажмите любой существующий маркер для завершения","finishPoly":"Выберите первую точку, чтобы закончить","finishRect":"Нажмите, чтобы закончить","startCircle":"Нажмите, чтобы добавить центр круга","finishCircle":"Нажмите, чтобы задать радиус","placeCircleMarker":"Нажмите, чтобы нанести круговой маркер"},"actions":{"finish":"Завершить","cancel":"Отменить","removeLastVertex":"Отменить последнее действие"},"buttonTitles":{"drawMarkerButton":"Добавить маркер","drawPolyButton":"Рисовать полигон","drawLineButton":"Рисовать кривую","drawCircleButton":"Рисовать круг","drawRectButton":"Рисовать прямоугольник","editButton":"Редактировать слой","dragButton":"Перенести слой","cutButton":"Вырезать слой","deleteButton":"Удалить слой","drawCircleMarkerButton":"Добавить круговой маркер","snappingButton":"Привязать перетаскиваемый маркер к другим слоям и вершинам","pinningButton":"Связать общие точки вместе"}}'),R=JSON.parse('{"tooltips":{"placeMarker":"Presiona para colocar un marcador","firstVertex":"Presiona para colocar el primer vértice","continueLine":"Presiona para continuar dibujando","finishLine":"Presiona cualquier marcador existente para finalizar","finishPoly":"Presiona el primer marcador para finalizar","finishRect":"Presiona para finalizar","startCircle":"Presiona para colocar el centro del círculo","finishCircle":"Presiona para finalizar el círculo","placeCircleMarker":"Presiona para colocar un marcador de círculo"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Eliminar último vértice"},"buttonTitles":{"drawMarkerButton":"Dibujar Marcador","drawPolyButton":"Dibujar Polígono","drawLineButton":"Dibujar Línea","drawCircleButton":"Dibujar Círculo","drawRectButton":"Dibujar Rectángulo","editButton":"Editar Capas","dragButton":"Arrastrar Capas","cutButton":"Cortar Capas","deleteButton":"Eliminar Capas","drawCircleMarkerButton":"Dibujar Marcador de Círculo","snappingButton":"El marcador de Snap arrastrado a otras capas y vértices","pinningButton":"Fijar juntos los vértices compartidos"}}'),O=JSON.parse('{"tooltips":{"placeMarker":"Klik om een marker te plaatsen","firstVertex":"Klik om het eerste punt te plaatsen","continueLine":"Klik om te blijven tekenen","finishLine":"Klik op een bestaand punt om te beëindigen","finishPoly":"Klik op het eerst punt om te beëindigen","finishRect":"Klik om te beëindigen","startCircle":"Klik om het middelpunt te plaatsen","finishCircle":"Klik om de cirkel te beëindigen","placeCircleMarker":"Klik om een marker te plaatsen"},"actions":{"finish":"Bewaar","cancel":"Annuleer","removeLastVertex":"Verwijder laatste punt"},"buttonTitles":{"drawMarkerButton":"Plaats Marker","drawPolyButton":"Teken een vlak","drawLineButton":"Teken een lijn","drawCircleButton":"Teken een cirkel","drawRectButton":"Teken een vierkant","editButton":"Bewerk","dragButton":"Verplaats","cutButton":"Knip","deleteButton":"Verwijder","drawCircleMarkerButton":"Plaats Marker","snappingButton":"Snap gesleepte marker naar andere lagen en hoekpunten","pinningButton":"Speld gedeelde hoekpunten samen"}}'),T=JSON.parse(`{"tooltips":{"placeMarker":"Cliquez pour placer un marqueur","firstVertex":"Cliquez pour placer le premier sommet","continueLine":"Cliquez pour continuer à dessiner","finishLine":"Cliquez sur n'importe quel marqueur pour terminer","finishPoly":"Cliquez sur le premier marqueur pour terminer","finishRect":"Cliquez pour terminer","startCircle":"Cliquez pour placer le centre du cercle","finishCircle":"Cliquez pour finir le cercle","placeCircleMarker":"Cliquez pour placer le marqueur circulaire"},"actions":{"finish":"Terminer","cancel":"Annuler","removeLastVertex":"Retirer le dernier sommet"},"buttonTitles":{"drawMarkerButton":"Placer des marqueurs","drawPolyButton":"Dessiner des polygones","drawLineButton":"Dessiner des polylignes","drawCircleButton":"Dessiner un cercle","drawRectButton":"Dessiner un rectangle","editButton":"Éditer des calques","dragButton":"Déplacer des calques","cutButton":"Couper des calques","deleteButton":"Supprimer des calques","drawCircleMarkerButton":"Dessiner un marqueur circulaire","snappingButton":"Glisser le marqueur vers d'autres couches et sommets","pinningButton":"Épingler ensemble les sommets partagés","rotateButton":"Tourner des calques"}}`),E=JSON.parse('{"tooltips":{"placeMarker":"单击放置标记","firstVertex":"单击放置首个顶点","continueLine":"单击继续绘制","finishLine":"单击任何存在的标记以完成","finishPoly":"单击第一个标记以完成","finishRect":"单击完成","startCircle":"单击放置圆心","finishCircle":"单击完成圆形","placeCircleMarker":"点击放置圆形标记"},"actions":{"finish":"完成","cancel":"取消","removeLastVertex":"移除最后的顶点"},"buttonTitles":{"drawMarkerButton":"绘制标记","drawPolyButton":"绘制多边形","drawLineButton":"绘制线段","drawCircleButton":"绘制圆形","drawRectButton":"绘制长方形","editButton":"编辑图层","dragButton":"拖拽图层","cutButton":"剪切图层","deleteButton":"删除图层","drawCircleMarkerButton":"画圆圈标记","snappingButton":"将拖动的标记捕捉到其他图层和顶点","pinningButton":"将共享顶点固定在一起"}}'),C=JSON.parse('{"tooltips":{"placeMarker":"單擊放置標記","firstVertex":"單擊放置第一個頂點","continueLine":"單擊繼續繪製","finishLine":"單擊任何存在的標記以完成","finishPoly":"單擊第一個標記以完成","finishRect":"單擊完成","startCircle":"單擊放置圓心","finishCircle":"單擊完成圓形","placeCircleMarker":"點擊放置圓形標記"},"actions":{"finish":"完成","cancel":"取消","removeLastVertex":"移除最後一個頂點"},"buttonTitles":{"drawMarkerButton":"放置標記","drawPolyButton":"繪製多邊形","drawLineButton":"繪製線段","drawCircleButton":"繪製圓形","drawRectButton":"繪製方形","editButton":"編輯圖形","dragButton":"移動圖形","cutButton":"裁切圖形","deleteButton":"刪除圖形","drawCircleMarkerButton":"畫圓圈標記","snappingButton":"將拖動的標記對齊到其他圖層和頂點","pinningButton":"將共享頂點固定在一起"}}'),S={en:M,de:m,it:P,id:I,ro:N,ru:V,es:R,nl:O,fr:T,pt_br:JSON.parse('{"tooltips":{"placeMarker":"Clique para posicionar o marcador","firstVertex":"Clique para posicionar o primeiro vértice","continueLine":"Clique para continuar desenhando","finishLine":"Clique em qualquer marcador existente para finalizar","finishPoly":"Clique no primeiro ponto para fechar o polígono","finishRect":"Clique para finalizar","startCircle":"Clique para posicionar o centro do círculo","finishCircle":"Clique para fechar o círculo","placeCircleMarker":"Clique para posicionar o marcador circular"},"actions":{"finish":"Finalizar","cancel":"Cancelar","removeLastVertex":"Remover último vértice"},"buttonTitles":{"drawMarkerButton":"Desenhar um marcador","drawPolyButton":"Desenhar um polígono","drawLineButton":"Desenhar uma polilinha","drawCircleButton":"Desenhar um círculo","drawRectButton":"Desenhar um retângulo","editButton":"Editar camada(s)","dragButton":"Mover camada(s)","cutButton":"Recortar camada(s)","deleteButton":"Remover camada(s)","drawCircleMarkerButton":"Marcador de círculos de desenho","snappingButton":"Marcador arrastado para outras camadas e vértices","pinningButton":"Vértices compartilhados de pinos juntos"}}'),zh:E,zh_tw:C,pl:JSON.parse('{"tooltips":{"placeMarker":"Kliknij, aby ustawić znacznik","firstVertex":"Kliknij, aby ustawić pierwszy punkt","continueLine":"Kliknij, aby kontynuować rysowanie","finishLine":"Kliknij dowolny punkt, aby zakończyć","finishPoly":"Kliknij pierwszy punkt, aby zakończyć","finishRect":"Kliknij, aby zakończyć","startCircle":"Kliknij, aby ustawić środek koła","finishCircle":"Kliknij, aby zakończyć rysowanie koła","placeCircleMarker":"Kliknij, aby ustawić okrągły znacznik"},"actions":{"finish":"Zakończ","cancel":"Anuluj","removeLastVertex":"Usuń ostatni punkt"},"buttonTitles":{"drawMarkerButton":"Narysuj znacznik","drawPolyButton":"Narysuj wielokąt","drawLineButton":"Narysuj ścieżkę","drawCircleButton":"Narysuj koło","drawRectButton":"Narysuj prostokąt","editButton":"Edytuj","dragButton":"Przesuń","cutButton":"Wytnij","deleteButton":"Usuń","drawCircleMarkerButton":"Narysuj okrągły znacznik","snappingButton":"Snap przeciągnięty marker na inne warstwy i wierzchołki","pinningButton":"Sworzeń wspólne wierzchołki razem"}}'),sv:JSON.parse('{"tooltips":{"placeMarker":"Klicka för att placera markör","firstVertex":"Klicka för att placera första hörnet","continueLine":"Klicka för att fortsätta rita","finishLine":"Klicka på en existerande punkt för att slutföra","finishPoly":"Klicka på den första punkten för att slutföra","finishRect":"Klicka för att slutföra","startCircle":"Klicka för att placera cirkelns centrum","finishCircle":"Klicka för att slutföra cirkeln","placeCircleMarker":"Klicka för att placera cirkelmarkör"},"actions":{"finish":"Slutför","cancel":"Avbryt","removeLastVertex":"Ta bort sista hörnet"},"buttonTitles":{"drawMarkerButton":"Rita Markör","drawPolyButton":"Rita Polygoner","drawLineButton":"Rita Linje","drawCircleButton":"Rita Cirkel","drawRectButton":"Rita Rektangel","editButton":"Redigera Lager","dragButton":"Dra Lager","cutButton":"Klipp i Lager","deleteButton":"Ta bort Lager","drawCircleMarkerButton":"Rita Cirkelmarkör","snappingButton":"Snäpp dra markören till andra lager och hörn","pinningButton":"Fäst delade hörn tillsammans"}}'),el:JSON.parse('{"tooltips":{"placeMarker":"Κάντε κλικ για να τοποθετήσετε Δείκτη","firstVertex":"Κάντε κλικ για να τοποθετήσετε το πρώτο σημείο","continueLine":"Κάντε κλικ για να συνεχίσετε να σχεδιάζετε","finishLine":"Κάντε κλικ σε οποιονδήποτε υπάρχον σημείο για να ολοκληρωθεί","finishPoly":"Κάντε κλικ στο πρώτο σημείο για να τελειώσετε","finishRect":"Κάντε κλικ για να τελειώσετε","startCircle":"Κάντε κλικ για να τοποθετήσετε κέντρο Κύκλου","finishCircle":"Κάντε κλικ για να ολοκληρώσετε τον Κύκλο","placeCircleMarker":"Κάντε κλικ για να τοποθετήσετε Κυκλικό Δείκτη"},"actions":{"finish":"Τέλος","cancel":"Ακύρωση","removeLastVertex":"Κατάργηση τελευταίου σημείου"},"buttonTitles":{"drawMarkerButton":"Σχεδίαση Δείκτη","drawPolyButton":"Σχεδίαση Πολυγώνου","drawLineButton":"Σχεδίαση Γραμμής","drawCircleButton":"Σχεδίαση Κύκλου","drawRectButton":"Σχεδίαση Ορθογωνίου","editButton":"Επεξεργασία Επιπέδων","dragButton":"Μεταφορά Επιπέδων","cutButton":"Αποκοπή Επιπέδων","deleteButton":"Κατάργηση Επιπέδων","drawCircleMarkerButton":"Σχεδίαση Κυκλικού Δείκτη","snappingButton":"Προσκόλληση του Δείκτη μεταφοράς σε άλλα Επίπεδα και Κορυφές","pinningButton":"Περικοπή κοινών κορυφών μαζί"}}'),hu:JSON.parse('{"tooltips":{"placeMarker":"Kattintson a jelölő elhelyezéséhez","firstVertex":"Kattintson az első pont elhelyezéséhez","continueLine":"Kattintson a következő pont elhelyezéséhez","finishLine":"A befejezéshez kattintson egy meglévő pontra","finishPoly":"A befejezéshez kattintson az első pontra","finishRect":"Kattintson a befejezéshez","startCircle":"Kattintson a kör középpontjának elhelyezéséhez","finishCircle":"Kattintson a kör befejezéséhez","placeCircleMarker":"Kattintson a körjelölő elhelyezéséhez"},"actions":{"finish":"Befejezés","cancel":"Mégse","removeLastVertex":"Utolsó pont eltávolítása"},"buttonTitles":{"drawMarkerButton":"Jelölő rajzolása","drawPolyButton":"Poligon rajzolása","drawLineButton":"Vonal rajzolása","drawCircleButton":"Kör rajzolása","drawRectButton":"Négyzet rajzolása","editButton":"Elemek szerkesztése","dragButton":"Elemek mozgatása","cutButton":"Elemek vágása","deleteButton":"Elemek törlése","drawCircleMarkerButton":"Kör jelölő rajzolása","snappingButton":"Kapcsolja a jelöltőt másik elemhez vagy ponthoz","pinningButton":"Közös pontok összekötése"}}'),da:JSON.parse('{"tooltips":{"placeMarker":"Tryk for at placere en markør","firstVertex":"Tryk for at placere det første punkt","continueLine":"Tryk for at fortsætte linjen","finishLine":"Tryk på et eksisterende punkt for at afslutte","finishPoly":"Tryk på det første punkt for at afslutte","finishRect":"Tryk for at afslutte","startCircle":"Tryk for at placere cirklens center","finishCircle":"Tryk for at afslutte cirklen","placeCircleMarker":"Tryk for at placere en cirkelmarkør"},"actions":{"finish":"Afslut","cancel":"Afbryd","removeLastVertex":"Fjern sidste punkt"},"buttonTitles":{"drawMarkerButton":"Placer markør","drawPolyButton":"Tegn polygon","drawLineButton":"Tegn linje","drawCircleButton":"Tegn cirkel","drawRectButton":"Tegn firkant","editButton":"Rediger","dragButton":"Træk","cutButton":"Klip","deleteButton":"Fjern","drawCircleMarkerButton":"Tegn cirkelmarkør","snappingButton":"Fastgør trukket markør til andre elementer","pinningButton":"Sammenlæg delte elementer"}}'),no:JSON.parse('{"tooltips":{"placeMarker":"Klikk for å plassere punkt","firstVertex":"Klikk for å plassere første punkt","continueLine":"Klikk for å tegne videre","finishLine":"Klikk på et eksisterende punkt for å fullføre","finishPoly":"Klikk første punkt for å fullføre","finishRect":"Klikk for å fullføre","startCircle":"Klikk for å sette sirkel midtpunkt","finishCircle":"Klikk for å fullføre sirkel","placeCircleMarker":"Klikk for å plassere sirkel"},"actions":{"finish":"Fullfør","cancel":"Kanseller","removeLastVertex":"Fjern forrige punkt"},"buttonTitles":{"drawMarkerButton":"Tegn Punkt","drawPolyButton":"Tegn Flate","drawLineButton":"Tegn Linje","drawCircleButton":"Tegn Sirkel","drawRectButton":"Tegn rektangel","editButton":"Rediger Objekter","dragButton":"Dra Objekter","cutButton":"Kutt Objekter","deleteButton":"Fjern Objekter","drawCircleMarkerButton":"Tegn sirkel-punkt","snappingButton":"Fest dratt punkt til andre objekter og punkt","pinningButton":"Pin delte punkt sammen"}}'),fa:JSON.parse('{"tooltips":{"placeMarker":"کلیک برای جانمایی نشان","firstVertex":"کلیک برای رسم اولین رأس","continueLine":"کلیک برای ادامه رسم","finishLine":"کلیک روی هر نشان موجود برای پایان","finishPoly":"کلیک روی اولین نشان برای پایان","finishRect":"کلیک برای پایان","startCircle":"کلیک برای رسم مرکز دایره","finishCircle":"کلیک برای پایان رسم دایره","placeCircleMarker":"کلیک برای رسم نشان دایره","placeText":"کلیک برای نوشتن متن"},"actions":{"finish":"پایان","cancel":"لفو","removeLastVertex":"حذف آخرین رأس"},"buttonTitles":{"drawMarkerButton":"درج نشان","drawPolyButton":"رسم چندضلعی","drawLineButton":"رسم خط","drawCircleButton":"رسم دایره","drawRectButton":"رسم چهارضلعی","editButton":"ویرایش لایه‌ها","dragButton":"جابجایی لایه‌ها","cutButton":"برش لایه‌ها","deleteButton":"حذف لایه‌ها","drawCircleMarkerButton":"رسم نشان دایره","snappingButton":"نشانگر را به لایه‌ها و رئوس دیگر بکشید","pinningButton":"رئوس مشترک را با هم پین کنید","rotateButton":"چرخش لایه","drawTextButton":"رسم متن"}}'),ua:JSON.parse(`{"tooltips":{"placeMarker":"Натисніть, щоб нанести маркер","firstVertex":"Натисніть, щоб нанести першу вершину","continueLine":"Натисніть, щоб продовжити малювати","finishLine":"Натисніть будь-який існуючий маркер для завершення","finishPoly":"Виберіть перший маркер, щоб завершити","finishRect":"Натисніть, щоб завершити","startCircle":"Натисніть, щоб додати центр кола","finishCircle":"Натисніть, щоб завершити коло","placeCircleMarker":"Натисніть, щоб нанести круговий маркер"},"actions":{"finish":"Завершити","cancel":"Відмінити","removeLastVertex":"Видалити попередню вершину"},"buttonTitles":{"drawMarkerButton":"Малювати маркер","drawPolyButton":"Малювати полігон","drawLineButton":"Малювати криву","drawCircleButton":"Малювати коло","drawRectButton":"Малювати прямокутник","editButton":"Редагувати шари","dragButton":"Перенести шари","cutButton":"Вирізати шари","deleteButton":"Видалити шари","drawCircleMarkerButton":"Малювати круговий маркер","snappingButton":"Прив’язати перетягнутий маркер до інших шарів та вершин","pinningButton":"Зв'язати спільні вершини разом"}}`),tr:JSON.parse('{"tooltips":{"placeMarker":"İşaretçi yerleştirmek için tıklayın","firstVertex":"İlk tepe noktasını yerleştirmek için tıklayın","continueLine":"Çizime devam etmek için tıklayın","finishLine":"Bitirmek için mevcut herhangi bir işaretçiyi tıklayın","finishPoly":"Bitirmek için ilk işaretçiyi tıklayın","finishRect":"Bitirmek için tıklayın","startCircle":"Daire merkezine yerleştirmek için tıklayın","finishCircle":"Daireyi bitirmek için tıklayın","placeCircleMarker":"Daire işaretçisi yerleştirmek için tıklayın"},"actions":{"finish":"Bitir","cancel":"İptal","removeLastVertex":"Son köşeyi kaldır"},"buttonTitles":{"drawMarkerButton":"Çizim İşaretçisi","drawPolyButton":"Çokgenler çiz","drawLineButton":"Çoklu çizgi çiz","drawCircleButton":"Çember çiz","drawRectButton":"Dikdörtgen çiz","editButton":"Katmanları düzenle","dragButton":"Katmanları sürükle","cutButton":"Katmanları kes","deleteButton":"Katmanları kaldır","drawCircleMarkerButton":"Daire işaretçisi çiz","snappingButton":"Sürüklenen işaretçiyi diğer katmanlara ve köşelere yapıştır","pinningButton":"Paylaşılan köşeleri birbirine sabitle"}}'),cz:JSON.parse('{"tooltips":{"placeMarker":"Kliknutím vytvoříte značku","firstVertex":"Kliknutím vytvoříte první objekt","continueLine":"Kliknutím pokračujte v kreslení","finishLine":"Kliknutí na libovolnou existující značku pro dokončení","finishPoly":"Vyberte první bod pro dokončení","finishRect":"Klikněte pro dokončení","startCircle":"Kliknutím přidejte střed kruhu","finishCircle":"Нажмите, чтобы задать радиус","placeCircleMarker":"Kliknutím nastavte poloměr"},"actions":{"finish":"Dokončit","cancel":"Zrušit","removeLastVertex":"Zrušit poslední akci"},"buttonTitles":{"drawMarkerButton":"Přidat značku","drawPolyButton":"Nakreslit polygon","drawLineButton":"Nakreslit křivku","drawCircleButton":"Nakreslit kruh","drawRectButton":"Nakreslit obdélník","editButton":"Upravit vrstvu","dragButton":"Přeneste vrstvu","cutButton":"Vyjmout vrstvu","deleteButton":"Smazat vrstvu","drawCircleMarkerButton":"Přidat kruhovou značku","snappingButton":"Navázat tažnou značku k dalším vrstvám a vrcholům","pinningButton":"Spojit společné body dohromady"}}'),ja:JSON.parse('{"tooltips":{"placeMarker":"クリックしてマーカーを配置","firstVertex":"クリックして最初の頂点を配置","continueLine":"クリックして描画を続ける","finishLine":"任意のマーカーをクリックして終了","finishPoly":"最初のマーカーをクリックして終了","finishRect":"クリックして終了","startCircle":"クリックして円の中心を配置","finishCircle":"クリックして円の描画を終了","placeCircleMarker":"クリックして円マーカーを配置","placeText":"クリックしてテキストを配置"},"actions":{"finish":"終了","cancel":"キャンセル","removeLastVertex":"最後の頂点を削除"},"buttonTitles":{"drawMarkerButton":"マーカーを描画","drawPolyButton":"ポリゴンを描画","drawLineButton":"折れ線を描画","drawCircleButton":"円を描画","drawRectButton":"矩形を描画","editButton":"レイヤーを編集","dragButton":"レイヤーをドラッグ","cutButton":"レイヤーを切り取り","deleteButton":"レイヤーを削除","drawCircleMarkerButton":"円マーカーを描画","snappingButton":"ドラッグしたマーカーを他のレイヤーや頂点にスナップする","pinningButton":"共有する頂点を同時に動かす","rotateButton":"レイヤーを回転","drawTextButton":"テキストを描画"}}'),fi:JSON.parse('{"tooltips":{"placeMarker":"Klikkaa asettaaksesi merkin","firstVertex":"Klikkaa asettaakseni ensimmäisen osuuden","continueLine":"Klikkaa jatkaaksesi piirtämistä","finishLine":"Klikkaa olemassa olevaa merkkiä lopettaaksesi","finishPoly":"Klikkaa ensimmäistä merkkiä lopettaaksesi","finishRect":"Klikkaa lopettaaksesi","startCircle":"Klikkaa asettaaksesi ympyrän keskipisteen","finishCircle":"Klikkaa lopettaaksesi ympyrän","placeCircleMarker":"Klikkaa asettaaksesi ympyrämerkin","placeText":"Klikkaa asettaaksesi tekstin"},"actions":{"finish":"Valmis","cancel":"Peruuta","removeLastVertex":"Poista viimeinen osuus"},"buttonTitles":{"drawMarkerButton":"Piirrä merkkejä","drawPolyButton":"Piirrä monikulmioita","drawLineButton":"Piirrä viivoja","drawCircleButton":"Piirrä ympyrä","drawRectButton":"Piirrä neliskulmioita","editButton":"Muokkaa","dragButton":"Siirrä","cutButton":"Leikkaa","deleteButton":"Poista","drawCircleMarkerButton":"Piirrä ympyrämerkki","snappingButton":"Kiinnitä siirrettävä merkki toisiin muotoihin","pinningButton":"Kiinnitä jaetut muodot yhteen","rotateButton":"Käännä","drawTextButton":"Piirrä tekstiä"}}'),ko:JSON.parse('{"tooltips":{"placeMarker":"마커 위치를 클릭하세요","firstVertex":"첫번째 꼭지점 위치을 클릭하세요","continueLine":"계속 그리려면 클릭하세요","finishLine":"끝내려면 기존 마커를 클릭하세요","finishPoly":"끝내려면 처음 마커를 클릭하세요","finishRect":"끝내려면 클릭하세요","startCircle":"원의 중심이 될 위치를 클릭하세요","finishCircle":"원을 끝내려면 클릭하세요","placeCircleMarker":"원 마커 위치를 클릭하세요","placeText":"텍스트 위치를 클릭하세요"},"actions":{"finish":"끝내기","cancel":"취소","removeLastVertex":"마지막 꼭지점 제거"},"buttonTitles":{"drawMarkerButton":"마커 그리기","drawPolyButton":"다각형 그리기","drawLineButton":"다각선 그리기","drawCircleButton":"원 그리기","drawRectButton":"직사각형 그리기","editButton":"레이어 편집하기","dragButton":"레이어 끌기","cutButton":"레이어 자르기","deleteButton":"레이어 제거하기","drawCircleMarkerButton":"원 마커 그리기","snappingButton":"잡아끈 마커를 다른 레이어 및 꼭지점에 들러붙게 하기","pinningButton":"공유 꼭지점을 함께 찍기","rotateButton":"레이어 회전하기","drawTextButton":"텍스트 그리기"}}')};function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function x(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?f(Object(n),!0).forEach(function(r){D(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function D(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const F={_globalEditModeEnabled:!1,enableGlobalEditMode:function(t){var e=x({},t);this._globalEditModeEnabled=!0,this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(function(n){n.pm.enable(e)}),this.throttledReInitEdit||(this.throttledReInitEdit=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this)),this._addedLayers={},this.map.on("layeradd",this._layerAdded,this),this.map.on("layeradd",this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode:function(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(function(t){t.pm.disable()}),this.map.off("layeradd",this.throttledReInitEdit,this),this.Toolbar.toggleButton("editMode",this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled:function(){return this.globalEditModeEnabled()},globalEditModeEnabled:function(){return this._globalEditModeEnabled},toggleGlobalEditMode:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.globalOptions;this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(t)},handleLayerAdditionInGlobalEditMode:function(){var t=this._addedLayers;for(var e in this._addedLayers={},t){var n=t[e];this._isRelevantForEdit(n)&&this.globalEditModeEnabled()&&n.pm.enable(x({},this.globalOptions))}},_layerAdded:function(t){var e=t.layer;this._addedLayers[L.stamp(e)]=e},_isRelevantForEdit:function(t){return t.pm&&!(t instanceof L.LayerGroup)&&(!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&t.options.pmIgnore===!1)&&!t._pmTempLayer&&t.pm.options.allowEditing}},q={_globalDragModeEnabled:!1,enableGlobalDragMode:function(){var t=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},t.forEach(function(e){e.pm.enableLayerDrag()}),this.throttledReInitDrag||(this.throttledReInitDrag=L.Util.throttle(this.reinitGlobalDragMode,100,this)),this.map.on("layeradd",this._layerAddedDrag,this),this.map.on("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode:function(){var t=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,t.forEach(function(e){e.pm.disableLayerDrag()}),this.map.off("layeradd",this._layerAddedDrag,this),this.map.off("layeradd",this.throttledReInitDrag,this),this.Toolbar.toggleButton("dragMode",this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled:function(){return!!this._globalDragModeEnabled},toggleGlobalDragMode:function(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode:function(){var t=this._addedLayersDrag;for(var e in this._addedLayersDrag={},t){var n=t[e];this._isRelevantForDrag(n)&&this.globalDragModeEnabled()&&n.pm.enableLayerDrag()}},_layerAddedDrag:function(t){var e=t.layer;this._addedLayersDrag[L.stamp(e)]=e},_isRelevantForDrag:function(t){return t.pm&&!(t instanceof L.LayerGroup)&&(!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&t.options.pmIgnore===!1)&&!t._pmTempLayer&&t.pm.options.draggable}},H={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode:function(){var t=this;this._globalRemovalModeEnabled=!0,this.map.eachLayer(function(e){t._isRelevantForRemoval(e)&&(e.pm.disable(),e.on("click",t.removeLayer,t))}),this.throttledReInitRemoval||(this.throttledReInitRemoval=L.Util.throttle(this.reinitGlobalRemovalMode,100,this)),this.map.on("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode:function(){var t=this;this._globalRemovalModeEnabled=!1,this.map.eachLayer(function(e){e.off("click",t.removeLayer,t)}),this.map.off("layeradd",this.throttledReInitRemoval,this),this.Toolbar.toggleButton("removalMode",this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled:function(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled:function(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode:function(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},reinitGlobalRemovalMode:function(t){var e=t.layer;this._isRelevantForRemoval(e)&&this.globalRemovalModeEnabled()&&(this.disableGlobalRemovalMode(),this.enableGlobalRemovalMode())},removeLayer:function(t){var e=t.target;this._isRelevantForRemoval(e)&&!e.pm.dragging()&&(e.removeFrom(this.map.pm._getContainingLayer()),e.remove(),e instanceof L.LayerGroup?(this._fireRemoveLayerGroup(e),this._fireRemoveLayerGroup(this.map,e)):(e.pm._fireRemove(e),e.pm._fireRemove(this.map,e)))},_isRelevantForRemoval:function(t){return t.pm&&!(t instanceof L.LayerGroup)&&(!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&t.options.pmIgnore===!1)&&!t._pmTempLayer&&t.pm.options.allowRemoval}},J={_globalRotateModeEnabled:!1,enableGlobalRotateMode:function(){var t=this;this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(function(e){return e instanceof L.Polyline}).forEach(function(e){t._isRelevantForRotate(e)&&e.pm.enableRotate()}),this.throttledReInitRotate||(this.throttledReInitRotate=L.Util.throttle(this._reinitGlobalRotateMode,100,this)),this.map.on("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode:function(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(function(t){return t instanceof L.Polyline}).forEach(function(t){t.pm.disableRotate()}),this.map.off("layeradd",this.throttledReInitRotate,this),this.Toolbar.toggleButton("rotateMode",this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled:function(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode:function(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_reinitGlobalRotateMode:function(t){var e=t.layer;this._isRelevantForRotate(e)&&this.globalRotateModeEnabled()&&(this.disableGlobalRotateMode(),this.enableGlobalRotateMode())},_isRelevantForRotate:function(t){return t.pm&&!(t instanceof L.LayerGroup)&&(!L.PM.optIn&&!t.options.pmIgnore||L.PM.optIn&&t.options.pmIgnore===!1)&&!t._pmTempLayer&&t.pm.options.allowRotation}};function $(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function X(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$(Object(n),!0).forEach(function(r){Z(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Z(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var lt={_fireDrawStart:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:drawstart",{shape:this._shape,workingLayer:this._layer},t,e)},_fireDrawEnd:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:drawend",{shape:this._shape},t,e)},_fireCreate:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Draw",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._map,"pm:create",{shape:this._shape,marker:t,layer:t},e,n)},_fireCenterPlaced:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Draw",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t==="Draw"?this._layer:void 0,r=t!=="Draw"?this._layer:void 0;this.__fire(this._layer,"pm:centerplaced",{shape:this._shape,workingLayer:n,layer:r,latlng:this._layer.getLatLng()},t,e)},_fireCut:function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Draw",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(t,"pm:cut",{shape:this._shape,layer:e,originalLayer:n},r,i)},_fireEdit:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this._layer,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(t,"pm:edit",{layer:this._layer,shape:this.getShape()},e,n)},_fireEnable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:enable",{layer:this._layer,shape:this.getShape()},t,e)},_fireDisable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:disable",{layer:this._layer,shape:this.getShape()},t,e)},_fireUpdate:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:update",{layer:this._layer,shape:this.getShape()},t,e)},_fireMarkerDragStart:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:markerdragstart",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:e},n,r)},_fireMarkerDrag:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:markerdrag",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:e},n,r)},_fireMarkerDragEnd:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Edit",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._layer,"pm:markerdragend",{layer:this._layer,markerEvent:t,shape:this.getShape(),indexPath:e,intersectionReset:n},r,i)},_fireDragStart:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragstart",{layer:this._layer,shape:this.getShape()},t,e)},_fireDrag:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:drag",X(X({},t),{},{shape:this.getShape()}),e,n)},_fireDragEnd:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragend",{layer:this._layer,shape:this.getShape()},t,e)},_fireDragEnable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragenable",{layer:this._layer,shape:this.getShape()},t,e)},_fireDragDisable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:dragdisable",{layer:this._layer,shape:this.getShape()},t,e)},_fireRemove:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:remove",{layer:e,shape:this.getShape()},n,r)},_fireVertexAdded:function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Edit",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._layer,"pm:vertexadded",{layer:this._layer,workingLayer:this._layer,marker:t,indexPath:e,latlng:n,shape:this.getShape()},r,i)},_fireVertexRemoved:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:vertexremoved",{layer:this._layer,marker:t,indexPath:e,shape:this.getShape()},n,r)},_fireVertexClick:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:vertexclick",{layer:this._layer,markerEvent:t,indexPath:e,shape:this.getShape()},n,r)},_fireIntersect:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:intersect",{layer:this._layer,intersection:t,shape:this.getShape()},e,n)},_fireLayerReset:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._layer,"pm:layerreset",{layer:this._layer,markerEvent:t,indexPath:e,shape:this.getShape()},n,r)},_fireChange:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:change",{layer:this._layer,latlngs:t,shape:this.getShape()},e,n)},_fireTextChange:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Edit",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this._layer,"pm:textchange",{layer:this._layer,text:t,shape:this.getShape()},e,n)},_fireTextFocus:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:textfocus",{layer:this._layer,shape:this.getShape()},t,e)},_fireTextBlur:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Edit",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._layer,"pm:textblur",{layer:this._layer,shape:this.getShape()},t,e)},_fireSnapDrag:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:snapdrag",e,n,r)},_fireSnap:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:snap",e,n,r)},_fireUnsnap:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Snapping",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:unsnap",e,n,r)},_fireRotationEnable:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Rotation",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:rotateenable",{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},n,r)},_fireRotationDisable:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Rotation",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(t,"pm:rotatedisable",{layer:this._layer,shape:this.getShape()},e,n)},_fireRotationStart:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Rotation",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:rotatestart",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:e},n,r)},_fireRotation:function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:this._rotationLayer,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"Rotation",l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};this.__fire(t,"pm:rotate",{layer:r,helpLayer:this._layer,startAngle:this._startAngle,angle:r.pm.getAngle(),angleDiff:e,oldLatLngs:n,newLatLngs:r.getLatLngs()},i,l)},_fireRotationEnd:function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Rotation",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(t,"pm:rotateend",{layer:this._rotationLayer,helpLayer:this._layer,startAngle:e,angle:this._rotationLayer.pm.getAngle(),originLatLngs:n,newLatLngs:this._rotationLayer.getLatLngs()},r,i)},_fireActionClick:function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Toolbar",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this._map,"pm:actionclick",{text:t.text,action:t,btnName:e,button:n},r,i)},_fireButtonClick:function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Toolbar",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(this._map,"pm:buttonclick",{btnName:t,button:e},n,r)},_fireLangChange:function(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"Global",l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};this.__fire(this.map,"pm:langchange",{oldLang:t,activeLang:e,fallback:n,translations:r},i,l)},_fireGlobalDragModeToggled:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globaldragmodetoggled",{enabled:t,map:this.map},e,n)},_fireGlobalEditModeToggled:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globaleditmodetoggled",{enabled:t,map:this.map},e,n)},_fireGlobalRemovalModeToggled:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Global",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.__fire(this.map,"pm:globalremovalmodetoggled",{enabled:t,map:this.map},e,n)},_fireGlobalCutModeToggled:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:globalcutmodetoggled",{enabled:!!this._enabled,map:this._map},t,e)},_fireGlobalDrawModeToggled:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this._map,"pm:globaldrawmodetoggled",{enabled:this._enabled,shape:this._shape,map:this._map},t,e)},_fireGlobalRotateModeToggled:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Global",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.__fire(this.map,"pm:globalrotatemodetoggled",{enabled:this.globalRotateModeEnabled(),map:this.map},t,e)},_fireRemoveLayerGroup:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"Edit",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};this.__fire(t,"pm:remove",{layer:e,shape:void 0},n,r)},_fireKeyeventEvent:function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"Global",i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};this.__fire(this.map,"pm:keyevent",{event:t,eventType:e,focusOn:n},r,i)},__fire:function(t,e,n,r){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};n=d()(n,i,{source:r}),L.PM.Utils._fireEvent(t,e,n)}};const W=lt,ot={_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener:function(t){this.map=t,L.DomEvent.on(document,"keydown keyup",this._onKeyListener,this),L.DomEvent.on(window,"blur",this._onBlur,this)},_onKeyListener:function(t){var e="document";this.map.getContainer().contains(t.target)&&(e="map");var n={event:t,eventType:t.type,focusOn:e};this._lastEvents[t.type]=n,this._lastEvents.current=n,this.map.pm._fireKeyeventEvent(t,t.type,e)},_onBlur:function(t){t.altKey=!1;var e={event:t,eventType:t.type,focusOn:"document"};this._lastEvents[t.type]=e,this._lastEvents.current=e},getLastKeyEvent:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"current";return this._lastEvents[t]},isShiftKeyPressed:function(){var t;return(t=this._lastEvents.current)===null||t===void 0?void 0:t.event.shiftKey},isAltKeyPressed:function(){var t;return(t=this._lastEvents.current)===null||t===void 0?void 0:t.event.altKey},isCtrlKeyPressed:function(){var t;return(t=this._lastEvents.current)===null||t===void 0?void 0:t.event.ctrlKey},isMetaKeyPressed:function(){var t;return(t=this._lastEvents.current)===null||t===void 0?void 0:t.event.metaKey},getPressedKey:function(){var t;return(t=this._lastEvents.current)===null||t===void 0?void 0:t.event.key}};var ft=o(7361),ht=o.n(ft),mt=o(8721),Et=o.n(mt);function it(t){var e=L.PM.activeLang;return Et()(S,e)||(e="en"),ht()(S[e],t)}function pt(t){for(var e=0;e<t.length;e+=1){var n=t[e];if(Array.isArray(n)){if(pt(n))return!0}else if(n!=null&&n!=="")return!0}return!1}function Xt(t){return t.reduce(function(e,n){if(n.length!==0){var r=Array.isArray(n)?Xt(n):n;Array.isArray(r)?r.length!==0&&e.push(r):e.push(r)}return e},[])}function Zt(t,e,n){for(var r,i,l,g=6378137,y=63567523142e-4,_=.0033528106647474805,k=t.lng,B=t.lat,A=n,j=Math.PI,U=e*j/180,Y=Math.sin(U),tt=Math.cos(U),nt=(1-_)*Math.tan(B*j/180),ct=1/Math.sqrt(1+nt*nt),_t=nt*ct,ut=Math.atan2(nt,tt),Mt=ct*Y,Tt=1-Mt*Mt,Vt=Tt*(g*g-y*y)/(y*y),Qe=1+Vt/16384*(4096+Vt*(Vt*(320-175*Vt)-768)),Be=Vt/1024*(256+Vt*(Vt*(74-47*Vt)-128)),Jt=A/(y*Qe),tn=2*Math.PI;Math.abs(Jt-tn)>1e-12;)r=Math.cos(2*ut+Jt),tn=Jt,Jt=A/(y*Qe)+Be*(i=Math.sin(Jt))*(r+Be/4*((l=Math.cos(Jt))*(2*r*r-1)-Be/6*r*(4*i*i-3)*(4*r*r-3)));var en=_t*i-ct*l*tt,En=Math.atan2(_t*l+ct*i*tt,(1-_)*Math.sqrt(Mt*Mt+en*en)),Re=_/16*Tt*(4+_*(4-3*Tt)),Sn=k+180*(Math.atan2(i*Y,ct*l-_t*i*tt)-(1-Re)*_*Mt*(Jt+Re*i*(r+Re*l*(2*r*r-1))))/j,On=180*En/j;return L.latLng(Sn,On)}function te(t,e,n,r){for(var i,l,g=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],y=[],_=0;_<n;_+=1){if(g)i=Zt(t,360*_/n+r,e),l=L.latLng(i.lng,i.lat);else{var k=t.lat+Math.cos(2*_*Math.PI/n)*e,B=t.lng+Math.sin(2*_*Math.PI/n)*e;l=L.latLng(k,B)}y.push(l)}return y}function jt(t,e,n,r){var i=function(l,g,y){var _=l.latLngToContainerPoint(g),k=l.latLngToContainerPoint(y),B=180*Math.atan2(k.y-_.y,k.x-_.x)/Math.PI+90;return B+(B<0?360:0)}(t,e,n);return function(l,g,y){g=(g+360)%360;var _=Math.PI/180,k=180/Math.PI,B=6378137,A=l.lng*_,j=l.lat*_,U=g*_,Y=Math.sin(j),tt=Math.cos(j),nt=Math.cos(y/B),ct=Math.sin(y/B),_t=Math.asin(Y*nt+tt*ct*Math.cos(U)),ut=A+Math.atan2(Math.sin(U)*ct*tt,nt-Y*Math.sin(_t));return ut=(ut*=k)>180?ut-360:ut<-180?ut+360:ut,L.latLng([_t*k,ut])}(e,i,r)}function oe(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"asc";if(!e||Object.keys(e).length===0)return function(_,k){return _-k};for(var r,i=Object.keys(e),l=i.length-1,g={};l>=0;)r=i[l],g[r.toLowerCase()]=e[r],l-=1;function y(_){return _ instanceof L.Marker?"Marker":_ instanceof L.Circle?"Circle":_ instanceof L.CircleMarker?"CircleMarker":_ instanceof L.Rectangle?"Rectangle":_ instanceof L.Polygon?"Polygon":_ instanceof L.Polyline?"Line":void 0}return function(_,k){var B,A;if(t==="instanceofShape"){if(B=y(_.layer).toLowerCase(),A=y(k.layer).toLowerCase(),!B||!A)return 0}else{if(!_.hasOwnProperty(t)||!k.hasOwnProperty(t))return 0;B=_[t].toLowerCase(),A=k[t].toLowerCase()}var j=B in g?g[B]:Number.MAX_SAFE_INTEGER,U=A in g?g[A]:Number.MAX_SAFE_INTEGER,Y=0;return j<U?Y=-1:j>U&&(Y=1),n==="desc"?-1*Y:Y}}function At(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.getLatLngs();return t instanceof L.Polygon?L.polygon(e).getLatLngs():L.polyline(e).getLatLngs()}function ee(t,e){var n,r;if((n=e.options.crs)!==null&&n!==void 0&&(r=n.projection)!==null&&r!==void 0&&r.MAX_LATITUDE){var i,l,g=(i=e.options.crs)===null||i===void 0||(l=i.projection)===null||l===void 0?void 0:l.MAX_LATITUDE;t.lat=Math.max(Math.min(g,t.lat),-g)}return t}function Ft(t){return t.options.renderer||t._map&&(t._map._getPaneRenderer(t.options.pane)||t._map.options.renderer||t._map._renderer)||t._renderer}const _e=L.Class.extend({includes:[F,q,H,J,W],initialize:function(t){this.map=t,this.Draw=new L.PM.Draw(t),this.Toolbar=new L.PM.Toolbar(t),this.Keyboard=ot,this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],panes:{vertexPane:"markerPane",layerPane:"overlayPane",markerPane:"markerPane"},draggable:!0},this.Keyboard._initKeyListener(t)},setLang:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"en",e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"en",r=L.PM.activeLang;e&&(S[t]=d()(S[n],e)),L.PM.activeLang=t,this.map.pm.Toolbar.reinit(),this._fireLangChange(r,t,n,S[t])},addControls:function(t){this.Toolbar.addControls(t)},removeControls:function(){this.Toolbar.removeControls()},toggleControls:function(){this.Toolbar.toggleControls()},controlsVisible:function(){return this.Toolbar.isVisible},enableDraw:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Polygon",e=arguments.length>1?arguments[1]:void 0;t==="Poly"&&(t="Polygon"),this.Draw.enable(t,e)},disableDraw:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Polygon";t==="Poly"&&(t="Polygon"),this.Draw.disable(t)},setPathOptions:function(t){var e=this,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.ignoreShapes||[],i=n.merge||!1;this.map.pm.Draw.shapes.forEach(function(l){r.indexOf(l)===-1&&e.map.pm.Draw[l].setPathOptions(t,i)})},getGlobalOptions:function(){return this.globalOptions},setGlobalOptions:function(t){var e=this,n=d()(this.globalOptions,t),r=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.editable!=!!n.editable&&(this.map.pm.Draw.CircleMarker.disable(),r=!0),this.map.pm.Draw.shapes.forEach(function(i){e.map.pm.Draw[i].setOptions(n)}),r&&this.map.pm.Draw.CircleMarker.enable(),L.PM.Utils.findLayers(this.map).forEach(function(i){i.pm.setOptions(n)}),this.map.fire("pm:globaloptionschanged"),this.globalOptions=n,this.applyGlobalOptions()},applyGlobalOptions:function(){L.PM.Utils.findLayers(this.map).forEach(function(t){t.pm.enabled()&&t.pm.applyOptions()})},globalDrawModeEnabled:function(){return!!this.Draw.getActiveShape()},globalCutModeEnabled:function(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode:function(t){return this.Draw.Cut.enable(t)},toggleGlobalCutMode:function(t){return this.Draw.Cut.toggle(t)},disableGlobalCutMode:function(){return this.Draw.Cut.disable()},getGeomanLayers:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=L.PM.Utils.findLayers(this.map);if(!t)return e;var n=L.featureGroup();return n._pmTempLayer=!0,e.forEach(function(r){n.addLayer(r)}),n},getGeomanDrawLayers:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=L.PM.Utils.findLayers(this.map).filter(function(r){return r._drawnByGeoman===!0});if(!t)return e;var n=L.featureGroup();return n._pmTempLayer=!0,e.forEach(function(r){n.addLayer(r)}),n},_getContainingLayer:function(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple:function(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents:function(t){this._touchEventCounter===0&&(L.DomEvent.on(t,"touchmove",this._canvasTouchMove,this),L.DomEvent.on(t,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents:function(t){this._touchEventCounter===1&&(L.DomEvent.off(t,"touchmove",this._canvasTouchMove,this),L.DomEvent.off(t,"touchstart touchend touchcancel",this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove:function(t){Ft(this.map)._onMouseMove(this._createMouseEvent("mousemove",t))},_canvasTouchClick:function(t){var e="";t.type==="touchstart"||t.type==="pointerdown"?e="mousedown":t.type==="touchend"||t.type==="pointerup"?e="mouseup":t.type!=="touchcancel"&&t.type!=="pointercancel"||(e="mouseup"),e&&Ft(this.map)._onClick(this._createMouseEvent(e,t))},_createMouseEvent:function(t,e){var n,r=e.touches[0]||e.changedTouches[0];try{n=new MouseEvent(t,{bubbles:e.bubbles,cancelable:e.cancelable,view:e.view,detail:r.detail,screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,button:e.button,relatedTarget:e.relatedTarget})}catch{(n=document.createEvent("MouseEvents")).initMouseEvent(t,e.bubbles,e.cancelable,e.view,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget)}return n}}),se=L.Control.extend({includes:[W],options:{position:"topleft",disableByOtherButtons:!0},initialize:function(t){this._button=L.Util.extend({},this.options,t)},onAdd:function(t){return this._map=t,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool==="edit"?this._container=this._map.pm.Toolbar.editContainer:this._button.tool==="options"?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool==="custom"?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this.buttonsDomNode=this._makeButton(this._button),this._container.appendChild(this.buttonsDomNode),this._container},onRemove:function(){return this.buttonsDomNode.remove(),this._container},getText:function(){return this._button.text},getIconUrl:function(){return this._button.iconUrl},destroy:function(){this._button={},this._update()},toggle:function(t){return this._button.toggleStatus=typeof t=="boolean"?t:!this._button.toggleStatus,this._applyStyleClasses(),this._button.toggleStatus},toggled:function(){return this._button.toggleStatus},onCreate:function(){this.toggle(!1)},disable:function(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable:function(){this._button.disabled=!1,this._updateDisabled()},_triggerClick:function(t){t&&t.preventDefault(),this._button.disabled||(this._button.onClick(t,{button:this,event:t}),this._clicked(t),this._button.afterClick(t,{button:this,event:t}))},_makeButton:function(t){var e=this,n=this.options.position.indexOf("right")>-1?"pos-right":"",r=L.DomUtil.create("div","button-container  ".concat(n),this._container);t.title&&r.setAttribute("title",t.title);var i=L.DomUtil.create("a","leaflet-buttons-control-button",r);i.setAttribute("role","button"),i.setAttribute("tabindex","0"),i.href="#";var l=L.DomUtil.create("div","leaflet-pm-actions-container ".concat(n),r),g=t.actions,y={cancel:{text:it("actions.cancel"),onClick:function(){this._triggerClick()}},finishMode:{text:it("actions.finish"),onClick:function(){this._triggerClick()}},removeLastVertex:{text:it("actions.removeLastVertex"),onClick:function(){this._map.pm.Draw[t.jsClass]._removeLastVertex()}},finish:{text:it("actions.finish"),onClick:function(k){this._map.pm.Draw[t.jsClass]._finishShape(k)}}};g.forEach(function(k){var B,A=typeof k=="string"?k:k.name;if(y[A])B=y[A];else{if(!k.text)return;B=k}var j=L.DomUtil.create("a","leaflet-pm-action ".concat(n," action-").concat(A),l);j.setAttribute("role","button"),j.setAttribute("tabindex","0"),j.href="#",j.innerHTML=B.text,L.DomEvent.disableClickPropagation(j),L.DomEvent.on(j,"click",L.DomEvent.stop),!t.disabled&&B.onClick&&(L.DomEvent.addListener(j,"click",function(U){U.preventDefault();var Y="",tt=e._map.pm.Toolbar.buttons;for(var nt in tt)if(tt[nt]._button===t){Y=nt;break}e._fireActionClick(B,Y,t)},e),L.DomEvent.addListener(j,"click",B.onClick,e))}),t.toggleStatus&&L.DomUtil.addClass(r,"active");var _=L.DomUtil.create("div","control-icon",i);return t.iconUrl&&_.setAttribute("src",t.iconUrl),t.className&&L.DomUtil.addClass(_,t.className),L.DomEvent.disableClickPropagation(i),L.DomEvent.on(i,"click",L.DomEvent.stop),t.disabled||(L.DomEvent.addListener(i,"click",this._onBtnClick,this),L.DomEvent.addListener(i,"click",this._triggerClick,this)),t.disabled&&(L.DomUtil.addClass(i,"pm-disabled"),i.setAttribute("aria-disabled","true")),r},_applyStyleClasses:function(){this._container&&(this._button.toggleStatus&&this._button.cssToggle!==!1?(L.DomUtil.addClass(this.buttonsDomNode,"active"),L.DomUtil.addClass(this._container,"activeChild")):(L.DomUtil.removeClass(this.buttonsDomNode,"active"),L.DomUtil.removeClass(this._container,"activeChild")))},_onBtnClick:function(){this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);var t="",e=this._map.pm.Toolbar.buttons;for(var n in e)if(e[n]._button===this._button){t=n;break}this._fireButtonClick(t,this._button)},_clicked:function(){this._button.doToggle&&this.toggle()},_updateDisabled:function(){if(this._container){var t="pm-disabled",e=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(e,t),e.setAttribute("aria-disabled","true"),L.DomEvent.off(e,"click",this._triggerClick,this),L.DomEvent.off(e,"click",this._onBtnClick,this)):(L.DomUtil.removeClass(e,t),e.setAttribute("aria-disabled","false"),L.DomEvent.on(e,"click",this._triggerClick,this),L.DomEvent.on(e,"click",this._onBtnClick,this))}}});function le(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function St(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?le(Object(n),!0).forEach(function(r){ye(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ye(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ne(t){return ne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(t)}L.Control.PMButton=se;const ve=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:"topleft",positions:{draw:"",edit:"",options:"",custom:""}},customButtons:[],initialize:function(t){this.init(t)},reinit:function(){var t=this.isVisible;this.removeControls(),this._defineButtons(),t&&this.addControls()},init:function(t){this.map=t,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control"),this.editContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control"),this.optionsContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control"),this.customContainer=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control"),this._defineButtons()},_createContainer:function(t){var e="".concat(t,"Container");return this[e]||(this[e]=L.DomUtil.create("div","leaflet-pm-toolbar leaflet-pm-".concat(t," leaflet-bar leaflet-control"))),this[e]},getButtons:function(){return this.buttons},addControls:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options;typeof t.editPolygon<"u"&&(t.editMode=t.editPolygon),typeof t.deleteLayer<"u"&&(t.removalMode=t.deleteLayer),L.Util.setOptions(this,t),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle:function(){var t=this.getButtons(),e={geomanIcons:{drawMarker:"control-icon leaflet-pm-icon-marker",drawPolyline:"control-icon leaflet-pm-icon-polyline",drawRectangle:"control-icon leaflet-pm-icon-rectangle",drawPolygon:"control-icon leaflet-pm-icon-polygon",drawCircle:"control-icon leaflet-pm-icon-circle",drawCircleMarker:"control-icon leaflet-pm-icon-circle-marker",editMode:"control-icon leaflet-pm-icon-edit",dragMode:"control-icon leaflet-pm-icon-drag",cutPolygon:"control-icon leaflet-pm-icon-cut",removalMode:"control-icon leaflet-pm-icon-delete",drawText:"control-icon leaflet-pm-icon-text"}};for(var n in t){var r=t[n];L.Util.setOptions(r,{className:e.geomanIcons[n]})}},removeControls:function(){var t=this.getButtons();for(var e in t)t[e].remove();this.isVisible=!1},toggleControls:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.options;this.isVisible?this.removeControls():this.addControls(t)},_addButton:function(t,e){return this.buttons[t]=e,this.options[t]=this.options[t]||!1,this.buttons[t]},triggerClickOnToggledButtons:function(t){for(var e in this.buttons){var n=this.buttons[e];n._button.disableByOtherButtons&&n!==t&&n.toggled()&&n._triggerClick()}},toggleButton:function(t,e){var n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];return t==="editPolygon"&&(t="editMode"),t==="deleteLayer"&&(t="removalMode"),n&&this.triggerClickOnToggledButtons(this.buttons[t]),!!this.buttons[t]&&this.buttons[t].toggle(e)},_defineButtons:function(){var t=this,e={className:"control-icon leaflet-pm-icon-marker",title:it("buttonTitles.drawMarkerButton"),jsClass:"Marker",onClick:function(){},afterClick:function(U,Y){t.map.pm.Draw[Y.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},n={title:it("buttonTitles.drawPolyButton"),className:"control-icon leaflet-pm-icon-polygon",jsClass:"Polygon",onClick:function(){},afterClick:function(U,Y){t.map.pm.Draw[Y.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},r={className:"control-icon leaflet-pm-icon-polyline",title:it("buttonTitles.drawLineButton"),jsClass:"Line",onClick:function(){},afterClick:function(U,Y){t.map.pm.Draw[Y.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["finish","removeLastVertex","cancel"]},i={title:it("buttonTitles.drawCircleButton"),className:"control-icon leaflet-pm-icon-circle",jsClass:"Circle",onClick:function(){},afterClick:function(U,Y){t.map.pm.Draw[Y.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},l={title:it("buttonTitles.drawCircleMarkerButton"),className:"control-icon leaflet-pm-icon-circle-marker",jsClass:"CircleMarker",onClick:function(){},afterClick:function(U,Y){t.map.pm.Draw[Y.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},g={title:it("buttonTitles.drawRectButton"),className:"control-icon leaflet-pm-icon-rectangle",jsClass:"Rectangle",onClick:function(){},afterClick:function(U,Y){t.map.pm.Draw[Y.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]},y={title:it("buttonTitles.editButton"),className:"control-icon leaflet-pm-icon-edit",onClick:function(){},afterClick:function(){t.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},_={title:it("buttonTitles.dragButton"),className:"control-icon leaflet-pm-icon-drag",onClick:function(){},afterClick:function(){t.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},k={title:it("buttonTitles.cutButton"),className:"control-icon leaflet-pm-icon-cut",jsClass:"Cut",onClick:function(){},afterClick:function(U,Y){t.map.pm.Draw[Y.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finish","removeLastVertex","cancel"]},B={title:it("buttonTitles.deleteButton"),className:"control-icon leaflet-pm-icon-delete",onClick:function(){},afterClick:function(){t.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},A={title:it("buttonTitles.rotateButton"),className:"control-icon leaflet-pm-icon-rotate",onClick:function(){},afterClick:function(){t.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:"edit",actions:["finishMode"]},j={className:"control-icon leaflet-pm-icon-text",title:it("buttonTitles.drawTextButton"),jsClass:"Text",onClick:function(){},afterClick:function(U,Y){t.map.pm.Draw[Y.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:["cancel"]};this._addButton("drawMarker",new L.Control.PMButton(e)),this._addButton("drawPolyline",new L.Control.PMButton(r)),this._addButton("drawRectangle",new L.Control.PMButton(g)),this._addButton("drawPolygon",new L.Control.PMButton(n)),this._addButton("drawCircle",new L.Control.PMButton(i)),this._addButton("drawCircleMarker",new L.Control.PMButton(l)),this._addButton("drawText",new L.Control.PMButton(j)),this._addButton("editMode",new L.Control.PMButton(y)),this._addButton("dragMode",new L.Control.PMButton(_)),this._addButton("cutPolygon",new L.Control.PMButton(k)),this._addButton("removalMode",new L.Control.PMButton(B)),this._addButton("rotateMode",new L.Control.PMButton(A))},_showHideButtons:function(){if(this.isVisible){this.removeControls(),this.isVisible=!0;var t=this.getButtons(),e=[];for(var n in this.options.drawControls===!1&&(e=e.concat(Object.keys(t).filter(function(i){return!t[i]._button.tool}))),this.options.editControls===!1&&(e=e.concat(Object.keys(t).filter(function(i){return t[i]._button.tool==="edit"}))),this.options.optionsControls===!1&&(e=e.concat(Object.keys(t).filter(function(i){return t[i]._button.tool==="options"}))),this.options.customControls===!1&&(e=e.concat(Object.keys(t).filter(function(i){return t[i]._button.tool==="custom"}))),t)if(this.options[n]&&e.indexOf(n)===-1){var r=t[n]._button.tool;r||(r="draw"),t[n].setPosition(this._getBtnPosition(r)),t[n].addTo(this.map)}}},_getBtnPosition:function(t){return this.options.positions&&this.options.positions[t]?this.options.positions[t]:this.options.position},setBlockPosition:function(t,e){this.options.positions[t]=e,this._showHideButtons(),this.changeControlOrder()},getBlockPositions:function(){return this.options.positions},copyDrawControl:function(t,e){if(!e)throw new TypeError("Button has no name");ne(e)!=="object"&&(e={name:e});var n=this._btnNameMapping(t);if(!e.name)throw new TypeError("Button has no name");if(this.buttons[e.name])throw new TypeError("Button with this name already exists");var r=this.map.pm.Draw.createNewDrawInstance(e.name,n);return e=St(St({},this.buttons[n]._button),e),{drawInstance:r,control:this.createCustomControl(e)}},createCustomControl:function(t){var e,n;if(!t.name)throw new TypeError("Button has no name");if(this.buttons[t.name])throw new TypeError("Button with this name already exists");t.onClick||(t.onClick=function(){}),t.afterClick||(t.afterClick=function(){}),t.toggle!==!1&&(t.toggle=!0),t.block&&(t.block=t.block.toLowerCase()),t.block&&t.block!=="draw"||(t.block=""),t.className?t.className.indexOf("control-icon")===-1&&(t.className="control-icon ".concat(t.className)):t.className="control-icon";var r={tool:t.block,className:t.className,title:t.title||"",jsClass:t.name,onClick:t.onClick,afterClick:t.afterClick,doToggle:t.toggle,toggleStatus:!1,disableOtherButtons:(e=t.disableOtherButtons)===null||e===void 0||e,disableByOtherButtons:(n=t.disableByOtherButtons)===null||n===void 0||n,cssToggle:t.toggle,position:this.options.position,actions:t.actions||[],disabled:!!t.disabled};this.options[t.name]!==!1&&(this.options[t.name]=!0);var i=this._addButton(t.name,new L.Control.PMButton(r));return this.changeControlOrder(),i},changeControlOrder:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=this._shapeMapping(),n=[];t.forEach(function(k){e[k]?n.push(e[k]):n.push(k)});var r=this.getButtons(),i={};n.forEach(function(k){r[k]&&(i[k]=r[k])});var l=Object.keys(r).filter(function(k){return!r[k]._button.tool});l.forEach(function(k){n.indexOf(k)===-1&&(i[k]=r[k])});var g=Object.keys(r).filter(function(k){return r[k]._button.tool==="edit"});g.forEach(function(k){n.indexOf(k)===-1&&(i[k]=r[k])});var y=Object.keys(r).filter(function(k){return r[k]._button.tool==="options"});y.forEach(function(k){n.indexOf(k)===-1&&(i[k]=r[k])});var _=Object.keys(r).filter(function(k){return r[k]._button.tool==="custom"});_.forEach(function(k){n.indexOf(k)===-1&&(i[k]=r[k])}),Object.keys(r).forEach(function(k){n.indexOf(k)===-1&&(i[k]=r[k])}),this.map.pm.Toolbar.buttons=i,this._showHideButtons()},getControlOrder:function(){var t=this.getButtons(),e=[];for(var n in t)e.push(n);return e},changeActionsOfControl:function(t,e){var n=this._btnNameMapping(t);if(!n)throw new TypeError("No name passed");if(!e)throw new TypeError("No actions passed");if(!this.buttons[n])throw new TypeError("Button with this name not exists");this.buttons[n]._button.actions=e,this.changeControlOrder()},setButtonDisabled:function(t,e){var n=this._btnNameMapping(t);e?this.buttons[n].disable():this.buttons[n].enable()},_shapeMapping:function(){return{Marker:"drawMarker",Circle:"drawCircle",Polygon:"drawPolygon",Rectangle:"drawRectangle",Polyline:"drawPolyline",Line:"drawPolyline",CircleMarker:"drawCircleMarker",Edit:"editMode",Drag:"dragMode",Cut:"cutPolygon",Removal:"removalMode",Rotate:"rotateMode",Text:"drawText"}},_btnNameMapping:function(t){var e=this._shapeMapping();return e[t]?e[t]:t}});function he(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?he(Object(n),!0).forEach(function(r){a(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var s={_initSnappableMarkers:function(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,this._assignEvents(this._markers),this._layer.off("pm:dragstart",this._unsnap,this),this._layer.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){this._layer.off("pm:dragstart",this._unsnap,this)},_assignEvents:function(t){var e=this;t.forEach(function(n){Array.isArray(n)?e._assignEvents(n):(n.off("drag",e._handleSnapping,e),n.on("drag",e._handleSnapping,e),n.off("dragend",e._cleanupSnapping,e),n.on("dragend",e._cleanupSnapping,e))})},_cleanupSnapping:function(t){t&&(t.target._snapped=!1),delete this._snapList,this.throttledList&&(this._map.off("layeradd",this.throttledList,this),this.throttledList=void 0),this._map.off("pm:remove",this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(function(e){e.remove()})},_handleThrottleSnapping:function(){this.throttledList&&this._createSnapList()},_handleSnapping:function(t){var e=this,n=t.target;if(n._snapped=!1,this.throttledList||(this.throttledList=L.Util.throttle(this._handleThrottleSnapping,100,this)),this._map.pm.Keyboard.isAltKeyPressed()||(this._snapList===void 0&&(this._createSnapList(),this._map.off("layeradd",this.throttledList,this),this._map.on("layeradd",this.throttledList,this)),this._snapList.length<=0))return!1;var r=this._calcClosestLayer(n.getLatLng(),this._snapList);if(Object.keys(r).length===0)return!1;var i,l=r.layer instanceof L.Marker||r.layer instanceof L.CircleMarker||!this.options.snapSegment;i=l?r.latlng:this._checkPrioritiySnapping(r);var g=this.options.snapDistance,y={marker:n,shape:this._shape,snapLatLng:i,segment:r.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:r.layer,distance:r.distance};if(this._fireSnapDrag(y.marker,y),this._fireSnapDrag(this._layer,y),r.distance<g){n._orgLatLng=n.getLatLng(),n.setLatLng(i),n._snapped=!0,n._snapInfo=y;var _=this._snapLatLng||{},k=i||{};_.lat===k.lat&&_.lng===k.lng||(e._snapLatLng=i,e._fireSnap(n,y),e._fireSnap(e._layer,y))}else this._snapLatLng&&(this._unsnap(y),n._snapped=!1,n._snapInfo=void 0,this._fireUnsnap(y.marker,y),this._fireUnsnap(this._layer,y));return!0},_createSnapList:function(){var t=this,e=[],n=[],r=this._map;r.off("pm:remove",this._handleSnapLayerRemoval,this),r.on("pm:remove",this._handleSnapLayerRemoval,this),r.eachLayer(function(i){if((i instanceof L.Polyline||i instanceof L.Marker||i instanceof L.CircleMarker||i instanceof L.ImageOverlay)&&i.options.snapIgnore!==!0){if(i.options.snapIgnore===void 0&&(!L.PM.optIn&&i.options.pmIgnore===!0||L.PM.optIn&&i.options.pmIgnore!==!1))return;(i instanceof L.Circle||i instanceof L.CircleMarker)&&i.pm&&i.pm._hiddenPolyCircle?e.push(i.pm._hiddenPolyCircle):i instanceof L.ImageOverlay&&(i=L.rectangle(i.getBounds())),e.push(i);var l=L.polyline([],{color:"red",pmIgnore:!0});l._pmTempLayer=!0,n.push(l),(i instanceof L.Circle||i instanceof L.CircleMarker)&&n.push(l)}}),e=(e=(e=e.filter(function(i){return t._layer!==i})).filter(function(i){return i._latlng||i._latlngs&&pt(i._latlngs)})).filter(function(i){return!i._pmTempLayer}),this._otherSnapLayers?(this._otherSnapLayers.forEach(function(){var i=L.polyline([],{color:"red",pmIgnore:!0});i._pmTempLayer=!0,n.push(i)}),this._snapList=e.concat(this._otherSnapLayers)):this._snapList=e,this.debugIndicatorLines=n},_handleSnapLayerRemoval:function(t){var e=t.layer,n=this._snapList.findIndex(function(r){return r._leaflet_id===e._leaflet_id});this._snapList.splice(n,1)},_calcClosestLayer:function(t,e){return this._calcClosestLayers(t,e,1)[0]},_calcClosestLayers:function(t,e){var n=this,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=[],l={};e.forEach(function(y,_){if(!y._parentCopy||y._parentCopy!==n._layer){var k=n._calcLayerDistances(t,y);if(k.distance=Math.floor(k.distance),n.debugIndicatorLines){if(!n.debugIndicatorLines[_]){var B=L.polyline([],{color:"red",pmIgnore:!0});B._pmTempLayer=!0,n.debugIndicatorLines[_]=B}n.debugIndicatorLines[_].setLatLngs([t,k.latlng])}r===1&&(l.distance===void 0||k.distance<=l.distance)?(k.distance<l.distance&&(i=[]),(l=k).layer=y,i.push(l)):r!==1&&(l={},(l=k).layer=y,i.push(l))}}),r!==1&&(i=i.sort(function(y,_){return y.distance-_.distance})),r===-1&&(r=i.length);var g=this._getClosestLayerByPriority(i,r);return L.Util.isArray(g)?g:[g]},_calcLayerDistances:function(t,e){var n=this._map,r=e instanceof L.Marker||e instanceof L.CircleMarker,i=e instanceof L.Polygon,l=t;if(r){var g=e.getLatLng();return{latlng:v({},g),distance:this._getDistance(n,g,l)}}return this._calcLatLngDistances(l,e.getLatLngs(),n,i)},_calcLatLngDistances:function(t,e,n){var r,i,l,g=this,y=arguments.length>3&&arguments[3]!==void 0&&arguments[3],_=function B(A){A.forEach(function(j,U){if(Array.isArray(j))B(j);else if(g.options.snapSegment){var Y,tt=j;Y=y?U+1===A.length?0:U+1:U+1===A.length?void 0:U+1;var nt=A[Y];if(nt){var ct=g._getDistanceToSegment(n,t,tt,nt);(i===void 0||ct<i)&&(i=ct,l=[tt,nt])}}else{var _t=g._getDistance(n,t,j);(i===void 0||_t<i)&&(i=_t,r=j)}})};if(_(e),this.options.snapSegment){var k=this._getClosestPointOnSegment(n,t,l[0],l[1]);return{latlng:v({},k),segment:l,distance:i}}return{latlng:r,distance:i}},_getClosestLayerByPriority:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;t=t.sort(function(g,y){return g._leaflet_id-y._leaflet_id});var n=["Marker","CircleMarker","Circle","Line","Polygon","Rectangle"],r=this._map.pm.globalOptions.snappingOrder||[],i=0,l={};return r.concat(n).forEach(function(g){l[g]||(i+=1,l[g]=i)}),t.sort(oe("instanceofShape",l)),e===1?t[0]||{}:t.slice(0,e)},_checkPrioritiySnapping:function(t){var e=this._map,n=t.segment[0],r=t.segment[1],i=t.latlng,l=this._getDistance(e,n,i),g=this._getDistance(e,r,i),y=l<g?n:r,_=l<g?l:g;if(this.options.snapMiddle){var k=L.PM.Utils.calcMiddleLatLng(e,n,r),B=this._getDistance(e,k,i);B<l&&B<g&&(y=k,_=B)}return v({},_<this.options.snapDistance?y:i)},_unsnap:function(){delete this._snapLatLng},_getClosestPointOnSegment:function(t,e,n,r){var i=t.getMaxZoom();i===1/0&&(i=t.getZoom());var l=t.project(e,i),g=t.project(n,i),y=t.project(r,i),_=L.LineUtil.closestPointOnSegment(l,g,y);return t.unproject(_,i)},_getDistanceToSegment:function(t,e,n,r){var i=t.latLngToLayerPoint(e),l=t.latLngToLayerPoint(n),g=t.latLngToLayerPoint(r);return L.LineUtil.pointToSegmentDistance(i,l,g)},_getDistance:function(t,e,n){return t.latLngToLayerPoint(e).distanceTo(t.latLngToLayerPoint(n))}};const p=s,b=L.Class.extend({includes:[p,W],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:"#3388ff",dashArray:"5,5"},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,editable:!1,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1},setOptions:function(t){L.Util.setOptions(this,t),this.setStyle(this.options)},setStyle:function(){},getOptions:function(){return this.options},initialize:function(t){var e=this,n=new L.Icon.Default;n.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=n,this._map=t,this.shapes=["Marker","CircleMarker","Line","Polygon","Rectangle","Circle","Cut","Text"],this.shapes.forEach(function(r){e[r]=new L.PM.Draw[r](e._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions:function(t){var e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];this.options.pathOptions=e?d()(this.options.pathOptions,t):t},getShapes:function(){return this.shapes},getShape:function(){return this._shape},enable:function(t,e){if(!t)throw new Error("Error: Please pass a shape as a parameter. Possible shapes are: ".concat(this.getShapes().join(",")));this.disable(),this[t].enable(e)},disable:function(){var t=this;this.shapes.forEach(function(e){t[e].disable()})},addControls:function(){var t=this;this.shapes.forEach(function(e){t[e].addButton()})},getActiveShape:function(){var t,e=this;return this.shapes.forEach(function(n){e[n]._enabled&&(t=n)}),t},_setGlobalDrawMode:function(){this._shape==="Cut"?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();var t=L.PM.Utils.findLayers(this._map);this._enabled?t.forEach(function(e){L.PM.Utils.disablePopup(e)}):t.forEach(function(e){L.PM.Utils.enablePopup(e)})},createNewDrawInstance:function(t,e){var n=this._getShapeFromBtnName(e);if(this[t])throw new TypeError("Draw Type already exists");if(!L.PM.Draw[n])throw new TypeError("There is no class L.PM.Draw.".concat(n));return this[t]=new L.PM.Draw[n](this._map),this[t].toolbarButtonName=t,this[t]._shape=t,this.shapes.push(t),this[e]&&this[t].setOptions(this[e].options),this[t].setOptions(this[t].options),this[t]},_getShapeFromBtnName:function(t){var e={drawMarker:"Marker",drawCircle:"Circle",drawPolygon:"Polygon",drawPolyline:"Line",drawRectangle:"Rectangle",drawCircleMarker:"CircleMarker",editMode:"Edit",dragMode:"Drag",cutPolygon:"Cut",removalMode:"Removal",rotateMode:"Rotate",drawText:"Text"};return e[t]?e[t]:this[t]?this[t]._shape:t},_finishLayer:function(t){t.pm&&(t.pm.setOptions(this.options),t.pm._shape=this._shape,t.pm._map=this._map),this._addDrawnLayerProp(t)},_addDrawnLayerProp:function(t){t._drawnByGeoman=!0},_setPane:function(t,e){e==="layerPane"?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":e==="vertexPane"?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":e==="markerPane"&&(t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},_isFirstLayer:function(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}});b.Marker=b.extend({initialize:function(t){this._map=t,this._shape="Marker",this.toolbarButtonName="drawMarker"},enable:function(t){var e=this;L.Util.setOptions(this,t),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,"markerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(it("tooltips.placeMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(function(n){e.isRelevantMarker(n)&&n.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){var t=this;this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.eachLayer(function(e){t.isRelevantMarker(e)&&e.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},isRelevantMarker:function(t){return t instanceof L.Marker&&t.pm&&!t._pmTempLayer&&!t.pm._initTextMarker},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}this._fireChange(this._hintMarker.getLatLng(),"Draw")},_createMarker:function(t){if(t.latlng&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng(),n=new L.Marker(e,this.options.markerStyle);this._setPane(n,"markerPane"),this._finishLayer(n),n.pm||(n.options.draggable=!1),n.addTo(this._map.pm._getContainingLayer()),n.pm&&this.options.markerEditable?n.pm.enable():n.dragging&&n.dragging.disable(),this._fireCreate(n),this._cleanupSnapping(),this.options.continueDrawing||this.disable()}},setStyle:function(){var t,e;(t=this.options.markerStyle)!==null&&t!==void 0&&t.icon&&((e=this._hintMarker)===null||e===void 0||e.setIcon(this.options.markerStyle.icon))}});var w=63710088e-1,G={centimeters:637100880,centimetres:637100880,degrees:57.22891354143274,feet:20902260511392e-6,inches:39.37*w,kilometers:6371.0088,kilometres:6371.0088,meters:w,metres:w,miles:3958.761333810546,millimeters:6371008800,millimetres:6371008800,nauticalmiles:w/1852,radians:1,yards:6967335223679999e-9};function z(t,e,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=e||{},r.geometry=t,r}function K(t,e,n){if(n===void 0&&(n={}),!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!gt(t[0])||!gt(t[1]))throw new Error("coordinates must contain numbers");return z({type:"Point",coordinates:t},e,n)}function Q(t,e,n){if(n===void 0&&(n={}),t.length<2)throw new Error("coordinates must be an array of two or more positions");return z({type:"LineString",coordinates:t},e,n)}function et(t,e){e===void 0&&(e={});var n={type:"FeatureCollection"};return e.id&&(n.id=e.id),e.bbox&&(n.bbox=e.bbox),n.features=t,n}function st(t,e){e===void 0&&(e="kilometers");var n=G[e];if(!n)throw new Error(e+" units is invalid");return t*n}function at(t,e){e===void 0&&(e="kilometers");var n=G[e];if(!n)throw new Error(e+" units is invalid");return t/n}function dt(t){return 180*(t%(2*Math.PI))/Math.PI}function rt(t){return t%360*Math.PI/180}function gt(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function yt(t){var e,n,r={type:"FeatureCollection",features:[]};if((n=t.type==="Feature"?t.geometry:t).type==="LineString")e=[n.coordinates];else if(n.type==="MultiLineString")e=n.coordinates;else if(n.type==="MultiPolygon")e=[].concat.apply([],n.coordinates);else{if(n.type!=="Polygon")throw new Error("Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry");e=n.coordinates}return e.forEach(function(i){e.forEach(function(l){for(var g=0;g<i.length-1;g++)for(var y=g;y<l.length-1;y++)if(!(i===l&&(Math.abs(g-y)===1||g===0&&y===i.length-2&&i[g][0]===i[i.length-1][0]&&i[g][1]===i[i.length-1][1]))){var _=Lt(i[g][0],i[g][1],i[g+1][0],i[g+1][1],l[y][0],l[y][1],l[y+1][0],l[y+1][1]);_&&r.features.push(K([_[0],_[1]]))}})}),r}function Lt(t,e,n,r,i,l,g,y){var _,k,B,A,j={x:null,y:null,onLine1:!1,onLine2:!1};return(_=(y-l)*(n-t)-(g-i)*(r-e))===0?j.x!==null&&j.y!==null&&j:(A=(n-t)*(k=e-l)-(r-e)*(B=t-i),k=((g-i)*k-(y-l)*B)/_,B=A/_,j.x=t+k*(n-t),j.y=e+k*(r-e),k>=0&&k<=1&&(j.onLine1=!0),B>=0&&B<=1&&(j.onLine2=!0),!(!j.onLine1||!j.onLine2)&&[j.x,j.y])}function xt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function wt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xt(Object(n),!0).forEach(function(r){Ct(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ct(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Gt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Nt(Object(n),!0).forEach(function(r){Dt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nt(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function It(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function zt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?It(Object(n),!0).forEach(function(r){Kt(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pt(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function bt(t){if(Array.isArray(t))return t;if(t.type==="Feature"){if(t.geometry!==null)return t.geometry.coordinates}else if(t.coordinates)return t.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Ut(t){return t.type==="Feature"?t.geometry:t}function Ae(t,e){return t.type==="FeatureCollection"?"FeatureCollection":t.type==="GeometryCollection"?"GeometryCollection":t.type==="Feature"&&t.geometry!==null?t.geometry.type:t.type}function Le(t,e,n){if(t!==null)for(var r,i,l,g,y,_,k,B,A=0,j=0,U=t.type,Y=U==="FeatureCollection",tt=U==="Feature",nt=Y?t.features.length:1,ct=0;ct<nt;ct++){y=(B=!!(k=Y?t.features[ct].geometry:tt?t.geometry:t)&&k.type==="GeometryCollection")?k.geometries.length:1;for(var _t=0;_t<y;_t++){var ut=0,Mt=0;if((g=B?k.geometries[_t]:k)!==null){_=g.coordinates;var Tt=g.type;switch(A=!n||Tt!=="Polygon"&&Tt!=="MultiPolygon"?0:1,Tt){case null:break;case"Point":if(e(_,j,ct,ut,Mt)===!1)return!1;j++,ut++;break;case"LineString":case"MultiPoint":for(r=0;r<_.length;r++){if(e(_[r],j,ct,ut,Mt)===!1)return!1;j++,Tt==="MultiPoint"&&ut++}Tt==="LineString"&&ut++;break;case"Polygon":case"MultiLineString":for(r=0;r<_.length;r++){for(i=0;i<_[r].length-A;i++){if(e(_[r][i],j,ct,ut,Mt)===!1)return!1;j++}Tt==="MultiLineString"&&ut++,Tt==="Polygon"&&Mt++}Tt==="Polygon"&&ut++;break;case"MultiPolygon":for(r=0;r<_.length;r++){for(Mt=0,i=0;i<_[r].length;i++){for(l=0;l<_[r][i].length-A;l++){if(e(_[r][i][l],j,ct,ut,Mt)===!1)return!1;j++}Mt++}ut++}break;case"GeometryCollection":for(r=0;r<g.geometries.length;r++)if(Le(g.geometries[r],e,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function re(t,e){if(t.type==="Feature")e(t,0);else if(t.type==="FeatureCollection")for(var n=0;n<t.features.length&&e(t.features[n],n)!==!1;n++);}function on(t,e){var n,r,i,l,g,y,_,k,B,A,j=0,U=t.type==="FeatureCollection",Y=t.type==="Feature",tt=U?t.features.length:1;for(n=0;n<tt;n++){for(y=U?t.features[n].geometry:Y?t.geometry:t,k=U?t.features[n].properties:Y?t.properties:{},B=U?t.features[n].bbox:Y?t.bbox:void 0,A=U?t.features[n].id:Y?t.id:void 0,g=(_=!!y&&y.type==="GeometryCollection")?y.geometries.length:1,i=0;i<g;i++)if((l=_?y.geometries[i]:y)!==null)switch(l.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(e(l,j,k,B,A)===!1)return!1;break;case"GeometryCollection":for(r=0;r<l.geometries.length;r++)if(e(l.geometries[r],j,k,B,A)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}else if(e(null,j,k,B,A)===!1)return!1;j++}}function be(t,e){on(t,function(n,r,i,l,g){var y,_=n===null?null:n.type;switch(_){case null:case"Point":case"LineString":case"Polygon":return e(z(n,i,{bbox:l,id:g}),r,0)!==!1&&void 0}switch(_){case"MultiPoint":y="Point";break;case"MultiLineString":y="LineString";break;case"MultiPolygon":y="Polygon"}for(var k=0;k<n.coordinates.length;k++){var B=n.coordinates[k];if(e(z({type:y,coordinates:B},i),r,k)===!1)return!1}})}b.Line=b.extend({initialize:function(t){this._map=t,this._shape="Line",this.toolbarButtonName="drawPolyline",this._doesSelfIntersect=!1},enable:function(t){L.Util.setOptions(this,t),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],wt(wt({},this.options.templineStyle),{},{pmIgnore:!1})),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(it("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._map._container.style.cursor="crosshair",this._map.on("click",this._createVertex,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn==="dblclick"&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on("mousemove",this._syncHintMarker,this),this._hintMarker.on("move",this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._createVertex,this),this._map.off("mousemove",this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!=="snap"&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_syncHintLine:function(){var t=this._layer.getLatLngs();if(t.length>0){var e=t[t.length-1];this._hintline.setLatLngs([e,this._hintMarker.getLatLng()])}},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());var n=this._layer._defaultShape().slice();n.push(this._hintMarker.getLatLng()),this._change(n)},hasSelfIntersection:function(){return yt(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection:function(t,e){var n=L.polyline(this._layer.getLatLngs());t&&(e||(e=this._hintMarker.getLatLng()),n.addLatLng(e));var r=yt(n.toGeoJSON(15));this._doesSelfIntersect=r.features.length>0,this._doesSelfIntersect?this._hintline.setStyle({color:"#f00000ff"}):this._hintline.isEmpty()||this._hintline.setStyle(this.options.hintlineStyle)},_createVertex:function(t){if(this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,t.latlng),!this._doesSelfIntersect)){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng(),n=this._layer.getLatLngs(),r=n[n.length-1];if(e.equals(n[0])||n.length>0&&e.equals(r))this._finishShape();else{this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:e,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(e);var i=this._createMarker(e);this._setTooltipText(),this._setHintLineAfterNewVertex(e),this._fireVertexAdded(i,void 0,e,"Draw"),this._change(this._layer.getLatLngs()),this.options.finishOn==="snap"&&this._hintMarker._snapped&&this._finishShape(t)}}},_setHintLineAfterNewVertex:function(t){this._hintline.setLatLngs([t,t])},_removeLastVertex:function(){var t=this._markers;if(t.length<=1)this.disable();else{var e=this._layer.getLatLngs(),n=t[t.length-1],r=L.PM.Utils.findDeepMarkerIndex(t,n).indexPath;t.pop(),this._layerGroup.removeLayer(n);var i=t[t.length-1],l=e.indexOf(i.getLatLng());e=e.slice(0,l+1),this._layer.setLatLngs(e),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(n,r,"Draw"),this._change(this._layer.getLatLngs())}},_finishShape:function(){if((this.options.allowSelfIntersection||(this._handleSelfIntersection(!1),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var t=this._layer.getLatLngs();if(!(t.length<=1)){var e=L.polyline(t,this.options.pathOptions);this._setPane(e,"layerPane"),this._finishLayer(e),e.addTo(this._map.pm._getContainingLayer()),this._fireCreate(e),this.options.snappable&&this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this.enable()}}},_createMarker:function(t){var e=new L.Marker(t,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._pmTempLayer=!0,this._layerGroup.addLayer(e),this._markers.push(e),e.on("click",this._finishShape,this),e},_setTooltipText:function(){var t="";t=it(this._layer.getLatLngs().flat().length<=1?"tooltips.continueLine":"tooltips.finishLine"),this._hintMarker.setTooltipContent(t)},_change:function(t){this._fireChange(t,"Draw")},setStyle:function(){var t,e;(t=this._layer)===null||t===void 0||t.setStyle(this.options.templineStyle),(e=this._hintline)===null||e===void 0||e.setStyle(this.options.hintlineStyle)}}),b.Polygon=b.Line.extend({initialize:function(t){this._map=t,this._shape="Polygon",this.toolbarButtonName="drawPolygon"},enable:function(t){L.PM.Draw.Line.prototype.enable.call(this,t),this._layer.pm._shape="Polygon"},_createMarker:function(t){var e=new L.Marker(t,{draggable:!1,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._pmTempLayer=!0,this._layerGroup.addLayer(e),this._markers.push(e),this._layer.getLatLngs().flat().length===1?(e.on("click",this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(e)-1,this.options.snappable&&this._cleanupSnapping()):e.on("click",function(){return 1}),e},_setTooltipText:function(){var t="";t=it(this._layer.getLatLngs().flat().length<=2?"tooltips.continueLine":"tooltips.finishPoly"),this._hintMarker.setTooltipContent(t)},_finishShape:function(){if((this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var t=this._layer.getLatLngs();if(!(t.length<=2)){var e=L.polygon(t,this.options.pathOptions);this._setPane(e,"layerPane"),this._finishLayer(e),e.addTo(this._map.pm._getContainingLayer()),this._fireCreate(e),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this.disable(),this.options.continueDrawing&&this.enable()}}}}),b.Rectangle=b.extend({initialize:function(t){this._map=t,this._shape="Rectangle",this.toolbarButtonName="drawRectangle"},enable:function(t){if(L.Util.setOptions(this,t),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-start-marker"}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,"vertexPane"),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(it("tooltips.firstVertex"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(var e=0;e<2;e+=1){var n=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon rect-style-marker"}),draggable:!1,zIndexOffset:100});this._setPane(n,"vertexPane"),n._pmTempLayer=!0,this._layerGroup.addLayer(n),this._styleMarkers.push(n)}}this._map._container.style.cursor="crosshair",this._map.on("click",this._placeStartingMarkers,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeStartingMarkers,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_placeStartingMarkers:function(t){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,"visible"),this._startMarker.setLatLng(e),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(function(n){L.DomUtil.addClass(n._icon,"visible"),n.setLatLng(e)}),this._map.off("click",this._placeStartingMarkers,this),this._map.on("click",this._finishShape,this),this._hintMarker.setTooltipContent(it("tooltips.finishRect")),this._setRectangleOrigin()},_setRectangleOrigin:function(){var t=this._startMarker.getLatLng();t&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([t,t]),this._hintMarker.on("move",this._syncRectangleSize,this))},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}var n=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(n,"Draw")},_syncRectangleSize:function(){var t=this,e=ee(this._startMarker.getLatLng(),this._map),n=ee(this._hintMarker.getLatLng(),this._map),r=L.PM.Utils._getRotatedRectangle(e,n,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(r),this.options.cursorMarker&&this._styleMarkers){var i=[];r.forEach(function(l){l.equals(e,1e-8)||l.equals(n,1e-8)||i.push(l)}),i.forEach(function(l,g){try{t._styleMarkers[g].setLatLng(l)}catch{}})}},_findCorners:function(){var t=this._layer.getBounds();return[t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]},_finishShape:function(t){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng(),n=this._startMarker.getLatLng();if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){var r=L.rectangle([n,e],this.options.pathOptions);if(this.options.rectangleAngle){var i=L.PM.Utils._getRotatedRectangle(n,e,this.options.rectangleAngle||0,this._map);r.setLatLngs(i),r.pm&&r.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(r,"layerPane"),this._finishLayer(r),r.addTo(this._map.pm._getContainingLayer()),this._fireCreate(r),this.disable(),this.options.continueDrawing&&this.enable()}},setStyle:function(){var t;(t=this._layer)===null||t===void 0||t.setStyle(this.options.pathOptions)}}),b.Circle=b.extend({initialize:function(t){this._map=t,this._shape="Circle",this.toolbarButtonName="drawCircle"},enable:function(t){L.Util.setOptions(this,t),this.options.radius=0,this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circle(this._map.getCenter(),Gt(Gt({},this.options.templineStyle),{},{radius:0})),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(it("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map._container.style.cursor="crosshair",this._map.on("click",this._placeCenterMarker,this),this._map.on("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.off("mousemove",this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([t,e])},_syncCircleRadius:function(){var t,e=this._centerMarker.getLatLng(),n=this._hintMarker.getLatLng();t=this._map.options.crs===L.CRS.Simple?this._map.distance(e,n):e.distanceTo(n),this.options.minRadiusCircle&&t<this.options.minRadiusCircle?this._layer.setRadius(this.options.minRadiusCircle):this.options.maxRadiusCircle&&t>this.options.maxRadiusCircle?this._layer.setRadius(this.options.maxRadiusCircle):this._layer.setRadius(t)},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}this._handleHintMarkerSnapping();var n=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(n,"Draw")},_placeCenterMarker:function(t){this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker),this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng();this._layerGroup.addLayer(this._layer),this._centerMarker.setLatLng(e),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var t=this._centerMarker.getLatLng();t&&(this._layer.setLatLng(t),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(it("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_finishShape:function(t){if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e,n=this._centerMarker.getLatLng(),r=this._hintMarker.getLatLng();e=this._map.options.crs===L.CRS.Simple?this._map.distance(n,r):n.distanceTo(r),this.options.minRadiusCircle&&e<this.options.minRadiusCircle?e=this.options.minRadiusCircle:this.options.maxRadiusCircle&&e>this.options.maxRadiusCircle&&(e=this.options.maxRadiusCircle);var i=Gt(Gt({},this.options.pathOptions),{},{radius:e}),l=L.circle(n,i);this._setPane(l,"layerPane"),this._finishLayer(l),l.addTo(this._map.pm._getContainingLayer()),l.pm&&l.pm._updateHiddenPolyCircle(),this._fireCreate(l),this.disable(),this.options.continueDrawing&&this.enable()}},_getNewDestinationOfHintMarker:function(){var t=this._hintMarker.getLatLng();if(!this._layerGroup.hasLayer(this._centerMarker))return t;var e=this._centerMarker.getLatLng(),n=e.distanceTo(t);return this.options.minRadiusCircle&&n<this.options.minRadiusCircle?t=jt(this._map,e,t,this.options.minRadiusCircle):this.options.maxRadiusCircle&&n>this.options.maxRadiusCircle&&(t=jt(this._map,e,t,this.options.maxRadiusCircle)),t},_handleHintMarkerSnapping:function(){if(this._hintMarker._snapped){var t=this._centerMarker.getLatLng(),e=this._hintMarker.getLatLng(),n=t.distanceTo(e);this._layerGroup.hasLayer(this._centerMarker)&&(this.options.minRadiusCircle&&n<this.options.minRadiusCircle||this.options.maxRadiusCircle&&n>this.options.maxRadiusCircle)&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())},setStyle:function(){var t,e;(t=this._layer)===null||t===void 0||t.setStyle(this.options.templineStyle),(e=this._hintline)===null||e===void 0||e.setStyle(this.options.hintlineStyle)}}),b.CircleMarker=b.Marker.extend({initialize:function(t){this._map=t,this._shape="CircleMarker",this.toolbarButtonName="drawCircleMarker",this._layerIsDragging=!1},enable:function(t){var e=this;if(L.Util.setOptions(this,t),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this.options.editable){var n={};L.extend(n,this.options.templineStyle),n.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.circleMarker(this._map.getCenter(),n),this._setPane(this._layer,"layerPane"),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"marker-icon"}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,"vertexPane"),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(it("tooltips.startCircle"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on("click",this._placeCenterMarker,this),this._map._container.style.cursor="crosshair"}else this._map.on("click",this._createMarker,this),this._hintMarker=L.circleMarker(this._map.getCenter(),this.options.templineStyle),this._setPane(this._hintMarker,"layerPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(it("tooltips.placeCircleMarker"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip();this._map.on("mousemove",this._syncHintMarker,this),!this.options.editable&&this.options.markerEditable&&this._map.eachLayer(function(r){e.isRelevantMarker(r)&&r.pm.enable()}),this._layer.bringToBack(),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){var t=this;this._enabled&&(this._enabled=!1,this.options.editable?(this._map._container.style.cursor="",this._map.off("click",this._finishShape,this),this._map.off("click",this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off("click",this._createMarker,this),this._map.eachLayer(function(e){t.isRelevantMarker(e)&&e.pm.disable()}),this._hintMarker.remove()),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_placeCenterMarker:function(t){this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker),this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng();this._layerGroup.addLayer(this._layer),this._centerMarker.setLatLng(e),this._map.off("click",this._placeCenterMarker,this),this._map.on("click",this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter:function(){var t=this._centerMarker.getLatLng();t&&(this._layer.setLatLng(t),this._hintMarker.on("move",this._syncHintLine,this),this._hintMarker.on("move",this._syncCircleRadius,this),this._hintMarker.setTooltipContent(it("tooltips.finishCircle")),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),"Draw"))},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([t,e])},_syncCircleRadius:function(){var t=this._centerMarker.getLatLng(),e=this._hintMarker.getLatLng(),n=this._map.project(t).distanceTo(this._map.project(e));this.options.minRadiusCircleMarker&&n<this.options.minRadiusCircleMarker?this._layer.setRadius(this.options.minRadiusCircleMarker):this.options.maxRadiusCircleMarker&&n>this.options.maxRadiusCircleMarker?this._layer.setRadius(this.options.maxRadiusCircleMarker):this._layer.setRadius(n)},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}this._handleHintMarkerSnapping();var n=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(n,"Draw")},isRelevantMarker:function(t){return t instanceof L.CircleMarker&&!(t instanceof L.Circle)&&t.pm&&!t._pmTempLayer},_createMarker:function(t){if((!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())&&t.latlng&&!this._layerIsDragging){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._hintMarker.getLatLng(),n=L.circleMarker(e,this.options.pathOptions);this._setPane(n,"layerPane"),this._finishLayer(n),n.addTo(this._map.pm._getContainingLayer()),n.pm&&this.options.markerEditable&&n.pm.enable(),this._fireCreate(n),this._cleanupSnapping(),this.options.continueDrawing||this.disable()}},_finishShape:function(t){if(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer()){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var e=this._centerMarker.getLatLng(),n=this._hintMarker.getLatLng(),r=this._map.project(e).distanceTo(this._map.project(n));this.options.editable&&(this.options.minRadiusCircleMarker&&r<this.options.minRadiusCircleMarker?r=this.options.minRadiusCircleMarker:this.options.maxRadiusCircleMarker&&r>this.options.maxRadiusCircleMarker&&(r=this.options.maxRadiusCircleMarker));var i=zt(zt({},this.options.pathOptions),{},{radius:r}),l=L.circleMarker(e,i);this._setPane(l,"layerPane"),this._finishLayer(l),l.addTo(this._map.pm._getContainingLayer()),l.pm&&l.pm._updateHiddenPolyCircle(),this._fireCreate(l),this.disable(),this.options.continueDrawing&&this.enable()}},_getNewDestinationOfHintMarker:function(){var t=this._hintMarker.getLatLng();if(this.options.editable){if(!this._layerGroup.hasLayer(this._centerMarker))return t;var e=this._centerMarker.getLatLng(),n=this._map.project(e).distanceTo(this._map.project(t));this.options.minRadiusCircleMarker&&n<this.options.minRadiusCircleMarker?t=jt(this._map,e,t,this._pxRadiusToMeter(this.options.minRadiusCircleMarker)):this.options.maxRadiusCircleMarker&&n>this.options.maxRadiusCircleMarker&&(t=jt(this._map,e,t,this._pxRadiusToMeter(this.options.maxRadiusCircleMarker)))}return t},_handleHintMarkerSnapping:function(){if(this.options.editable){if(this._hintMarker._snapped){var t=this._centerMarker.getLatLng(),e=this._hintMarker.getLatLng(),n=this._map.project(t).distanceTo(this._map.project(e));this._layerGroup.hasLayer(this._centerMarker)&&(this.options.minRadiusCircleMarker&&n<this.options.minRadiusCircleMarker||this.options.maxRadiusCircleMarker&&n>this.options.maxRadiusCircleMarker)&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},_pxRadiusToMeter:function(t){var e=this._centerMarker.getLatLng(),n=this._map.project(e),r=L.point(n.x+t,n.y);return this._map.unproject(r).distanceTo(e)},setStyle:function(){var t,e,n={};L.extend(n,this.options.templineStyle),this.options.editable&&(n.radius=0),(t=this._layer)===null||t===void 0||t.setStyle(n),(e=this._hintline)===null||e===void 0||e.setStyle(this.options.hintlineStyle)}});const ke=function(t){if(!t)throw new Error("geojson is required");var e=[];return be(t,function(n){(function(r,i){var l=[],g=r.geometry;if(g!==null){switch(g.type){case"Polygon":l=bt(g);break;case"LineString":l=[bt(g)]}l.forEach(function(y){var _=function(k,B){var A=[];return k.reduce(function(j,U){var Y,tt,nt,ct,_t,ut,Mt=Q([j,U],B);return Mt.bbox=(tt=U,nt=(Y=j)[0],ct=Y[1],_t=tt[0],ut=tt[1],[nt<_t?nt:_t,ct<ut?ct:ut,nt>_t?nt:_t,ct>ut?ct:ut]),A.push(Mt),U}),A}(y,r.properties);_.forEach(function(k){k.id=i.length,i.push(k)})})}})(n,e)}),et(e)};var Me=o(1787);function Ge(t,e){var n=bt(t),r=bt(e);if(n.length!==2)throw new Error("<intersects> line1 must only contain 2 coordinates");if(r.length!==2)throw new Error("<intersects> line2 must only contain 2 coordinates");var i=n[0][0],l=n[0][1],g=n[1][0],y=n[1][1],_=r[0][0],k=r[0][1],B=r[1][0],A=r[1][1],j=(A-k)*(g-i)-(B-_)*(y-l),U=(B-_)*(l-k)-(A-k)*(i-_),Y=(g-i)*(l-k)-(y-l)*(i-_);if(j===0)return null;var tt=U/j,nt=Y/j;return tt>=0&&tt<=1&&nt>=0&&nt<=1?K([i+tt*(g-i),l+tt*(y-l)]):null}const Ht=function(t,e){var n={},r=[];if(t.type==="LineString"&&(t=z(t)),e.type==="LineString"&&(e=z(e)),t.type==="Feature"&&e.type==="Feature"&&t.geometry!==null&&e.geometry!==null&&t.geometry.type==="LineString"&&e.geometry.type==="LineString"&&t.geometry.coordinates.length===2&&e.geometry.coordinates.length===2){var i=Ge(t,e);return i&&r.push(i),et(r)}var l=Me();return l.load(ke(e)),re(ke(t),function(g){re(l.search(g),function(y){var _=Ge(g,y);if(_){var k=bt(_).join(",");n[k]||(n[k]=!0,r.push(_))}})}),et(r)},qt=function(t,e,n){n===void 0&&(n={});var r=Pt(t),i=Pt(e),l=rt(i[1]-r[1]),g=rt(i[0]-r[0]),y=rt(r[1]),_=rt(i[1]),k=Math.pow(Math.sin(l/2),2)+Math.pow(Math.sin(g/2),2)*Math.cos(y)*Math.cos(_);return st(2*Math.atan2(Math.sqrt(k),Math.sqrt(1-k)),n.units)},sn=function(t){var e=t[0],n=t[1],r=t[2],i=t[3];if(qt(t.slice(0,2),[r,n])>=qt(t.slice(0,2),[e,i])){var l=(n+i)/2;return[e,l-(r-e)/2,r,l+(r-e)/2]}var g=(e+r)/2;return[g-(i-n)/2,n,g+(i-n)/2,i]};function xe(t){var e=[1/0,1/0,-1/0,-1/0];return Le(t,function(n){e[0]>n[0]&&(e[0]=n[0]),e[1]>n[1]&&(e[1]=n[1]),e[2]<n[0]&&(e[2]=n[0]),e[3]<n[1]&&(e[3]=n[1])}),e}xe.default=xe;const ie=xe,ln=function(t,e){e===void 0&&(e={});var n=e.precision,r=e.coordinates,i=e.mutate;if(n=n==null||isNaN(n)?6:n,r=r==null||isNaN(r)?3:r,!t)throw new Error("<geojson> is required");if(typeof n!="number")throw new Error("<precision> must be a number");if(typeof r!="number")throw new Error("<coordinates> must be a number");i!==!1&&i!==void 0||(t=JSON.parse(JSON.stringify(t)));var l=Math.pow(10,n);return Le(t,function(g){(function(y,_,k){y.length>k&&y.splice(k,y.length);for(var B=0;B<y.length;B++)y[B]=Math.round(y[B]*_)/_})(g,l,r)}),t};function Ne(t,e,n){if(n===void 0&&(n={}),n.final===!0)return function(A,j){var U=Ne(j,A);return U=(U+180)%360}(t,e);var r=Pt(t),i=Pt(e),l=rt(r[0]),g=rt(i[0]),y=rt(r[1]),_=rt(i[1]),k=Math.sin(g-l)*Math.cos(_),B=Math.cos(y)*Math.sin(_)-Math.sin(y)*Math.cos(_)*Math.cos(g-l);return dt(Math.atan2(k,B))}function ze(t,e,n,r){r===void 0&&(r={});var i=Pt(t),l=rt(i[0]),g=rt(i[1]),y=rt(n),_=at(e,r.units),k=Math.asin(Math.sin(g)*Math.cos(_)+Math.cos(g)*Math.sin(_)*Math.cos(y));return K([dt(l+Math.atan2(Math.sin(y)*Math.sin(_)*Math.cos(g),Math.cos(_)-Math.sin(g)*Math.sin(k))),dt(k)],r.properties)}const hn=function(t,e,n){n===void 0&&(n={});var r=K([1/0,1/0],{dist:1/0}),i=0;return be(t,function(l){for(var g=bt(l),y=0;y<g.length-1;y++){var _=K(g[y]);_.properties.dist=qt(e,_,n);var k=K(g[y+1]);k.properties.dist=qt(e,k,n);var B=qt(_,k,n),A=Math.max(_.properties.dist,k.properties.dist),j=Ne(_,k),U=ze(e,A,j+90,n),Y=ze(e,A,j-90,n),tt=Ht(Q([U.geometry.coordinates,Y.geometry.coordinates]),Q([_.geometry.coordinates,k.geometry.coordinates])),nt=null;tt.features.length>0&&((nt=tt.features[0]).properties.dist=qt(e,nt,n),nt.properties.location=i+qt(_,nt,n)),_.properties.dist<r.properties.dist&&((r=_).properties.index=y,r.properties.location=i),k.properties.dist<r.properties.dist&&((r=k).properties.index=y+1,r.properties.location=i+B),nt&&nt.properties.dist<r.properties.dist&&((r=nt).properties.index=y),i+=B}}),r};function Fe(t,e){var n=[],r=Me();return be(e,function(i){if(n.forEach(function(y,_){y.id=_}),n.length){var l=r.search(i);if(l.features.length){var g=Ue(i,l);n=n.filter(function(y){return y.id!==g.id}),r.remove(g),re(we(g,i),function(y){n.push(y),r.insert(y)})}}else(n=we(t,i).features).forEach(function(y){y.bbox||(y.bbox=sn(ie(y)))}),r.load(et(n))}),et(n)}function we(t,e){var n=[],r=bt(t)[0],i=bt(t)[t.geometry.coordinates.length-1];if(Ce(r,Pt(e))||Ce(i,Pt(e)))return et([t]);var l=Me(),g=ke(t);l.load(g);var y=l.search(e);if(!y.features.length)return et([t]);var _=Ue(e,y),k=function(B,A,j){var U=j;return re(B,function(Y,tt){U=tt===0&&j===void 0?Y:A(U,Y,tt)}),U}(g,function(B,A,j){var U=bt(A)[1],Y=Pt(e);return j===_.id?(B.push(Y),n.push(Q(B)),Ce(Y,U)?[Y]:[Y,U]):(B.push(U),B)},[r]);return k.length>1&&n.push(Q(k)),et(n)}function Ue(t,e){if(!e.features.length)throw new Error("lines must contain features");if(e.features.length===1)return e.features[0];var n,r=1/0;return re(e,function(i){var l=hn(i,t).properties.dist;l<r&&(n=i,r=l)}),n}function Ce(t,e){return t[0]===e[0]&&t[1]===e[1]}const un=function(t,e){if(!t)throw new Error("line is required");if(!e)throw new Error("splitter is required");var n=Ae(t),r=Ae(e);if(n!=="LineString")throw new Error("line must be LineString");if(r==="FeatureCollection")throw new Error("splitter cannot be a FeatureCollection");if(r==="GeometryCollection")throw new Error("splitter cannot be a GeometryCollection");var i=ln(e,{precision:7});switch(r){case"Point":return we(t,i);case"MultiPoint":return Fe(t,i);case"LineString":case"MultiLineString":case"Polygon":case"MultiPolygon":return Fe(t,Ht(t,i))}};function ue(t,e,n){if(n===void 0&&(n={}),!t)throw new Error("point is required");if(!e)throw new Error("polygon is required");var r=Pt(t),i=Ut(e),l=i.type,g=e.bbox,y=i.coordinates;if(g&&function(j,U){return U[0]<=j[0]&&U[1]<=j[1]&&U[2]>=j[0]&&U[3]>=j[1]}(r,g)===!1)return!1;l==="Polygon"&&(y=[y]);for(var _=!1,k=0;k<y.length&&!_;k++)if(Ve(r,y[k][0],n.ignoreBoundary)){for(var B=!1,A=1;A<y[k].length&&!B;)Ve(r,y[k][A],!n.ignoreBoundary)&&(B=!0),A++;B||(_=!0)}return _}function Ve(t,e,n){var r=!1;e[0][0]===e[e.length-1][0]&&e[0][1]===e[e.length-1][1]&&(e=e.slice(0,e.length-1));for(var i=0,l=e.length-1;i<e.length;l=i++){var g=e[i][0],y=e[i][1],_=e[l][0],k=e[l][1];if(t[1]*(g-_)+y*(_-t[0])+k*(t[0]-g)==0&&(g-t[0])*(_-t[0])<=0&&(y-t[1])*(k-t[1])<=0)return!n;y>t[1]!=k>t[1]&&t[0]<(_-g)*(t[1]-y)/(k-y)+g&&(r=!r)}return r}function cn(t,e,n,r,i){var l=n[0],g=n[1],y=t[0],_=t[1],k=e[0],B=e[1],A=k-y,j=B-_,U=(n[0]-y)*j-(n[1]-_)*A;if(i!==null){if(Math.abs(U)>i)return!1}else if(U!==0)return!1;return r?r==="start"?Math.abs(A)>=Math.abs(j)?A>0?y<l&&l<=k:k<=l&&l<y:j>0?_<g&&g<=B:B<=g&&g<_:r==="end"?Math.abs(A)>=Math.abs(j)?A>0?y<=l&&l<k:k<l&&l<=y:j>0?_<=g&&g<B:B<g&&g<=_:r==="both"&&(Math.abs(A)>=Math.abs(j)?A>0?y<l&&l<k:k<l&&l<y:j>0?_<g&&g<B:B<g&&g<_):Math.abs(A)>=Math.abs(j)?A>0?y<=l&&l<=k:k<=l&&l<=y:j>0?_<=g&&g<=B:B<=g&&g<=_}const ae=function(t,e,n){n===void 0&&(n={});for(var r=Pt(t),i=bt(e),l=0;l<i.length-1;l++){var g=!1;if(n.ignoreEndVertices&&(l===0&&(g="start"),l===i.length-2&&(g="end"),l===0&&l+1===i.length-1&&(g="both")),cn(i[l],i[l+1],r,g,typeof n.epsilon>"u"?null:n.epsilon))return!0}return!1};function pn(t,e){var n=Ut(t),r=Ut(e),i=n.type,l=r.type,g=n.coordinates,y=r.coordinates;switch(i){case"Point":if(l==="Point")return Pe(g,y);throw new Error("feature2 "+l+" geometry not supported");case"MultiPoint":switch(l){case"Point":return function(_,k){var B,A=!1;for(B=0;B<_.coordinates.length;B++)if(Pe(_.coordinates[B],k.coordinates)){A=!0;break}return A}(n,r);case"MultiPoint":return function(_,k){for(var B=0,A=k.coordinates;B<A.length;B++){for(var j=A[B],U=!1,Y=0,tt=_.coordinates;Y<tt.length;Y++)if(Pe(j,tt[Y])){U=!0;break}if(!U)return!1}return!0}(n,r);default:throw new Error("feature2 "+l+" geometry not supported")}case"LineString":switch(l){case"Point":return ae(r,n,{ignoreEndVertices:!0});case"LineString":return function(_,k){for(var B=!1,A=0,j=k.coordinates;A<j.length;A++){var U=j[A];if(ae({type:"Point",coordinates:U},_,{ignoreEndVertices:!0})&&(B=!0),!ae({type:"Point",coordinates:U},_,{ignoreEndVertices:!1}))return!1}return B}(n,r);case"MultiPoint":return function(_,k){for(var B=!1,A=0,j=k.coordinates;A<j.length;A++){var U=j[A];if(ae(U,_,{ignoreEndVertices:!0})&&(B=!0),!ae(U,_))return!1}return!!B}(n,r);default:throw new Error("feature2 "+l+" geometry not supported")}case"Polygon":switch(l){case"Point":return ue(r,n,{ignoreBoundary:!0});case"LineString":return function(_,k){var B=!1,A=0,j=ie(_),U=ie(k);if(!Ke(j,U))return!1;for(;A<k.coordinates.length-1;A++)if(ue({type:"Point",coordinates:dn(k.coordinates[A],k.coordinates[A+1])},_,{ignoreBoundary:!0})){B=!0;break}return B}(n,r);case"Polygon":return function(_,k){if(_.type==="Feature"&&_.geometry===null||k.type==="Feature"&&k.geometry===null)return!1;var B=ie(_),A=ie(k);if(!Ke(B,A))return!1;for(var j=Ut(k).coordinates,U=0,Y=j;U<Y.length;U++)for(var tt=0,nt=Y[U];tt<nt.length;tt++)if(!ue(nt[tt],_))return!1;return!0}(n,r);case"MultiPoint":return function(_,k){for(var B=0,A=k.coordinates;B<A.length;B++)if(!ue(A[B],_,{ignoreBoundary:!0}))return!1;return!0}(n,r);default:throw new Error("feature2 "+l+" geometry not supported")}default:throw new Error("feature1 "+i+" geometry not supported")}}function Ke(t,e){return!(t[0]>e[0])&&!(t[2]<e[2])&&!(t[1]>e[1])&&!(t[3]<e[3])}function Pe(t,e){return t[0]===e[0]&&t[1]===e[1]}function dn(t,e){return[(t[0]+e[0])/2,(t[1]+e[1])/2]}var fn=o(2676),He=o.n(fn);function ce(t){var e={type:"Feature"};return e.geometry=t,e}function pe(t){return t.type==="Feature"?t.geometry:t}function qe(t){return t&&t.geometry&&t.geometry.coordinates?t.geometry.coordinates:t}function Je(t){return ce({type:"Polygon",coordinates:t})}function Ye(t){return ce({type:"MultiPolygon",coordinates:t})}function Xe(t){return Array.isArray(t)?1+Xe(t[0]):-1}function gn(t){t instanceof L.Polyline&&(t=t.toGeoJSON(15));var e=qe(t),n=Xe(e),r=[];return n>1?e.forEach(function(i){r.push(function(l){return ce({type:"LineString",coordinates:l})}(i))}):r.push(t),r}function mn(t){var e=[];return t.eachLayer(function(n){e.push(qe(n.toGeoJSON(15)))}),function(n){return ce({type:"MultiLineString",coordinates:n})}(e)}function _n(t,e){return function(n){if(Array.isArray(n))return n}(t)||function(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var l,g,y=[],_=!0,k=!1;try{for(i=i.call(n);!(_=(l=i.next()).done)&&(y.push(l.value),!r||y.length!==r);_=!0);}catch(B){k=!0,g=B}finally{try{_||i.return==null||i.return()}finally{if(k)throw g}}return y}}(t,e)||function(n,r){if(n){if(typeof n=="string")return Ze(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ze(n,r)}}(t,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ze(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function yn(t){return function(e){if(Array.isArray(e))return Ee(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,n){if(e){if(typeof e=="string")return Ee(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ee(e,n)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ee(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}b.Cut=b.Polygon.extend({initialize:function(t){this._map=t,this._shape="Cut",this.toolbarButtonName="cutPolygon"},_finishShape:function(){var t=this;if(this._editedLayers=[],(this.options.allowSelfIntersection||(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),!this._doesSelfIntersect))&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){var e=this._layer.getLatLngs();if(!(e.length<=2)){var n=L.polygon(e,this.options.pathOptions);n._latlngInfos=this._layer._latlngInfo,this.cut(n),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(function(r){var i=r.layer,l=r.originalLayer;t._fireCut(l,i,l),t._fireCut(t._map,i,l),l.pm._fireEdit()}),this._editedLayers=[],this.disable(),this.options.continueDrawing&&this.enable()}}},cut:function(t){var e=this,n=this._map._layers,r=t._latlngInfos||[];Object.keys(n).map(function(i){return n[i]}).filter(function(i){return i.pm}).filter(function(i){return!i._pmTempLayer}).filter(function(i){return!L.PM.optIn&&!i.options.pmIgnore||L.PM.optIn&&i.options.pmIgnore===!1}).filter(function(i){return i instanceof L.Polyline}).filter(function(i){return i!==t}).filter(function(i){return i.pm.options.allowCutting}).filter(function(i){return!(e.options.layersToCut&&L.Util.isArray(e.options.layersToCut)&&e.options.layersToCut.length>0)||e.options.layersToCut.indexOf(i)>-1}).filter(function(i){return!e._layerGroup.hasLayer(i)}).filter(function(i){try{var l=!!Ht(t.toGeoJSON(15),i.toGeoJSON(15)).features.length>0;return l||i instanceof L.Polyline&&!(i instanceof L.Polygon)?l:(g=t.toGeoJSON(15),y=i.toGeoJSON(15),_=pe(g),k=pe(y),!((B=He().intersection(_.coordinates,k.coordinates)).length===0||!(B.length===1?Je(B[0]):Ye(B))))}catch{return i instanceof L.Polygon&&console.error("You can't cut polygons with self-intersections"),!1}var g,y,_,k,B}).forEach(function(i){var l;if(i instanceof L.Polygon){var g=(l=L.polygon(i.getLatLngs())).getLatLngs();r.forEach(function(j){if(j&&j.snapInfo){var U=j.latlng,Y=e._calcClosestLayer(U,[l]);if(Y&&Y.segment&&Y.distance<e.options.snapDistance){var tt=Y.segment;if(tt&&tt.length===2){var nt=L.PM.Utils._getIndexFromSegment(g,tt),ct=nt.indexPath,_t=nt.parentPath,ut=nt.newIndex;(ct.length>1?ht()(g,_t):g).splice(ut,0,U)}}}})}else l=i;var y=e._cutLayer(t,l),_=L.geoJSON(y,i.options);if(_.getLayers().length===1){var k=_.getLayers();_=_n(k,1)[0]}e._setPane(_,"layerPane");var B=_.addTo(e._map.pm._getContainingLayer());if(B.pm.enable(i.pm.options),B.pm.disable(),i._pmTempLayer=!0,t._pmTempLayer=!0,i.remove(),i.removeFrom(e._map.pm._getContainingLayer()),t.remove(),t.removeFrom(e._map.pm._getContainingLayer()),B.getLayers&&B.getLayers().length===0&&e._map.pm.removeLayer({target:B}),B instanceof L.LayerGroup&&B.eachLayer(function(j){e._addDrawnLayerProp(j)}),e._addDrawnLayerProp(B),e.options.layersToCut&&L.Util.isArray(e.options.layersToCut)&&e.options.layersToCut.length>0){var A=e.options.layersToCut.indexOf(i);A>-1&&e.options.layersToCut.splice(A,1)}e._editedLayers.push({layer:B,originalLayer:i})})},_cutLayer:function(t,e){var n,r,i,l,g,y,_=L.geoJSON();if(e instanceof L.Polygon)r=e.toGeoJSON(15),i=t.toGeoJSON(15),l=pe(r),g=pe(i),n=(y=He().difference(l.coordinates,g.coordinates)).length===0?null:y.length===1?Je(y[0]):Ye(y);else{var k=gn(e);k.forEach(function(B){var A=un(B,t.toGeoJSON(15));(A&&A.features.length>0?L.geoJSON(A):L.geoJSON(B)).getLayers().forEach(function(j){pn(t.toGeoJSON(15),j.toGeoJSON(15))||j.addTo(_)})}),n=k.length>1?mn(_):_.toGeoJSON(15)}return n},_change:L.Util.falseFn}),b.Text=b.extend({initialize:function(t){this._map=t,this._shape="Text",this.toolbarButtonName="drawText"},enable:function(t){L.Util.setOptions(this,t),this._enabled=!0,this._map.on("click",this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:"marker-icon cursor-marker"})}),this._setPane(this._hintMarker,"vertexPane"),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,"visible"),this.options.tooltips&&this._hintMarker.bindTooltip(it("tooltips.placeText"),{permanent:!0,offset:L.point(0,10),direction:"bottom",opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on("mousemove",this._syncHintMarker,this),this._fireDrawStart(),this._setGlobalDrawMode()},disable:function(){this._enabled&&(this._enabled=!1,this._map.off("click",this._createMarker,this),this._hintMarker.remove(),this._map.off("mousemove",this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled:function(){return this._enabled},toggle:function(t){this.enabled()?this.disable():this.enable(t)},_syncHintMarker:function(t){if(this._hintMarker.setLatLng(t.latlng),this.options.snappable){var e=t;e.target=this._hintMarker,this._handleSnapping(e)}},_createMarker:function(t){var e;if(t.latlng&&(!this.options.requireSnapToFinish||this._hintMarker._snapped||this._isFirstLayer())){this._hintMarker._snapped||this._hintMarker.setLatLng(t.latlng);var n=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),(e=this.options.textOptions)!==null&&e!==void 0&&e.className){var r,i=this.options.textOptions.className.split(" ");(r=this.textArea.classList).add.apply(r,yn(i))}var l=this._createTextIcon(this.textArea),g=new L.Marker(n,{textMarker:!0,_textMarkerOverPM:!0,icon:l});if(this._setPane(g,"markerPane"),this._finishLayer(g),g.pm||(g.options.draggable=!1),g.addTo(this._map.pm._getContainingLayer()),g.pm){var y,_,k,B,A;g.pm.textArea=this.textArea,L.setOptions(g.pm,{removeIfEmpty:(y=(_=this.options.textOptions)===null||_===void 0?void 0:_.removeIfEmpty)===null||y===void 0||y});var j=(k=(B=this.options.textOptions)===null||B===void 0?void 0:B.focusAfterDraw)===null||k===void 0||k;g.pm._createTextMarker(j),(A=this.options.textOptions)!==null&&A!==void 0&&A.text&&g.pm.setText(this.options.textOptions.text)}this._fireCreate(g),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this.enable()}},_createTextArea:function(){var t=document.createElement("textarea");return t.autofocus=!0,t.readOnly=!0,t.classList.add("pm-textarea","pm-disabled"),t},_createTextIcon:function(t){return L.divIcon({className:"pm-text-marker",html:t})}});const vn={enableLayerDrag:function(){if(this.options.draggable&&this._layer._map){this.disable(),this._layerDragEnabled=!0,this._map||(this._map=this._layer._map),(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),"dragstart",this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,Ft(this._layer)instanceof L.Canvas?(this._layer.on("mouseout",this.removeDraggingClass,this),this._layer.on("mouseover",this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;var t=this._getDOMElem();t&&(Ft(this._layer)instanceof L.Canvas?(this._layer.on("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(t)):L.DomEvent.on(t,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._fireDragEnable()}},disableLayerDrag:function(){this._layerDragEnabled=!1,Ft(this._layer)instanceof L.Canvas?(this._layer.off("mouseout",this.removeDraggingClass,this),this._layer.off("mouseover",this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();var t=this._getDOMElem();t&&(Ft(this._layer)instanceof L.Canvas?(this._layer.off("touchstart mousedown",this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(t)):L.DomEvent.off(t,"touchstart mousedown",this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging:function(){return this._dragging},layerDragEnabled:function(){return!!this._layerDragEnabled},_simulateMouseDownEvent:function(t){var e=t.touches?t.touches[0]:t,n={originalEvent:e,target:this._layer};return n.containerPoint=this._map.mouseEventToContainerPoint(e),n.latlng=this._map.containerPointToLatLng(n.containerPoint),this._dragMixinOnMouseDown(n),!1},_simulateMouseMoveEvent:function(t){var e=t.touches?t.touches[0]:t,n={originalEvent:e,target:this._layer};return n.containerPoint=this._map.mouseEventToContainerPoint(e),n.latlng=this._map.containerPointToLatLng(n.containerPoint),this._dragMixinOnMouseMove(n),!1},_simulateMouseUpEvent:function(t){var e={originalEvent:t.touches?t.touches[0]:t,target:this._layer};return t.type.indexOf("touch")===-1&&(e.containerPoint=this._map.mouseEventToContainerPoint(t),e.latlng=this._map.containerPointToLatLng(e.containerPoint)),this._dragMixinOnMouseUp(e),!1},_dragMixinOnMouseDown:function(t){if(!(t.originalEvent.button>0)){this._overwriteEventIfItComesFromMarker(t);var e=t._fromLayerSync,n=this._syncLayers("_dragMixinOnMouseDown",t);this._layer instanceof L.Marker&&(!this.options.snappable||e||n?this._disableSnapping():this._initSnappableMarkers()),this._layer instanceof L.CircleMarker&&!(this._layer instanceof L.Circle)&&(!this.options.snappable||e||n?this._layer.pm.options.editable?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag():this._layer.pm.options.editable||this._initSnappableMarkersDrag()),this._safeToCacheDragState&&(this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!1),this._tempDragCoord=t.latlng,L.DomEvent.on(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this)}},_dragMixinOnMouseMove:function(t){this._overwriteEventIfItComesFromMarker(t);var e=this._getDOMElem();this._syncLayers("_dragMixinOnMouseMove",t),this._dragging||(this._dragging=!0,L.DomUtil.addClass(e,"leaflet-pm-dragging"),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||(this._tempDragCoord=t.latlng),this._onLayerDrag(t),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp:function(t){var e=this,n=this._getDOMElem();return this._syncLayers("_dragMixinOnMouseUp",t),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),"touchmove mousemove",this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),"touchend mouseup",this._simulateMouseUpEvent,this),!!this._dragging&&(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(function(){e._dragging=!1,n&&L.DomUtil.removeClass(n,"leaflet-pm-dragging"),e._fireDragEnd(),e._fireEdit(),e._layerEdited=!0},10),!0)},_onLayerDrag:function(t){var e=t.latlng,n=e.lat-this._tempDragCoord.lat,r=e.lng-this._tempDragCoord.lng,i=function B(A){return A.map(function(j){if(Array.isArray(j))return B(j);var U={lat:j.lat+n,lng:j.lng+r};return(j.alt||j.alt===0)&&(U.alt=j.alt),U})};if(this._layer instanceof L.Circle||this._layer instanceof L.CircleMarker&&this._layer.options.editable){var l=i([this._layer.getLatLng()]);this._layer.setLatLng(l[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){var g=this._layer.getLatLng();this._layer._snapped&&(g=this._layer._orgLatLng);var y=i([g]);this._layer.setLatLng(y[0]),this._fireChange(this._layer.getLatLng(),"Edit")}else if(this._layer instanceof L.ImageOverlay){var _=i([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(_),this._fireChange(this._layer.getBounds(),"Edit")}else{var k=i(this._layer.getLatLngs());this._layer.setLatLngs(k),this._fireChange(this._layer.getLatLngs(),"Edit")}this._tempDragCoord=e,t.layer=this._layer,this._fireDrag(t)},addDraggingClass:function(){var t=this._getDOMElem();t&&L.DomUtil.addClass(t,"leaflet-pm-draggable")},removeDraggingClass:function(){var t=this._getDOMElem();t&&L.DomUtil.removeClass(t,"leaflet-pm-draggable")},_getDOMElem:function(){var t=null;return this._layer._path?t=this._layer._path:this._layer._renderer&&this._layer._renderer._container?t=this._layer._renderer._container:this._layer._image?t=this._layer._image:this._layer._icon&&(t=this._layer._icon),t},_overwriteEventIfItComesFromMarker:function(t){t.target.getLatLng&&(!t.target._radius||t.target._radius<=10)&&(t.containerPoint=this._map.mouseEventToContainerPoint(t.originalEvent),t.latlng=this._map.containerPointToLatLng(t.containerPoint))},_syncLayers:function(t,e){var n=this;if(this.enabled())return!1;if(!e._fromLayerSync&&this._layer===e.target&&this.options.syncLayersOnDrag){e._fromLayerSync=!0;var r=[];if(L.Util.isArray(this.options.syncLayersOnDrag))r=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(function(g){g instanceof L.LayerGroup&&(r=r.concat(g.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(var i in this._parentLayerGroup){var l=this._parentLayerGroup[i];l.pm&&(r=l.pm.getLayers(!0))}return L.Util.isArray(r)&&r.length>0&&(r=r.filter(function(g){return!!g.pm}).filter(function(g){return!!g.pm.options.draggable})).forEach(function(g){g!==n._layer&&g.pm[t]&&(g._snapped=!1,g.pm[t](e))}),r.length>0}return!1},_stopDOMImageDrag:function(t){return t.preventDefault(),!1}};function $e(t,e,n){var r=n.getMaxZoom();if(r===1/0&&(r=n.getZoom()),L.Util.isArray(t)){var i=[];return t.forEach(function(l){i.push($e(l,e,n))}),i}return t instanceof L.LatLng?function(l,g,y,_){return y.unproject(g.transform(y.project(l,_)),_)}(t,e,n,r):null}function $t(t,e){e instanceof L.Layer&&(e=e.getLatLng());var n=t.getMaxZoom();return n===1/0&&(n=t.getZoom()),t.project(e,n)}function de(t,e){var n=t.getMaxZoom();return n===1/0&&(n=t.getZoom()),t.unproject(e,n)}var Ln={_onRotateStart:function(t){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=$t(this._map,this._rotationOriginLatLng),this._rotationStartPoint=$t(this._map,t.target.getLatLng()),this._initialRotateLatLng=At(this._layer),this._startAngle=this.getAngle();var e=At(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,e),this._fireRotationStart(this._map,e)},_onRotate:function(t){var e=$t(this._map,t.target.getLatLng()),n=this._rotationStartPoint,r=this._rotationOriginPoint,i=Math.atan2(e.y-r.y,e.x-r.x)-Math.atan2(n.y-r.y,n.x-r.x);this._layer.setLatLngs(this._rotateLayer(i,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));var l=this;(function k(B){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],j=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1;if(j>-1&&A.push(j),L.Util.isArray(B[0]))B.forEach(function(Y,tt){return k(Y,A.slice(),tt)});else{var U=ht()(l._markers,A);B.forEach(function(Y,tt){U[tt].setLatLng(Y)})}})(this._layer.getLatLngs());var g=At(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(i,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));var y=180*i/Math.PI,_=(y=y<0?y+360:y)+this._startAngle;this._setAngle(_),this._rotationLayer.pm._setAngle(_),this._fireRotation(this._rotationLayer,y,g),this._fireRotation(this._map,y,g),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),"Rotation")},_onRotateEnd:function(){var t=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;var e=At(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=At(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,t,e),this._fireRotationEnd(this._map,t,e),this._rotationLayer.pm._fireEdit(this._rotationLayer,"Rotation"),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer:function(t,e,n,r,i){var l=$t(i,n);return this._matrix=r.clone().rotate(t,l).flip(),$e(e,this._matrix,i)},_setAngle:function(t){t=t<0?t+360:t,this._angle=t%360},_getRotationCenter:function(){var t=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),e=t.getCenter();return t.removeFrom(this._layer._map),e},enableRotate:function(){this.options.allowRotation?(this.rotateEnabled()&&this.disableRotate(),this._rotatePoly=L.polygon(this._layer.getLatLngs(),{fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0}),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=At(this._layer),this._rotateEnabled=!0,this._layer.on("remove",this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)):this.disableRotate()},disableRotate:function(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off("remove",this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled:function(){return this._rotateEnabled},rotateLayer:function(t){var e=this.getAngle(),n=this._layer.getLatLngs(),r=t*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(r,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+t),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(r,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());var i=this.getAngle()-e;i=i<0?i+360:i,this._startAngle=e,this._fireRotation(this._layer,i,n,this._layer),this._fireRotation(this._map||this._layer._map,i,n,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),"Rotation")},rotateLayerToAngle:function(t){var e=t-this.getAngle();this.rotateLayer(e)},getAngle:function(){return this._angle||0},setInitAngle:function(t){this._setAngle(t)}};const bn=Ln,vt=L.Class.extend({includes:[vn,p,bn,W],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:"click",removeVertexOn:"contextmenu",removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0},setOptions:function(t){L.Util.setOptions(this,t)},getOptions:function(){return this.options},applyOptions:function(){},isPolygon:function(){return this._layer instanceof L.Polygon},getShape:function(){return this._shape},_setPane:function(t,e){e==="layerPane"?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||"overlayPane":e==="vertexPane"?t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||"markerPane":e==="markerPane"&&(t.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||"markerPane")},remove:function(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation:function(t,e){var n=e.target,r={layer:this._layer,marker:n,event:e},i="";return t==="move"?i="moveVertexValidation":t==="add"?i="addVertexValidation":t==="remove"&&(i="removeVertexValidation"),this.options[i]&&typeof this.options[i]=="function"&&!this.options[i](r)?(t==="move"&&(n._cancelDragEventChain=n.getLatLng()),!1):(n._cancelDragEventChain=null,!0)},_vertexValidationDrag:function(t){return!t._cancelDragEventChain||(t._latlng=t._cancelDragEventChain,t.update(),!1)},_vertexValidationDragEnd:function(t){return!t._cancelDragEventChain||(t._cancelDragEventChain=null,!1)}});function fe(t){return function(e){if(Array.isArray(e))return Se(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,n){if(e){if(typeof e=="string")return Se(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Se(e,n)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Se(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}vt.LayerGroup=L.Class.extend({initialize:function(t){var e=this;this._layerGroup=t,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(function(n){return e._initLayer(n)}),this._layerGroup.on("layeradd",L.Util.throttle(function(n){if(!n.layer._pmTempLayer){e._layers=e.getLayers();var r=e._layers.filter(function(i){return!i.pm._parentLayerGroup||!(e._layerGroup._leaflet_id in i.pm._parentLayerGroup)});r.forEach(function(i){e._initLayer(i)}),r.length>0&&e._getMap()&&e._getMap().pm.globalEditModeEnabled()&&e.enabled()&&e.enable(e.getOptions())}},100,this),this),this._layerGroup.on("layerremove",function(n){e._removeLayerFromGroup(n.target)},this),this._layerGroup.on("layerremove",L.Util.throttle(function(n){n.target._pmTempLayer||(e._layers=e.getLayers())},100,this),this)},enable:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];e.length===0&&(this._layers=this.getLayers()),this._options=t,this._layers.forEach(function(n){n instanceof L.LayerGroup?e.indexOf(n._leaflet_id)===-1&&(e.push(n._leaflet_id),n.pm.enable(t,e)):n.pm.enable(t)})},disable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];t.length===0&&(this._layers=this.getLayers()),this._layers.forEach(function(e){e instanceof L.LayerGroup?t.indexOf(e._leaflet_id)===-1&&(t.push(e._leaflet_id),e.pm.disable(t)):e.pm.disable()})},enabled:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];t.length===0&&(this._layers=this.getLayers());var e=this._layers.find(function(n){return n instanceof L.LayerGroup?t.indexOf(n._leaflet_id)===-1&&(t.push(n._leaflet_id),n.pm.enabled(t)):n.pm.enabled()});return!!e},toggleEdit:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];e.length===0&&(this._layers=this.getLayers()),this._options=t,this._layers.forEach(function(n){n instanceof L.LayerGroup?e.indexOf(n._leaflet_id)===-1&&(e.push(n._leaflet_id),n.pm.toggleEdit(t,e)):n.pm.toggleEdit(t)})},_initLayer:function(t){var e=L.Util.stamp(this._layerGroup);t.pm._parentLayerGroup||(t.pm._parentLayerGroup={}),t.pm._parentLayerGroup[e]=this._layerGroup},_removeLayerFromGroup:function(t){if(t.pm&&t.pm._layerGroup){var e=L.Util.stamp(this._layerGroup);delete t.pm._layerGroup[e]}},dragging:function(){if(this._layers=this.getLayers(),this._layers){var t=this._layers.find(function(e){return e.pm.dragging()});return!!t}return!1},getOptions:function(){return this.options},_getMap:function(){var t;return this._map||((t=this._layers.find(function(e){return!!e._map}))===null||t===void 0?void 0:t._map)||null},getLayers:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[],i=[];return t?this._layerGroup.getLayers().forEach(function(l){i.push(l),l instanceof L.LayerGroup&&r.indexOf(l._leaflet_id)===-1&&(r.push(l._leaflet_id),i=i.concat(l.pm.getLayers(!0,!0,!0,r)))}):i=this._layerGroup.getLayers(),n&&(i=i.filter(function(l){return!(l instanceof L.LayerGroup)})),e&&(i=(i=(i=i.filter(function(l){return!!l.pm})).filter(function(l){return!l._pmTempLayer})).filter(function(l){return!L.PM.optIn&&!l.options.pmIgnore||L.PM.optIn&&l.options.pmIgnore===!1})),i},setOptions:function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];e.length===0&&(this._layers=this.getLayers()),this.options=t,this._layers.forEach(function(n){n.pm&&(n instanceof L.LayerGroup?e.indexOf(n._leaflet_id)===-1&&(e.push(n._leaflet_id),n.pm.setOptions(t,e)):n.pm.setOptions(t))})}}),vt.Marker=vt.extend({_shape:"Marker",initialize:function(t){this._layer=t,this._enabled=!1,this._layer.on("dragend",this._onDragEnd,this)},enable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0};L.Util.setOptions(this,t),this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._fireEnable()):this.disable()},disable:function(){this.enabled()&&(this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this._layer.off("contextmenu",this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled:function(){return this._enabled},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_removeMarker:function(t){var e=t.target;e.remove(),this._fireRemove(e),this._fireRemove(this._map,e)},_onDragEnd:function(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers:function(){var t=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,t.off("pm:drag",this._handleSnapping,this),t.on("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.on("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this),t.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){var t=this._layer;t.off("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this)}});const kn={filterMarkerGroup:function(){this.markerCache=[],this.createCache(),this._layer.on("pm:edit",this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||(this.throttledApplyLimitFilters=L.Util.throttle(this.applyLimitFilters,100,this)),this._layer.on("pm:disable",this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on("pm:vertexremoved",this._initMarkers,this),this._map.on("mousemove",this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents:function(){this._map.off("mousemove",this.throttledApplyLimitFilters,this),this._layer.off("pm:edit",this.createCache,this),this._layer.off("pm:disable",this._removeMarkerLimitEvents,this),this._layer.off("pm:vertexremoved",this._initMarkers,this)},createCache:function(){var t=[].concat(fe(this._markerGroup.getLayers()),fe(this.markerCache));this.markerCache=t.filter(function(e,n,r){return r.indexOf(e)===n})},renderLimits:function(t){var e=this;this.markerCache.forEach(function(n){t.includes(n)?e._markerGroup.addLayer(n):e._markerGroup.removeLayer(n)})},applyLimitFilters:function(t){var e=t.latlng,n=e===void 0?{lat:0,lng:0}:e;if(!this._preventRenderMarkers){var r=fe(this._filterClosestMarkers(n));this.renderLimits(r)}},_filterClosestMarkers:function(t){var e=fe(this.markerCache),n=this.options.limitMarkersToCount;return n===-1?e:(e.sort(function(r,i){return r._latlng.distanceTo(t)-i._latlng.distanceTo(t)}),e.filter(function(r,i){return!(n>-1)||i<n}))},_preventRenderMarkers:!1,_preventRenderingMarkers:function(t){this._preventRenderMarkers=!!t}};function Mn(t,e){return function(n){if(Array.isArray(n))return n}(t)||function(n,r){var i=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(i!=null){var l,g,y=[],_=!0,k=!1;try{for(i=i.call(n);!(_=(l=i.next()).done)&&(y.push(l.value),!r||y.length!==r);_=!0);}catch(B){k=!0,g=B}finally{try{_||i.return==null||i.return()}finally{if(k)throw g}}return y}}(t,e)||function(n,r){if(n){if(typeof n=="string")return We(n,r);var i=Object.prototype.toString.call(n).slice(8,-1);if(i==="Object"&&n.constructor&&(i=n.constructor.name),i==="Map"||i==="Set")return Array.from(n);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return We(n,r)}}(t,e)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function We(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function xn(t){return function(e){if(Array.isArray(e))return Oe(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,n){if(e){if(typeof e=="string")return Oe(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oe(e,n)}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Oe(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}vt.Line=vt.extend({includes:[kn],_shape:"Line",initialize:function(t){this._layer=t,this._enabled=!1},enable:function(t){L.Util.setOptions(this,t),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.on("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color!=="#f00000ff"?(this.cachedColor=this._layer.options.color,this.isRed=!1):this.isRed=!0,this._handleLayerStyle()),this._fireEnable()):this.disable())},disable:function(){if(this.enabled()&&!this._dragging){this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off("remove",this.disable,this),this.options.allowSelfIntersection||this._layer.off("pm:vertexremoved",this._handleSelfIntersectionOnVertexRemoval,this);var t=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(t,"leaflet-pm-draggable"),this._map.hasLayer(this._layer)&&!this.hasSelfIntersection()||L.DomUtil.removeClass(t,"leaflet-pm-invalid"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()}},enabled:function(){return this._enabled},toggleEdit:function(t){return this.enabled()?this.disable():this.enable(t),this.enabled()},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers:function(){var t=this,e=this._map,n=this._layer.getLatLngs();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,this._markers=function r(i){if(Array.isArray(i[0]))return i.map(r,t);var l=i.map(t._createMarker,t);return t.options.hideMiddleMarkers!==!0&&i.map(function(g,y){var _=t.isPolygon()?(y+1)%i.length:y+1;return t._createMiddleMarker(l[y],l[_])}),l}(n),this.filterMarkerGroup(),e.addLayer(this._markerGroup)},_createMarker:function(t){var e=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._pmTempLayer=!0,this.options.rotate?(e.on("dragstart",this._onRotateStart,this),e.on("drag",this._onRotate,this),e.on("dragend",this._onRotateEnd,this)):(e.on("click",this._onVertexClick,this),e.on("dragstart",this._onMarkerDragStart,this),e.on("move",this._onMarkerDrag,this),e.on("dragend",this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||e.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(e),e},_createMiddleMarker:function(t,e){if(!t||!e)return!1;var n=L.PM.Utils.calcMiddleLatLng(this._map,t.getLatLng(),e.getLatLng()),r=this._createMarker(n),i=L.divIcon({className:"marker-icon marker-icon-middle"});return r.setIcon(i),r.leftM=t,r.rightM=e,t._middleMarkerNext=r,e._middleMarkerPrev=r,r.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),r.on("movestart",this._onMiddleMarkerMoveStart,this),r},_onMiddleMarkerClick:function(t){var e=t.target;if(this._vertexValidation("add",t)){var n=L.divIcon({className:"marker-icon"});e.setIcon(n),this._addMarker(e,e.leftM,e.rightM)}},_onMiddleMarkerMoveStart:function(t){var e=t.target;e.on("moveend",this._onMiddleMarkerMoveEnd,this),this._vertexValidation("add",t)?(e._dragging=!0,this._addMarker(e,e.leftM,e.rightM)):e.on("move",this._onMiddleMarkerMovePrevent,this)},_onMiddleMarkerMovePrevent:function(t){var e=t.target;this._vertexValidationDrag(e)},_onMiddleMarkerMoveEnd:function(t){var e=t.target;if(e.off("move",this._onMiddleMarkerMovePrevent,this),e.off("moveend",this._onMiddleMarkerMoveEnd,this),this._vertexValidationDragEnd(e)){var n=L.divIcon({className:"marker-icon"});e.setIcon(n),setTimeout(function(){delete e._dragging},100)}},_addMarker:function(t,e,n){t.off("movestart",this._onMiddleMarkerMoveStart,this),t.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);var r=t.getLatLng(),i=this._layer._latlngs;delete t.leftM,delete t.rightM;var l=L.PM.Utils.findDeepMarkerIndex(this._markers,e),g=l.indexPath,y=l.index,_=l.parentPath,k=g.length>1?ht()(i,_):i,B=g.length>1?ht()(this._markers,_):this._markers;k.splice(y+1,0,r),B.splice(y+1,0,t),this._layer.setLatLngs(i),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(e,t),this._createMiddleMarker(t,n)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"),this._fireVertexAdded(t,L.PM.Utils.findDeepMarkerIndex(this._markers,t).indexPath,r),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection:function(){return yt(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval:function(){this._handleLayerStyle(!0),this.hasSelfIntersection()&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle:function(t){var e=this._layer;if(this.hasSelfIntersection()){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return;t?this._flashLayer():(e.setStyle({color:"#f00000ff"}),this.isRed=!0),this._fireIntersect(yt(this._layer.toGeoJSON(15)))}else e.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1)},_flashLayer:function(){var t=this;this.cachedColor||(this.cachedColor=this._layer.options.color),this._layer.setStyle({color:"#f00000ff"}),this.isRed=!0,window.setTimeout(function(){t._layer.setStyle({color:t.cachedColor}),t.isRed=!1},200)},_updateDisabledMarkerStyle:function(t,e){var n=this;t.forEach(function(r){Array.isArray(r)?n._updateDisabledMarkerStyle(r,e):r._icon&&(e&&!n._checkMarkerAllowedToDrag(r)?L.DomUtil.addClass(r._icon,"vertexmarker-disabled"):L.DomUtil.removeClass(r._icon,"vertexmarker-disabled"))})},_removeMarker:function(t){var e=t.target;if(this._vertexValidation("remove",t)){this.options.allowSelfIntersection||(this._coordsBeforeEdit=At(this._layer,this._layer.getLatLngs()));var n=this._layer.getLatLngs(),r=L.PM.Utils.findDeepMarkerIndex(this._markers,e),i=r.indexPath,l=r.index,g=r.parentPath;if(i){var y=i.length>1?ht()(n,g):n,_=i.length>1?ht()(this._markers,g):this._markers;if(this.options.removeLayerBelowMinVertexCount||!(y.length<=2||this.isPolygon()&&y.length<=3)){y.splice(l,1),this._layer.setLatLngs(n),this.isPolygon()&&y.length<=2&&y.splice(0,y.length);var k=!1;if(y.length<=1&&(y.splice(0,y.length),g.length>1&&i.length>1&&(n=Xt(n)),this._layer.setLatLngs(n),this._initMarkers(),k=!0),pt(n)||this._layer.remove(),n=Xt(n),this._layer.setLatLngs(n),this._markers=Xt(this._markers),!k&&(_=i.length>1?ht()(this._markers,g):this._markers,e._middleMarkerPrev&&this._markerGroup.removeLayer(e._middleMarkerPrev),e._middleMarkerNext&&this._markerGroup.removeLayer(e._middleMarkerNext),this._markerGroup.removeLayer(e),_)){var B,A;if(this.isPolygon()?(B=(l+1)%_.length,A=(l+(_.length-1))%_.length):(A=l-1<0?void 0:l-1,B=l+1>=_.length?void 0:l+1),B!==A){var j=_[A],U=_[B];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(j,U)}_.splice(l,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(e,i),this._fireChange(this._layer.getLatLngs(),"Edit")}else this._flashLayer()}}},updatePolygonCoordsFromMarkerDrag:function(t){var e=this._layer.getLatLngs(),n=t.getLatLng(),r=L.PM.Utils.findDeepMarkerIndex(this._markers,t),i=r.indexPath,l=r.index,g=r.parentPath;(i.length>1?ht()(e,g):e).splice(l,1,n),this._layer.setLatLngs(e)},_getNeighborMarkers:function(t){var e=L.PM.Utils.findDeepMarkerIndex(this._markers,t),n=e.indexPath,r=e.index,i=e.parentPath,l=n.length>1?ht()(this._markers,i):this._markers,g=(r+1)%l.length;return{prevMarker:l[(r+(l.length-1))%l.length],nextMarker:l[g]}},_checkMarkerAllowedToDrag:function(t){var e=this._getNeighborMarkers(t),n=e.prevMarker,r=e.nextMarker,i=L.polyline([n.getLatLng(),t.getLatLng()]),l=L.polyline([t.getLatLng(),r.getLatLng()]),g=Ht(this._layer.toGeoJSON(15),i.toGeoJSON(15)).features.length,y=Ht(this._layer.toGeoJSON(15),l.toGeoJSON(15)).features.length;return t.getLatLng()===this._markers[0][0].getLatLng()?y+=1:t.getLatLng()===this._markers[0][this._markers[0].length-1].getLatLng()&&(g+=1),!(g<=2&&y<=2)},_onMarkerDragStart:function(t){var e=t.target;if(this.cachedColor||(this.cachedColor=this._layer.options.color),this._vertexValidation("move",t)){var n=L.PM.Utils.findDeepMarkerIndex(this._markers,e).indexPath;this._fireMarkerDragStart(t,n),this.options.allowSelfIntersection||(this._coordsBeforeEdit=At(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(e):this._markerAllowedToDrag=null}},_onMarkerDrag:function(t){var e=t.target;if(this._vertexValidationDrag(e)){var n=L.PM.Utils.findDeepMarkerIndex(this._markers,e),r=n.indexPath,i=n.index,l=n.parentPath;if(r){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1)return this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),void this._handleLayerStyle();this.updatePolygonCoordsFromMarkerDrag(e);var g=r.length>1?ht()(this._markers,l):this._markers,y=(i+1)%g.length,_=(i+(g.length-1))%g.length,k=e.getLatLng(),B=g[_].getLatLng(),A=g[y].getLatLng();if(e._middleMarkerNext){var j=L.PM.Utils.calcMiddleLatLng(this._map,k,A);e._middleMarkerNext.setLatLng(j)}if(e._middleMarkerPrev){var U=L.PM.Utils.calcMiddleLatLng(this._map,k,B);e._middleMarkerPrev.setLatLng(U)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(t,r),this._fireChange(this._layer.getLatLngs(),"Edit")}}},_onMarkerDragEnd:function(t){var e=t.target;if(this._vertexValidationDragEnd(e)){var n=L.PM.Utils.findDeepMarkerIndex(this._markers,e).indexPath,r=this.hasSelfIntersection();r&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(r=!1);var i=!this.options.allowSelfIntersection&&r;if(this._fireMarkerDragEnd(t,n,i),i)return this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),void this._fireLayerReset(t,n);!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit")}},_onVertexClick:function(t){var e=t.target;if(!e._dragging){var n=L.PM.Utils.findDeepMarkerIndex(this._markers,e).indexPath;this._fireVertexClick(t,n)}}}),vt.Polygon=vt.Line.extend({_shape:"Polygon",_checkMarkerAllowedToDrag:function(t){var e=this._getNeighborMarkers(t),n=e.prevMarker,r=e.nextMarker,i=L.polyline([n.getLatLng(),t.getLatLng()]),l=L.polyline([t.getLatLng(),r.getLatLng()]),g=Ht(this._layer.toGeoJSON(15),i.toGeoJSON(15)).features.length,y=Ht(this._layer.toGeoJSON(15),l.toGeoJSON(15)).features.length;return!(g<=2&&y<=2)}}),vt.Rectangle=vt.Polygon.extend({_shape:"Rectangle",_initMarkers:function(){var t=this,e=this._map,n=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,e.addLayer(this._markerGroup),this._markers=[],this._markers[0]=n.map(this._createMarker,this);var r=Mn(this._markers,1);this._cornerMarkers=r[0],this._layer.getLatLngs()[0].forEach(function(i,l){var g=t._cornerMarkers.find(function(y){return y._index===l});g&&g.setLatLng(i)})},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker:function(t,e){var n=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(n,"vertexPane"),n._origLatLng=t,n._index=e,n._pmTempLayer=!0,this._markerGroup.addLayer(n),n},_addMarkerEvents:function(){var t=this;this._markers[0].forEach(function(e){e.on("dragstart",t._onMarkerDragStart,t),e.on("drag",t._onMarkerDrag,t),e.on("dragend",t._onMarkerDragEnd,t),t.options.preventMarkerRemoval||e.on("contextmenu",t._removeMarker,t)})},_removeMarker:function(){return null},_onMarkerDragStart:function(t){if(this._vertexValidation("move",t)){var e=t.target,n=this._cornerMarkers;e._oppositeCornerLatLng=n.find(function(r){return r._index===(e._index+2)%4}).getLatLng(),e._snapped=!1,this._fireMarkerDragStart(t)}},_onMarkerDrag:function(t){var e=t.target;this._vertexValidationDrag(e)&&e._index!==void 0&&(this._adjustRectangleForMarkerMove(e),this._fireMarkerDrag(t),this._fireChange(this._layer.getLatLngs(),"Edit"))},_onMarkerDragEnd:function(t){var e=t.target;this._vertexValidationDragEnd(e)&&(this._cornerMarkers.forEach(function(n){delete n._oppositeCornerLatLng}),this._fireMarkerDragEnd(t),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),"Edit"))},_adjustRectangleForMarkerMove:function(t){L.extend(t._origLatLng,t._latlng);var e=L.PM.Utils._getRotatedRectangle(t.getLatLng(),t._oppositeCornerLatLng,this._angle||0,this._map);this._layer.setLatLngs(e),this._adjustAllMarkers(),this._layer.redraw()},_adjustAllMarkers:function(){var t=this,e=this._layer.getLatLngs()[0];e&&e.length!==4&&e.length>0?(e.forEach(function(n,r){t._cornerMarkers[r].setLatLng(n)}),this._cornerMarkers.slice(e.length).forEach(function(n){n.setLatLng(e[0])})):e&&e.length?this._cornerMarkers.forEach(function(n){n.setLatLng(e[n._index])}):console.error("The layer has no LatLngs")},_findCorners:function(){var t=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(t[0],t[2],this._angle||0,this._map)}}),vt.Circle=vt.extend({_shape:"Circle",initialize:function(t){this._layer=t,this._enabled=!1,this._updateHiddenPolyCircle()},enable:function(t){L.Util.setOptions(this,t),this._map=this._layer._map,this.options.allowEditing?(this.enabled()||this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._updateHiddenPolyCircle(),this._fireEnable()):this.disable()},disable:function(){if(this.enabled()&&!this._dragging){this._centerMarker.off("dragstart",this._onCircleDragStart,this),this._centerMarker.off("drag",this._onCircleDrag,this),this._centerMarker.off("dragend",this._onCircleDragEnd,this),this._outerMarker.off("drag",this._handleOuterMarkerSnapping,this),this._layer.off("remove",this.disable,this),this._enabled=!1,this._helperLayers.clearLayers();var t=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(t,"leaflet-pm-draggable"),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()}},enabled:function(){return this._enabled},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},_initMarkers:function(){var t=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(t);var e=this._layer.getLatLng(),n=this._layer._radius,r=this._getLatLngOnCircle(e,n);this._centerMarker=this._createCenterMarker(e),this._outerMarker=this._createOuterMarker(r),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},applyOptions:function(){this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this),this._centerMarker.on("move",this._moveCircle,this)):this._disableSnapping()},_createHintLine:function(t,e){var n=t.getLatLng(),r=e.getLatLng();this._hintline=L.polyline([n,r],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(t){var e=this._createMarker(t);return L.DomUtil.addClass(e._icon,"leaflet-pm-draggable"),e.on("drag",this._moveCircle,this),e.on("dragstart",this._onCircleDragStart,this),e.on("drag",this._onCircleDrag,this),e.on("dragend",this._onCircleDragEnd,this),e},_createOuterMarker:function(t){var e=this._createMarker(t);return e.on("drag",this._resizeCircle,this),e},_createMarker:function(t){var e=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._origLatLng=t,e._pmTempLayer=!0,e.on("dragstart",this._onMarkerDragStart,this),e.on("drag",this._onMarkerDrag,this),e.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(e),e},_resizeCircle:function(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_moveCircle:function(t){if(!t.target._cancelDragEventChain){var e=t.latlng;this._layer.setLatLng(e);var n=this._layer._radius,r=this._getLatLngOnCircle(e,n);this._outerMarker._latlng=r,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")}},_syncCircleRadius:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),n=this._map.distance(t,e);this.options.minRadiusCircle&&n<this.options.minRadiusCircle?this._layer.setRadius(this.options.minRadiusCircle):this.options.maxRadiusCircle&&n>this.options.maxRadiusCircle?this._layer.setRadius(this.options.maxRadiusCircle):this._layer.setRadius(n),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng();this._hintline.setLatLngs([t,e])},_disableSnapping:function(){var t=this;this._markers.forEach(function(e){e.off("move",t._syncHintLine,t),e.off("move",t._syncCircleRadius,t),e.off("drag",t._handleSnapping,t),e.off("dragend",t._cleanupSnapping,t)}),this._layer.off("pm:dragstart",this._unsnap,this)},_onMarkerDragStart:function(t){this._vertexValidation("move",t)&&this._fireMarkerDragStart(t)},_onMarkerDrag:function(t){var e=t.target;this._vertexValidationDrag(e)&&this._fireMarkerDrag(t)},_onMarkerDragEnd:function(t){var e=t.target;this._vertexValidationDragEnd(e)&&(this._fireEdit(),this._layerEdited=!0,this._fireMarkerDragEnd(t))},_onCircleDragStart:function(t){this._vertexValidationDrag(t.target)?(delete this._vertexValidationReset,this._fireDragStart()):this._vertexValidationReset=!0},_onCircleDrag:function(t){this._vertexValidationReset||this._fireDrag(t)},_onCircleDragEnd:function(){this._vertexValidationReset?delete this._vertexValidationReset:this._fireDragEnd()},_updateHiddenPolyCircle:function(){var t=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!t).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!t),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_getLatLngOnCircle:function(t,e){var n=this._map.project(t),r=L.point(n.x+e,n.y);return this._map.unproject(r)},_getNewDestinationOfOuterMarker:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),n=this._map.distance(t,e);return this.options.minRadiusCircle&&n<this.options.minRadiusCircle?e=jt(this._map,t,e,this.options.minRadiusCircle):this.options.maxRadiusCircle&&n>this.options.maxRadiusCircle&&(e=jt(this._map,t,e,this.options.maxRadiusCircle)),e},_handleOuterMarkerSnapping:function(){if(this._outerMarker._snapped){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),n=this._map.distance(t,e);(this.options.minRadiusCircle&&n<this.options.minRadiusCircle||this.options.maxRadiusCircle&&n>this.options.maxRadiusCircle)&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())}}),vt.CircleMarker=vt.extend({_shape:"CircleMarker",initialize:function(t){this._layer=t,this._enabled=!1,this._updateHiddenPolyCircle()},enable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0,snappable:!0};L.Util.setOptions(this,t),this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._layer.on("pm:dragstart",this._onDragStart,this),this._layer.on("pm:drag",this._onMarkerDrag,this),this._layer.on("pm:dragend",this._onMarkerDragEnd,this),this._updateHiddenPolyCircle(),this._fireEnable()):this.disable()},disable:function(){this._dragging||(this._helperLayers&&this._helperLayers.clearLayers(),this._map||(this._map=this._layer._map),this._map||(this.options.editable?(this._map.off("move",this._syncMarkers,this),this._outerMarker&&this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this)):this._map.off("move",this._updateHiddenPolyCircle,this)),this.disableLayerDrag(),this._layer.off("contextmenu",this._removeMarker,this),this._layer.off("remove",this.disable,this),this.enabled()&&(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},enabled:function(){return this._enabled},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},applyOptions:function(){!this.options.editable&&this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.editable?(this._initMarkers(),this._map.on("move",this._syncMarkers,this)):this._map.on("move",this._updateHiddenPolyCircle,this),this.options.snappable?this.options.editable?(this._initSnappableMarkers(),this._centerMarker.on("drag",this._moveCircle,this),this.options.editable&&this._outerMarker.on("drag",this._handleOuterMarkerSnapping,this),this._outerMarker.on("move",this._syncHintLine,this),this._outerMarker.on("move",this._syncCircleRadius,this)):this._initSnappableMarkersDrag():this.options.editable?this._disableSnapping():this._disableSnappingDrag(),this.options.preventMarkerRemoval||this._layer.on("contextmenu",this._removeMarker,this)},_initMarkers:function(){var t=this._map;this._helperLayers&&this._helperLayers.clearLayers(),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(t);var e=this._layer.getLatLng(),n=this._layer._radius,r=this._getLatLngOnCircle(e,n);this._centerMarker=this._createCenterMarker(e),this._outerMarker=this._createOuterMarker(r),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle:function(t,e){var n=this._map.project(t),r=L.point(n.x+e,n.y);return this._map.unproject(r)},_createHintLine:function(t,e){var n=t.getLatLng(),r=e.getLatLng();this._hintline=L.polyline([n,r],this.options.hintlineStyle),this._setPane(this._hintline,"layerPane"),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker:function(t){var e=this._createMarker(t);return this.options.draggable?L.DomUtil.addClass(e._icon,"leaflet-pm-draggable"):e.dragging.disable(),e},_createOuterMarker:function(t){var e=this._createMarker(t);return e.on("drag",this._resizeCircle,this),e},_createMarker:function(t){var e=new L.Marker(t,{draggable:!0,icon:L.divIcon({className:"marker-icon"})});return this._setPane(e,"vertexPane"),e._origLatLng=t,e._pmTempLayer=!0,e.on("dragstart",this._onMarkerDragStart,this),e.on("drag",this._onMarkerDrag,this),e.on("dragend",this._onMarkerDragEnd,this),this._helperLayers.addLayer(e),e},_moveCircle:function(){var t=this._centerMarker.getLatLng();this._layer.setLatLng(t);var e=this._layer._radius,n=this._getLatLngOnCircle(t,e);this._outerMarker._latlng=n,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced("Edit"),this._fireChange(this._layer.getLatLng(),"Edit")},_syncMarkers:function(){var t=this._layer.getLatLng(),e=this._layer._radius,n=this._getLatLngOnCircle(t,e);this._outerMarker.setLatLng(n),this._centerMarker.setLatLng(t),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle:function(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),n=this._map.project(t).distanceTo(this._map.project(e));this.options.minRadiusCircleMarker&&n<this.options.minRadiusCircleMarker?this._layer.setRadius(this.options.minRadiusCircleMarker):this.options.maxRadiusCircleMarker&&n>this.options.maxRadiusCircleMarker?this._layer.setRadius(this.options.maxRadiusCircleMarker):this._layer.setRadius(n),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),"Edit")},_syncHintLine:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng();this._hintline.setLatLngs([t,e])},_removeMarker:function(){this.options.editable&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart:function(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart:function(t){this._vertexValidation("move",t)&&this._fireMarkerDragStart(t)},_onMarkerDrag:function(t){var e=t.target;e instanceof L.Marker&&!this._vertexValidationDrag(e)||this._fireMarkerDrag(t)},_onMarkerDragEnd:function(t){this._map.pm.Draw.CircleMarker._layerIsDragging=!1;var e=t.target;this._vertexValidationDragEnd(e)&&(this.options.editable&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(t))},_initSnappableMarkersDrag:function(){var t=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,t.off("pm:drag",this._handleSnapping,this),t.on("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.on("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this),t.on("pm:dragstart",this._unsnap,this)},_disableSnappingDrag:function(){var t=this._layer;t.off("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this)},_updateHiddenPolyCircle:function(){var t=this._layer._map||this._map;if(t){var e=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),t,this._layer.getLatLng()),n=L.circle(this._layer.getLatLng(),this._layer.options);n.setRadius(e);var r=t&&t.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(n,200,!r).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(n,200,!r),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker:function(){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),n=this._map.project(t).distanceTo(this._map.project(e));return this.options.minRadiusCircleMarker&&n<this.options.minRadiusCircleMarker?e=jt(this._map,t,e,L.PM.Utils.pxRadiusToMeterRadius(this.options.minRadiusCircleMarker,this._map,t)):this.options.maxRadiusCircleMarker&&n>this.options.maxRadiusCircleMarker&&(e=jt(this._map,t,e,L.PM.Utils.pxRadiusToMeterRadius(this.options.maxRadiusCircleMarker,this._map,t))),e},_handleOuterMarkerSnapping:function(){if(this._outerMarker._snapped){var t=this._centerMarker.getLatLng(),e=this._outerMarker.getLatLng(),n=this._map.project(t).distanceTo(this._map.project(e));(this.options.minRadiusCircleMarker&&n<this.options.minRadiusCircleMarker||this.options.maxRadiusCircleMarker&&n>this.options.maxRadiusCircleMarker)&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())}}),vt.ImageOverlay=vt.extend({_shape:"ImageOverlay",initialize:function(t){this._layer=t,this._enabled=!1},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},enabled:function(){return this._enabled},enable:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{draggable:!0,snappable:!0};L.Util.setOptions(this,t),this._map=this._layer._map,this._map&&(this.options.allowEditing?(this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on("remove",this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()):this.disable())},disable:function(){this._dragging||(this._map||(this._map=this._layer._map),this.disableLayerDrag(),this._layer.off("remove",this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners:function(){var t=this._layer.getBounds();return[t.getNorthWest(),t.getNorthEast(),t.getSouthEast(),t.getSouthWest()]}}),vt.Text=vt.extend({_shape:"Text",initialize:function(t){this._layer=t,this._enabled=!1},enable:function(t){L.Util.setOptions(this,t),this.textArea&&(this.options.allowEditing&&this._layer._map?(this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove("pm-disabled"),this._layer.on("remove",this.disable,this),L.DomEvent.on(this.textArea,"input",this._autoResize,this),L.DomEvent.on(this.textArea,"focus",this._focusChange,this),L.DomEvent.on(this.textArea,"blur",this._focusChange,this),this._layer.on("dblclick",L.DomEvent.stop),L.DomEvent.off(this.textArea,"mousedown",this._preventTextSelection),this._enabled=!0,this._fireEnable()):this.disable())},disable:function(){if(this.enabled()){this._layer.off("remove",this.disable,this),L.DomEvent.off(this.textArea,"input",this._autoResize,this),L.DomEvent.off(this.textArea,"focus",this._focusChange,this),L.DomEvent.off(this.textArea,"blur",this._focusChange,this),L.DomEvent.off(document,"click",this._documentClick,this),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add("pm-disabled");var t=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,"mousedown",this._preventTextSelection),t.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1}},enabled:function(){return this._enabled},toggleEdit:function(t){this.enabled()?this.disable():this.enable(t)},applyOptions:function(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers:function(){var t=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0||this.options.snapSegment,t.off("pm:drag",this._handleSnapping,this),t.on("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.on("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this),t.on("pm:dragstart",this._unsnap,this)},_disableSnapping:function(){var t=this._layer;t.off("pm:drag",this._handleSnapping,this),t.off("pm:dragend",this._cleanupSnapping,this),t.off("pm:dragstart",this._unsnap,this)},_autoResize:function(){this.textArea.style.height="1px",this.textArea.style.width="1px";var t=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,e=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height="".concat(t,"px"),this.textArea.style.width="".concat(e,"px"),this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur:function(){var t=this;this._disableOnBlurActive=!0,setTimeout(function(){t.enabled()&&L.DomEvent.on(document,"click",t._documentClick,t)},100)},_documentClick:function(t){t.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange:function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=this._hasFocus;this._hasFocus=t.type==="focus",!e!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus:function(){this.textArea.classList.add("pm-hasfocus"),this._map.dragging&&(this._safeToCacheDragState&&(this._originalMapDragState=this._map.dragging._enabled,this._safeToCacheDragState=!1),this._map.dragging.disable())},_removeFocus:function(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove("pm-hasfocus")},focus:function(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.focus()},blur:function(){if(!this.enabled())throw new TypeError("Layer is not enabled");this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus:function(){return this._hasFocus},getElement:function(){return this.textArea},setText:function(t){this.textArea.value=t,this._autoResize()},getText:function(){return this.textArea.value},_initTextMarker:function(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){var t,e=this.options.className.split(" ");(t=this.textArea.classList).add.apply(t,xn(e))}var n=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(n),this._layer.once("add",this._createTextMarker,this)},_createTextMarker:function(){var t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];this._layer.off("add",this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap="off",this.textArea.style.overflow="hidden",this.textArea.style.height=L.DomUtil.getStyle(this.textArea,"font-size"),this.textArea.style.width="1px",this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),t===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection:function(t){t.preventDefault()}});var De=function(t,e,n,r,i,l){this._matrix=[t,e,n,r,i,l]};De.init=function(){return new L.PM.Matrix(1,0,0,1,0,0)},De.prototype={transform:function(t){return this._transform(t.clone())},_transform:function(t){var e=this._matrix,n=t.x,r=t.y;return t.x=e[0]*n+e[1]*r+e[4],t.y=e[2]*n+e[3]*r+e[5],t},untransform:function(t){var e=this._matrix;return new L.Point((t.x/e[0]-e[4])/e[0],(t.y/e[2]-e[5])/e[2])},clone:function(){var t=this._matrix;return new L.PM.Matrix(t[0],t[1],t[2],t[3],t[4],t[5])},translate:function(t){return t===void 0?new L.Point(this._matrix[4],this._matrix[5]):(typeof t=="number"?(e=t,n=t):(e=t.x,n=t.y),this._add(1,0,0,1,e,n));var e,n},scale:function(t,e){return t===void 0?new L.Point(this._matrix[0],this._matrix[3]):(e=e||L.point(0,0),typeof t=="number"?(n=t,r=t):(n=t.x,r=t.y),this._add(n,0,0,r,e.x,e.y)._add(1,0,0,1,-e.x,-e.y));var n,r},rotate:function(t,e){var n=Math.cos(t),r=Math.sin(t);return e=e||new L.Point(0,0),this._add(n,r,-r,n,e.x,e.y)._add(1,0,0,1,-e.x,-e.y)},flip:function(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add:function(t,e,n,r,i,l){var g,y=[[],[],[]],_=this._matrix,k=[[_[0],_[2],_[4]],[_[1],_[3],_[5]],[0,0,1]],B=[[t,n,i],[e,r,l],[0,0,1]];t&&t instanceof L.PM.Matrix&&(B=[[(_=t._matrix)[0],_[2],_[4]],[_[1],_[3],_[5]],[0,0,1]]);for(var A=0;A<3;A+=1)for(var j=0;j<3;j+=1){g=0;for(var U=0;U<3;U+=1)g+=k[A][U]*B[U][j];y[A][j]=g}return this._matrix=[y[0][0],y[1][0],y[0][1],y[1][1],y[0][2],y[1][2]],this}};const wn=De;var Cn={calcMiddleLatLng:function(t,e,n){var r=t.project(e),i=t.project(n);return t.unproject(r._add(i)._divideBy(2))},findLayers:function(t){var e=[];return t.eachLayer(function(n){(n instanceof L.Polyline||n instanceof L.Marker||n instanceof L.Circle||n instanceof L.CircleMarker||n instanceof L.ImageOverlay)&&e.push(n)}),e=(e=(e=e.filter(function(n){return!!n.pm})).filter(function(n){return!n._pmTempLayer})).filter(function(n){return!L.PM.optIn&&!n.options.pmIgnore||L.PM.optIn&&n.options.pmIgnore===!1})},circleToPolygon:function(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:60,n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],r=t.getLatLng(),i=t.getRadius(),l=te(r,i,e,0,n),g=[],y=0;y<l.length;y+=1){var _=[l[y].lat,l[y].lng];g.push(_)}return L.polygon(g,t.options)},disablePopup:function(t){t.getPopup()&&(t._tempPopupCopy=t.getPopup(),t.unbindPopup())},enablePopup:function(t){t._tempPopupCopy&&(t.bindPopup(t._tempPopupCopy),delete t._tempPopupCopy)},_fireEvent:function(t,e,n){var r=arguments.length>3&&arguments[3]!==void 0&&arguments[3];t.fire(e,n,r);var i=this.getAllParentGroups(t),l=i.groups;l.forEach(function(g){g.fire(e,n,r)})},getAllParentGroups:function(t){var e=[],n=[];return!t._pmLastGroupFetch||!t._pmLastGroupFetch.time||new Date().getTime()-t._pmLastGroupFetch.time>1e3?(function r(i){for(var l in i._eventParents)if(e.indexOf(l)===-1){e.push(l);var g=i._eventParents[l];n.push(g),r(g)}}(t),t._pmLastGroupFetch={time:new Date().getTime(),groups:n,groupIds:e},{groupIds:e,groups:n}):{groups:t._pmLastGroupFetch.groups,groupIds:t._pmLastGroupFetch.groupIds}},createGeodesicPolygon:te,getTranslation:it,findDeepCoordIndex:function(t,e){var n,r=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],i=function g(y){return function(_,k){var B=y.concat(k);if(r){if(_.lat&&_.lat===e.lat&&_.lng===e.lng)return n=B,!0}else if(_.lat&&L.latLng(_).equals(e))return n=B,!0;return Array.isArray(_)&&_.some(g(B))}};t.some(i([]));var l={};return n&&(l={indexPath:n,index:n[n.length-1],parentPath:n.slice(0,n.length-1)}),l},findDeepMarkerIndex:function(t,e){var n;t.some(function i(l){return function(g,y){var _=l.concat(y);return g._leaflet_id===e._leaflet_id?(n=_,!0):Array.isArray(g)&&g.some(i(_))}}([]));var r={};return n&&(r={indexPath:n,index:n[n.length-1],parentPath:n.slice(0,n.length-1)}),r},_getIndexFromSegment:function(t,e){if(e&&e.length===2){var n=this.findDeepCoordIndex(t,e[0]),r=this.findDeepCoordIndex(t,e[1]),i=Math.max(n.index,r.index);return n.index!==0&&r.index!==0||i===1||(i+=1),{indexA:n,indexB:r,newIndex:i,indexPath:n.indexPath,parentPath:n.parentPath}}return null},_getRotatedRectangle:function(t,e,n,r){var i=$t(r,t),l=$t(r,e),g=n*Math.PI/180,y=Math.cos(g),_=Math.sin(g),k=(l.x-i.x)*y+(l.y-i.y)*_,B=(l.y-i.y)*y-(l.x-i.x)*_,A=k*y+i.x,j=k*_+i.y,U=-B*_+i.x,Y=B*y+i.y;return[de(r,i),de(r,{x:A,y:j}),de(r,l),de(r,{x:U,y:Y})]},pxRadiusToMeterRadius:function(t,e,n){var r=e.project(n),i=L.point(r.x+t,r.y);return e.distance(e.unproject(i),n)}};const Pn=Cn;L.PM=L.PM||{version:"2.14.2",Map:_e,Toolbar:ve,Draw:b,Edit:vt,Utils:Pn,Matrix:wn,activeLang:"en",optIn:!1,initialize:function(t){this.addInitHooks(t)},setOptIn:function(t){this.optIn=!!t},addInitHooks:function(){L.Map.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}),L.LayerGroup.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}),L.Marker.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}),L.CircleMarker.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}),L.Polyline.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}),L.Polygon.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}),L.Rectangle.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}),L.Circle.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}),L.ImageOverlay.addInitHook(function(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))})},reInitLayer:function(t){var e=this;t instanceof L.LayerGroup&&t.eachLayer(function(n){e.reInitLayer(n)}),t.pm||L.PM.optIn&&t.options.pmIgnore!==!1||t.options.pmIgnore||(t instanceof L.Map?t.pm=new L.PM.Map(t):t instanceof L.Marker?t.options.textMarker?(t.pm=new L.PM.Edit.Text(t),t.pm._initTextMarker(),t.pm._createTextMarker(!1)):t.pm=new L.PM.Edit.Marker(t):t instanceof L.Circle?t.pm=new L.PM.Edit.Circle(t):t instanceof L.CircleMarker?t.pm=new L.PM.Edit.CircleMarker(t):t instanceof L.Rectangle?t.pm=new L.PM.Edit.Rectangle(t):t instanceof L.Polygon?t.pm=new L.PM.Edit.Polygon(t):t instanceof L.Polyline?t.pm=new L.PM.Edit.Line(t):t instanceof L.LayerGroup?t.pm=new L.PM.Edit.LayerGroup(t):t instanceof L.ImageOverlay&&(t.pm=new L.PM.Edit.ImageOverlay(t)))}},L.version==="1.7.1"&&L.Canvas.include({_onClick:function(t){for(var e,n,r=this._map.mouseEventToLayerPoint(t),i=this._drawFirst;i;i=i.next)(e=i.layer).options.interactive&&e._containsPoint(r)&&(t.type!=="click"&&t.type!=="preclick"||!this._map._draggableMoved(e))&&(n=e);n&&(L.DomEvent.fakeStop(t),this._fireEvent([n],t))}}),L.PM.initialize()},7107:()=>{Array.prototype.findIndex=Array.prototype.findIndex||function(u){if(this===null)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(typeof u!="function")throw new TypeError("callback must be a function");for(var h=Object(this),o=h.length>>>0,c=arguments[1],d=0;d<o;d++)if(u.call(c,h[d],d,h))return d;return-1},Array.prototype.find=Array.prototype.find||function(u){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof u!="function")throw new TypeError("callback must be a function");for(var h=Object(this),o=h.length>>>0,c=arguments[1],d=0;d<o;d++){var M=h[d];if(u.call(c,M,d,h))return M}},typeof Object.assign!="function"&&(Object.assign=function(u){if(u==null)throw new TypeError("Cannot convert undefined or null to object");u=Object(u);for(var h=1;h<arguments.length;h++){var o=arguments[h];if(o!=null)for(var c in o)Object.prototype.hasOwnProperty.call(o,c)&&(u[c]=o[c])}return u}),[Element.prototype,CharacterData.prototype,DocumentType.prototype].forEach(function(u){u.hasOwnProperty("remove")||Object.defineProperty(u,"remove",{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(u,h){if(this==null)throw new TypeError('"this" is null or not defined');var o=Object(this),c=o.length>>>0;if(c===0)return!1;for(var d,M,m=0|h,P=Math.max(m>=0?m:c-Math.abs(m),0);P<c;){if((d=o[P])===(M=u)||typeof d=="number"&&typeof M=="number"&&isNaN(d)&&isNaN(M))return!0;P++}return!1}})},1787:(u,h,o)=>{var c=o(2582),d=o(4102),M=o(1540),m=o(9705).Z,P=M.featureEach,I=(M.coordEach,d.polygon,d.featureCollection);function N(V){var R=new c(V);return R.insert=function(O){if(O.type!=="Feature")throw new Error("invalid feature");return O.bbox=O.bbox?O.bbox:m(O),c.prototype.insert.call(this,O)},R.load=function(O){var T=[];return Array.isArray(O)?O.forEach(function(E){if(E.type!=="Feature")throw new Error("invalid features");E.bbox=E.bbox?E.bbox:m(E),T.push(E)}):P(O,function(E){if(E.type!=="Feature")throw new Error("invalid features");E.bbox=E.bbox?E.bbox:m(E),T.push(E)}),c.prototype.load.call(this,T)},R.remove=function(O,T){if(O.type!=="Feature")throw new Error("invalid feature");return O.bbox=O.bbox?O.bbox:m(O),c.prototype.remove.call(this,O,T)},R.clear=function(){return c.prototype.clear.call(this)},R.search=function(O){var T=c.prototype.search.call(this,this.toBBox(O));return I(T)},R.collides=function(O){return c.prototype.collides.call(this,this.toBBox(O))},R.all=function(){var O=c.prototype.all.call(this);return I(O)},R.toJSON=function(){return c.prototype.toJSON.call(this)},R.fromJSON=function(O){return c.prototype.fromJSON.call(this,O)},R.toBBox=function(O){var T;if(O.bbox)T=O.bbox;else if(Array.isArray(O)&&O.length===4)T=O;else if(Array.isArray(O)&&O.length===6)T=[O[0],O[1],O[3],O[4]];else if(O.type==="Feature")T=m(O);else{if(O.type!=="FeatureCollection")throw new Error("invalid geojson");T=m(O)}return{minX:T[0],minY:T[1],maxX:T[2],maxY:T[3]}},R}u.exports=N,u.exports.default=N},1989:(u,h,o)=>{var c=o(1789),d=o(401),M=o(7667),m=o(1327),P=o(1866);function I(N){var V=-1,R=N==null?0:N.length;for(this.clear();++V<R;){var O=N[V];this.set(O[0],O[1])}}I.prototype.clear=c,I.prototype.delete=d,I.prototype.get=M,I.prototype.has=m,I.prototype.set=P,u.exports=I},8407:(u,h,o)=>{var c=o(7040),d=o(4125),M=o(2117),m=o(7518),P=o(4705);function I(N){var V=-1,R=N==null?0:N.length;for(this.clear();++V<R;){var O=N[V];this.set(O[0],O[1])}}I.prototype.clear=c,I.prototype.delete=d,I.prototype.get=M,I.prototype.has=m,I.prototype.set=P,u.exports=I},7071:(u,h,o)=>{var c=o(852)(o(5639),"Map");u.exports=c},3369:(u,h,o)=>{var c=o(4785),d=o(1285),M=o(6e3),m=o(9916),P=o(5265);function I(N){var V=-1,R=N==null?0:N.length;for(this.clear();++V<R;){var O=N[V];this.set(O[0],O[1])}}I.prototype.clear=c,I.prototype.delete=d,I.prototype.get=M,I.prototype.has=m,I.prototype.set=P,u.exports=I},6384:(u,h,o)=>{var c=o(8407),d=o(7465),M=o(3779),m=o(7599),P=o(4758),I=o(4309);function N(V){var R=this.__data__=new c(V);this.size=R.size}N.prototype.clear=d,N.prototype.delete=M,N.prototype.get=m,N.prototype.has=P,N.prototype.set=I,u.exports=N},2705:(u,h,o)=>{var c=o(5639).Symbol;u.exports=c},1149:(u,h,o)=>{var c=o(5639).Uint8Array;u.exports=c},6874:u=>{u.exports=function(h,o,c){switch(c.length){case 0:return h.call(o);case 1:return h.call(o,c[0]);case 2:return h.call(o,c[0],c[1]);case 3:return h.call(o,c[0],c[1],c[2])}return h.apply(o,c)}},4636:(u,h,o)=>{var c=o(2545),d=o(5694),M=o(1469),m=o(4144),P=o(5776),I=o(6719),N=Object.prototype.hasOwnProperty;u.exports=function(V,R){var O=M(V),T=!O&&d(V),E=!O&&!T&&m(V),C=!O&&!T&&!E&&I(V),S=O||T||E||C,f=S?c(V.length,String):[],x=f.length;for(var D in V)!R&&!N.call(V,D)||S&&(D=="length"||E&&(D=="offset"||D=="parent")||C&&(D=="buffer"||D=="byteLength"||D=="byteOffset")||P(D,x))||f.push(D);return f}},9932:u=>{u.exports=function(h,o){for(var c=-1,d=h==null?0:h.length,M=Array(d);++c<d;)M[c]=o(h[c],c,h);return M}},6556:(u,h,o)=>{var c=o(9465),d=o(7813);u.exports=function(M,m,P){(P!==void 0&&!d(M[m],P)||P===void 0&&!(m in M))&&c(M,m,P)}},4865:(u,h,o)=>{var c=o(9465),d=o(7813),M=Object.prototype.hasOwnProperty;u.exports=function(m,P,I){var N=m[P];M.call(m,P)&&d(N,I)&&(I!==void 0||P in m)||c(m,P,I)}},8470:(u,h,o)=>{var c=o(7813);u.exports=function(d,M){for(var m=d.length;m--;)if(c(d[m][0],M))return m;return-1}},9465:(u,h,o)=>{var c=o(8777);u.exports=function(d,M,m){M=="__proto__"&&c?c(d,M,{configurable:!0,enumerable:!0,value:m,writable:!0}):d[M]=m}},3118:(u,h,o)=>{var c=o(3218),d=Object.create,M=function(){function m(){}return function(P){if(!c(P))return{};if(d)return d(P);m.prototype=P;var I=new m;return m.prototype=void 0,I}}();u.exports=M},8483:(u,h,o)=>{var c=o(5063)();u.exports=c},7786:(u,h,o)=>{var c=o(1811),d=o(327);u.exports=function(M,m){for(var P=0,I=(m=c(m,M)).length;M!=null&&P<I;)M=M[d(m[P++])];return P&&P==I?M:void 0}},4239:(u,h,o)=>{var c=o(2705),d=o(9607),M=o(2333),m=c?c.toStringTag:void 0;u.exports=function(P){return P==null?P===void 0?"[object Undefined]":"[object Null]":m&&m in Object(P)?d(P):M(P)}},8565:u=>{var h=Object.prototype.hasOwnProperty;u.exports=function(o,c){return o!=null&&h.call(o,c)}},9454:(u,h,o)=>{var c=o(4239),d=o(7005);u.exports=function(M){return d(M)&&c(M)=="[object Arguments]"}},8458:(u,h,o)=>{var c=o(3560),d=o(5346),M=o(3218),m=o(346),P=/^\[object .+?Constructor\]$/,I=Function.prototype,N=Object.prototype,V=I.toString,R=N.hasOwnProperty,O=RegExp("^"+V.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");u.exports=function(T){return!(!M(T)||d(T))&&(c(T)?O:P).test(m(T))}},8749:(u,h,o)=>{var c=o(4239),d=o(1780),M=o(7005),m={};m["[object Float32Array]"]=m["[object Float64Array]"]=m["[object Int8Array]"]=m["[object Int16Array]"]=m["[object Int32Array]"]=m["[object Uint8Array]"]=m["[object Uint8ClampedArray]"]=m["[object Uint16Array]"]=m["[object Uint32Array]"]=!0,m["[object Arguments]"]=m["[object Array]"]=m["[object ArrayBuffer]"]=m["[object Boolean]"]=m["[object DataView]"]=m["[object Date]"]=m["[object Error]"]=m["[object Function]"]=m["[object Map]"]=m["[object Number]"]=m["[object Object]"]=m["[object RegExp]"]=m["[object Set]"]=m["[object String]"]=m["[object WeakMap]"]=!1,u.exports=function(P){return M(P)&&d(P.length)&&!!m[c(P)]}},313:(u,h,o)=>{var c=o(3218),d=o(5726),M=o(3498),m=Object.prototype.hasOwnProperty;u.exports=function(P){if(!c(P))return M(P);var I=d(P),N=[];for(var V in P)(V!="constructor"||!I&&m.call(P,V))&&N.push(V);return N}},2980:(u,h,o)=>{var c=o(6384),d=o(6556),M=o(8483),m=o(9783),P=o(3218),I=o(1704),N=o(6390);u.exports=function V(R,O,T,E,C){R!==O&&M(O,function(S,f){if(C||(C=new c),P(S))m(R,O,f,T,V,E,C);else{var x=E?E(N(R,f),S,f+"",R,O,C):void 0;x===void 0&&(x=S),d(R,f,x)}},I)}},9783:(u,h,o)=>{var c=o(6556),d=o(4626),M=o(7133),m=o(278),P=o(8517),I=o(5694),N=o(1469),V=o(9246),R=o(4144),O=o(3560),T=o(3218),E=o(8630),C=o(6719),S=o(6390),f=o(9881);u.exports=function(x,D,F,q,H,J,$){var X=S(x,F),Z=S(D,F),lt=$.get(Z);if(lt)c(x,F,lt);else{var W=J?J(X,Z,F+"",x,D,$):void 0,ot=W===void 0;if(ot){var ft=N(Z),ht=!ft&&R(Z),mt=!ft&&!ht&&C(Z);W=Z,ft||ht||mt?N(X)?W=X:V(X)?W=m(X):ht?(ot=!1,W=d(Z,!0)):mt?(ot=!1,W=M(Z,!0)):W=[]:E(Z)||I(Z)?(W=X,I(X)?W=f(X):T(X)&&!O(X)||(W=P(Z))):ot=!1}ot&&($.set(Z,W),H(W,Z,q,J,$),$.delete(Z)),c(x,F,W)}}},5976:(u,h,o)=>{var c=o(6557),d=o(5357),M=o(61);u.exports=function(m,P){return M(d(m,P,c),m+"")}},6560:(u,h,o)=>{var c=o(5703),d=o(8777),M=o(6557),m=d?function(P,I){return d(P,"toString",{configurable:!0,enumerable:!1,value:c(I),writable:!0})}:M;u.exports=m},2545:u=>{u.exports=function(h,o){for(var c=-1,d=Array(h);++c<h;)d[c]=o(c);return d}},531:(u,h,o)=>{var c=o(2705),d=o(9932),M=o(1469),m=o(3448),P=c?c.prototype:void 0,I=P?P.toString:void 0;u.exports=function N(V){if(typeof V=="string")return V;if(M(V))return d(V,N)+"";if(m(V))return I?I.call(V):"";var R=V+"";return R=="0"&&1/V==-1/0?"-0":R}},1717:u=>{u.exports=function(h){return function(o){return h(o)}}},1811:(u,h,o)=>{var c=o(1469),d=o(5403),M=o(5514),m=o(9833);u.exports=function(P,I){return c(P)?P:d(P,I)?[P]:M(m(P))}},4318:(u,h,o)=>{var c=o(1149);u.exports=function(d){var M=new d.constructor(d.byteLength);return new c(M).set(new c(d)),M}},4626:(u,h,o)=>{u=o.nmd(u);var c=o(5639),d=h&&!h.nodeType&&h,M=d&&u&&!u.nodeType&&u,m=M&&M.exports===d?c.Buffer:void 0,P=m?m.allocUnsafe:void 0;u.exports=function(I,N){if(N)return I.slice();var V=I.length,R=P?P(V):new I.constructor(V);return I.copy(R),R}},7133:(u,h,o)=>{var c=o(4318);u.exports=function(d,M){var m=M?c(d.buffer):d.buffer;return new d.constructor(m,d.byteOffset,d.length)}},278:u=>{u.exports=function(h,o){var c=-1,d=h.length;for(o||(o=Array(d));++c<d;)o[c]=h[c];return o}},8363:(u,h,o)=>{var c=o(4865),d=o(9465);u.exports=function(M,m,P,I){var N=!P;P||(P={});for(var V=-1,R=m.length;++V<R;){var O=m[V],T=I?I(P[O],M[O],O,P,M):void 0;T===void 0&&(T=M[O]),N?d(P,O,T):c(P,O,T)}return P}},4429:(u,h,o)=>{var c=o(5639)["__core-js_shared__"];u.exports=c},1463:(u,h,o)=>{var c=o(5976),d=o(6612);u.exports=function(M){return c(function(m,P){var I=-1,N=P.length,V=N>1?P[N-1]:void 0,R=N>2?P[2]:void 0;for(V=M.length>3&&typeof V=="function"?(N--,V):void 0,R&&d(P[0],P[1],R)&&(V=N<3?void 0:V,N=1),m=Object(m);++I<N;){var O=P[I];O&&M(m,O,I,V)}return m})}},5063:u=>{u.exports=function(h){return function(o,c,d){for(var M=-1,m=Object(o),P=d(o),I=P.length;I--;){var N=P[h?I:++M];if(c(m[N],N,m)===!1)break}return o}}},8777:(u,h,o)=>{var c=o(852),d=function(){try{var M=c(Object,"defineProperty");return M({},"",{}),M}catch{}}();u.exports=d},1957:(u,h,o)=>{var c=typeof o.g=="object"&&o.g&&o.g.Object===Object&&o.g;u.exports=c},5050:(u,h,o)=>{var c=o(7019);u.exports=function(d,M){var m=d.__data__;return c(M)?m[typeof M=="string"?"string":"hash"]:m.map}},852:(u,h,o)=>{var c=o(8458),d=o(7801);u.exports=function(M,m){var P=d(M,m);return c(P)?P:void 0}},5924:(u,h,o)=>{var c=o(5569)(Object.getPrototypeOf,Object);u.exports=c},9607:(u,h,o)=>{var c=o(2705),d=Object.prototype,M=d.hasOwnProperty,m=d.toString,P=c?c.toStringTag:void 0;u.exports=function(I){var N=M.call(I,P),V=I[P];try{I[P]=void 0;var R=!0}catch{}var O=m.call(I);return R&&(N?I[P]=V:delete I[P]),O}},7801:u=>{u.exports=function(h,o){return h==null?void 0:h[o]}},222:(u,h,o)=>{var c=o(1811),d=o(5694),M=o(1469),m=o(5776),P=o(1780),I=o(327);u.exports=function(N,V,R){for(var O=-1,T=(V=c(V,N)).length,E=!1;++O<T;){var C=I(V[O]);if(!(E=N!=null&&R(N,C)))break;N=N[C]}return E||++O!=T?E:!!(T=N==null?0:N.length)&&P(T)&&m(C,T)&&(M(N)||d(N))}},1789:(u,h,o)=>{var c=o(4536);u.exports=function(){this.__data__=c?c(null):{},this.size=0}},401:u=>{u.exports=function(h){var o=this.has(h)&&delete this.__data__[h];return this.size-=o?1:0,o}},7667:(u,h,o)=>{var c=o(4536),d=Object.prototype.hasOwnProperty;u.exports=function(M){var m=this.__data__;if(c){var P=m[M];return P==="__lodash_hash_undefined__"?void 0:P}return d.call(m,M)?m[M]:void 0}},1327:(u,h,o)=>{var c=o(4536),d=Object.prototype.hasOwnProperty;u.exports=function(M){var m=this.__data__;return c?m[M]!==void 0:d.call(m,M)}},1866:(u,h,o)=>{var c=o(4536);u.exports=function(d,M){var m=this.__data__;return this.size+=this.has(d)?0:1,m[d]=c&&M===void 0?"__lodash_hash_undefined__":M,this}},8517:(u,h,o)=>{var c=o(3118),d=o(5924),M=o(5726);u.exports=function(m){return typeof m.constructor!="function"||M(m)?{}:c(d(m))}},5776:u=>{var h=/^(?:0|[1-9]\d*)$/;u.exports=function(o,c){var d=typeof o;return!!(c=c??9007199254740991)&&(d=="number"||d!="symbol"&&h.test(o))&&o>-1&&o%1==0&&o<c}},6612:(u,h,o)=>{var c=o(7813),d=o(8612),M=o(5776),m=o(3218);u.exports=function(P,I,N){if(!m(N))return!1;var V=typeof I;return!!(V=="number"?d(N)&&M(I,N.length):V=="string"&&I in N)&&c(N[I],P)}},5403:(u,h,o)=>{var c=o(1469),d=o(3448),M=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,m=/^\w*$/;u.exports=function(P,I){if(c(P))return!1;var N=typeof P;return!(N!="number"&&N!="symbol"&&N!="boolean"&&P!=null&&!d(P))||m.test(P)||!M.test(P)||I!=null&&P in Object(I)}},7019:u=>{u.exports=function(h){var o=typeof h;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?h!=="__proto__":h===null}},5346:(u,h,o)=>{var c,d=o(4429),M=(c=/[^.]+$/.exec(d&&d.keys&&d.keys.IE_PROTO||""))?"Symbol(src)_1."+c:"";u.exports=function(m){return!!M&&M in m}},5726:u=>{var h=Object.prototype;u.exports=function(o){var c=o&&o.constructor;return o===(typeof c=="function"&&c.prototype||h)}},7040:u=>{u.exports=function(){this.__data__=[],this.size=0}},4125:(u,h,o)=>{var c=o(8470),d=Array.prototype.splice;u.exports=function(M){var m=this.__data__,P=c(m,M);return!(P<0)&&(P==m.length-1?m.pop():d.call(m,P,1),--this.size,!0)}},2117:(u,h,o)=>{var c=o(8470);u.exports=function(d){var M=this.__data__,m=c(M,d);return m<0?void 0:M[m][1]}},7518:(u,h,o)=>{var c=o(8470);u.exports=function(d){return c(this.__data__,d)>-1}},4705:(u,h,o)=>{var c=o(8470);u.exports=function(d,M){var m=this.__data__,P=c(m,d);return P<0?(++this.size,m.push([d,M])):m[P][1]=M,this}},4785:(u,h,o)=>{var c=o(1989),d=o(8407),M=o(7071);u.exports=function(){this.size=0,this.__data__={hash:new c,map:new(M||d),string:new c}}},1285:(u,h,o)=>{var c=o(5050);u.exports=function(d){var M=c(this,d).delete(d);return this.size-=M?1:0,M}},6e3:(u,h,o)=>{var c=o(5050);u.exports=function(d){return c(this,d).get(d)}},9916:(u,h,o)=>{var c=o(5050);u.exports=function(d){return c(this,d).has(d)}},5265:(u,h,o)=>{var c=o(5050);u.exports=function(d,M){var m=c(this,d),P=m.size;return m.set(d,M),this.size+=m.size==P?0:1,this}},4523:(u,h,o)=>{var c=o(8306);u.exports=function(d){var M=c(d,function(P){return m.size===500&&m.clear(),P}),m=M.cache;return M}},4536:(u,h,o)=>{var c=o(852)(Object,"create");u.exports=c},3498:u=>{u.exports=function(h){var o=[];if(h!=null)for(var c in Object(h))o.push(c);return o}},1167:(u,h,o)=>{u=o.nmd(u);var c=o(1957),d=h&&!h.nodeType&&h,M=d&&u&&!u.nodeType&&u,m=M&&M.exports===d&&c.process,P=function(){try{var I=M&&M.require&&M.require("util").types;return I||m&&m.binding&&m.binding("util")}catch{}}();u.exports=P},2333:u=>{var h=Object.prototype.toString;u.exports=function(o){return h.call(o)}},5569:u=>{u.exports=function(h,o){return function(c){return h(o(c))}}},5357:(u,h,o)=>{var c=o(6874),d=Math.max;u.exports=function(M,m,P){return m=d(m===void 0?M.length-1:m,0),function(){for(var I=arguments,N=-1,V=d(I.length-m,0),R=Array(V);++N<V;)R[N]=I[m+N];N=-1;for(var O=Array(m+1);++N<m;)O[N]=I[N];return O[m]=P(R),c(M,this,O)}}},5639:(u,h,o)=>{var c=o(1957),d=typeof self=="object"&&self&&self.Object===Object&&self,M=c||d||Function("return this")();u.exports=M},6390:u=>{u.exports=function(h,o){if((o!=="constructor"||typeof h[o]!="function")&&o!="__proto__")return h[o]}},61:(u,h,o)=>{var c=o(6560),d=o(1275)(c);u.exports=d},1275:u=>{var h=Date.now;u.exports=function(o){var c=0,d=0;return function(){var M=h(),m=16-(M-d);if(d=M,m>0){if(++c>=800)return arguments[0]}else c=0;return o.apply(void 0,arguments)}}},7465:(u,h,o)=>{var c=o(8407);u.exports=function(){this.__data__=new c,this.size=0}},3779:u=>{u.exports=function(h){var o=this.__data__,c=o.delete(h);return this.size=o.size,c}},7599:u=>{u.exports=function(h){return this.__data__.get(h)}},4758:u=>{u.exports=function(h){return this.__data__.has(h)}},4309:(u,h,o)=>{var c=o(8407),d=o(7071),M=o(3369);u.exports=function(m,P){var I=this.__data__;if(I instanceof c){var N=I.__data__;if(!d||N.length<199)return N.push([m,P]),this.size=++I.size,this;I=this.__data__=new M(N)}return I.set(m,P),this.size=I.size,this}},5514:(u,h,o)=>{var c=o(4523),d=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,M=/\\(\\)?/g,m=c(function(P){var I=[];return P.charCodeAt(0)===46&&I.push(""),P.replace(d,function(N,V,R,O){I.push(R?O.replace(M,"$1"):V||N)}),I});u.exports=m},327:(u,h,o)=>{var c=o(3448);u.exports=function(d){if(typeof d=="string"||c(d))return d;var M=d+"";return M=="0"&&1/d==-1/0?"-0":M}},346:u=>{var h=Function.prototype.toString;u.exports=function(o){if(o!=null){try{return h.call(o)}catch{}try{return o+""}catch{}}return""}},5703:u=>{u.exports=function(h){return function(){return h}}},7813:u=>{u.exports=function(h,o){return h===o||h!=h&&o!=o}},7361:(u,h,o)=>{var c=o(7786);u.exports=function(d,M,m){var P=d==null?void 0:c(d,M);return P===void 0?m:P}},8721:(u,h,o)=>{var c=o(8565),d=o(222);u.exports=function(M,m){return M!=null&&d(M,m,c)}},6557:u=>{u.exports=function(h){return h}},5694:(u,h,o)=>{var c=o(9454),d=o(7005),M=Object.prototype,m=M.hasOwnProperty,P=M.propertyIsEnumerable,I=c(function(){return arguments}())?c:function(N){return d(N)&&m.call(N,"callee")&&!P.call(N,"callee")};u.exports=I},1469:u=>{var h=Array.isArray;u.exports=h},8612:(u,h,o)=>{var c=o(3560),d=o(1780);u.exports=function(M){return M!=null&&d(M.length)&&!c(M)}},9246:(u,h,o)=>{var c=o(8612),d=o(7005);u.exports=function(M){return d(M)&&c(M)}},4144:(u,h,o)=>{u=o.nmd(u);var c=o(5639),d=o(5062),M=h&&!h.nodeType&&h,m=M&&u&&!u.nodeType&&u,P=m&&m.exports===M?c.Buffer:void 0,I=(P?P.isBuffer:void 0)||d;u.exports=I},3560:(u,h,o)=>{var c=o(4239),d=o(3218);u.exports=function(M){if(!d(M))return!1;var m=c(M);return m=="[object Function]"||m=="[object GeneratorFunction]"||m=="[object AsyncFunction]"||m=="[object Proxy]"}},1780:u=>{u.exports=function(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=9007199254740991}},3218:u=>{u.exports=function(h){var o=typeof h;return h!=null&&(o=="object"||o=="function")}},7005:u=>{u.exports=function(h){return h!=null&&typeof h=="object"}},8630:(u,h,o)=>{var c=o(4239),d=o(5924),M=o(7005),m=Function.prototype,P=Object.prototype,I=m.toString,N=P.hasOwnProperty,V=I.call(Object);u.exports=function(R){if(!M(R)||c(R)!="[object Object]")return!1;var O=d(R);if(O===null)return!0;var T=N.call(O,"constructor")&&O.constructor;return typeof T=="function"&&T instanceof T&&I.call(T)==V}},3448:(u,h,o)=>{var c=o(4239),d=o(7005);u.exports=function(M){return typeof M=="symbol"||d(M)&&c(M)=="[object Symbol]"}},6719:(u,h,o)=>{var c=o(8749),d=o(1717),M=o(1167),m=M&&M.isTypedArray,P=m?d(m):c;u.exports=P},1704:(u,h,o)=>{var c=o(4636),d=o(313),M=o(8612);u.exports=function(m){return M(m)?c(m,!0):d(m)}},8306:(u,h,o)=>{var c=o(3369);function d(M,m){if(typeof M!="function"||m!=null&&typeof m!="function")throw new TypeError("Expected a function");var P=function(){var I=arguments,N=m?m.apply(this,I):I[0],V=P.cache;if(V.has(N))return V.get(N);var R=M.apply(this,I);return P.cache=V.set(N,R)||V,R};return P.cache=new(d.Cache||c),P}d.Cache=c,u.exports=d},2492:(u,h,o)=>{var c=o(2980),d=o(1463)(function(M,m,P){c(M,m,P)});u.exports=d},5062:u=>{u.exports=function(){return!1}},9881:(u,h,o)=>{var c=o(8363),d=o(1704);u.exports=function(M){return c(M,d(M))}},9833:(u,h,o)=>{var c=o(531);u.exports=function(d){return d==null?"":c(d)}},2676:function(u){u.exports=function(){function h(v,a){if(!(v instanceof a))throw new TypeError("Cannot call a class as a function")}function o(v,a){for(var s=0;s<a.length;s++){var p=a[s];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(v,p.key,p)}}function c(v,a,s){return a&&o(v.prototype,a),s&&o(v,s),v}var d=function(){function v(a,s){this.next=null,this.key=a,this.data=s,this.left=null,this.right=null}return v}();function M(v,a){return v>a?1:v<a?-1:0}function m(v,a,s){for(var p=new d(null,null),b=p,w=p;;){var G=s(v,a.key);if(G<0){if(a.left===null)break;if(s(v,a.left.key)<0){var z=a.left;if(a.left=z.right,z.right=a,(a=z).left===null)break}w.left=a,w=a,a=a.left}else{if(!(G>0)||a.right===null||s(v,a.right.key)>0&&(z=a.right,a.right=z.left,z.left=a,(a=z).right===null))break;b.right=a,b=a,a=a.right}}return b.right=a.left,w.left=a.right,a.left=p.right,a.right=p.left,a}function P(v,a,s,p){var b=new d(v,a);if(s===null)return b.left=b.right=null,b;var w=p(v,(s=m(v,s,p)).key);return w<0?(b.left=s.left,b.right=s,s.left=null):w>=0&&(b.right=s.right,b.left=s,s.right=null),b}function I(v,a,s){var p=null,b=null;if(a){var w=s((a=m(v,a,s)).key,v);w===0?(p=a.left,b=a.right):w<0?(b=a.right,a.right=null,p=a):(p=a.left,a.left=null,b=a)}return{left:p,right:b}}function N(v,a,s){return a===null?v:(v===null||((a=m(v.key,a,s)).left=v),a)}function V(v,a,s,p,b){if(v){p(a+(s?"└── ":"├── ")+b(v)+`
`);var w=a+(s?"    ":"│   ");v.left&&V(v.left,w,!1,p,b),v.right&&V(v.right,w,!0,p,b)}}var R=function(){function v(a){a===void 0&&(a=M),this._root=null,this._size=0,this._comparator=a}return v.prototype.insert=function(a,s){return this._size++,this._root=P(a,s,this._root,this._comparator)},v.prototype.add=function(a,s){var p=new d(a,s);this._root===null&&(p.left=p.right=null,this._size++,this._root=p);var b=this._comparator,w=m(a,this._root,b),G=b(a,w.key);return G===0?this._root=w:(G<0?(p.left=w.left,p.right=w,w.left=null):G>0&&(p.right=w.right,p.left=w,w.right=null),this._size++,this._root=p),this._root},v.prototype.remove=function(a){this._root=this._remove(a,this._root,this._comparator)},v.prototype._remove=function(a,s,p){var b;return s===null?null:p(a,(s=m(a,s,p)).key)===0?(s.left===null?b=s.right:(b=m(a,s.left,p)).right=s.right,this._size--,b):s},v.prototype.pop=function(){var a=this._root;if(a){for(;a.left;)a=a.left;return this._root=m(a.key,this._root,this._comparator),this._root=this._remove(a.key,this._root,this._comparator),{key:a.key,data:a.data}}return null},v.prototype.findStatic=function(a){for(var s=this._root,p=this._comparator;s;){var b=p(a,s.key);if(b===0)return s;s=b<0?s.left:s.right}return null},v.prototype.find=function(a){return this._root&&(this._root=m(a,this._root,this._comparator),this._comparator(a,this._root.key)!==0)?null:this._root},v.prototype.contains=function(a){for(var s=this._root,p=this._comparator;s;){var b=p(a,s.key);if(b===0)return!0;s=b<0?s.left:s.right}return!1},v.prototype.forEach=function(a,s){for(var p=this._root,b=[],w=!1;!w;)p!==null?(b.push(p),p=p.left):b.length!==0?(p=b.pop(),a.call(s,p),p=p.right):w=!0;return this},v.prototype.range=function(a,s,p,b){for(var w=[],G=this._comparator,z=this._root;w.length!==0||z;)if(z)w.push(z),z=z.left;else{if(G((z=w.pop()).key,s)>0)break;if(G(z.key,a)>=0&&p.call(b,z))return this;z=z.right}return this},v.prototype.keys=function(){var a=[];return this.forEach(function(s){var p=s.key;return a.push(p)}),a},v.prototype.values=function(){var a=[];return this.forEach(function(s){var p=s.data;return a.push(p)}),a},v.prototype.min=function(){return this._root?this.minNode(this._root).key:null},v.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},v.prototype.minNode=function(a){if(a===void 0&&(a=this._root),a)for(;a.left;)a=a.left;return a},v.prototype.maxNode=function(a){if(a===void 0&&(a=this._root),a)for(;a.right;)a=a.right;return a},v.prototype.at=function(a){for(var s=this._root,p=!1,b=0,w=[];!p;)if(s)w.push(s),s=s.left;else if(w.length>0){if(s=w.pop(),b===a)return s;b++,s=s.right}else p=!0;return null},v.prototype.next=function(a){var s=this._root,p=null;if(a.right){for(p=a.right;p.left;)p=p.left;return p}for(var b=this._comparator;s;){var w=b(a.key,s.key);if(w===0)break;w<0?(p=s,s=s.left):s=s.right}return p},v.prototype.prev=function(a){var s=this._root,p=null;if(a.left!==null){for(p=a.left;p.right;)p=p.right;return p}for(var b=this._comparator;s;){var w=b(a.key,s.key);if(w===0)break;w<0?s=s.left:(p=s,s=s.right)}return p},v.prototype.clear=function(){return this._root=null,this._size=0,this},v.prototype.toList=function(){return E(this._root)},v.prototype.load=function(a,s,p){s===void 0&&(s=[]),p===void 0&&(p=!1);var b=a.length,w=this._comparator;if(p&&f(a,s,0,b-1,w),this._root===null)this._root=O(a,s,0,b),this._size=b;else{var G=S(this.toList(),T(a,s),w);b=this._size+b,this._root=C({head:G},0,b)}return this},v.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(v.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(v.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),v.prototype.toString=function(a){a===void 0&&(a=function(p){return String(p.key)});var s=[];return V(this._root,"",!0,function(p){return s.push(p)},a),s.join("")},v.prototype.update=function(a,s,p){var b=this._comparator,w=I(a,this._root,b),G=w.left,z=w.right;b(a,s)<0?z=P(s,p,z,b):G=P(s,p,G,b),this._root=N(G,z,b)},v.prototype.split=function(a){return I(a,this._root,this._comparator)},v}();function O(v,a,s,p){var b=p-s;if(b>0){var w=s+Math.floor(b/2),G=v[w],z=a[w],K=new d(G,z);return K.left=O(v,a,s,w),K.right=O(v,a,w+1,p),K}return null}function T(v,a){for(var s=new d(null,null),p=s,b=0;b<v.length;b++)p=p.next=new d(v[b],a[b]);return p.next=null,s.next}function E(v){for(var a=v,s=[],p=!1,b=new d(null,null),w=b;!p;)a?(s.push(a),a=a.left):s.length>0?a=(a=w=w.next=s.pop()).right:p=!0;return w.next=null,b.next}function C(v,a,s){var p=s-a;if(p>0){var b=a+Math.floor(p/2),w=C(v,a,b),G=v.head;return G.left=w,v.head=v.head.next,G.right=C(v,b+1,s),G}return null}function S(v,a,s){for(var p=new d(null,null),b=p,w=v,G=a;w!==null&&G!==null;)s(w.key,G.key)<0?(b.next=w,w=w.next):(b.next=G,G=G.next),b=b.next;return w!==null?b.next=w:G!==null&&(b.next=G),p.next}function f(v,a,s,p,b){if(!(s>=p)){for(var w=v[s+p>>1],G=s-1,z=p+1;;){do G++;while(b(v[G],w)<0);do z--;while(b(v[z],w)>0);if(G>=z)break;var K=v[G];v[G]=v[z],v[z]=K,K=a[G],a[G]=a[z],a[z]=K}f(v,a,s,z,b),f(v,a,z+1,p,b)}}var x=function(v,a){return v.ll.x<=a.x&&a.x<=v.ur.x&&v.ll.y<=a.y&&a.y<=v.ur.y},D=function(v,a){if(a.ur.x<v.ll.x||v.ur.x<a.ll.x||a.ur.y<v.ll.y||v.ur.y<a.ll.y)return null;var s=v.ll.x<a.ll.x?a.ll.x:v.ll.x,p=v.ur.x<a.ur.x?v.ur.x:a.ur.x;return{ll:{x:s,y:v.ll.y<a.ll.y?a.ll.y:v.ll.y},ur:{x:p,y:v.ur.y<a.ur.y?v.ur.y:a.ur.y}}},F=Number.EPSILON;F===void 0&&(F=Math.pow(2,-52));var q=F*F,H=function(v,a){if(-F<v&&v<F&&-F<a&&a<F)return 0;var s=v-a;return s*s<q*v*a?0:v<a?-1:1},J=function(){function v(){h(this,v),this.reset()}return c(v,[{key:"reset",value:function(){this.xRounder=new $,this.yRounder=new $}},{key:"round",value:function(a,s){return{x:this.xRounder.round(a),y:this.yRounder.round(s)}}}]),v}(),$=function(){function v(){h(this,v),this.tree=new R,this.round(0)}return c(v,[{key:"round",value:function(a){var s=this.tree.add(a),p=this.tree.prev(s);if(p!==null&&H(s.key,p.key)===0)return this.tree.remove(a),p.key;var b=this.tree.next(s);return b!==null&&H(s.key,b.key)===0?(this.tree.remove(a),b.key):a}}]),v}(),X=new J,Z=function(v,a){return v.x*a.y-v.y*a.x},lt=function(v,a){return v.x*a.x+v.y*a.y},W=function(v,a,s){var p={x:a.x-v.x,y:a.y-v.y},b={x:s.x-v.x,y:s.y-v.y},w=Z(p,b);return H(w,0)},ot=function(v){return Math.sqrt(lt(v,v))},ft=function(v,a,s){var p={x:a.x-v.x,y:a.y-v.y},b={x:s.x-v.x,y:s.y-v.y};return Z(b,p)/ot(b)/ot(p)},ht=function(v,a,s){var p={x:a.x-v.x,y:a.y-v.y},b={x:s.x-v.x,y:s.y-v.y};return lt(b,p)/ot(b)/ot(p)},mt=function(v,a,s){return a.y===0?null:{x:v.x+a.x/a.y*(s-v.y),y:s}},Et=function(v,a,s){return a.x===0?null:{x:s,y:v.y+a.y/a.x*(s-v.x)}},it=function(v,a,s,p){if(a.x===0)return Et(s,p,v.x);if(p.x===0)return Et(v,a,s.x);if(a.y===0)return mt(s,p,v.y);if(p.y===0)return mt(v,a,s.y);var b=Z(a,p);if(b==0)return null;var w={x:s.x-v.x,y:s.y-v.y},G=Z(w,a)/b,z=Z(w,p)/b;return{x:(v.x+z*a.x+(s.x+G*p.x))/2,y:(v.y+z*a.y+(s.y+G*p.y))/2}},pt=function(){function v(a,s){h(this,v),a.events===void 0?a.events=[this]:a.events.push(this),this.point=a,this.isLeft=s}return c(v,null,[{key:"compare",value:function(a,s){var p=v.comparePoints(a.point,s.point);return p!==0?p:(a.point!==s.point&&a.link(s),a.isLeft!==s.isLeft?a.isLeft?1:-1:Zt.compare(a.segment,s.segment))}},{key:"comparePoints",value:function(a,s){return a.x<s.x?-1:a.x>s.x?1:a.y<s.y?-1:a.y>s.y?1:0}}]),c(v,[{key:"link",value:function(a){if(a.point===this.point)throw new Error("Tried to link already linked events");for(var s=a.point.events,p=0,b=s.length;p<b;p++){var w=s[p];this.point.events.push(w),w.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var a=this.point.events.length,s=0;s<a;s++){var p=this.point.events[s];if(p.segment.consumedBy===void 0)for(var b=s+1;b<a;b++){var w=this.point.events[b];w.consumedBy===void 0&&p.otherSE.point.events===w.otherSE.point.events&&p.segment.consume(w.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var a=[],s=0,p=this.point.events.length;s<p;s++){var b=this.point.events[s];b!==this&&!b.segment.ringOut&&b.segment.isInResult()&&a.push(b)}return a}},{key:"getLeftmostComparator",value:function(a){var s=this,p=new Map,b=function(w){var G=w.otherSE;p.set(w,{sine:ft(s.point,a.point,G.point),cosine:ht(s.point,a.point,G.point)})};return function(w,G){p.has(w)||b(w),p.has(G)||b(G);var z=p.get(w),K=z.sine,Q=z.cosine,et=p.get(G),st=et.sine,at=et.cosine;return K>=0&&st>=0?Q<at?1:Q>at?-1:0:K<0&&st<0?Q<at?-1:Q>at?1:0:st<K?-1:st>K?1:0}}}]),v}(),Xt=0,Zt=function(){function v(a,s,p,b){h(this,v),this.id=++Xt,this.leftSE=a,a.segment=this,a.otherSE=s,this.rightSE=s,s.segment=this,s.otherSE=a,this.rings=p,this.windings=b}return c(v,null,[{key:"compare",value:function(a,s){var p=a.leftSE.point.x,b=s.leftSE.point.x,w=a.rightSE.point.x,G=s.rightSE.point.x;if(G<p)return 1;if(w<b)return-1;var z=a.leftSE.point.y,K=s.leftSE.point.y,Q=a.rightSE.point.y,et=s.rightSE.point.y;if(p<b){if(K<z&&K<Q)return 1;if(K>z&&K>Q)return-1;var st=a.comparePoint(s.leftSE.point);if(st<0)return 1;if(st>0)return-1;var at=s.comparePoint(a.rightSE.point);return at!==0?at:-1}if(p>b){if(z<K&&z<et)return-1;if(z>K&&z>et)return 1;var dt=s.comparePoint(a.leftSE.point);if(dt!==0)return dt;var rt=a.comparePoint(s.rightSE.point);return rt<0?1:rt>0?-1:1}if(z<K)return-1;if(z>K)return 1;if(w<G){var gt=s.comparePoint(a.rightSE.point);if(gt!==0)return gt}if(w>G){var yt=a.comparePoint(s.rightSE.point);if(yt<0)return 1;if(yt>0)return-1}if(w!==G){var Lt=Q-z,xt=w-p,wt=et-K,Ct=G-b;if(Lt>xt&&wt<Ct)return 1;if(Lt<xt&&wt>Ct)return-1}return w>G?1:w<G||Q<et?-1:Q>et?1:a.id<s.id?-1:a.id>s.id?1:0}}]),c(v,[{key:"replaceRightSE",value:function(a){this.rightSE=a,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var a=this.leftSE.point.y,s=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:a<s?a:s},ur:{x:this.rightSE.point.x,y:a>s?a:s}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(a){return a.x===this.leftSE.point.x&&a.y===this.leftSE.point.y||a.x===this.rightSE.point.x&&a.y===this.rightSE.point.y}},{key:"comparePoint",value:function(a){if(this.isAnEndpoint(a))return 0;var s=this.leftSE.point,p=this.rightSE.point,b=this.vector();if(s.x===p.x)return a.x===s.x?0:a.x<s.x?1:-1;var w=(a.y-s.y)/b.y,G=s.x+w*b.x;if(a.x===G)return 0;var z=(a.x-s.x)/b.x,K=s.y+z*b.y;return a.y===K?0:a.y<K?-1:1}},{key:"getIntersection",value:function(a){var s=this.bbox(),p=a.bbox(),b=D(s,p);if(b===null)return null;var w=this.leftSE.point,G=this.rightSE.point,z=a.leftSE.point,K=a.rightSE.point,Q=x(s,z)&&this.comparePoint(z)===0,et=x(p,w)&&a.comparePoint(w)===0,st=x(s,K)&&this.comparePoint(K)===0,at=x(p,G)&&a.comparePoint(G)===0;if(et&&Q)return at&&!st?G:!at&&st?K:null;if(et)return st&&w.x===K.x&&w.y===K.y?null:w;if(Q)return at&&G.x===z.x&&G.y===z.y?null:z;if(at&&st)return null;if(at)return G;if(st)return K;var dt=it(w,this.vector(),z,a.vector());return dt===null?null:x(b,dt)?X.round(dt.x,dt.y):null}},{key:"split",value:function(a){var s=[],p=a.events!==void 0,b=new pt(a,!0),w=new pt(a,!1),G=this.rightSE;this.replaceRightSE(w),s.push(w),s.push(b);var z=new v(b,G,this.rings.slice(),this.windings.slice());return pt.comparePoints(z.leftSE.point,z.rightSE.point)>0&&z.swapEvents(),pt.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),p&&(b.checkForConsuming(),w.checkForConsuming()),s}},{key:"swapEvents",value:function(){var a=this.rightSE;this.rightSE=this.leftSE,this.leftSE=a,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var s=0,p=this.windings.length;s<p;s++)this.windings[s]*=-1}},{key:"consume",value:function(a){for(var s=this,p=a;s.consumedBy;)s=s.consumedBy;for(;p.consumedBy;)p=p.consumedBy;var b=v.compare(s,p);if(b!==0){if(b>0){var w=s;s=p,p=w}if(s.prev===p){var G=s;s=p,p=G}for(var z=0,K=p.rings.length;z<K;z++){var Q=p.rings[z],et=p.windings[z],st=s.rings.indexOf(Q);st===-1?(s.rings.push(Q),s.windings.push(et)):s.windings[st]+=et}p.rings=null,p.windings=null,p.consumedBy=s,p.leftSE.consumedBy=s.leftSE,p.rightSE.consumedBy=s.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0||(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(this.prev){var a=this.prev.consumedBy||this.prev;this._beforeState=a.afterState()}else this._beforeState={rings:[],windings:[],multiPolys:[]};return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var a=this.beforeState();this._afterState={rings:a.rings.slice(0),windings:a.windings.slice(0),multiPolys:[]};for(var s=this._afterState.rings,p=this._afterState.windings,b=this._afterState.multiPolys,w=0,G=this.rings.length;w<G;w++){var z=this.rings[w],K=this.windings[w],Q=s.indexOf(z);Q===-1?(s.push(z),p.push(K)):p[Q]+=K}for(var et=[],st=[],at=0,dt=s.length;at<dt;at++)if(p[at]!==0){var rt=s[at],gt=rt.poly;if(st.indexOf(gt)===-1)if(rt.isExterior)et.push(gt);else{st.indexOf(gt)===-1&&st.push(gt);var yt=et.indexOf(rt.poly);yt!==-1&&et.splice(yt,1)}}for(var Lt=0,xt=et.length;Lt<xt;Lt++){var wt=et[Lt].multiPoly;b.indexOf(wt)===-1&&b.push(wt)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var a=this.beforeState().multiPolys,s=this.afterState().multiPolys;switch(St.type){case"union":var p=a.length===0,b=s.length===0;this._isInResult=p!==b;break;case"intersection":var w,G;a.length<s.length?(w=a.length,G=s.length):(w=s.length,G=a.length),this._isInResult=G===St.numMultiPolys&&w<G;break;case"xor":var z=Math.abs(a.length-s.length);this._isInResult=z%2==1;break;case"difference":var K=function(Q){return Q.length===1&&Q[0].isSubject};this._isInResult=K(a)!==K(s);break;default:throw new Error("Unrecognized operation type found ".concat(St.type))}return this._isInResult}}],[{key:"fromRing",value:function(a,s,p){var b,w,G,z=pt.comparePoints(a,s);if(z<0)b=a,w=s,G=1;else{if(!(z>0))throw new Error("Tried to create degenerate segment at [".concat(a.x,", ").concat(a.y,"]"));b=s,w=a,G=-1}return new v(new pt(b,!0),new pt(w,!1),[p],[G])}}]),v}(),te=function(){function v(a,s,p){if(h(this,v),!Array.isArray(a)||a.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=s,this.isExterior=p,this.segments=[],typeof a[0][0]!="number"||typeof a[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var b=X.round(a[0][0],a[0][1]);this.bbox={ll:{x:b.x,y:b.y},ur:{x:b.x,y:b.y}};for(var w=b,G=1,z=a.length;G<z;G++){if(typeof a[G][0]!="number"||typeof a[G][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var K=X.round(a[G][0],a[G][1]);K.x===w.x&&K.y===w.y||(this.segments.push(Zt.fromRing(w,K,this)),K.x<this.bbox.ll.x&&(this.bbox.ll.x=K.x),K.y<this.bbox.ll.y&&(this.bbox.ll.y=K.y),K.x>this.bbox.ur.x&&(this.bbox.ur.x=K.x),K.y>this.bbox.ur.y&&(this.bbox.ur.y=K.y),w=K)}b.x===w.x&&b.y===w.y||this.segments.push(Zt.fromRing(w,b,this))}return c(v,[{key:"getSweepEvents",value:function(){for(var a=[],s=0,p=this.segments.length;s<p;s++){var b=this.segments[s];a.push(b.leftSE),a.push(b.rightSE)}return a}}]),v}(),jt=function(){function v(a,s){if(h(this,v),!Array.isArray(a))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new te(a[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var p=1,b=a.length;p<b;p++){var w=new te(a[p],this,!1);w.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=w.bbox.ll.x),w.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=w.bbox.ll.y),w.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=w.bbox.ur.x),w.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=w.bbox.ur.y),this.interiorRings.push(w)}this.multiPoly=s}return c(v,[{key:"getSweepEvents",value:function(){for(var a=this.exteriorRing.getSweepEvents(),s=0,p=this.interiorRings.length;s<p;s++)for(var b=this.interiorRings[s].getSweepEvents(),w=0,G=b.length;w<G;w++)a.push(b[w]);return a}}]),v}(),oe=function(){function v(a,s){if(h(this,v),!Array.isArray(a))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof a[0][0][0]=="number"&&(a=[a])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var p=0,b=a.length;p<b;p++){var w=new jt(a[p],this);w.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=w.bbox.ll.x),w.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=w.bbox.ll.y),w.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=w.bbox.ur.x),w.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=w.bbox.ur.y),this.polys.push(w)}this.isSubject=s}return c(v,[{key:"getSweepEvents",value:function(){for(var a=[],s=0,p=this.polys.length;s<p;s++)for(var b=this.polys[s].getSweepEvents(),w=0,G=b.length;w<G;w++)a.push(b[w]);return a}}]),v}(),At=function(){function v(a){h(this,v),this.events=a;for(var s=0,p=a.length;s<p;s++)a[s].segment.ringOut=this;this.poly=null}return c(v,null,[{key:"factory",value:function(a){for(var s=[],p=0,b=a.length;p<b;p++){var w=a[p];if(w.isInResult()&&!w.ringOut){for(var G=null,z=w.leftSE,K=w.rightSE,Q=[z],et=z.point,st=[];G=z,z=K,Q.push(z),z.point!==et;)for(;;){var at=z.getAvailableLinkedEvents();if(at.length===0){var dt=Q[0].point,rt=Q[Q.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(dt.x,",")+" ".concat(dt.y,"]. Last matching segment found ends at")+" [".concat(rt.x,", ").concat(rt.y,"]."))}if(at.length===1){K=at[0].otherSE;break}for(var gt=null,yt=0,Lt=st.length;yt<Lt;yt++)if(st[yt].point===z.point){gt=yt;break}if(gt===null){st.push({index:Q.length,point:z.point});var xt=z.getLeftmostComparator(G);K=at.sort(xt)[0].otherSE;break}var wt=st.splice(gt)[0],Ct=Q.splice(wt.index);Ct.unshift(Ct[0].otherSE),s.push(new v(Ct.reverse()))}s.push(new v(Q))}}return s}}]),c(v,[{key:"getGeom",value:function(){for(var a=this.events[0].point,s=[a],p=1,b=this.events.length-1;p<b;p++){var w=this.events[p].point,G=this.events[p+1].point;W(w,a,G)!==0&&(s.push(w),a=w)}if(s.length===1)return null;var z=s[0],K=s[1];W(z,a,K)===0&&s.shift(),s.push(s[0]);for(var Q=this.isExteriorRing()?1:-1,et=this.isExteriorRing()?0:s.length-1,st=this.isExteriorRing()?s.length:-1,at=[],dt=et;dt!=st;dt+=Q)at.push([s[dt].x,s[dt].y]);return at}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var a=this.enclosingRing();this._isExteriorRing=!a||!a.isExteriorRing()}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var a=this.events[0],s=1,p=this.events.length;s<p;s++){var b=this.events[s];pt.compare(a,b)>0&&(a=b)}for(var w=a.segment.prevInResult(),G=w?w.prevInResult():null;;){if(!w)return null;if(!G)return w.ringOut;if(G.ringOut!==w.ringOut)return G.ringOut.enclosingRing()!==w.ringOut?w.ringOut:w.ringOut.enclosingRing();w=G.prevInResult(),G=w?w.prevInResult():null}}}]),v}(),ee=function(){function v(a){h(this,v),this.exteriorRing=a,a.poly=this,this.interiorRings=[]}return c(v,[{key:"addInterior",value:function(a){this.interiorRings.push(a),a.poly=this}},{key:"getGeom",value:function(){var a=[this.exteriorRing.getGeom()];if(a[0]===null)return null;for(var s=0,p=this.interiorRings.length;s<p;s++){var b=this.interiorRings[s].getGeom();b!==null&&a.push(b)}return a}}]),v}(),Ft=function(){function v(a){h(this,v),this.rings=a,this.polys=this._composePolys(a)}return c(v,[{key:"getGeom",value:function(){for(var a=[],s=0,p=this.polys.length;s<p;s++){var b=this.polys[s].getGeom();b!==null&&a.push(b)}return a}},{key:"_composePolys",value:function(a){for(var s=[],p=0,b=a.length;p<b;p++){var w=a[p];if(!w.poly)if(w.isExteriorRing())s.push(new ee(w));else{var G=w.enclosingRing();G.poly||s.push(new ee(G)),G.poly.addInterior(w)}}return s}}]),v}(),_e=function(){function v(a){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Zt.compare;h(this,v),this.queue=a,this.tree=new R(s),this.segments=[]}return c(v,[{key:"process",value:function(a){var s=a.segment,p=[];if(a.consumedBy)return a.isLeft?this.queue.remove(a.otherSE):this.tree.remove(s),p;var b=a.isLeft?this.tree.insert(s):this.tree.find(s);if(!b)throw new Error("Unable to find segment #".concat(s.id," ")+"[".concat(s.leftSE.point.x,", ").concat(s.leftSE.point.y,"] -> ")+"[".concat(s.rightSE.point.x,", ").concat(s.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var w=b,G=b,z=void 0,K=void 0;z===void 0;)(w=this.tree.prev(w))===null?z=null:w.key.consumedBy===void 0&&(z=w.key);for(;K===void 0;)(G=this.tree.next(G))===null?K=null:G.key.consumedBy===void 0&&(K=G.key);if(a.isLeft){var Q=null;if(z){var et=z.getIntersection(s);if(et!==null&&(s.isAnEndpoint(et)||(Q=et),!z.isAnEndpoint(et)))for(var st=this._splitSafely(z,et),at=0,dt=st.length;at<dt;at++)p.push(st[at])}var rt=null;if(K){var gt=K.getIntersection(s);if(gt!==null&&(s.isAnEndpoint(gt)||(rt=gt),!K.isAnEndpoint(gt)))for(var yt=this._splitSafely(K,gt),Lt=0,xt=yt.length;Lt<xt;Lt++)p.push(yt[Lt])}if(Q!==null||rt!==null){var wt=null;wt=Q===null?rt:rt===null||pt.comparePoints(Q,rt)<=0?Q:rt,this.queue.remove(s.rightSE),p.push(s.rightSE);for(var Ct=s.split(wt),Nt=0,Gt=Ct.length;Nt<Gt;Nt++)p.push(Ct[Nt])}p.length>0?(this.tree.remove(s),p.push(a)):(this.segments.push(s),s.prev=z)}else{if(z&&K){var Dt=z.getIntersection(K);if(Dt!==null){if(!z.isAnEndpoint(Dt))for(var It=this._splitSafely(z,Dt),zt=0,Kt=It.length;zt<Kt;zt++)p.push(It[zt]);if(!K.isAnEndpoint(Dt))for(var Pt=this._splitSafely(K,Dt),bt=0,Ut=Pt.length;bt<Ut;bt++)p.push(Pt[bt])}}this.tree.remove(s)}return p}},{key:"_splitSafely",value:function(a,s){this.tree.remove(a);var p=a.rightSE;this.queue.remove(p);var b=a.split(s);return b.push(p),a.consumedBy===void 0&&this.tree.insert(a),b}}]),v}(),se=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,le=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,St=new(function(){function v(){h(this,v)}return c(v,[{key:"run",value:function(a,s,p){St.type=a,X.reset();for(var b=[new oe(s,!0)],w=0,G=p.length;w<G;w++)b.push(new oe(p[w],!1));if(St.numMultiPolys=b.length,St.type==="difference")for(var z=b[0],K=1;K<b.length;)D(b[K].bbox,z.bbox)!==null?K++:b.splice(K,1);if(St.type==="intersection"){for(var Q=0,et=b.length;Q<et;Q++)for(var st=b[Q],at=Q+1,dt=b.length;at<dt;at++)if(D(st.bbox,b[at].bbox)===null)return[]}for(var rt=new R(pt.compare),gt=0,yt=b.length;gt<yt;gt++)for(var Lt=b[gt].getSweepEvents(),xt=0,wt=Lt.length;xt<wt;xt++)if(rt.insert(Lt[xt]),rt.size>se)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var Ct=new _e(rt),Nt=rt.size,Gt=rt.pop();Gt;){var Dt=Gt.key;if(rt.size===Nt){var It=Dt.segment;throw new Error("Unable to pop() ".concat(Dt.isLeft?"left":"right"," SweepEvent ")+"[".concat(Dt.point.x,", ").concat(Dt.point.y,"] from segment #").concat(It.id," ")+"[".concat(It.leftSE.point.x,", ").concat(It.leftSE.point.y,"] -> ")+"[".concat(It.rightSE.point.x,", ").concat(It.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(rt.size>se)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(Ct.segments.length>le)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var zt=Ct.process(Dt),Kt=0,Pt=zt.length;Kt<Pt;Kt++){var bt=zt[Kt];bt.consumedBy===void 0&&rt.insert(bt)}Nt=rt.size,Gt=rt.pop()}X.reset();var Ut=At.factory(Ct.segments);return new Ft(Ut).getGeom()}}]),v}()),ye=function(v){for(var a=arguments.length,s=new Array(a>1?a-1:0),p=1;p<a;p++)s[p-1]=arguments[p];return St.run("union",v,s)},ne=function(v){for(var a=arguments.length,s=new Array(a>1?a-1:0),p=1;p<a;p++)s[p-1]=arguments[p];return St.run("intersection",v,s)},ve=function(v){for(var a=arguments.length,s=new Array(a>1?a-1:0),p=1;p<a;p++)s[p-1]=arguments[p];return St.run("xor",v,s)},he=function(v){for(var a=arguments.length,s=new Array(a>1?a-1:0),p=1;p<a;p++)s[p-1]=arguments[p];return St.run("difference",v,s)};return{union:ye,intersection:ne,xor:ve,difference:he}}()},2582:function(u){u.exports=function(){function h(f,x,D,F,q){(function H(J,$,X,Z,lt){for(;Z>X;){if(Z-X>600){var W=Z-X+1,ot=$-X+1,ft=Math.log(W),ht=.5*Math.exp(2*ft/3),mt=.5*Math.sqrt(ft*ht*(W-ht)/W)*(ot-W/2<0?-1:1);H(J,$,Math.max(X,Math.floor($-ot*ht/W+mt)),Math.min(Z,Math.floor($+(W-ot)*ht/W+mt)),lt)}var Et=J[$],it=X,pt=Z;for(o(J,X,$),lt(J[Z],Et)>0&&o(J,X,Z);it<pt;){for(o(J,it,pt),it++,pt--;lt(J[it],Et)<0;)it++;for(;lt(J[pt],Et)>0;)pt--}lt(J[X],Et)===0?o(J,X,pt):o(J,++pt,Z),pt<=$&&(X=pt+1),$<=pt&&(Z=pt-1)}})(f,x,D||0,F||f.length-1,q||c)}function o(f,x,D){var F=f[x];f[x]=f[D],f[D]=F}function c(f,x){return f<x?-1:f>x?1:0}var d=function(f){f===void 0&&(f=9),this._maxEntries=Math.max(4,f),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function M(f,x,D){if(!D)return x.indexOf(f);for(var F=0;F<x.length;F++)if(D(f,x[F]))return F;return-1}function m(f,x){P(f,0,f.children.length,x,f)}function P(f,x,D,F,q){q||(q=C(null)),q.minX=1/0,q.minY=1/0,q.maxX=-1/0,q.maxY=-1/0;for(var H=x;H<D;H++){var J=f.children[H];I(q,f.leaf?F(J):J)}return q}function I(f,x){return f.minX=Math.min(f.minX,x.minX),f.minY=Math.min(f.minY,x.minY),f.maxX=Math.max(f.maxX,x.maxX),f.maxY=Math.max(f.maxY,x.maxY),f}function N(f,x){return f.minX-x.minX}function V(f,x){return f.minY-x.minY}function R(f){return(f.maxX-f.minX)*(f.maxY-f.minY)}function O(f){return f.maxX-f.minX+(f.maxY-f.minY)}function T(f,x){return f.minX<=x.minX&&f.minY<=x.minY&&x.maxX<=f.maxX&&x.maxY<=f.maxY}function E(f,x){return x.minX<=f.maxX&&x.minY<=f.maxY&&x.maxX>=f.minX&&x.maxY>=f.minY}function C(f){return{children:f,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function S(f,x,D,F,q){for(var H=[x,D];H.length;)if(!((D=H.pop())-(x=H.pop())<=F)){var J=x+Math.ceil((D-x)/F/2)*F;h(f,J,x,D,q),H.push(x,J,J,D)}}return d.prototype.all=function(){return this._all(this.data,[])},d.prototype.search=function(f){var x=this.data,D=[];if(!E(f,x))return D;for(var F=this.toBBox,q=[];x;){for(var H=0;H<x.children.length;H++){var J=x.children[H],$=x.leaf?F(J):J;E(f,$)&&(x.leaf?D.push(J):T(f,$)?this._all(J,D):q.push(J))}x=q.pop()}return D},d.prototype.collides=function(f){var x=this.data;if(!E(f,x))return!1;for(var D=[];x;){for(var F=0;F<x.children.length;F++){var q=x.children[F],H=x.leaf?this.toBBox(q):q;if(E(f,H)){if(x.leaf||T(f,H))return!0;D.push(q)}}x=D.pop()}return!1},d.prototype.load=function(f){if(!f||!f.length)return this;if(f.length<this._minEntries){for(var x=0;x<f.length;x++)this.insert(f[x]);return this}var D=this._build(f.slice(),0,f.length-1,0);if(this.data.children.length)if(this.data.height===D.height)this._splitRoot(this.data,D);else{if(this.data.height<D.height){var F=this.data;this.data=D,D=F}this._insert(D,this.data.height-D.height-1,!0)}else this.data=D;return this},d.prototype.insert=function(f){return f&&this._insert(f,this.data.height-1),this},d.prototype.clear=function(){return this.data=C([]),this},d.prototype.remove=function(f,x){if(!f)return this;for(var D,F,q,H=this.data,J=this.toBBox(f),$=[],X=[];H||$.length;){if(H||(H=$.pop(),F=$[$.length-1],D=X.pop(),q=!0),H.leaf){var Z=M(f,H.children,x);if(Z!==-1)return H.children.splice(Z,1),$.push(H),this._condense($),this}q||H.leaf||!T(H,J)?F?(D++,H=F.children[D],q=!1):H=null:($.push(H),X.push(D),D=0,F=H,H=H.children[0])}return this},d.prototype.toBBox=function(f){return f},d.prototype.compareMinX=function(f,x){return f.minX-x.minX},d.prototype.compareMinY=function(f,x){return f.minY-x.minY},d.prototype.toJSON=function(){return this.data},d.prototype.fromJSON=function(f){return this.data=f,this},d.prototype._all=function(f,x){for(var D=[];f;)f.leaf?x.push.apply(x,f.children):D.push.apply(D,f.children),f=D.pop();return x},d.prototype._build=function(f,x,D,F){var q,H=D-x+1,J=this._maxEntries;if(H<=J)return m(q=C(f.slice(x,D+1)),this.toBBox),q;F||(F=Math.ceil(Math.log(H)/Math.log(J)),J=Math.ceil(H/Math.pow(J,F-1))),(q=C([])).leaf=!1,q.height=F;var $=Math.ceil(H/J),X=$*Math.ceil(Math.sqrt(J));S(f,x,D,X,this.compareMinX);for(var Z=x;Z<=D;Z+=X){var lt=Math.min(Z+X-1,D);S(f,Z,lt,$,this.compareMinY);for(var W=Z;W<=lt;W+=$){var ot=Math.min(W+$-1,lt);q.children.push(this._build(f,W,ot,F-1))}}return m(q,this.toBBox),q},d.prototype._chooseSubtree=function(f,x,D,F){for(;F.push(x),!x.leaf&&F.length-1!==D;){for(var q=1/0,H=1/0,J=void 0,$=0;$<x.children.length;$++){var X=x.children[$],Z=R(X),lt=(W=f,ot=X,(Math.max(ot.maxX,W.maxX)-Math.min(ot.minX,W.minX))*(Math.max(ot.maxY,W.maxY)-Math.min(ot.minY,W.minY))-Z);lt<H?(H=lt,q=Z<q?Z:q,J=X):lt===H&&Z<q&&(q=Z,J=X)}x=J||x.children[0]}var W,ot;return x},d.prototype._insert=function(f,x,D){var F=D?f:this.toBBox(f),q=[],H=this._chooseSubtree(F,this.data,x,q);for(H.children.push(f),I(H,F);x>=0&&q[x].children.length>this._maxEntries;)this._split(q,x),x--;this._adjustParentBBoxes(F,q,x)},d.prototype._split=function(f,x){var D=f[x],F=D.children.length,q=this._minEntries;this._chooseSplitAxis(D,q,F);var H=this._chooseSplitIndex(D,q,F),J=C(D.children.splice(H,D.children.length-H));J.height=D.height,J.leaf=D.leaf,m(D,this.toBBox),m(J,this.toBBox),x?f[x-1].children.push(J):this._splitRoot(D,J)},d.prototype._splitRoot=function(f,x){this.data=C([f,x]),this.data.height=f.height+1,this.data.leaf=!1,m(this.data,this.toBBox)},d.prototype._chooseSplitIndex=function(f,x,D){for(var F,q,H,J,$,X,Z,lt=1/0,W=1/0,ot=x;ot<=D-x;ot++){var ft=P(f,0,ot,this.toBBox),ht=P(f,ot,D,this.toBBox),mt=(q=ft,H=ht,J=void 0,$=void 0,X=void 0,Z=void 0,J=Math.max(q.minX,H.minX),$=Math.max(q.minY,H.minY),X=Math.min(q.maxX,H.maxX),Z=Math.min(q.maxY,H.maxY),Math.max(0,X-J)*Math.max(0,Z-$)),Et=R(ft)+R(ht);mt<lt?(lt=mt,F=ot,W=Et<W?Et:W):mt===lt&&Et<W&&(W=Et,F=ot)}return F||D-x},d.prototype._chooseSplitAxis=function(f,x,D){var F=f.leaf?this.compareMinX:N,q=f.leaf?this.compareMinY:V;this._allDistMargin(f,x,D,F)<this._allDistMargin(f,x,D,q)&&f.children.sort(F)},d.prototype._allDistMargin=function(f,x,D,F){f.children.sort(F);for(var q=this.toBBox,H=P(f,0,x,q),J=P(f,D-x,D,q),$=O(H)+O(J),X=x;X<D-x;X++){var Z=f.children[X];I(H,f.leaf?q(Z):Z),$+=O(H)}for(var lt=D-x-1;lt>=x;lt--){var W=f.children[lt];I(J,f.leaf?q(W):W),$+=O(J)}return $},d.prototype._adjustParentBBoxes=function(f,x,D){for(var F=D;F>=0;F--)I(x[F],f)},d.prototype._condense=function(f){for(var x=f.length-1,D=void 0;x>=0;x--)f[x].children.length===0?x>0?(D=f[x-1].children).splice(D.indexOf(f[x]),1):this.clear():m(f[x],this.toBBox)},d}()}},Qt={};function Rt(u){var h=Qt[u];if(h!==void 0)return h.exports;var o=Qt[u]={id:u,loaded:!1,exports:{}};return Yt[u].call(o.exports,o,o.exports,Rt),o.loaded=!0,o.exports}Rt.n=u=>{var h=u&&u.__esModule?()=>u.default:()=>u;return Rt.d(h,{a:h}),h},Rt.d=(u,h)=>{for(var o in h)Rt.o(h,o)&&!Rt.o(u,o)&&Object.defineProperty(u,o,{enumerable:!0,get:h[o]})},Rt.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),Rt.o=(u,h)=>Object.prototype.hasOwnProperty.call(u,h),Rt.nmd=u=>(u.paths=[],u.children||(u.children=[]),u),Rt(5975)})();const Yn=Yt=>(Vn("data-v-67bb50c7"),Yt=Yt(),Kn(),Yt),Xn=Yn(()=>me("div",{class:"title"},[me("span",null,"属性")],-1)),Zn={key:0,class:"content"},Wt="bed806b1ccb34b268ab1c0700123d444",$n=Dn({__name:"leafletMap",setup(Yt){const Qt=new kt.Icon({iconUrl:"https://jsdelivr.cdn.iszy.xyz/gh/zvonimirsun/leaflet-color-markers@master/img/marker-icon-2x-blue.png",shadowUrl:an,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]}),Rt=new kt.Icon({iconUrl:"https://jsdelivr.cdn.iszy.xyz/gh/zvonimirsun/leaflet-color-markers@master/img/marker-icon-2x-yellow.png",shadowUrl:an,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});let u,h,o;const c=Te(void 0),d=Te(),M=Te();Bn(()=>{Ot.on("locationGeo",I),Ot.on("updateGeojsonLayer",N),Ot.on("getGeoJson",V),Ot.on("addLayer",R),Ot.on("removeLayer",O),Ot.on("selectFeature",E),m(),Rn(()=>{})}),Tn(()=>{Ot.off("locationGeo",I),Ot.off("updateGeojsonLayer",N),Ot.off("getGeoJson",V),Ot.off("addLayer",R),Ot.off("removeLayer",O),Ot.off("selectFeature",E),h&&h.remove()});function m(){h=kt.map(d.value,{attributionControl:!0,zoomControl:!1,minZoom:4,trackResize:!0}),h.setView([35,105],4),u=kt.geoJSON(void 0,{onEachFeature:P,pointToLayer:(C,S)=>kt.marker(S,{icon:Qt}).addTo(h)}).addTo(h),o=kt.control.layers({高德矢量:Bt("GaoDe.Normal.Map",{maxNativeZoom:18,maxZoom:20,attribution:'&copy; <a href="https://lbs.amap.com/pages/terms/" target="_blank">高德地图</a> 贡献者'}).addTo(h),高德影像:kt.layerGroup([Bt("GaoDe.Satellite.Map",{maxNativeZoom:18,maxZoom:20}),Bt("GaoDe.Satellite.Annotation",{maxNativeZoom:18,maxZoom:20})],{attribution:'&copy; <a href="https://lbs.amap.com/pages/terms/" target="_blank">高德地图</a> 贡献者'}),谷歌矢量:kt.layerGroup([Bt("Google.Normal.Map",{maxZoom:20})],{attribution:'&copy; <a href="https://www.google.com/maps" target="_blank">谷歌地图</a> 贡献者'}),谷歌影像:kt.layerGroup([Bt("Google.Satellite.Map",{maxZoom:20}),Bt("Google.Satellite.Annotation",{maxZoom:20})],{attribution:'&copy; <a href="https://www.google.com/maps" target="_blank">谷歌地图</a> 贡献者'}),OpenStreetMap:Bt("OSM.Normal.Map",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> 贡献者',maxNativeZoom:19,maxZoom:20}),天地图矢量:kt.layerGroup([Bt("TianDiTu.Normal.Map",{key:Wt,maxNativeZoom:18,maxZoom:20}),Bt("TianDiTu.Normal.Annotation",{key:Wt,maxNativeZoom:18,maxZoom:20})],{attribution:'&copy; <a href="https://www.tianditu.gov.cn/" target="_blank">天地图</a> 贡献者'}),天地图影像:kt.layerGroup([Bt("TianDiTu.Satellite.Map",{key:Wt,maxNativeZoom:18,maxZoom:20}),Bt("TianDiTu.Satellite.Annotation",{key:Wt,maxNativeZoom:18,maxZoom:20})],{attribution:'&copy; <a href="https://www.tianditu.gov.cn/" target="_blank">天地图</a> 贡献者'}),天地图地形:kt.layerGroup([Bt("TianDiTu.Terrain.Map",{key:Wt,maxNativeZoom:14,maxZoom:20}),Bt("TianDiTu.Terrain.Annotation",{key:Wt,maxNativeZoom:14,maxZoom:20})],{attribution:'&copy; <a href="https://www.tianditu.gov.cn/" target="_blank">天地图</a> 贡献者'})},{图形:u},{hideSingleBase:!0,position:"bottomleft"}).addTo(h),kt.control.scale({imperial:!1,position:"bottomright"}).addTo(h),kt.control.zoom({zoomInTitle:"放大",zoomOutTitle:"缩小",position:"topright"}).addTo(h),h.pm.setLang("zh"),h.pm.setGlobalOptions({layerGroup:u}),h.pm.addControls({position:"topright",drawCircleMarker:!1,drawText:!1,rotateMode:!0}),h.on("pm:create pm:remove pm:cut",function(C){T(),C.type==="pm:create"&&P(C.layer.toGeoJSON(),C.layer)})}function P(C,S){S.on("pm:change",function(){T()}),C.properties||(C.properties={}),S.bindPopup(M.value).on("popupopen",()=>{c.value=C,h.hasLayer(S)&&(S instanceof kt.Marker?S.setIcon(Rt):S.setStyle({color:"#ffff00",weight:5,opacity:.65}))}).on("popupclose",()=>{c.value=void 0,h.hasLayer(S)&&(S instanceof kt.Marker?S.setIcon(Qt):u.resetStyle(S))})}function I(C){try{const S=kt.geoJSON(C);h.fitBounds(S.getBounds())}catch{}}function N(C){u.clearLayers();try{u.addData(C),h.fitBounds(u.getBounds())}catch{}}function V(C){C(u==null?void 0:u.toGeoJSON())}function R(C,S){C.addTo(h),o.addOverlay(C,S)}function O(C){h.removeLayer(C),o.removeLayer(C)}function T(){u.getLayers().length===0?Ot.emit("updateEditor",{type:"FeatureCollection",features:[]}):Ot.emit("updateEditor",u.toGeoJSON())}function E(C){if(u.getLayers().length>C){const S=u.getLayers()[C];S.openPopup(),h.fitBounds(S.getBounds())}}return(C,S)=>{var D,F;const f=qn,x=Jn;return ge(),Ie(rn,null,[me("div",{ref_key:"mapContainer",ref:d,class:"map-container"},null,512),In(me("div",{ref_key:"propertyPopup",ref:M,class:"property-popup"},[Xn,(D=je(c))!=null&&D.properties&&Object.keys((F=je(c))==null?void 0:F.properties).length?(ge(),Ie("div",Zn,[jn(x,{column:1,border:!0},{default:nn(()=>[(ge(!0),Ie(rn,null,An(je(c).properties,(q,H,J)=>(ge(),Gn(f,{key:J,label:H.toString()},{default:nn(()=>[Nn(zn(q),1)]),_:2},1032,["label"]))),128))]),_:1})])):Fn("",!0)],512),[[Un,!1]])],64)}}});const rr=Hn($n,[["__scopeId","data-v-67bb50c7"]]);export{rr as default};
