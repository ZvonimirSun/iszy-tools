import{n as he,v as Fe,d as ve,e as De,r as d,ab as Y,g as Be,h as V,a as e,bg as we,K as Ae,D as Re,bq as ke,b1 as pe,b2 as fe,s as ce,br as Se,P as K,C as xe,cE as Te,i as Oe,E as Ie,cF as Ue,cG as Me,cH as Le,cI as Ve,f as oe,k as t,o as I,L as ne,w as o,b,M as p,F as se,a1 as Z,c as z,l as G,a2 as N,cJ as de,N as Ne,B as Pe,cj as je,_ as $e}from"./index.085c4247.js";/* empty css              *//* empty css               */import{_ as He}from"./index.31aad938.js";/* empty css               */import{_ as Ke}from"./index.172296a1.js";import{_ as Ge}from"./index.c41507d3.js";import{_ as We,F as qe}from"./Form.6a2fad33.js";import"./toArray.02a358fc.js";import"./Overflow.153ed7e7.js";import"./isMobile.481c1aec.js";import"./useState.3cd98ec2.js";import"./DownOutlined.ba28f61e.js";import"./SearchOutlined.778514b7.js";import"./useFlexGapSupport.5cc0996c.js";import"./Col.2250ba76.js";import"./responsiveObserve.af5c40d7.js";import"./get.4094b3c7.js";import"./hasIn.660ea286.js";import"./toInteger.79c4c27b.js";import"./toFinite.7d9b74b9.js";import"./_arrayIncludesWith.15e56e3a.js";import"./collapseMotion.88006ab3.js";var ze={success:xe,info:Te,error:Oe,warning:Ie},Je={success:Ue,info:Me,error:Le,warning:Ve},Qe=Fe("success","info","warning","error"),Xe=function(){return{type:K.oneOf(Qe),closable:{type:Boolean,default:void 0},closeText:K.any,message:K.any,description:K.any,afterClose:Function,showIcon:{type:Boolean,default:void 0},prefixCls:String,banner:{type:Boolean,default:void 0},icon:K.any,closeIcon:K.any,onClose:Function}},Ye=ve({compatConfig:{MODE:3},name:"AAlert",inheritAttrs:!1,props:Xe(),setup:function(r,D){var B=D.slots,ee=D.emit,w=D.attrs,i=D.expose,v=De("alert",r),l=v.prefixCls,U=v.direction,y=d(!1),A=d(!1),W=d(),g=function(u){u.preventDefault();var E=W.value;E.style.height="".concat(E.offsetHeight,"px"),E.style.height="".concat(E.offsetHeight,"px"),y.value=!0,ee("close",u)},q=function(){var u;y.value=!1,A.value=!0,(u=r.afterClose)===null||u===void 0||u.call(r)};i({animationEnd:q});var C=d({});return function(){var R,u,E=r.banner,k=r.closeIcon,J=k===void 0?(R=B.closeIcon)===null||R===void 0?void 0:R.call(B):k,S=r.closable,x=r.type,f=r.showIcon,T=Y(B,r,"closeText"),P=Y(B,r,"description"),Q=Y(B,r,"message"),j=Y(B,r,"icon");f=E&&f===void 0?!0:f,x=E&&x===void 0?"warning":x||"info";var ae=(P?Je:ze)[x]||null;T&&(S=!0);var n=l.value,h=Be(n,(u={},V(u,"".concat(n,"-").concat(x),!0),V(u,"".concat(n,"-closing"),y.value),V(u,"".concat(n,"-with-description"),!!P),V(u,"".concat(n,"-no-icon"),!f),V(u,"".concat(n,"-banner"),!!E),V(u,"".concat(n,"-closable"),S),V(u,"".concat(n,"-rtl"),U.value==="rtl"),u)),te=S?e("button",{type:"button",onClick:g,class:"".concat(n,"-close-icon"),tabindex:0},[T?e("span",{class:"".concat(n,"-close-text")},[T]):J===void 0?e(we,null,null):J]):null,le=j&&(Ae(j)?Re(j,{class:"".concat(n,"-icon")}):e("span",{class:"".concat(n,"-icon")},[j]))||e(ae,{class:"".concat(n,"-icon")},null),ue=ke("".concat(n,"-motion"),{appear:!1,css:!0,onAfterLeave:q,onBeforeLeave:function(M){M.style.maxHeight="".concat(M.offsetHeight,"px")},onLeave:function(M){M.style.maxHeight="0px"}});return A.value?null:e(Se,ue,{default:function(){return[pe(e("div",ce(ce({role:"alert"},w),{},{style:[w.style,C.value],class:[w.class,h],"data-show":!y.value,ref:W}),[f?le:null,e("div",{class:"".concat(n,"-content")},[Q?e("div",{class:"".concat(n,"-message")},[Q]):null,P?e("div",{class:"".concat(n,"-description")},[P]):null]),te]),[[fe,!y.value]])]}})}}});const Ze=he(Ye);const ea={class:"previewVideo"},aa={class:"rec"},ta={class:"previewVideo"},la=["src"],ua=ve({__name:"screenRecord",setup(ie){const r="unstart",D="recording",B="paused",ee="stopped",w=d();let i=null,v=null;const l=d({open:!1,start:!0,pause:!0,resume:!0,stop:!0,download:!0}),U=d(r);let y=[];const A=d(""),W=[{label:"\u5426",value:"never"},{label:"\u662F",value:"always"}],g=d("never"),q=[{label:"\u5426",value:"never"},{label:"\u662F",value:"always"}],C=d("never"),R=[{label:"\u9ED8\u8BA4",value:"default"},{label:"16:9",value:1.77},{label:"4:3",value:1.33},{label:"21:9",value:2.35},{label:"14:10",value:1.4},{label:"19:10",value:1.9}],u=d("default"),E=[{label:"\u9ED8\u8BA4",value:"default"},{label:"60",value:60},{label:"30",value:30},{label:"25",value:25},{label:"15",value:15},{label:"5",value:5}],k=d("default"),J=[{label:"\u9ED8\u8BA4",value:"default"},{label:"\u5C4F\u5E55\u5C3A\u5BF8",value:"fit-screen"},{label:"4K",value:"4k"},{label:"1080p",value:"1080p"},{label:"720p",value:"720p"}],S=d("default"),x=[{label:"\u9ED8\u8BA4",value:"default"},{label:"\u603B\u662F\u663E\u793A",value:"always"},{label:"\u79FB\u52A8\u65F6\u663E\u793A",value:"motion"},{label:"\u4ECE\u4E0D\u663E\u793A",value:"never"}],f=d("default"),T=(()=>navigator&&navigator.mediaDevices&&navigator.mediaDevices.getSupportedConstraints?navigator.mediaDevices.getSupportedConstraints():{})(),P=(()=>Boolean(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getDisplayMedia))(),Q=(()=>Boolean(navigator&&navigator.mediaDevices&&navigator.mediaDevices.getUserMedia))(),j=P&&Q,ae=oe(()=>U.value===D),n=oe(()=>{const a={};switch(typeof u.value=="number"&&(a.aspectRatio=u.value),typeof k.value=="number"&&(a.frameRate=k.value),f.value!=="default"&&(a.cursor=f.value),S.value){case"fit-screen":a.width=screen.width,a.height=screen.height;break;case"4K":a.width=3840,a.height=2160;break;case"1080p":a.width=1920,a.height=1080;break;case"720p":a.width=1280,a.height=720;break}return{video:a,audio:g.value==="always"}}),h=oe(()=>{var a,s;if(v){const O=v.getVideoTracks();if(O.length>0){const c=O[0].getSettings(),L={recordAudio:(a=W.find(m=>g.value===m.value))==null?void 0:a.label,recordMicro:(s=q.find(m=>C.value===m.value))==null?void 0:s.label,frameRate:c.frameRate,width:c.width,height:c.height,aspectRatio:"\u9ED8\u8BA4",cursor:""};if(c.aspectRatio){const m=c.aspectRatio,$=R.find(F=>typeof F.value=="number"?m-F.value<=.1:!1);$?L.aspectRatio=$.label:L.aspectRatio="\u9ED8\u8BA4"}if(c.cursor){const m=x.find($=>c.cursor===$.value);m?L.cursor=m.label:L.cursor="\u9ED8\u8BA4"}return{video:L}}}return{video:{},audio:{}}});async function te(){try{if(v=await navigator.mediaDevices.getDisplayMedia(n.value),C.value==="always"){const s=await navigator.mediaDevices.getUserMedia({audio:!0});v.addTrack(s.getAudioTracks()[0])}const a=v.getVideoTracks()[0];a&&(a.onended=re,a.onmute=re),i=new MediaRecorder(v),i.onstop=_e,i.ondataavailable=be,w.value.srcObject=v,w.value.muted=!0,l.value.open=!0,l.value.start=!1}catch(a){de.error(a.message)}}function le(){i==null||i.start(),U.value=D,l.value.start=!0,l.value.pause=!1,l.value.stop=!1}function ue(){i==null||i.pause(),U.value=B,l.value.pause=!0,l.value.resume=!1}function X(){i==null||i.resume(),U.value=D,l.value.pause=!1,l.value.resume=!0}function M(){i&&i.state!=="inactive"&&i.stop(),U.value=ee,l.value.start=!1,l.value.pause=!0,l.value.resume=!0,l.value.stop=!0}function me(){if(A.value){const a=document.createElement("a");a.href=A.value,a.download="screen-record.mp4",a.click()}}function re(){if(M(),v)v.getTracks().forEach(s=>{s.stop()});else return;de.info("\u5C4F\u5E55\u5206\u4EAB\u7ED3\u675F"),v=null,w.value.srcObject=null,l.value.open=!1,l.value.start=!0}function _e(){const a=new Blob(y,{type:"video/mp4"});A.value=URL.createObjectURL(a),l.value.download=!1,y=[]}function be(a){y.push(a.data)}function ge(){g.value&&C.value&&(C.value="never")}function Ce(){g.value&&C.value&&(g.value="never")}return(a,s)=>{const O=Ne,c=Pe,L=Ge,m=Ke,$=Ze,F=He,H=We,Ee=qe,ye=je;return t(j)?(I(),ne(se,{key:0},[e(O,{level:3},{default:o(()=>[b(" \u5B9E\u65F6\u9884\u89C8 ")]),_:1}),p("div",ea,[p("video",{ref_key:"screenShareVideoElement",ref:w,autoplay:""},null,512),pe(p("span",aa,"REC",512),[[fe,t(ae)]])]),e(L,{size:8,class:"operations",align:"center"},{default:o(()=>[e(c,{type:"primary",disabled:t(l).open,onClick:te},{default:o(()=>[b(" \u5F00\u542F\u5C4F\u5E55\u5171\u4EAB ")]),_:1},8,["disabled"]),e(c,{type:"primary",disabled:t(l).start,onClick:le},{default:o(()=>[b(" \u5F00\u59CB\u5F55\u5236 ")]),_:1},8,["disabled"]),e(c,{type:"primary",disabled:t(l).pause,onClick:ue},{default:o(()=>[b(" \u6682\u505C ")]),_:1},8,["disabled"]),e(c,{type:"primary",disabled:t(l).resume,onClick:X},{default:o(()=>[b(" \u7EE7\u7EED ")]),_:1},8,["disabled"]),e(c,{type:"primary",disabled:t(l).stop,onClick:M},{default:o(()=>[b(" \u505C\u6B62 ")]),_:1},8,["disabled"]),e(c,{type:"primary",disabled:t(l).download,onClick:me},{default:o(()=>[b(" \u4E0B\u8F7D ")]),_:1},8,["disabled"])]),_:1}),t(A)?(I(),ne(se,{key:0},[e(m),e(O,{level:3},{default:o(()=>[b(" \u7ED3\u679C ")]),_:1}),p("div",ta,[p("video",{controls:"",src:t(A)},null,8,la)])],64)):Z("",!0),e(m),e(O,{level:3},{default:o(()=>[b(" \u8BBE\u7F6E ")]),_:1}),e($,{message:"\u7531\u4E8E\u6D4F\u89C8\u5668\u9650\u5236\uFF0C\u90E8\u5206\u8BBE\u7F6E\u53EF\u80FD\u65E0\u6CD5\u751F\u6548",type:"warning","show-icon":"",closable:"",style:{"margin-bottom":".8rem"}}),t(l).open?(I(),ne(se,{key:2},[e(O,{level:4},{default:o(()=>[b(" \u5F53\u524D\u8BBE\u7F6E ")]),_:1}),e(ye,null,{default:o(()=>[p("ul",null,[p("li",null,"\u7CFB\u7EDF\u97F3\u9891: "+N(t(h).video.recordAudio),1),p("li",null,"\u9EA6\u514B\u98CE: "+N(t(h).video.recordMicro),1),p("li",null,"\u957F\u5BBD\u6BD4: "+N(t(h).video.aspectRatio),1),p("li",null,"\u5E27\u7387: "+N(t(h).video.frameRate),1),p("li",null,"\u89C6\u9891\u5BBD\u5EA6: "+N(t(h).video.width),1),p("li",null,"\u89C6\u9891\u9AD8\u5EA6: "+N(t(h).video.height),1),p("li",null,"\u663E\u793A\u9F20\u6807: "+N(t(h).video.cursor),1)])]),_:1})],64)):(I(),z(Ee,{key:1,"label-col":{sm:{span:5},md:{span:4},lg:{span:3},xxl:{span:2}}},{default:o(()=>[e(H,{label:"\u7CFB\u7EDF\u97F3\u9891"},{default:o(()=>[e(F,{value:t(g),"onUpdate:value":s[0]||(s[0]=_=>G(g)?g.value=_:null),options:W,onChange:ge},null,8,["value"])]),_:1}),e(H,{label:"\u9EA6\u514B\u98CE"},{default:o(()=>[e(F,{value:t(C),"onUpdate:value":s[1]||(s[1]=_=>G(C)?C.value=_:null),options:q,onChange:Ce},null,8,["value"])]),_:1}),t(T).aspectRatio?(I(),z(H,{key:0,label:"\u9009\u62E9\u957F\u5BBD\u6BD4"},{default:o(()=>[e(F,{value:t(u),"onUpdate:value":s[2]||(s[2]=_=>G(u)?u.value=_:null),options:R},null,8,["value"])]),_:1})):Z("",!0),t(T).frameRate?(I(),z(H,{key:1,label:"\u9009\u62E9\u5E27\u7387"},{default:o(()=>[e(F,{value:t(k),"onUpdate:value":s[3]||(s[3]=_=>G(k)?k.value=_:null),options:E},null,8,["value"])]),_:1})):Z("",!0),t(T).width&&t(T).height?(I(),z(H,{key:2,label:"\u9009\u62E9\u5206\u8FA8\u7387"},{default:o(()=>[e(F,{value:t(S),"onUpdate:value":s[4]||(s[4]=_=>G(S)?S.value=_:null),options:J},null,8,["value"])]),_:1})):Z("",!0),e(H,{label:"\u662F\u5426\u663E\u793A\u5149\u6807"},{default:o(()=>[e(F,{value:t(f),"onUpdate:value":s[5]||(s[5]=_=>G(f)?f.value=_:null),options:x},null,8,["value"])]),_:1})]),_:1}))],64)):(I(),z(O,{key:1,level:3},{default:o(()=>[b(" \u4F60\u7684\u6D4F\u89C8\u5668\u4E0D\u652F\u6301WebRTC\uFF0C\u8BF7\u5B89\u88C5\u6700\u65B0\u7248\u672CChrome\u540E\u91CD\u8BD5\u3002 ")]),_:1}))}}});const Ra=$e(ua,[["__scopeId","data-v-cde2d664"]]);export{Ra as default};
