var it=Object.defineProperty;var z=Object.getOwnPropertySymbols;var nt=Object.prototype.hasOwnProperty,at=Object.prototype.propertyIsEnumerable;var J=(t,s,i)=>s in t?it(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i,R=(t,s)=>{for(var i in s||(s={}))nt.call(s,i)&&J(t,i,s[i]);if(z)for(var i of z(s))at.call(s,i)&&J(t,i,s[i]);return t};import{_ as lt,s as B,d as F,g as U}from"./index.90598d59.js";import{a5 as dt,a4 as rt,aj as ht,ak as ct,al as ft,am as ut,an as gt,ao as K,ap as _t,N as mt,ah as pt,aq as Q,ar as yt,as as vt,at as It,au as St,av as Rt,aw as kt,ax as Lt,ay as Ct,az as Dt,aA as bt,aB as A,j as H,aC as V,aD as Mt,c as Ot,a as n,g,f as e,y as o,H as Tt,J as xt,T as wt,r as c,o as jt,K as d,k as Et,p as Nt,b as Wt,I as Pt}from"./vendor.e73f0769.js";import{J as q}from"./jsoneditor.min.825e62c0.js";import{c as G}from"./createFile.7a559a0a.js";/* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css               */const{Item:zt}=K,{Paragraph:Jt,Text:Bt}=wt,{Item:X}=Q,{Meta:Ft}=X,{mapState:Ut,mapGetters:At,mapMutations:Ht}=dt("jsonEditor");let a,l;const Vt={name:"JsonEditor",components:{Button:rt,Space:ht,Checkbox:ct,Right:ft,Left:ut,Dropdown:gt,Menu:K,MenuItem:zt,Down:_t,Modal:mt,Input:pt,Paragraph:Jt,List:Q,ListItem:X,ListItemMeta:Ft,FileAdditionOne:yt,FolderOpen:vt,Save:It,History:St,Computer:Rt,LinkThree:kt,SettingTwo:Lt,Info:Ct,Delete:Dt,IndentRight:bt,Text:Bt},data:()=>({codeLeft:{array:[1,2,3],boolean:!0,color:"gold",null:null,number:123,object:{a:"b",c:"d"},string:"Hello World"},codeRight:{},diff:!1,modalStatus:{type:"",leftOrRight:""},url:"",keyword:"",selectId:"",indent:2,currentName:""}),watch:{leftId:{handler:function(t){t!=null?B("left",t):F("left")}},rightId:{handler:function(t){t!=null?B("right",t):F("right")}}},computed:R(R({dataListAfterSearch:function(){return this.dataList(this.keyword)},codeLeftString:function(){return typeof this.codeLeft=="string"?this.codeLeft:JSON.stringify(this.codeLeft,null,this.indent)},codeRightString:function(){return typeof this.codeRight=="string"?this.codeRight:JSON.stringify(this.codeRight,null,this.indent)},documentProperties:function(){var t,s,i,m;return this.modalStatus.leftOrRight==="left"?{name:(t=this.leftData)==null?void 0:t.name,storage:this.leftData?"\u6D4F\u89C8\u5668\u672C\u5730":"",updated:(s=this.leftData)==null?void 0:s.updated,size:this.codeLeftString.length}:this.modalStatus.leftOrRight==="right"?{name:(i=this.rightData)==null?void 0:i.name,storage:this.rightData?"\u6D4F\u89C8\u5668\u672C\u5730":"",updated:(m=this.rightData)==null?void 0:m.updated,size:this.codeRightString.length}:{}}},Ut(["leftId","rightId"])),At(["dataList","data","leftData","rightData"])),mounted(){this.init()},methods:R({init(){if(a=new q(this.$refs.jsonEditorLeft,{mode:"code",modes:["code","tree"],onClassName:this.onClassName,onChangeText:A(i=>{try{this.codeLeft=JSON.parse(i)}catch{this.codeLeft=i}a.refresh(),l.refresh(),this.save("left")},100),onModeChange:i=>{i==="code"&&typeof this.codeLeft!="string"&&a.updateText(this.codeLeftString),this.save("left")},onError:i=>{this.$msg.error(i.message)}}),l=new q(this.$refs.jsonEditorRight,{mode:"tree",modes:["code","tree"],onClassName:this.onClassName,onChangeText:A(i=>{try{this.codeRight=JSON.parse(i)}catch{this.codeRight=i}a.refresh(),l.refresh(),this.save("right")},100),onModeChange:i=>{i==="code"&&typeof this.codeRight!="string"&&l.updateText(this.codeRightString),this.save("right")},onError:i=>{this.$msg.error(i.message)}}),this.leftData&&this.leftData.content){if(this.leftData.content.json)this.codeLeft=this.leftData.content.json,a.set(this.leftData.content.json),a.setMode("tree");else if(this.leftData.content.text){try{this.codeLeft=JSON.parse(this.leftData.content.text)}catch{this.codeLeft=this.leftData.content.text}a.setText(this.leftData.content.text),a.setMode("code")}}else a.set(this.codeLeft);if(this.rightData&&this.rightData.content){if(this.rightData.content.json)this.codeRight=this.rightData.content.json,l.set(this.rightData.content.json),l.setMode("tree");else if(this.rightData.content.text){try{this.codeRight=JSON.parse(this.rightData.content.text)}catch{this.codeRight=this.rightData.content.text}l.setText(this.rightData.content.text),l.setMode("code")}}else l.set(this.codeRight);const t=U("left"),s=U("right");t&&t!==this.leftId&&(this.selectId=t,this.modalStatus.leftOrRight="left",this.openRecent()),s&&t!==this.rightId&&(this.selectId=s,this.modalStatus.leftOrRight="right",this.openRecent())},copyRight(){typeof this.codeLeft=="string"?(l.setMode("code"),l.updateText(this.codeLeft),this.codeRight=this.codeLeft):(a.getMode==="code"?l.updateText(a.getText()):l.updateText(this.codeLeftString),this.codeRight=H(this.codeLeft)),a.refresh(),l.refresh(),this.save("right")},copyLeft(){typeof this.codeRight=="string"?(a.setMode("code"),a.updateText(this.codeRight),this.codeLeft=this.codeRight):(l.getMode==="code"?a.updateText(l.getText()):a.updateText(this.codeRightString),this.codeLeft=H(this.codeRight)),a.refresh(),l.refresh(),this.save("left")},save(t){(!t||t==="left")&&(a.getMode()==="tree"?this.saveData({left:!0,id:this.leftId,content:a.get()}):this.saveData({left:!0,id:this.leftId,content:a.getText()})),(!t||t==="right")&&(l.getMode()==="tree"?this.saveData({right:!0,id:this.rightId,content:l.get()}):this.saveData({right:!0,id:this.rightId,content:l.getText()}))},create(t){t==="left"?(a.set({}),this.codeLeft={},this.saveData({left:!0})):t==="right"&&(l.set({}),this.codeRight={},this.saveData({right:!0}))},open(t,s){switch(this.modalStatus.leftOrRight=s,t.key){case"recent":this.modalStatus.type="openRecent";break;case"file":this.$refs.uploader.click();break;case"url":this.modalStatus.type="openUrl";break}},openRecent(){if(this.selectId&&this.data(this.selectId)&&this.data(this.selectId).content){const t=this.data(this.selectId).content;if(this.modalStatus.leftOrRight==="left"){if(this.saveData({left:!0,id:this.selectId}),t.json)this.codeLeft=t.json,a.set(t.json),a.setMode("tree");else if(t.text){try{this.codeLeft=JSON.parse(t.text)}catch{this.codeLeft=t.text}a.setText(t.text),a.setMode("code")}}else if(this.modalStatus.leftOrRight==="right"){if(this.saveData({right:!0,id:this.selectId}),t.json)this.codeRight=t.json,l.set(t.json),l.setMode("tree");else if(t.text){try{this.codeRight=JSON.parse(t.text)}catch{this.codeRight=t.text}l.setText(t.text),l.setMode("code")}}}this.selectId="",this.closeModal()},openFile(t){if(t.target.files.length){const s=t.target.files[0],i=new FileReader;i.onload=()=>{i.result&&(this.create(this.modalStatus.leftOrRight),this.modalStatus.leftOrRight==="left"?(this.codeLeft=i.result,a.setText(i.result),this.save("left")):this.modalStatus.leftOrRight==="right"&&(this.codeRight=i.result,l.setText(i.result),this.save("right")))},i.readAsText(s)}t.target.value=""},async openUrl(t){try{const s=(await this.$axios.get(t)).data;s&&(this.create(this.modalStatus.leftOrRight),this.modalStatus.leftOrRight==="left"?(this.codeLeft=s,a.set(s),this.save("left")):this.modalStatus.leftOrRight==="right"&&(this.codeRight=s,l.set(s),this.save("right")),this.url="",this.closeModal())}catch(s){this.$msg.error(s.message)}},download(t){var s,i;t==="left"?G(a.getText(),`${((s=this.leftData)==null?void 0:s.name)||"left"}.json`):t==="right"&&G(l.getText(),`${((i=this.rightData)==null?void 0:i.name)||"right"}.json`)},changeOption(t,s){switch(this.modalStatus.leftOrRight=s,t.key){case"indentation":this.modalStatus.type="setIndentation";break;case"properties":this.modalStatus.type="documentProperties";break;case"delete":s==="left"?this.deleteData({id:this.leftId}):s==="right"&&this.deleteData({id:this.rightId});break}},changeIndentation(){a.indentation=this.indent,l.indentation=this.indent,typeof this.codeLeft=="object"&&a.updateText(this.codeLeftString),typeof this.codeRight=="object"&&l.updateText(this.codeRightString),this.closeModal()},onEditStart(){this.currentName=this.documentProperties.name},onEditChange(t){this.currentName=t},onEditEnd(){this.modalStatus.leftOrRight==="left"?this.saveData({id:this.leftId,name:this.currentName}):this.modalStatus.leftOrRight==="right"&&this.saveData({id:this.rightId,name:this.currentName}),this.currentName=""},changeDiff(){if(!this.diff){if(typeof this.codeLeft=="string"||typeof this.codeRight=="string"){this.$msg.error("JSON\u5B58\u5728\u9519\u8BEF");return}(a.getMode()!=="tree"||l.getMode()!=="tree")&&this.$msg.warn("\u5BF9\u6BD4\u6A21\u5F0F\u4EC5\u5728\u300C\u6811\u300D\u6A21\u5F0F\u4E0B\u751F\u6548\uFF0C\u8BF7\u5207\u6362\u4E3A\u6811\u6A21\u5F0F")}this.diff=!this.diff,a.refresh(),l.refresh()},onClassName({path:t}){const s=V(this.codeLeft,t),i=V(this.codeRight,t);return this.diff?Mt(s,i)?"":"differentElement":""},closeModal(){this.modalStatus.type="",this.modalStatus.leftOrRight=""}},Ht(["saveData","deleteData"])),beforeUnmount(){a&&a.destroy(),l&&l.destroy()}},k=t=>(Nt("data-v-5452d933"),t=t(),Wt(),t),qt={class:"editorPanel"},Gt={class:"editorPanelContainer editorPanelContainerLeft"},Kt={class:"editorController editorControllerLeft"},Qt={class:"editorTitle"},Xt={class:"buttonWithIcon"},Yt=d("\xA0\u65B0\u5EFA"),Zt={class:"buttonWithIcon"},$t=d("\xA0\u6253\u5F00\u6700\u8FD1\u8BB0\u5F55"),te={class:"buttonWithIcon"},ee=d("\xA0\u6253\u5F00\u672C\u5730\u6587\u4EF6"),se={class:"buttonWithIcon"},oe=d("\xA0\u6253\u5F00URL"),ie={class:"buttonWithIcon"},ne=d("\xA0\u6253\u5F00"),ae={class:"buttonWithIcon"},le=d("\xA0\u4FDD\u5B58"),de={class:"buttonWithIcon"},re={class:"buttonWithIcon"},he=d("\xA0\u6587\u6863\u5C5E\u6027"),ce={class:"buttonWithIcon"},fe=d("\xA0\u5220\u9664\u6587\u6863"),ue={class:"buttonWithIcon"},ge=d("\xA0\u9009\u9879"),_e={ref:"jsonEditorLeft",class:"jsonEditor jsonEditorLeft"},me={class:"controller noShowMobile"},pe=d(" \u590D\u5236 "),ye=d(" \u590D\u5236 "),ve=d("\u5BF9\u6BD4"),Ie={class:"editorPanelContainer editorPanelContainerRight noShowMobile"},Se={class:"editorController editorControllerRight"},Re={class:"editorTitle"},ke={class:"buttonWithIcon"},Le=d("\xA0\u65B0\u5EFA"),Ce={class:"buttonWithIcon"},De=d("\xA0\u6253\u5F00\u6700\u8FD1\u8BB0\u5F55"),be={class:"buttonWithIcon"},Me=d("\xA0\u6253\u5F00\u672C\u5730\u6587\u4EF6"),Oe={class:"buttonWithIcon"},Te=d("\xA0\u6253\u5F00URL"),xe={class:"buttonWithIcon"},we=d("\xA0\u6253\u5F00"),je={class:"buttonWithIcon"},Ee=d("\xA0\u4FDD\u5B58"),Ne={class:"buttonWithIcon"},We={class:"buttonWithIcon"},Pe=d("\xA0\u6587\u6863\u5C5E\u6027"),ze={class:"buttonWithIcon"},Je=d("\xA0\u5220\u9664\u6587\u6863"),Be={class:"buttonWithIcon"},Fe=d("\xA0\u9009\u9879"),Ue={ref:"jsonEditorRight",class:"jsonEditor jsonEditorRight"},Ae=d("\u641C\u7D22"),He=d("\u5220\u9664"),Ve=d("\u4E0D\u652F\u6301\u9700\u8981\u9A8C\u8BC1\u6216\u5F00\u542FCORS\u7684\u5730\u5740"),qe=d("\u914D\u7F6E\u4EE3\u7801\u6A21\u5F0F\u4E0B\u7528\u4E8E\u7F29\u8FDB\u7684\u7A7A\u683C\u6570\u3002 \u7F29\u8FDB\u540C\u65F6\u5E94\u7528\u4E8E\u4E24\u4E2A\u9762\u677F\u3002"),Ge=k(()=>n("strong",null,"\u540D\u79F0\uFF1A",-1)),Ke=k(()=>n("strong",null,"\u5B58\u50A8\uFF1A",-1)),Qe=k(()=>n("strong",null,"\u66F4\u65B0\uFF1A",-1)),Xe=k(()=>n("strong",null,"\u5927\u5C0F\uFF1A",-1));function Ye(t,s,i,m,Ze,r){var W,P;const D=c("FileAdditionOne"),u=c("Button"),b=c("History"),f=c("MenuItem"),M=c("Computer"),O=c("LinkThree"),p=c("Menu"),T=c("FolderOpen"),y=c("Down"),v=c("Dropdown"),x=c("Save"),w=c("IndentRight"),j=c("Info"),E=c("Delete"),N=c("SettingTwo"),L=c("Space"),Y=c("Right"),Z=c("Left"),$=c("Checkbox"),_=c("Paragraph"),C=c("Input"),tt=c("ListItemMeta"),et=c("ListItem"),st=c("List"),I=c("Modal"),S=c("Text");return jt(),Ot(xt,null,[n("div",qt,[n("div",Gt,[n("div",Kt,[n("div",Qt,g((W=t.leftData)==null?void 0:W.name),1),e(L,{class:"editorControlButtons"},{default:o(()=>[e(u,{size:"small",type:"primary",onClick:s[0]||(s[0]=h=>r.create("left"))},{default:o(()=>[n("span",Xt,[e(D,{theme:"outline"}),Yt])]),_:1}),e(v,null,{overlay:o(()=>[e(p,{onClick:s[1]||(s[1]=h=>r.open(h,"left")),trigger:["click","hover"]},{default:o(()=>[e(f,{key:"recent"},{default:o(()=>[n("span",Zt,[e(b,{theme:"outline"}),$t])]),_:1}),e(f,{key:"file"},{default:o(()=>[n("span",te,[e(M,{theme:"outline"}),ee])]),_:1}),e(f,{key:"url"},{default:o(()=>[n("span",se,[e(O,{theme:"outline"}),oe])]),_:1})]),_:1})]),default:o(()=>[e(u,{size:"small",type:"primary"},{default:o(()=>[n("span",ie,[e(T,{theme:"outline"}),ne,e(y,{theme:"outline"})])]),_:1})]),_:1}),e(u,{size:"small",type:"primary",onClick:s[2]||(s[2]=h=>r.download("left"))},{default:o(()=>[n("span",ae,[e(x,{theme:"outline"}),le])]),_:1}),e(v,null,{overlay:o(()=>[e(p,{onClick:s[3]||(s[3]=h=>r.changeOption(h,"left")),trigger:["click","hover"]},{default:o(()=>[e(f,{key:"indentation"},{default:o(()=>[n("span",de,[e(w,{theme:"outline"}),d("\xA0\u7F29\u8FDB("+g(t.indent)+")",1)])]),_:1}),e(f,{key:"properties"},{default:o(()=>[n("span",re,[e(j,{theme:"outline"}),he])]),_:1}),e(f,{key:"delete",disabled:!Boolean(t.leftId)},{default:o(()=>[n("span",ce,[e(E,{theme:"outline"}),fe])]),_:1},8,["disabled"])]),_:1})]),default:o(()=>[e(u,{size:"small",type:"primary"},{default:o(()=>[n("span",ue,[e(N,{theme:"outline"}),ge,e(y,{theme:"outline"})])]),_:1})]),_:1})]),_:1})]),n("div",_e,null,512)]),n("div",me,[e(L,{direction:"vertical"},{default:o(()=>[e(u,{type:"primary",onClick:r.copyRight,block:""},{default:o(()=>[pe,e(Y,{theme:"outline"})]),_:1},8,["onClick"]),e(u,{type:"primary",onClick:r.copyLeft,block:""},{default:o(()=>[e(Z,{theme:"outline"}),ye]),_:1},8,["onClick"]),e($,{checked:t.diff,onChange:r.changeDiff},{default:o(()=>[ve]),_:1},8,["checked","onChange"])]),_:1})]),n("div",Ie,[n("div",Se,[n("div",Re,g((P=t.rightData)==null?void 0:P.name),1),e(L,{class:"editorControlButtons"},{default:o(()=>[e(u,{size:"small",type:"primary",onClick:s[4]||(s[4]=h=>r.create("right"))},{default:o(()=>[n("span",ke,[e(D,{theme:"outline"}),Le])]),_:1}),e(v,null,{overlay:o(()=>[e(p,{onClick:s[5]||(s[5]=h=>r.open(h,"right")),trigger:["click","hover"]},{default:o(()=>[e(f,{key:"recent"},{default:o(()=>[n("span",Ce,[e(b,{theme:"outline"}),De])]),_:1}),e(f,{key:"file"},{default:o(()=>[n("span",be,[e(M,{theme:"outline"}),Me])]),_:1}),e(f,{key:"url"},{default:o(()=>[n("span",Oe,[e(O,{theme:"outline"}),Te])]),_:1})]),_:1})]),default:o(()=>[e(u,{size:"small",type:"primary"},{default:o(()=>[n("span",xe,[e(T,{theme:"outline"}),we,e(y,{theme:"outline"})])]),_:1})]),_:1}),e(u,{size:"small",type:"primary",onClick:s[6]||(s[6]=h=>r.download("right"))},{default:o(()=>[n("span",je,[e(x,{theme:"outline"}),Ee])]),_:1}),e(v,null,{overlay:o(()=>[e(p,{onClick:s[7]||(s[7]=h=>r.changeOption(h,"right")),trigger:["click","hover"]},{default:o(()=>[e(f,{key:"indentation"},{default:o(()=>[n("span",Ne,[e(w,{theme:"outline"}),d("\xA0\u7F29\u8FDB("+g(t.indent)+")",1)])]),_:1}),e(f,{key:"properties"},{default:o(()=>[n("span",We,[e(j,{theme:"outline"}),Pe])]),_:1}),e(f,{key:"delete",disabled:!Boolean(t.rightId)},{default:o(()=>[n("span",ze,[e(E,{theme:"outline"}),Je])]),_:1},8,["disabled"])]),_:1})]),default:o(()=>[e(u,{size:"small",type:"primary"},{default:o(()=>[n("span",Be,[e(N,{theme:"outline"}),Fe,e(y,{theme:"outline"})])]),_:1})]),_:1})]),_:1})]),n("div",Ue,null,512)])]),e(I,{visible:t.modalStatus.type==="openRecent",title:"\u6253\u5F00\u6700\u8FD1",onCancel:r.closeModal,onOk:r.openRecent},{default:o(()=>[e(_,null,{default:o(()=>[Ae]),_:1}),e(C,{value:t.keyword,"onUpdate:value":s[8]||(s[8]=h=>t.keyword=h),placeholder:"\u8BF7\u8F93\u5165\u6587\u6863\u540D\u79F0"},null,8,["value"]),e(st,{class:"dataList","item-layout":"horizontal","data-source":r.dataListAfterSearch},{renderItem:o(({item:h})=>[e(et,{onClick:ot=>t.selectId=h._id,class:Et({selected:h._id===t.selectId})},{actions:o(()=>[e(u,{onClick:ot=>t.deleteData({id:h._id}),type:"primary",danger:""},{default:o(()=>[He]),_:2},1032,["onClick"])]),default:o(()=>[e(tt,{description:"\u6700\u540E\u4FEE\u6539: "+h.updated},{title:o(()=>[d(g(h.name),1)]),_:2},1032,["description"])]),_:2},1032,["onClick","class"])]),_:1},8,["data-source"])]),_:1},8,["visible","onCancel","onOk"]),Tt(n("input",{type:"file",ref:"uploader",onChange:s[9]||(s[9]=(...h)=>r.openFile&&r.openFile(...h)),accept:".json,.JSON"},null,544),[[Pt,!1]]),e(I,{visible:t.modalStatus.type==="openUrl",title:"\u6253\u5F00URL",onCancel:r.closeModal,onOk:s[11]||(s[11]=h=>r.openUrl(t.url))},{default:o(()=>[e(_,null,{default:o(()=>[Ve]),_:1}),e(C,{value:t.url,"onUpdate:value":s[10]||(s[10]=h=>t.url=h),placeholder:"\u8BF7\u8F93\u5165URL\u5730\u5740"},null,8,["value"])]),_:1},8,["visible","onCancel"]),e(I,{visible:t.modalStatus.type==="setIndentation",title:"\u8BBE\u7F6E\u7F29\u8FDB",onCancel:r.closeModal,onOk:r.changeIndentation},{default:o(()=>[e(_,null,{default:o(()=>[qe]),_:1}),e(C,{value:t.indent,"onUpdate:value":s[12]||(s[12]=h=>t.indent=h),valueModifiers:{number:!0}},null,8,["value"])]),_:1},8,["visible","onCancel","onOk"]),e(I,{visible:t.modalStatus.type==="documentProperties",title:"\u6587\u6863\u5C5E\u6027",onCancel:r.closeModal,onOk:r.closeModal,class:"documentProperties"},{default:o(()=>[e(_,null,{default:o(()=>[Ge,e(S,{underline:"",editable:{onStart:r.onEditStart,onChange:r.onEditChange,onEnd:r.onEditEnd},content:r.documentProperties.name},null,8,["editable","content"])]),_:1}),e(_,null,{default:o(()=>[Ke,e(S,{underline:""},{default:o(()=>[d(g(r.documentProperties.storage),1)]),_:1})]),_:1}),e(_,null,{default:o(()=>[Qe,e(S,{underline:""},{default:o(()=>[d(g(r.documentProperties.updated),1)]),_:1})]),_:1}),e(_,null,{default:o(()=>[Xe,e(S,{underline:""},{default:o(()=>[d(g(r.documentProperties.size)+" B",1)]),_:1})]),_:1})]),_:1},8,["visible","onCancel","onOk"])],64)}var us=lt(Vt,[["render",Ye],["__scopeId","data-v-5452d933"]]);export{us as default};
