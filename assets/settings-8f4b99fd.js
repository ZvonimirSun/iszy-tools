import{h as Q,y as _,R as j,ay as S,D as J,Q as K,o as p,l as i,a as e,w as t,b as m,m as U,n as r,z as k,H as w,I as R,c as E,s as I,A as q,B as W,E as X,_ as Y}from"./index-5c34abaf.js";import{E as Z,a as ee}from"./el-tab-pane-e2d972e5.js";import{a as oe,E as te}from"./el-form-item-4a9253f8.js";import{E as le}from"./el-divider-91a213b0.js";import{E as ae,a as ne}from"./el-radio-group-f2552cbf.js";import"./index-e8e6c906.js";import{E as se}from"./el-switch-2e34ad14.js";import{u as A}from"./index-7214d584.js";import{u as h}from"./imgHosting-461d2878.js";import{_ as ue}from"./Text-54e11770.js";import"./index-b1d810d3.js";import{_ as re}from"./Title-bca707a4.js";import"./strings-f390d8ad.js";import"./ResizeObserver.es-0f9f8adb.js";import"./isEqual-8c511726.js";import"./v4-fcc3550a.js";import"./Link-7e9d671f.js";import"./Paragraph-36fd0ead.js";const de={class:"commonConfigPanel"},pe={key:0,class:"configPanel"},me={class:"configTable"},ce={class:"configOperator"},_e=Q({__name:"settings",setup(ie){const x=h(),l=x.commonConfig,D=x.config,N={renameBeforeUpload:!1,renameTimeStamp:!0,copyUrlAfterUpload:!0,customCopyContent:"$url"},d=_("standard"),c=_("$url"),u=_("aliyun"),f=_([]);j(()=>{const s=h().uploader;switch(s!=null&&(u.value=s),S(l,S({},N,l)),l.customCopyContent){case"$url":d.value="standard";break;case"![]($url)":d.value="markdown";break;default:d.value="custom",c.value=l.customCopyContent}T()});function F(s){switch(s){case"standard":l.customCopyContent="$url";break;case"markdown":l.customCopyContent="![]($url)";break;case"custom":l.customCopyContent=c.value;break}}J(c,s=>{d.value==="custom"&&(l.customCopyContent=s)});function T(){u.value==="aliyun"&&(f.value=K(A[u.value].config(D(u.value))))}function H(){const s={};for(const o of f.value){if(o.required&&(o.default==null||o.default==="")){q.warning("必填项未填写完整");return}s[o.name]=o.default}h().saveConfig({uploader:u.value,config:s}),q.success("保存成功")}return(s,o)=>{const y=re,$=se,g=oe,B=ue,C=ae,v=W,M=ne,P=le,L=te,z=X,G=Z,O=ee;return p(),i(w,null,[e(y,{level:4},{default:t(()=>[m(" 通用配置 ")]),_:1}),U("div",de,[e(g,{label:"时间戳重命名"},{default:t(()=>[e($,{modelValue:r(l).renameTimeStamp,"onUpdate:modelValue":o[0]||(o[0]=a=>r(l).renameTimeStamp=a)},null,8,["modelValue"])]),_:1}),e(g,{label:"上传后自动复制URL"},{default:t(()=>[e($,{modelValue:r(l).copyUrlAfterUpload,"onUpdate:modelValue":o[1]||(o[1]=a=>r(l).copyUrlAfterUpload=a)},null,8,["modelValue"])]),_:1}),e(y,{level:5},{default:t(()=>[m(" 链接复制格式 ")]),_:1}),e(M,{modelValue:r(d),"onUpdate:modelValue":o[3]||(o[3]=a=>k(d)?d.value=a:null),class:"custom-copy-wrapper",onChange:F},{default:t(()=>[e(C,{label:"standard"},{default:t(()=>[m(" 标准 "),e(B,{code:"",content:"$url"})]),_:1}),e(C,{label:"markdown"},{default:t(()=>[m(" MarkDown "),e(B,{code:"",content:"![]($url)"})]),_:1}),e(C,{label:"custom"},{default:t(()=>[m(" 自定义 "),e(v,{modelValue:r(c),"onUpdate:modelValue":o[2]||(o[2]=a=>k(c)?c.value=a:null),style:{width:"100px","margin-left":"10px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),e(P),e(y,{level:4},{default:t(()=>[m(" 图床设置 ")]),_:1}),e(O,{modelValue:r(u),"onUpdate:modelValue":o[4]||(o[4]=a=>k(u)?u.value=a:null),type:"card",onTabChange:T},{default:t(()=>[(p(),i(w,null,R(A,(a,b)=>e(G,{key:b,name:b,label:a.name},{default:t(()=>[r(u)===b?(p(),i("div",pe,[U("div",me,[e(L,{"label-position":"top"},{default:t(()=>[(p(!0),i(w,null,R(r(f),n=>(p(),E(g,{key:n.name,label:n.label,required:n.required},{default:t(()=>[n.type==="input"?(p(),E(v,{key:0,modelValue:n.default,"onUpdate:modelValue":V=>n.default=V,"allow-clear":"",placeholder:n.hint},null,8,["modelValue","onUpdate:modelValue","placeholder"])):n.type==="password"?(p(),E(v,{key:1,modelValue:n.default,"onUpdate:modelValue":V=>n.default=V,type:"password","allow-clear":"",placeholder:n.hint},null,8,["modelValue","onUpdate:modelValue","placeholder"])):I("",!0)]),_:2},1032,["label","required"]))),128))]),_:2},1024)]),U("div",ce,[e(z,{type:"primary",onClick:H},{default:t(()=>[m(" 保存 ")]),_:1})])])):I("",!0)]),_:2},1032,["name","label"])),64))]),_:1},8,["modelValue"])],64)}}});const Ie=Y(_e,[["__scopeId","data-v-b9ad3ef1"]]);export{Ie as default};
