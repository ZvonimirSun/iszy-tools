import{l as E,ds as M,I as i,al as l,D as S,G as O,o as h,h as v,j as a,F as y,r as F,C as k,t as r,s as c,w as u,z as b,v as L,y as N,E as U,p as q,k as z,g as T}from"./index-w5lIxLwg.js";import{E as G}from"./el-dialog-AuKRWZqG.js";import{a as R,E as A}from"./el-form-item-l0F4OewF.js";import{E as H}from"./el-popover-4FpZ4chc.js";import"./el-popper-0BR3em9u.js";import{a as J}from"./mockData.service-k8g0DH8o.js";const K={id:"",name:"",path:"",description:""},j=E([]);async function be(){try{await p();const e=M("prjId");e&&P(e)}catch{throw new Error("获取项目列表失败")}}function Q(){return{...K}}function P(e){if(typeof e=="string"){const t=j.value.find(n=>n.id===e);if(t)e=t;else{i.error("未找到项目");return}}J(e).then()}async function W(e){try{if((await l.post(`${l.$apiBase}/mock/api/prj`,{...e,id:void 0}).then(l.getData)).success)return i.success("创建项目成功"),p().then(),!0;i.error("创建项目失败")}catch{i.error("创建项目失败")}return!1}async function X(e){try{if((await l.put(`${l.$apiBase}/mock/api/prj/${e.id}`,e).then(l.getData)).success)return i.success("更新项目成功"),p().then(),!0;i.error("更新项目失败")}catch{i.error("更新项目失败")}return!1}async function Y(e){try{if((await l.delete(`${l.$apiBase}/mock/api/prj/${e.id}`).then(l.getData)).success)return i.success("删除项目成功"),p().then(),!0;i.error("删除项目失败")}catch{i.error("删除项目失败")}return!1}async function p(){try{const e=await l.get(`${l.$apiBase}/mock/api/prj/list`).then(l.getData);e.success?j.value=e.data||[]:i.error("获取项目列表失败")}catch(e){console.log(e),i.error("获取项目列表失败")}}const m=e=>(q("data-v-63b7de69"),e=e(),z(),e),Z={class:"prj-wrapper"},ee={"w-full":"",class:"prj-list"},te={class:"prj-title"},oe={class:"prj-path"},se={class:"prj-desc"},ae={class:"prj-control"},ne=["onClick"],re=m(()=>a("i",{class:"i-icon-park-outline-preview-open"},null,-1)),ie=[re],le=["onClick"],ce=m(()=>a("i",{class:"i-icon-park-outline-edit-two"},null,-1)),de=[ce],ue=m(()=>a("div",{class:"prj-control-btn prj-btn-delete"},[a("i",{class:"i-icon-park-outline-delete"})],-1)),pe=m(()=>a("i",{class:"i-icon-park-outline-plus"},null,-1)),me=[pe],fe={class:"dialog-footer"},_e=S({__name:"mockList",setup(e){const t=E(!1),n=O({id:"",name:"",path:"",description:""});function V(){Object.assign(n,Q()),t.value=!0}function $(d){Object.assign(n,{id:d.id??"",name:d.name,path:d.path,description:d.description??""}),t.value=!0}async function C(d){let o;d.id?o=await X(d):o=await W(d),o&&(t.value=!1)}return(d,o)=>{const D=H,f=N,_=R,I=A,g=U,B=G;return h(),v(y,null,[a("div",Z,[a("div",ee,[(h(!0),v(y,null,F(r(j),(s,x)=>(h(),v("div",{key:x,class:"prj-item"},[a("div",te,k(s.name),1),a("div",oe,k(s.path),1),a("div",se,k(s.description),1),a("div",ae,[a("div",{class:"prj-control-btn prj-btn-open",onClick:w=>r(P)(s)},ie,8,ne),a("div",{class:"prj-control-btn prj-btn-edit",onClick:w=>$(s)},de,8,le),c(D,{title:"确认要删除该项目吗？删除后无法恢复！",onConfirm:w=>r(Y)(s)},{reference:u(()=>[ue]),_:2},1032,["onConfirm"])])]))),128)),a("div",{class:"prj-add",onClick:V},me)])]),c(B,{modelValue:r(t),"onUpdate:modelValue":o[5]||(o[5]=s=>L(t)?t.value=s:null),title:r(n).id?"修改项目":"添加项目"},{footer:u(()=>[a("span",fe,[c(g,{onClick:o[3]||(o[3]=s=>t.value=!1)},{default:u(()=>[b("取消")]),_:1}),c(g,{type:"primary",onClick:o[4]||(o[4]=s=>C(r(n)))},{default:u(()=>[b(" 提交 ")]),_:1})])]),default:u(()=>[c(I,{model:r(n)},{default:u(()=>[c(_,{label:"项目名称","label-width":120,required:!0},{default:u(()=>[c(f,{modelValue:r(n).name,"onUpdate:modelValue":o[0]||(o[0]=s=>r(n).name=s),autocomplete:"off"},null,8,["modelValue"])]),_:1}),c(_,{label:"接口基础路径","label-width":120,required:!0},{default:u(()=>[c(f,{modelValue:r(n).path,"onUpdate:modelValue":o[1]||(o[1]=s=>r(n).path=s),autocomplete:"off"},null,8,["modelValue"])]),_:1}),c(_,{label:"项目描述","label-width":120},{default:u(()=>[c(f,{modelValue:r(n).description,"onUpdate:modelValue":o[2]||(o[2]=s=>r(n).description=s),type:"textarea",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])],64)}}}),he=T(_e,[["__scopeId","data-v-63b7de69"]]),Ee=Object.freeze(Object.defineProperty({__proto__:null,default:he},Symbol.toStringTag,{value:"Module"}));export{he as M,be as i,Ee as m};
