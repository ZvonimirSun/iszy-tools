import{j as K,B as m,l as O,ab as B,q as Q,aD as W,o as c,c as i,b as e,ae as a,W as p,a as U,y as d,X as k,F as w,e as q,ad as h,g as D,aa as F,aT as z,aS as J,b6 as Y,af as Z,b7 as ee,aX as oe,aQ as ae,ag as le,aK as te,aM as ne,a3 as se}from"./vendor-c7d095d4.js";import{b as ue,a as de}from"./ant-design-vue-8684357f.js";import{u as E,a as I}from"./imgHosting-7e655810.js";import"./common-bad41c28.js";const re={class:"commonConfigPanel"},ce={key:0,class:"configPanel"},pe={class:"configTable"},_e={class:"configOperator"},me=K({__name:"settings",setup(ie){const x=E(),l=x.commonConfig,M=x.config,N={renameBeforeUpload:!1,renameTimeStamp:!0,copyUrlAfterUpload:!0,customCopyContent:"$url"},r=m("standard"),_=m("$url"),u=m("aliyun"),f=m([]);O(()=>{const s=E().uploader;switch(s!=null&&(u.value=s),B(l,B({},N,l)),l.customCopyContent){case"$url":r.value="standard";break;case"![]($url)":r.value="markdown";break;default:r.value="custom",_.value=l.customCopyContent}T()});function R(s){switch(s){case"standard":l.customCopyContent="$url";break;case"markdown":l.customCopyContent="![]($url)";break;case"custom":l.customCopyContent=_.value;break}}Q(_,s=>{r.value==="custom"&&(l.customCopyContent=s)});function T(){u.value==="aliyun"&&(f.value=W(I[u.value].config(M(u.value))))}function A(){const s={};for(const o of f.value){if(o.required&&(o.default==null||o.default==="")){F.warning("必填项未填写完整");return}s[o.name]=o.default}E().saveConfig({uploader:u.value,config:s}),F.success("保存成功")}return(s,o)=>{const g=ue,S=z,y=J,$=de,C=Y,v=Z,P=ee,H=oe,L=ae,X=le,j=te,G=ne;return c(),i(w,null,[e(g,{level:4},{default:a(()=>[p(" 通用配置 ")]),_:1}),U("div",re,[e(y,{label:"时间戳重命名"},{default:a(()=>[e(S,{modelValue:d(l).renameTimeStamp,"onUpdate:modelValue":o[0]||(o[0]=t=>d(l).renameTimeStamp=t)},null,8,["modelValue"])]),_:1}),e(y,{label:"上传后自动复制URL"},{default:a(()=>[e(S,{modelValue:d(l).copyUrlAfterUpload,"onUpdate:modelValue":o[1]||(o[1]=t=>d(l).copyUrlAfterUpload=t)},null,8,["modelValue"])]),_:1}),e(g,{level:5},{default:a(()=>[p(" 链接复制格式 ")]),_:1}),e(P,{modelValue:d(r),"onUpdate:modelValue":o[3]||(o[3]=t=>k(r)?r.value=t:null),class:"custom-copy-wrapper",onChange:R},{default:a(()=>[e(C,{label:"standard"},{default:a(()=>[p(" 标准 "),e($,{code:"",content:"$url"})]),_:1}),e(C,{label:"markdown"},{default:a(()=>[p(" MarkDown "),e($,{code:"",content:"![]($url)"})]),_:1}),e(C,{label:"custom"},{default:a(()=>[p(" 自定义 "),e(v,{modelValue:d(_),"onUpdate:modelValue":o[2]||(o[2]=t=>k(_)?_.value=t:null),style:{width:"100px","margin-left":"10px"}},null,8,["modelValue"])]),_:1})]),_:1},8,["modelValue"])]),e(H),e(g,{level:4},{default:a(()=>[p(" 图床设置 ")]),_:1}),e(G,{modelValue:d(u),"onUpdate:modelValue":o[4]||(o[4]=t=>k(u)?u.value=t:null),type:"card",onTabChange:T},{default:a(()=>[(c(),i(w,null,q(I,(t,b)=>e(j,{key:b,name:b,label:t.name},{default:a(()=>[d(u)===b?(c(),i("div",ce,[U("div",pe,[e(L,{"label-position":"top"},{default:a(()=>[(c(!0),i(w,null,q(d(f),n=>(c(),h(y,{key:n.name,label:n.label,required:n.required},{default:a(()=>[n.type==="input"?(c(),h(v,{key:0,modelValue:n.default,"onUpdate:modelValue":V=>n.default=V,"allow-clear":"",placeholder:n.hint},null,8,["modelValue","onUpdate:modelValue","placeholder"])):n.type==="password"?(c(),h(v,{key:1,modelValue:n.default,"onUpdate:modelValue":V=>n.default=V,type:"password","allow-clear":"",placeholder:n.hint},null,8,["modelValue","onUpdate:modelValue","placeholder"])):D("",!0)]),_:2},1032,["label","required"]))),128))]),_:2},1024)]),U("div",_e,[e(X,{type:"primary",onClick:A},{default:a(()=>[p(" 保存 ")]),_:1})])])):D("",!0)]),_:2},1032,["name","label"])),64))]),_:1},8,["modelValue"])],64)}}});const ve=se(me,[["__scopeId","data-v-5a0cdaf2"]]);export{ve as default};
