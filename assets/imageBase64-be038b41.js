import"./index-3c57e300.js";import{h as b,y as u,a3 as U,k as C,o as r,l as m,a as n,w as l,b as i,n as t,c as f,s as p,z,H as N,m as A,ax as F,A as d,E as I,B as L,_ as P}from"./index-bf1b9cab.js";import{E as S}from"./el-space-424de701.js";import{E as T}from"./el-upload-763d2864.js";import"./el-progress-92346538.js";import{_ as W}from"./Title-814a8084.js";import"./ResizeObserver.es-0f9f8adb.js";import"./isEqual-650fac00.js";const D={class:"wrapper"},H=["src"],$=b({__name:"imageBase64",setup(j){const e=u(""),h=U("$axios"),c=u(),s=u({width:"",height:""}),g=C(()=>e.value&&(e.value.startsWith("http://")||e.value.startsWith("https://")));function v(o){const a=new FileReader;return a.onloadend=()=>{e.value=a.result},a.readAsDataURL(o),!1}async function w(){try{await window.navigator.clipboard.writeText(e.value),d.success("复制成功")}catch(o){d.error(o?.message)}}async function y(){try{const o=await h.get(e.value,{responseType:"blob"}),a=new FileReader;a.onloadend=()=>{e.value=a.result},a.readAsDataURL(o.data)}catch(o){d.error(o?.message)}}function x(){s.value.height=c.value.naturalHeight+"px",s.value.width=c.value.naturalWidth+"px"}return(o,a)=>{const _=I,B=T,k=S,E=L,R=W;return r(),m("div",D,[n(k,null,{default:l(()=>[n(B,{"file-list":[],"show-file-list":!1,accept:"image/*","before-upload":v},{default:l(()=>[n(_,{type:"primary"},{default:l(()=>[i(" 点击上传图片 ")]),_:1})]),_:1}),t(g)?(r(),f(_,{key:0,onClick:y},{default:l(()=>[i(" 转换为Base64 ")]),_:1})):p("",!0),t(e)?(r(),f(_,{key:1,onClick:w},{default:l(()=>[i(" 复制内容 ")]),_:1})):p("",!0)]),_:1}),n(E,{modelValue:t(e),"onUpdate:modelValue":a[0]||(a[0]=V=>z(e)?e.value=V:null),type:"textarea","allow-clear":"",autosize:{minRows:5,maxRows:10},placeholder:"请输入 图片地址 或 Base64格式的图片"},null,8,["modelValue"]),t(e)?(r(),m(N,{key:0},[n(R,{level:4},{default:l(()=>[i(" 预览 ")]),_:1}),A("img",{ref_key:"imgPreview",ref:c,class:"preview",src:t(e),alt:"preview",style:F({width:t(s).width?t(s).width:"",height:t(s).height?t(s).height:""}),onLoad:x},null,44,H)],64)):p("",!0)])}}});const Y=P($,[["__scopeId","data-v-3afe0515"]]);export{Y as default};
