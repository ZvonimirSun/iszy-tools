import{b as T,aK as H,_ as N,a as y,aL as S,u as z,I as F,J as L,v as w,o as p,r as $,j as r,h as b,A as q,d as G,i as J,Y as O,x as Q,g as v,w as _,k as U,aF as W,z as D,b1 as X,l as Z,C as s,bl as x,E as h,D as i,N as ee,aj as te,U as C,bm as I,aq as m,y as ae,Q as se}from"./index-CRxzzwo-.js";import"./el-empty-1jKQyhMQ.js";import{F as re,a as ne,E as le}from"./el-table-v2-DhAkbW0Q.js";/* empty css               */import{E as oe}from"./el-popover-Q81j2eXK.js";import"./el-popper-C0PfforX.js";import{E as k}from"./index-CH_m31IC.js";import"./castArray-Cr9anuCZ.js";import"./raf-HEth4KfI.js";import"./memoize-one.esm-BdPwpGay.js";import"./index-Dia-KbnA.js";import"./index-DR2AmsO6.js";const V=Symbol("breadcrumbKey"),ce=T({separator:{type:String,default:"/"},separatorIcon:{type:H}}),ie=y({name:"ElBreadcrumb"}),ue=y({...ie,props:ce,setup(a){const e=a,{t:u}=S(),n=z("breadcrumb"),c=F();return q(V,e),L(()=>{const o=c.value.querySelectorAll(`.${n.e("item")}`);o.length&&o[o.length-1].setAttribute("aria-current","page")}),(o,g)=>(p(),w("div",{ref_key:"breadcrumb",ref:c,class:b(r(n).b()),"aria-label":r(u)("el.breadcrumb.label"),role:"navigation"},[$(o.$slots,"default")],10,["aria-label"]))}});var de=N(ue,[["__file","breadcrumb.vue"]]);const me=T({to:{type:G([String,Object]),default:""},replace:Boolean}),pe=y({name:"ElBreadcrumbItem"}),fe=y({...pe,props:me,setup(a){const e=a,u=O(),n=J(V,void 0),c=z("breadcrumb"),o=u.appContext.config.globalProperties.$router,g=F(),A=()=>{!e.to||!o||(e.replace?o.replace(e.to):o.push(e.to))};return(E,B)=>{var l,t;return p(),w("span",{class:b(r(c).e("item"))},[Q("span",{ref_key:"link",ref:g,class:b([r(c).e("inner"),r(c).is("link",!!E.to)]),role:"link",onClick:A},[$(E.$slots,"default")],2),(l=r(n))!=null&&l.separatorIcon?(p(),v(r(W),{key:0,class:b(r(c).e("separator"))},{default:_(()=>[(p(),v(U(r(n).separatorIcon)))]),_:1},8,["class"])):(p(),w("span",{key:1,class:b(r(c).e("separator")),role:"presentation"},D((t=r(n))==null?void 0:t.separator),3))],2)}}});var Y=N(fe,[["__file","breadcrumb-item.vue"]]);const be=Z(de,{BreadcrumbItem:Y}),_e=X(Y);var f=function(a){return a[a.DEACTIVATED=0]="DEACTIVATED",a[a.ENABLED=1]="ENABLED",a[a.DISABLED=2]="DISABLED",a}(f||{});function ye(a){return[{key:"userId",dataKey:"userId",width:150,hidden:!0},{key:"userName",dataKey:"userName",title:"用户名",width:150,align:"center"},{key:"nickName",dataKey:"nickName",title:"昵称",width:150,align:"center"},{key:"email",dataKey:"email",title:"邮箱",width:150,align:"center"},{key:"roles",title:"角色",width:150,align:"center",cellRenderer:({rowData:e})=>{const u=e.roles?.map(n=>n.name).join(", ")||"";return s("span",null,[u])}},{key:"status",title:"状态",width:100,align:"center",cellRenderer:({rowData:e})=>{switch(e.status){case f.ENABLED:return s(k,{type:"success"},{default:()=>[i("正常")]});case f.DISABLED:return s(k,{type:"info"},{default:()=>[i("禁用")]});case f.DEACTIVATED:return s(k,{type:"info"},{default:()=>[i("待激活")]});default:return s(k,{type:"warning"},{default:()=>[i("未知")]})}}},{key:"createdAt",title:"创建时间",width:200,align:"center",cellRenderer:({rowData:e})=>s("span",null,[x(e.createdAt).format("YYYY-MM-DD HH:mm:ss")])},{key:"updatedAt",title:"更新时间",width:200,align:"center",cellRenderer:({rowData:e})=>s("span",null,[x(e.updatedAt).format("YYYY-MM-DD HH:mm:ss")])},{key:"operations",title:"操作",width:200,fixed:re.RIGHT,cellRenderer:({rowData:e})=>s(ee,null,[s(h,{size:"small",plain:!0,onClick:()=>a(e,"edit")},{default:()=>[i("修改")]}),e.status===f.DEACTIVATED||e.status===f.DISABLED?s(h,{size:"small",plain:!0,onClick:()=>a(e,"activate")},{default:()=>[i("启用")]}):s(h,{size:"small",plain:!0,onClick:()=>a(e,"disable")},{default:()=>[i("禁用")]}),s(oe,{title:"确定要删除吗？",onConfirm:()=>a(e,"delete")},{reference:()=>s(h,{size:"small",plain:!0,type:"danger"},{default:()=>[i("删除")]})})])}]}const ge={"h-full":"","w-full":"",flex:"","flex-col":"","gap-4":"","pa-4":""},Ee=y({__name:"userManager",setup(a){const e=te(),u=C([]),n=C({index:1,size:10}),c=ye(g);L(()=>{o(1,n.size)});async function o(l,t){try{const d=await I.get("/user/list",{params:{pageIndex:l,pageSize:t}});if(d.success)u.splice(0,u.length,...d.data);else throw new Error(d.message)}catch(d){m.error(d.message)}}function g(l,t){switch(t){case"edit":break;case"disable":A(l);break;case"activate":E(l);break;case"delete":B(l);break}}async function A(l){try{const t=await I.put("/user/ban",null,{params:{id:l.userId}});if(t.success)m.success(t.message),await o(n.index,n.size);else throw new Error(t.message)}catch(t){m.error(t.message)}}async function E(l){try{const t=await I.put("/user/activate",null,{params:{id:l.userId}});if(t.success)m.success(t.message),await o(n.index,n.size);else throw new Error(t.message)}catch(t){m.error(t.message)}}async function B(l){try{const t=await I.delete(`/user/${l.userId}`);if(t.success)m.success(t.message),await o(n.index,n.size);else throw new Error(t.message)}catch(t){m.error(t.message)}}return(l,t)=>{const d=_e,M=be,P=ne,R=le;return p(),w("div",ge,[r(e).meta.parentInfo?(p(),v(M,{key:0},{default:_(()=>[s(d,{to:r(e).meta.parentInfo.link},{default:_(()=>[i(D(r(e).meta.parentInfo.name),1)]),_:1},8,["to"]),s(d,null,{default:_(()=>[i(D(r(e).name),1)]),_:1})]),_:1})):ae("",!0),s(R,{"flex-1":""},{default:_(({width:K,height:j})=>[s(P,{columns:r(c),data:r(u),width:K,height:j,fixed:""},null,8,["columns","data","width","height"])]),_:1})])}}}),ze=se(Ee,[["__scopeId","data-v-2a17d7f3"]]);export{ze as default};
