import{b as T,aK as j,_ as N,a as D,aL as H,u as z,I as S,J as F,t as w,o as p,r as L,y as s,h as b,A as q,d as G,i as J,Y as O,v as Q,g as A,w as _,j as U,aF as W,z as v,b1 as X,k as Z,C as r,bk as x,E as h,D as u,N as ee,aj as ae,U as C,bl as k,aq as m,x as te,Q as re}from"./index-COHXkc47.js";import"./el-empty-BRZ-95yi.js";import{F as se,a as ne,E as ce}from"./el-table-v2-CXVkcP5P.js";/* empty css               */import{E as oe}from"./el-popover-DLOESWvM.js";import"./el-popper-CoyF7d0p.js";import{E as I}from"./index-8E8NsuVu.js";import"./castArray-6iw5AqBK.js";import"./raf-SxW_Pnhi.js";import"./memoize-one.esm-BdPwpGay.js";import"./index-DqFsr2RO.js";const $=Symbol("breadcrumbKey"),le=T({separator:{type:String,default:"/"},separatorIcon:{type:j}}),ue=["aria-label"],ie=D({name:"ElBreadcrumb",__name:"breadcrumb",props:le,setup(t){const{t:e}=H(),i=t,n=z("breadcrumb"),l=S();return q($,i),F(()=>{const o=l.value.querySelectorAll(`.${n.e("item")}`);o.length&&o[o.length-1].setAttribute("aria-current","page")}),(o,g)=>(p(),w("div",{ref_key:"breadcrumb",ref:l,class:b(s(n).b()),"aria-label":s(e)("el.breadcrumb.label"),role:"navigation"},[L(o.$slots,"default")],10,ue))}});var de=N(ie,[["__file","/home/runner/work/element-plus/element-plus/packages/components/breadcrumb/src/breadcrumb.vue"]]);const me=T({to:{type:G([String,Object]),default:""},replace:Boolean}),pe=D({name:"ElBreadcrumbItem",__name:"breadcrumb-item",props:me,setup(t){const e=t,i=O(),n=J($,void 0),l=z("breadcrumb"),o=i.appContext.config.globalProperties.$router,g=()=>{!e.to||!o||(e.replace?o.replace(e.to):o.push(e.to))};return(y,B)=>{var E,c;return p(),w("span",{class:b(s(l).e("item"))},[Q("span",{class:b([s(l).e("inner"),s(l).is("link",!!y.to)]),role:"link",onClick:g},[L(y.$slots,"default")],2),(E=s(n))!=null&&E.separatorIcon?(p(),A(s(W),{key:0,class:b(s(l).e("separator"))},{default:_(()=>[(p(),A(U(s(n).separatorIcon)))]),_:1},8,["class"])):(p(),w("span",{key:1,class:b(s(l).e("separator")),role:"presentation"},v((c=s(n))==null?void 0:c.separator),3))],2)}}});var V=N(pe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/breadcrumb/src/breadcrumb-item.vue"]]);const fe=Z(de,{BreadcrumbItem:V}),be=X(V);var f=(function(t){return t[t.DEACTIVATED=0]="DEACTIVATED",t[t.ENABLED=1]="ENABLED",t[t.DISABLED=2]="DISABLED",t})(f||{});function _e(t){return[{key:"userId",dataKey:"userId",width:150,hidden:!0},{key:"userName",dataKey:"userName",title:"用户名",width:150,align:"center"},{key:"nickName",dataKey:"nickName",title:"昵称",width:150,align:"center"},{key:"email",dataKey:"email",title:"邮箱",width:150,align:"center"},{key:"roles",title:"角色",width:150,align:"center",cellRenderer:({rowData:e})=>{const i=e.roles?.map(n=>n.name).join(", ")||"";return r("span",null,[i])}},{key:"status",title:"状态",width:100,align:"center",cellRenderer:({rowData:e})=>{switch(e.status){case f.ENABLED:return r(I,{type:"success"},{default:()=>[u("正常")]});case f.DISABLED:return r(I,{type:"info"},{default:()=>[u("禁用")]});case f.DEACTIVATED:return r(I,{type:"info"},{default:()=>[u("待激活")]});default:return r(I,{type:"warning"},{default:()=>[u("未知")]})}}},{key:"createdAt",title:"创建时间",width:200,align:"center",cellRenderer:({rowData:e})=>r("span",null,[x(e.createdAt).format("YYYY-MM-DD HH:mm:ss")])},{key:"updatedAt",title:"更新时间",width:200,align:"center",cellRenderer:({rowData:e})=>r("span",null,[x(e.updatedAt).format("YYYY-MM-DD HH:mm:ss")])},{key:"operations",title:"操作",width:200,fixed:se.RIGHT,cellRenderer:({rowData:e})=>r(ee,null,[r(h,{size:"small",plain:!0,onClick:()=>t(e,"edit")},{default:()=>[u("修改")]}),e.status===f.DEACTIVATED||e.status===f.DISABLED?r(h,{size:"small",plain:!0,onClick:()=>t(e,"activate")},{default:()=>[u("启用")]}):r(h,{size:"small",plain:!0,onClick:()=>t(e,"disable")},{default:()=>[u("禁用")]}),r(oe,{title:"确定要删除吗？",onConfirm:()=>t(e,"delete")},{reference:()=>r(h,{size:"small",plain:!0,type:"danger"},{default:()=>[u("删除")]})})])}]}const ge={"h-full":"","w-full":"",flex:"","flex-col":"","gap-4":"","pa-4":""},ye=D({__name:"userManager",setup(t){const e=ae(),i=C([]),n=C({index:1,size:10}),l=_e(g);F(()=>{o(1,n.size)});async function o(c,a){try{const d=await k.get("/user/list",{params:{pageIndex:c,pageSize:a}});if(d.success)i.splice(0,i.length,...d.data);else throw new Error(d.message)}catch(d){m.error(d.message)}}function g(c,a){switch(a){case"edit":break;case"disable":y(c);break;case"activate":B(c);break;case"delete":E(c);break}}async function y(c){try{const a=await k.put("/user/ban",null,{params:{id:c.userId}});if(a.success)m.success(a.message),await o(n.index,n.size);else throw new Error(a.message)}catch(a){m.error(a.message)}}async function B(c){try{const a=await k.put("/user/activate",null,{params:{id:c.userId}});if(a.success)m.success(a.message),await o(n.index,n.size);else throw new Error(a.message)}catch(a){m.error(a.message)}}async function E(c){try{const a=await k.delete(`/user/${c.userId}`);if(a.success)m.success(a.message),await o(n.index,n.size);else throw new Error(a.message)}catch(a){m.error(a.message)}}return(c,a)=>{const d=be,Y=fe,M=ne,P=ce;return p(),w("div",ge,[s(e).meta.parentInfo?(p(),A(Y,{key:0},{default:_(()=>[r(d,{to:s(e).meta.parentInfo.link},{default:_(()=>[u(v(s(e).meta.parentInfo.name),1)]),_:1},8,["to"]),r(d,null,{default:_(()=>[u(v(s(e).name),1)]),_:1})]),_:1})):te("",!0),r(P,{"flex-1":""},{default:_(({width:R,height:K})=>[r(M,{columns:s(l),data:s(i),width:R,height:K,fixed:""},null,8,["columns","data","width","height"])]),_:1})])}}}),Te=re(ye,[["__scopeId","data-v-2a17d7f3"]]);export{Te as default};
