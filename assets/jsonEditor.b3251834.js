var ot=Object.defineProperty;var P=Object.getOwnPropertySymbols;var it=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable;var z=(t,s,i)=>s in t?ot(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i,k=(t,s)=>{for(var i in s||(s={}))it.call(s,i)&&z(t,i,s[i]);if(P)for(var i of P(s))nt.call(s,i)&&z(t,i,s[i]);return t};import{_ as at,s as J,d as B,g as F}from"./index.e2e63d6a.js";import{a5 as lt,a4 as dt,aj as rt,ak as ht,al as ct,am as ft,an as ut,ao as G,ap as gt,N as _t,ah as pt,aq as K,ar as mt,as as yt,at as vt,au as It,av as kt,aw as Rt,ax as St,ay as Lt,az as Dt,aA as Ct,aB as U,j as A,aC as H,aD as bt,c as Mt,a as n,g,f as e,y as o,H as Ot,J as Tt,T as xt,r as c,o as wt,K as d,k as jt,p as Nt,b as Wt,I as Et}from"./vendor.e73f0769.js";import{J as V}from"./jsoneditor.min.825e62c0.js";import{c as q}from"./createFile.7a559a0a.js";/* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css               *//* empty css               *//* empty css                *//* empty css                *//* empty css               */const{Item:Pt}=G,{Paragraph:zt}=xt,{Item:Q}=K,{Meta:Jt}=Q,{mapState:Bt,mapGetters:Ft,mapMutations:Ut}=lt("jsonEditor");let a,l;const At={name:"JsonEditor",components:{Button:dt,Space:rt,Checkbox:ht,Right:ct,Left:ft,Dropdown:ut,Menu:G,MenuItem:Pt,Down:gt,Modal:_t,Input:pt,Paragraph:zt,List:K,ListItem:Q,ListItemMeta:Jt,FileAdditionOne:mt,FolderOpen:yt,Save:vt,History:It,Computer:kt,LinkThree:Rt,SettingTwo:St,Info:Lt,Delete:Dt,IndentRight:Ct},data:()=>({codeLeft:{array:[1,2,3],boolean:!0,color:"gold",null:null,number:123,object:{a:"b",c:"d"},string:"Hello World"},codeRight:{},diff:!1,modalStatus:{type:"",leftOrRight:""},url:"",keyword:"",selectId:"",indent:2}),watch:{leftId:{handler:function(t){t!=null?J("left",t):B("left")}},rightId:{handler:function(t){t!=null?J("right",t):B("right")}}},computed:k(k({dataListAfterSearch:function(){return this.dataList(this.keyword)},codeLeftString:function(){return typeof this.codeLeft=="string"?this.codeLeft:JSON.stringify(this.codeLeft,null,this.indent)},codeRightString:function(){return typeof this.codeRight=="string"?this.codeRight:JSON.stringify(this.codeRight,null,this.indent)},documentProperties:function(){var t,s,i,p;return this.modalStatus.leftOrRight==="left"?{name:(t=this.leftData)==null?void 0:t.name,storage:this.leftData?"\u6D4F\u89C8\u5668\u672C\u5730":"",updated:(s=this.leftData)==null?void 0:s.updated,size:this.codeLeftString.length}:this.modalStatus.leftOrRight==="right"?{name:(i=this.rightData)==null?void 0:i.name,storage:this.rightData?"\u6D4F\u89C8\u5668\u672C\u5730":"",updated:(p=this.rightData)==null?void 0:p.updated,size:this.codeRightString.length}:{}}},Bt(["leftId","rightId"])),Ft(["dataList","data","leftData","rightData"])),mounted(){this.init()},methods:k({init(){if(a=new V(this.$refs.jsonEditorLeft,{mode:"code",modes:["code","tree"],onClassName:this.onClassName,onChangeText:U(i=>{try{this.codeLeft=JSON.parse(i)}catch{this.codeLeft=i}a.refresh(),l.refresh(),this.save("left")},100),onModeChange:i=>{i==="code"&&typeof this.codeLeft!="string"&&a.updateText(this.codeLeftString),this.save("left")},onError:i=>{this.$msg.error(i.message)}}),l=new V(this.$refs.jsonEditorRight,{mode:"tree",modes:["code","tree"],onClassName:this.onClassName,onChangeText:U(i=>{try{this.codeRight=JSON.parse(i)}catch{this.codeRight=i}a.refresh(),l.refresh(),this.save("right")},100),onModeChange:i=>{i==="code"&&typeof this.codeRight!="string"&&l.updateText(this.codeRightString),this.save("right")},onError:i=>{this.$msg.error(i.message)}}),this.leftData&&this.leftData.content){if(this.leftData.content.json)this.codeLeft=this.leftData.content.json,a.set(this.leftData.content.json),a.setMode("tree");else if(this.leftData.content.text){try{this.codeLeft=JSON.parse(this.leftData.content.text)}catch{this.codeLeft=this.leftData.content.text}a.setText(this.leftData.content.text),a.setMode("code")}}else a.set(this.codeLeft);if(this.rightData&&this.rightData.content){if(this.rightData.content.json)this.codeRight=this.rightData.content.json,l.set(this.rightData.content.json),l.setMode("tree");else if(this.rightData.content.text){try{this.codeRight=JSON.parse(this.rightData.content.text)}catch{this.codeRight=this.rightData.content.text}l.setText(this.rightData.content.text),l.setMode("code")}}else l.set(this.codeRight);const t=F("left"),s=F("right");t&&t!==this.leftId&&(this.selectId=t,this.modalStatus.leftOrRight="left",this.openRecent()),s&&t!==this.rightId&&(this.selectId=s,this.modalStatus.leftOrRight="right",this.openRecent())},copyRight(){typeof this.codeLeft=="string"?(l.setMode("code"),l.updateText(this.codeLeft),this.codeRight=this.codeLeft):(a.getMode==="code"?l.updateText(a.getText()):l.updateText(this.codeLeftString),this.codeRight=A(this.codeLeft)),a.refresh(),l.refresh(),this.save("right")},copyLeft(){typeof this.codeRight=="string"?(a.setMode("code"),a.updateText(this.codeRight),this.codeLeft=this.codeRight):(l.getMode==="code"?a.updateText(l.getText()):a.updateText(this.codeRightString),this.codeLeft=A(this.codeRight)),a.refresh(),l.refresh(),this.save("left")},save(t){(!t||t==="left")&&(a.getMode()==="tree"?this.saveData({left:!0,id:this.leftId,content:a.get()}):this.saveData({left:!0,id:this.leftId,content:a.getText()})),(!t||t==="right")&&(l.getMode()==="tree"?this.saveData({right:!0,id:this.rightId,content:l.get()}):this.saveData({right:!0,id:this.rightId,content:l.getText()}))},create(t){t==="left"?(a.set({}),this.codeLeft={},this.saveData({left:!0})):t==="right"&&(l.set({}),this.codeRight={},this.saveData({right:!0}))},open(t,s){switch(this.modalStatus.leftOrRight=s,t.key){case"recent":this.modalStatus.type="openRecent";break;case"file":this.$refs.uploader.click();break;case"url":this.modalStatus.type="openUrl";break}},openRecent(){if(this.selectId&&this.data(this.selectId)&&this.data(this.selectId).content){const t=this.data(this.selectId).content;if(this.modalStatus.leftOrRight==="left"){if(this.saveData({left:!0,id:this.selectId}),t.json)this.codeLeft=t.json,a.set(t.json),a.setMode("tree");else if(t.text){try{this.codeLeft=JSON.parse(t.text)}catch{this.codeLeft=t.text}a.setText(t.text),a.setMode("code")}}else if(this.modalStatus.leftOrRight==="right"){if(this.saveData({right:!0,id:this.selectId}),t.json)this.codeRight=t.json,l.set(t.json),l.setMode("tree");else if(t.text){try{this.codeRight=JSON.parse(t.text)}catch{this.codeRight=t.text}l.setText(t.text),l.setMode("code")}}}this.selectId="",this.closeModal()},openFile(t){if(t.target.files.length){const s=t.target.files[0],i=new FileReader;i.onload=()=>{i.result&&(this.create(this.modalStatus.leftOrRight),this.modalStatus.leftOrRight==="left"?(this.codeLeft=i.result,a.setText(i.result),this.save("left")):this.modalStatus.leftOrRight==="right"&&(this.codeRight=i.result,l.setText(i.result),this.save("right")))},i.readAsText(s)}t.target.value=""},async openUrl(t){try{const s=(await this.$axios.get(t)).data;s&&(this.create(this.modalStatus.leftOrRight),this.modalStatus.leftOrRight==="left"?(this.codeLeft=s,a.set(s),this.save("left")):this.modalStatus.leftOrRight==="right"&&(this.codeRight=s,l.set(s),this.save("right")),this.url="",this.closeModal())}catch(s){this.$msg.error(s.message)}},download(t){var s,i;t==="left"?q(a.getText(),`${((s=this.leftData)==null?void 0:s.name)||"left"}.json`):t==="right"&&q(l.getText(),`${((i=this.rightData)==null?void 0:i.name)||"right"}.json`)},changeOption(t,s){switch(this.modalStatus.leftOrRight=s,t.key){case"indentation":this.modalStatus.type="setIndentation";break;case"properties":this.modalStatus.type="documentProperties";break;case"delete":s==="left"?this.deleteData({id:this.leftId}):s==="right"&&this.deleteData({id:this.rightId});break}},changeIndentation(){a.indentation=this.indent,l.indentation=this.indent,typeof this.codeLeft=="object"&&a.updateText(this.codeLeftString),typeof this.codeRight=="object"&&l.updateText(this.codeRightString),this.closeModal()},changeDiff(){if(!this.diff){if(typeof this.codeLeft=="string"||typeof this.codeRight=="string"){this.$msg.error("JSON\u5B58\u5728\u9519\u8BEF");return}(a.getMode()!=="tree"||l.getMode()!=="tree")&&this.$msg.warn("\u5BF9\u6BD4\u6A21\u5F0F\u4EC5\u5728\u300C\u6811\u300D\u6A21\u5F0F\u4E0B\u751F\u6548\uFF0C\u8BF7\u5207\u6362\u4E3A\u6811\u6A21\u5F0F")}this.diff=!this.diff,a.refresh(),l.refresh()},onClassName({path:t}){const s=H(this.codeLeft,t),i=H(this.codeRight,t);return this.diff?bt(s,i)?"":"differentElement":""},closeModal(){this.modalStatus.type="",this.modalStatus.leftOrRight=""}},Ut(["saveData","deleteData"])),beforeUnmount(){a&&a.destroy(),l&&l.destroy()}},R=t=>(Nt("data-v-54dff206"),t=t(),Wt(),t),Ht={class:"editorPanel"},Vt={class:"editorPanelContainer editorPanelContainerLeft"},qt={class:"editorController editorControllerLeft"},Gt={class:"editorTitle"},Kt={class:"buttonWithIcon"},Qt=d("\xA0\u65B0\u5EFA"),Xt={class:"buttonWithIcon"},Yt=d("\xA0\u6253\u5F00\u6700\u8FD1\u8BB0\u5F55"),Zt={class:"buttonWithIcon"},$t=d("\xA0\u6253\u5F00\u672C\u5730\u6587\u4EF6"),te={class:"buttonWithIcon"},ee=d("\xA0\u6253\u5F00URL"),se={class:"buttonWithIcon"},oe=d("\xA0\u6253\u5F00"),ie={class:"buttonWithIcon"},ne=d("\xA0\u4FDD\u5B58"),ae={class:"buttonWithIcon"},le={class:"buttonWithIcon"},de=d("\xA0\u6587\u6863\u5C5E\u6027"),re={class:"buttonWithIcon"},he=d("\xA0\u5220\u9664\u6587\u6863"),ce={class:"buttonWithIcon"},fe=d("\xA0\u9009\u9879"),ue={ref:"jsonEditorLeft",class:"jsonEditor jsonEditorLeft"},ge={class:"controller noShowMobile"},_e=d(" \u590D\u5236 "),pe=d(" \u590D\u5236 "),me=d("\u5BF9\u6BD4"),ye={class:"editorPanelContainer editorPanelContainerRight noShowMobile"},ve={class:"editorController editorControllerRight"},Ie={class:"editorTitle"},ke={class:"buttonWithIcon"},Re=d("\xA0\u65B0\u5EFA"),Se={class:"buttonWithIcon"},Le=d("\xA0\u6253\u5F00\u6700\u8FD1\u8BB0\u5F55"),De={class:"buttonWithIcon"},Ce=d("\xA0\u6253\u5F00\u672C\u5730\u6587\u4EF6"),be={class:"buttonWithIcon"},Me=d("\xA0\u6253\u5F00URL"),Oe={class:"buttonWithIcon"},Te=d("\xA0\u6253\u5F00"),xe={class:"buttonWithIcon"},we=d("\xA0\u4FDD\u5B58"),je={class:"buttonWithIcon"},Ne={class:"buttonWithIcon"},We=d("\xA0\u6587\u6863\u5C5E\u6027"),Ee={class:"buttonWithIcon"},Pe=d("\xA0\u5220\u9664\u6587\u6863"),ze={class:"buttonWithIcon"},Je=d("\xA0\u9009\u9879"),Be={ref:"jsonEditorRight",class:"jsonEditor jsonEditorRight"},Fe=d("\u641C\u7D22"),Ue=d("\u5220\u9664"),Ae=d("\u4E0D\u652F\u6301\u9700\u8981\u9A8C\u8BC1\u6216\u5F00\u542FCORS\u7684\u5730\u5740"),He=d("\u914D\u7F6E\u4EE3\u7801\u6A21\u5F0F\u4E0B\u7528\u4E8E\u7F29\u8FDB\u7684\u7A7A\u683C\u6570\u3002 \u7F29\u8FDB\u540C\u65F6\u5E94\u7528\u4E8E\u4E24\u4E2A\u9762\u677F\u3002"),Ve=R(()=>n("strong",null,"\u540D\u79F0\uFF1A",-1)),qe=R(()=>n("strong",null,"\u5B58\u50A8\uFF1A",-1)),Ge=R(()=>n("strong",null,"\u66F4\u65B0\uFF1A",-1)),Ke=R(()=>n("strong",null,"\u5927\u5C0F\uFF1A",-1));function Qe(t,s,i,p,Xe,r){var W,E;const D=c("FileAdditionOne"),u=c("Button"),C=c("History"),f=c("MenuItem"),b=c("Computer"),M=c("LinkThree"),m=c("Menu"),O=c("FolderOpen"),y=c("Down"),v=c("Dropdown"),T=c("Save"),x=c("IndentRight"),w=c("Info"),j=c("Delete"),N=c("SettingTwo"),S=c("Space"),X=c("Right"),Y=c("Left"),Z=c("Checkbox"),_=c("Paragraph"),L=c("Input"),$=c("ListItemMeta"),tt=c("ListItem"),et=c("List"),I=c("Modal");return wt(),Mt(Tt,null,[n("div",Ht,[n("div",Vt,[n("div",qt,[n("div",Gt,g((W=t.leftData)==null?void 0:W.name),1),e(S,{class:"editorControlButtons"},{default:o(()=>[e(u,{size:"small",type:"primary",onClick:s[0]||(s[0]=h=>r.create("left"))},{default:o(()=>[n("span",Kt,[e(D,{theme:"outline"}),Qt])]),_:1}),e(v,null,{overlay:o(()=>[e(m,{onClick:s[1]||(s[1]=h=>r.open(h,"left")),trigger:["click","hover"]},{default:o(()=>[e(f,{key:"recent"},{default:o(()=>[n("span",Xt,[e(C,{theme:"outline"}),Yt])]),_:1}),e(f,{key:"file"},{default:o(()=>[n("span",Zt,[e(b,{theme:"outline"}),$t])]),_:1}),e(f,{key:"url"},{default:o(()=>[n("span",te,[e(M,{theme:"outline"}),ee])]),_:1})]),_:1})]),default:o(()=>[e(u,{size:"small",type:"primary"},{default:o(()=>[n("span",se,[e(O,{theme:"outline"}),oe,e(y,{theme:"outline"})])]),_:1})]),_:1}),e(u,{size:"small",type:"primary",onClick:s[2]||(s[2]=h=>r.download("left"))},{default:o(()=>[n("span",ie,[e(T,{theme:"outline"}),ne])]),_:1}),e(v,null,{overlay:o(()=>[e(m,{onClick:s[3]||(s[3]=h=>r.changeOption(h,"left")),trigger:["click","hover"]},{default:o(()=>[e(f,{key:"indentation"},{default:o(()=>[n("span",ae,[e(x,{theme:"outline"}),d("\xA0\u7F29\u8FDB("+g(t.indent)+")",1)])]),_:1}),e(f,{key:"properties"},{default:o(()=>[n("span",le,[e(w,{theme:"outline"}),de])]),_:1}),e(f,{key:"delete",disabled:!Boolean(t.leftId)},{default:o(()=>[n("span",re,[e(j,{theme:"outline"}),he])]),_:1},8,["disabled"])]),_:1})]),default:o(()=>[e(u,{size:"small",type:"primary"},{default:o(()=>[n("span",ce,[e(N,{theme:"outline"}),fe,e(y,{theme:"outline"})])]),_:1})]),_:1})]),_:1})]),n("div",ue,null,512)]),n("div",ge,[e(S,{direction:"vertical"},{default:o(()=>[e(u,{type:"primary",onClick:r.copyRight,block:""},{default:o(()=>[_e,e(X,{theme:"outline"})]),_:1},8,["onClick"]),e(u,{type:"primary",onClick:r.copyLeft,block:""},{default:o(()=>[e(Y,{theme:"outline"}),pe]),_:1},8,["onClick"]),e(Z,{checked:t.diff,onChange:r.changeDiff},{default:o(()=>[me]),_:1},8,["checked","onChange"])]),_:1})]),n("div",ye,[n("div",ve,[n("div",Ie,g((E=t.rightData)==null?void 0:E.name),1),e(S,{class:"editorControlButtons"},{default:o(()=>[e(u,{size:"small",type:"primary",onClick:s[4]||(s[4]=h=>r.create("right"))},{default:o(()=>[n("span",ke,[e(D,{theme:"outline"}),Re])]),_:1}),e(v,null,{overlay:o(()=>[e(m,{onClick:s[5]||(s[5]=h=>r.open(h,"right")),trigger:["click","hover"]},{default:o(()=>[e(f,{key:"recent"},{default:o(()=>[n("span",Se,[e(C,{theme:"outline"}),Le])]),_:1}),e(f,{key:"file"},{default:o(()=>[n("span",De,[e(b,{theme:"outline"}),Ce])]),_:1}),e(f,{key:"url"},{default:o(()=>[n("span",be,[e(M,{theme:"outline"}),Me])]),_:1})]),_:1})]),default:o(()=>[e(u,{size:"small",type:"primary"},{default:o(()=>[n("span",Oe,[e(O,{theme:"outline"}),Te,e(y,{theme:"outline"})])]),_:1})]),_:1}),e(u,{size:"small",type:"primary",onClick:s[6]||(s[6]=h=>r.download("right"))},{default:o(()=>[n("span",xe,[e(T,{theme:"outline"}),we])]),_:1}),e(v,null,{overlay:o(()=>[e(m,{onClick:s[7]||(s[7]=h=>r.changeOption(h,"right")),trigger:["click","hover"]},{default:o(()=>[e(f,{key:"indentation"},{default:o(()=>[n("span",je,[e(x,{theme:"outline"}),d("\xA0\u7F29\u8FDB("+g(t.indent)+")",1)])]),_:1}),e(f,{key:"properties"},{default:o(()=>[n("span",Ne,[e(w,{theme:"outline"}),We])]),_:1}),e(f,{key:"delete",disabled:!Boolean(t.rightId)},{default:o(()=>[n("span",Ee,[e(j,{theme:"outline"}),Pe])]),_:1},8,["disabled"])]),_:1})]),default:o(()=>[e(u,{size:"small",type:"primary"},{default:o(()=>[n("span",ze,[e(N,{theme:"outline"}),Je,e(y,{theme:"outline"})])]),_:1})]),_:1})]),_:1})]),n("div",Be,null,512)])]),e(I,{visible:t.modalStatus.type==="openRecent",title:"\u6253\u5F00\u6700\u8FD1",onCancel:r.closeModal,onOk:r.openRecent},{default:o(()=>[e(_,null,{default:o(()=>[Fe]),_:1}),e(L,{value:t.keyword,"onUpdate:value":s[8]||(s[8]=h=>t.keyword=h),placeholder:"\u8BF7\u8F93\u5165\u6587\u6863\u540D\u79F0"},null,8,["value"]),e(et,{class:"dataList","item-layout":"horizontal","data-source":r.dataListAfterSearch},{renderItem:o(({item:h})=>[e(tt,{onClick:st=>t.selectId=h._id,class:jt({selected:h._id===t.selectId})},{actions:o(()=>[e(u,{onClick:st=>t.deleteData({id:h._id}),type:"primary",danger:""},{default:o(()=>[Ue]),_:2},1032,["onClick"])]),default:o(()=>[e($,{description:"\u6700\u540E\u4FEE\u6539: "+h.updated},{title:o(()=>[d(g(h.name),1)]),_:2},1032,["description"])]),_:2},1032,["onClick","class"])]),_:1},8,["data-source"])]),_:1},8,["visible","onCancel","onOk"]),Ot(n("input",{type:"file",ref:"uploader",onChange:s[9]||(s[9]=(...h)=>r.openFile&&r.openFile(...h)),accept:".json,.JSON"},null,544),[[Et,!1]]),e(I,{visible:t.modalStatus.type==="openUrl",title:"\u6253\u5F00URL",onCancel:r.closeModal,onOk:s[11]||(s[11]=h=>r.openUrl(t.url))},{default:o(()=>[e(_,null,{default:o(()=>[Ae]),_:1}),e(L,{value:t.url,"onUpdate:value":s[10]||(s[10]=h=>t.url=h),placeholder:"\u8BF7\u8F93\u5165URL\u5730\u5740"},null,8,["value"])]),_:1},8,["visible","onCancel"]),e(I,{visible:t.modalStatus.type==="setIndentation",title:"\u8BBE\u7F6E\u7F29\u8FDB",onCancel:r.closeModal,onOk:r.changeIndentation},{default:o(()=>[e(_,null,{default:o(()=>[He]),_:1}),e(L,{value:t.indent,"onUpdate:value":s[12]||(s[12]=h=>t.indent=h),valueModifiers:{number:!0}},null,8,["value"])]),_:1},8,["visible","onCancel","onOk"]),e(I,{visible:t.modalStatus.type==="documentProperties",title:"\u6587\u6863\u5C5E\u6027",onCancel:r.closeModal,onOk:r.closeModal},{default:o(()=>[e(_,null,{default:o(()=>[Ve,d(g(r.documentProperties.name),1)]),_:1}),e(_,null,{default:o(()=>[qe,d(g(r.documentProperties.storage),1)]),_:1}),e(_,null,{default:o(()=>[Ge,d(g(r.documentProperties.updated),1)]),_:1}),e(_,null,{default:o(()=>[Ke,d(g(r.documentProperties.size)+" B",1)]),_:1})]),_:1},8,["visible","onCancel","onOk"])],64)}var cs=at(At,[["render",Qe],["__scopeId","data-v-54dff206"]]);export{cs as default};
