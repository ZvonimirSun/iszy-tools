import{bb as Re,bc as ue,bd as Oe,be as $e,bf as xe,bg as Be,bh as ke,bi as Ae,bj as Fe,a9 as te,k as M,ag as Le,bk as H,T as de,bl as ze,a3 as Me,h as J,m as ae,j as q,_ as be,l as oe,bm as re,u as X,R as T,a7 as D,bn as se,ab as fe,E as ve,r as me,t as Ve,v as pe,x as $,aH as ne,al as Y,bo as Ie,bp as De,n as I,a5 as Ke,K as m,aP as W,bq as Ue,br as Ge,aS as k,bs as He,aJ as We,o as qe,s as le,bt as Ye,bu as he,a8 as ge,I as Je,bv as Xe,bw as ie,a4 as Qe,bx as Ze,ai as je,G as et,an as tt,b9 as at,z as st}from"./index-CNpwOnD4.js";import{c as A}from"./strings-PQqwQoKu.js";import{b as nt,l as lt}from"./last-D-rYfuUG.js";function ot(e,a){return a.length<2?e:Re(e,nt(a,0,-1))}function rt(e,a){return a=ue(a,e),e=ot(e,a),e==null||delete e[Oe(lt(a))]}function it(e){return $e(e)?void 0:e}var ct=1,ut=2,dt=4,bt=xe(function(e,a){var o={};if(e==null)return o;var f=!1;a=Be(a,function(l){return l=ue(l,e),f||(f=l.length>1),l}),ke(e,Ae(e),o),f&&(o=Fe(o,ct|ut|dt,it));for(var s=a.length;s--;)rt(o,a[s]);return o});const ft=(e,a,o)=>ze(e.subTree).filter(l=>{var P;return Me(l)&&((P=l.type)==null?void 0:P.name)===a&&!!l.component}).map(l=>l.component.uid).map(l=>o[l]).filter(l=>!!l),vt=(e,a)=>{const o=te({}),f=te([]),s=new WeakMap,l=v=>{o.value[v.uid]=v,H(o),de(()=>{const u=v.getVnode().el,t=u.parentNode;if(!s.has(t)){s.set(t,[]);const d=t.insertBefore.bind(t);t.insertBefore=(N,c)=>(s.get(t).some(E=>N===E||c===E)&&H(o),d(N,c))}s.get(t).push(u)})},P=v=>{delete o.value[v.uid],H(o);const u=v.getVnode().el,t=u.parentNode,d=s.get(t),N=d.indexOf(u);d.splice(N,1)},p=()=>{f.value=ft(e,a,o.value)},_=v=>v.render(),h=M({setup(v,{slots:u}){return()=>(p(),u.default?Le(_,{render:u.default}):null)}});return{children:f,addChild:l,removeChild:P,ChildrenSorter:h}},Q=Symbol("tabsRootContextKey"),mt=J({tabs:{type:q(Array),default:()=>ae([])},tabRefs:{type:q(Object),default:()=>ae({})}}),ye="ElTabBar",pt=M({name:ye}),ht=M({...pt,props:mt,setup(e,{expose:a}){const o=e,f=oe(Q);f||re(ye,"<el-tabs><el-tab-bar /></el-tabs>");const s=X("tabs"),l=T(),P=T(),p=()=>{let t=0,d=0;const N=["top","bottom"].includes(f.props.tabPosition)?"width":"height",c=N==="width"?"x":"y",R=c==="x"?"left":"top";return o.tabs.every(E=>{if(ne(E.paneName))return!1;const n=o.tabRefs[E.paneName];if(!n)return!1;if(!E.active)return!0;t=n[`offset${A(R)}`],d=n[`client${A(N)}`];const C=window.getComputedStyle(n);return N==="width"&&(d-=Number.parseFloat(C.paddingLeft)+Number.parseFloat(C.paddingRight),t+=Number.parseFloat(C.paddingLeft)),!1}),{[N]:`${d}px`,transform:`translate${A(c)}(${t}px)`}},_=()=>P.value=p(),h=[],v=()=>{h.forEach(t=>t.stop()),h.length=0,Object.values(o.tabRefs).forEach(t=>{h.push(se(t,_))})};D(()=>o.tabs,async()=>{await Y(),_(),v()},{immediate:!0});const u=se(l,()=>_());return fe(()=>{h.forEach(t=>t.stop()),h.length=0,u.stop()}),a({ref:l,update:_}),(t,d)=>(me(),ve("div",{ref_key:"barRef",ref:l,class:pe([$(s).e("active-bar"),$(s).is($(f).props.tabPosition)]),style:Ve(P.value)},null,6))}});var gt=be(ht,[["__file","tab-bar.vue"]]);const yt=J({panes:{type:q(Array),default:()=>ae([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),_t={tabClick:(e,a,o)=>o instanceof Event,tabRemove:(e,a)=>a instanceof Event},ce="ElTabNav",Nt=M({name:ce,props:yt,emits:_t,setup(e,{expose:a,emit:o}){const f=oe(Q);f||re(ce,"<el-tabs><tab-nav /></el-tabs>");const s=X("tabs"),l=Ie(),P=De(),p=T(),_=T(),h=T(),v=T({}),u=T(),t=T(!1),d=T(0),N=T(!1),c=T(!0),R=te(),E=I(()=>["top","bottom"].includes(f.props.tabPosition)),n=I(()=>E.value?"width":"height"),C=I(()=>({transform:`translate${n.value==="width"?"X":"Y"}(-${d.value}px)`})),S=()=>{if(!p.value)return;const i=p.value[`offset${A(n.value)}`],b=d.value;if(!b)return;const r=b>i?b-i:0;d.value=r},F=()=>{if(!p.value||!_.value)return;const i=_.value[`offset${A(n.value)}`],b=p.value[`offset${A(n.value)}`],r=d.value;if(i-r<=b)return;const y=i-r>b*2?r+b:i-b;d.value=y},L=async()=>{const i=_.value;if(!t.value||!h.value||!p.value||!i)return;await Y();const b=v.value[e.currentName];if(!b)return;const r=p.value,y=b.getBoundingClientRect(),g=r.getBoundingClientRect(),U=E.value?i.offsetWidth-g.width:i.offsetHeight-g.height,B=d.value;let w=B;E.value?(y.left<g.left&&(w=B-(g.left-y.left)),y.right>g.right&&(w=B+y.right-g.right)):(y.top<g.top&&(w=B-(g.top-y.top)),y.bottom>g.bottom&&(w=B+(y.bottom-g.bottom))),w=Math.max(w,0),d.value=Math.min(w,U)},z=()=>{var i;if(!_.value||!p.value)return;e.stretch&&((i=u.value)==null||i.update());const b=_.value[`offset${A(n.value)}`],r=p.value[`offset${A(n.value)}`],y=d.value;r<b?(t.value=t.value||{},t.value.prev=y,t.value.next=y+r<b,b-y<r&&(d.value=b-r)):(t.value=!1,y>0&&(d.value=0))},V=i=>{let b=0;switch(i.code){case k.left:case k.up:b=-1;break;case k.right:case k.down:b=1;break;default:return}const r=Array.from(i.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let g=r.indexOf(i.target)+b;g<0?g=r.length-1:g>=r.length&&(g=0),r[g].focus({preventScroll:!0}),r[g].click(),x()},x=()=>{c.value&&(N.value=!0)},K=()=>N.value=!1,Ce=(i,b)=>{v.value[b]=i},Te=async()=>{await Y();const i=v.value[e.currentName];i?.focus({preventScroll:!0})};return D(l,i=>{i==="hidden"?c.value=!1:i==="visible"&&setTimeout(()=>c.value=!0,50)}),D(P,i=>{i?setTimeout(()=>c.value=!0,50):c.value=!1}),se(h,z),de(()=>setTimeout(()=>L(),0)),Ke(()=>z()),a({scrollToActiveTab:L,removeFocus:K,focusActiveTab:Te,tabListRef:_,tabBarRef:u,scheduleRender:()=>H(R)}),()=>{const i=t.value?[m("span",{class:[s.e("nav-prev"),s.is("disabled",!t.value.prev)],onClick:S},[m(W,null,{default:()=>[m(Ue,null,null)]})]),m("span",{class:[s.e("nav-next"),s.is("disabled",!t.value.next)],onClick:F},[m(W,null,{default:()=>[m(Ge,null,null)]})])]:null,b=e.panes.map((r,y)=>{var g,U,B,w;const Pe=r.uid,Z=r.props.disabled,G=(U=(g=r.props.name)!=null?g:r.index)!=null?U:`${y}`,j=!Z&&(r.isClosable||e.editable);r.index=`${y}`;const Ee=j?m(W,{class:"is-icon-close",onClick:O=>o("tabRemove",r,O)},{default:()=>[m(He,null,null)]}):null,Se=((w=(B=r.slots).label)==null?void 0:w.call(B))||r.props.label,we=!Z&&r.active?0:-1;return m("div",{ref:O=>Ce(O,G),class:[s.e("item"),s.is(f.props.tabPosition),s.is("active",r.active),s.is("disabled",Z),s.is("closable",j),s.is("focus",N.value)],id:`tab-${G}`,key:`tab-${Pe}`,"aria-controls":`pane-${G}`,role:"tab","aria-selected":r.active,tabindex:we,onFocus:()=>x(),onBlur:()=>K(),onClick:O=>{K(),o("tabClick",r,G,O)},onKeydown:O=>{j&&(O.code===k.delete||O.code===k.backspace)&&o("tabRemove",r,O)}},[Se,Ee])});return R.value,m("div",{ref:h,class:[s.e("nav-wrap"),s.is("scrollable",!!t.value),s.is(f.props.tabPosition)]},[i,m("div",{class:s.e("nav-scroll"),ref:p},[e.panes.length>0?m("div",{class:[s.e("nav"),s.is(f.props.tabPosition),s.is("stretch",e.stretch&&["top","bottom"].includes(f.props.tabPosition))],ref:_,style:C.value,role:"tablist",onKeydown:V},[e.type?null:m(gt,{ref:u,tabs:[...e.panes],tabRefs:v.value},null),b]):null])])}}}),Ct=J({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:q(Function),default:()=>!0},stretch:Boolean}),ee=e=>We(e)||qe(e),Tt={[he]:e=>ee(e),tabClick:(e,a)=>a instanceof Event,tabChange:e=>ee(e),edit:(e,a)=>["remove","add"].includes(a),tabRemove:e=>ee(e),tabAdd:()=>!0},Pt=M({name:"ElTabs",props:Ct,emits:Tt,setup(e,{emit:a,slots:o,expose:f}){var s;const l=X("tabs"),P=I(()=>["left","right"].includes(e.tabPosition)),{children:p,addChild:_,removeChild:h,ChildrenSorter:v}=vt(ge(),"ElTabPane"),u=T(),t=T((s=e.modelValue)!=null?s:"0"),d=async(n,C=!1)=>{var S,F,L,z;if(!(t.value===n||ne(n)))try{let V;if(e.beforeLeave){const x=e.beforeLeave(n,t.value);V=x instanceof Promise?await x:x}else V=!0;if(V!==!1){const x=(S=p.value.find(K=>K.paneName===t.value))==null?void 0:S.isFocusInsidePane();t.value=n,C&&(a(he,n),a("tabChange",n)),(L=(F=u.value)==null?void 0:F.removeFocus)==null||L.call(F),x&&((z=u.value)==null||z.focusActiveTab())}}catch{}},N=(n,C,S)=>{n.props.disabled||(a("tabClick",n,S),d(C,!0))},c=(n,C)=>{n.props.disabled||ne(n.props.name)||(C.stopPropagation(),a("edit",n.props.name,"remove"),a("tabRemove",n.props.name))},R=()=>{a("edit",void 0,"add"),a("tabAdd")},E=n=>{const C=n.el.firstChild,S=["bottom","right"].includes(e.tabPosition)?n.children[0].el:n.children[1].el;C!==S&&C.before(S)};return D(()=>e.modelValue,n=>d(n)),D(t,async()=>{var n;await Y(),(n=u.value)==null||n.scrollToActiveTab()}),Je(Q,{props:e,currentName:t,registerPane:_,unregisterPane:h,nav$:u}),f({currentName:t,get tabNavRef(){return bt(u.value,["scheduleRender"])}}),()=>{const n=o["add-icon"],C=e.editable||e.addable?m("div",{class:[l.e("new-tab"),P.value&&l.e("new-tab-vertical")],tabindex:"0",onClick:R,onKeydown:z=>{[k.enter,k.numpadEnter].includes(z.code)&&R()}},[n?le(o,"add-icon"):m(W,{class:l.is("icon-plus")},{default:()=>[m(Ye,null,null)]})]):null,S=()=>m(Nt,{ref:u,currentName:t.value,editable:e.editable,type:e.type,panes:p.value,stretch:e.stretch,onTabClick:N,onTabRemove:c},null),F=m("div",{class:[l.e("header"),P.value&&l.e("header-vertical"),l.is(e.tabPosition)]},[m(v,null,{default:S,$stable:!0}),C]),L=m("div",{class:l.e("content")},[le(o,"default")]);return m("div",{class:[l.b(),l.m(e.tabPosition),{[l.m("card")]:e.type==="card",[l.m("border-card")]:e.type==="border-card"}],onVnodeMounted:E,onVnodeUpdated:E},[L,F])}}});var Et=Pt;const St=J({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),_e="ElTabPane",wt=M({name:_e}),Rt=M({...wt,props:St,setup(e){const a=e,o=ge(),f=Xe(),s=oe(Q);s||re(_e,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const l=X("tab-pane"),P=T(),p=T(),_=I(()=>a.closable||s.props.closable),h=ie(()=>{var c;return s.currentName.value===((c=a.name)!=null?c:p.value)}),v=T(h.value),u=I(()=>{var c;return(c=a.name)!=null?c:p.value}),t=ie(()=>!a.lazy||v.value||h.value),d=()=>{var c;return(c=P.value)==null?void 0:c.contains(document.activeElement)};D(h,c=>{c&&(v.value=!0)});const N=Qe({uid:o.uid,getVnode:()=>o.vnode,slots:f,props:a,paneName:u,active:h,index:p,isClosable:_,isFocusInsidePane:d});return s.registerPane(N),fe(()=>{s.unregisterPane(N)}),Ze(()=>{var c;f.label&&((c=s.nav$.value)==null||c.scheduleRender())}),(c,R)=>$(t)?je((me(),ve("div",{key:0,id:`pane-${$(u)}`,ref_key:"paneRef",ref:P,class:pe($(l).b()),role:"tabpanel","aria-hidden":!$(h),"aria-labelledby":`tab-${$(u)}`},[le(c.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[tt,$(h)]]):et("v-if",!0)}});var Ne=be(Rt,[["__file","tab-pane.vue"]]);const Bt=st(Et,{TabPane:Ne}),kt=at(Ne);export{kt as E,Bt as a};
