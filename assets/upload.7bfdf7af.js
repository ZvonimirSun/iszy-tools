var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(t,a,s)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[a]=s,n=(e,t)=>{for(var a in t||(t={}))o.call(t,a)&&r(e,a,t[a]);if(s)for(var a of s(t))i.call(t,a)&&r(e,a,t[a]);return e},c=(e,s)=>t(e,a(s));import{u as d}from"./index.72c0e99f.js";import{E as p,b0 as m,a as l,o as f,c as g,w as u,e as b,b as h,au as j,p as w,h as y,g as O}from"./vendor.6fbc78f0.js";/* empty css              */import{_ as v}from"./index.dcfdef32.js";var x="[data-v-1dfd92bc] .ant-upload-drag-icon .i-icon {\n  font-size: 4.8rem;\n}";const{Dragger:R}=j,{mapGetters:D,mapState:I,mapActions:P}=p("imgHosting"),$={name:"upload",components:{Dragger:R,UploadOne:m},computed:n(n({},D(["config"])),I(["uploader","commonConfig"])),methods:c(n({},P(["addImage"])),{async customRequest(e){if(this.uploader&&this.config(this.uploader)){if(this.commonConfig.renameTimeStamp){const t=e.file.name||"";e.file=new File([e.file],((new Date).getTime()+t.substring(t.lastIndexOf("."))).toLowerCase(),{type:e.file.type,lastModified:e.file.lastModified})}try{this.addImage(await d[this.uploader].handle(this.config(this.uploader),e.file)),this.$msg.success("上传成功"),this.$emit("success")}catch(t){this.$msg.error("上传失败")}}else this.$msg.warn("请先进行设置")},rejectFile(){this.$msg.warning("不支持的文件类型！")}})},q=e=>(w("data-v-1dfd92bc"),e=e(),y(),e),_={class:"ant-upload-drag-icon"},C=q((()=>b("p",{class:"ant-upload-text"},[O("拖拽图片到这里上传"),b("br"),O("或者点击选择文件上传")],-1))),F=q((()=>b("p",{class:"ant-upload-hint"}," 暂时仅支持单文件上传。 ",-1)));function L(e,t,a,s,o,i){const r=l("UploadOne"),n=l("Dragger");return f(),g(n,{fileList:[],accept:"image/bmp,image/gif,image/jpeg,image/png,image/webp",onReject:i.rejectFile,showUploadList:!1,customRequest:i.customRequest},{default:u((()=>[b("p",_,[h(r)]),C,F])),_:1},8,["onReject","customRequest"])}var S=v($,[["render",L],["__scopeId","data-v-1dfd92bc"]]);export{S as default};
