import{_ as ye}from"./VanillaJsonEditor-8932b5f4.js";import{n as he,bR as be,dm as ge,p as F,aA as ke,aO as $e,q as we,r as je,o as m,s as v,y as g,x as a,v as E,A as C,t as n,f as N,w as r,z as Ee,ao as Ve,h as _,B as j,g as o,C as De,D as Ce,H as c,d as W,F as P,a5 as q,E as T,M as H,W as Pe,dn as Ie,aW as i,dp as Be,N as xe,G as K,af as Te,I as Fe,O as Se,P as He}from"./index.js";import{E as Oe}from"./el-switch-ec3d532b.js";import"./el-tag-1d085a2f.js";import{b as L,E as Ue,a as Ae}from"./el-select-96a896ca.js";import"./el-scrollbar-e88d9e52.js";import"./el-popper-66ed4f9c.js";import{E as Re}from"./el-dialog-6f270190.js";import{a as Me,E as ze}from"./el-form-item-1e612af8.js";import"./el-empty-18312cb2.js";import{F as Y,E as Ne,a as qe}from"./el-table-v2-831fc727.js";import{E as Ke}from"./el-divider-66993001.js";import{E as G}from"./el-popover-f28e8fcd.js";import{d as Le}from"./dayjs.min-67390b44.js";import"./index-852b4aa9.js";import"./ResizeObserver.es-0f9f8adb.js";import"./isEqual-ac423b5b.js";import"./el-space-c7bf86f9.js";import"./createFile-c1b1a5ed.js";import"./index-f0cb3f64.js";import"./castArray-d2e0b528.js";import"./Paragraph-cc030132.js";import"./index-f73fab48.js";import"./Link-377f1bb4.js";import"./Text-ce75cca8.js";import"./Title-7ddcb60e.js";import"./hasIn-c0303111.js";import"./strings-98730f23.js";import"./toFinite-0e801d2e.js";import"./isUndefined-aa0326a0.js";import"./raf-1680ca74.js";const Ye=he({icon:{type:be,default:()=>ge},title:String,content:{type:String,default:""}}),Ge={back:()=>!0},We=["aria-label"],Je=F({name:"ElPageHeader"}),Qe=F({...Je,props:Ye,emits:Ge,setup(y,{emit:$}){const u=ke(),{t:h}=$e(),d=we("page-header"),b=je(()=>[d.b(),{[d.m("has-breadcrumb")]:!!u.breadcrumb,[d.m("has-extra")]:!!u.extra,[d.is("contentful")]:!!u.default}]);function p(){$("back")}return(l,U)=>(m(),v("div",{class:g(a(b))},[l.$slots.breadcrumb?(m(),v("div",{key:0,class:g(a(d).e("breadcrumb"))},[E(l.$slots,"breadcrumb")],2)):C("v-if",!0),n("div",{class:g(a(d).e("header"))},[n("div",{class:g(a(d).e("left"))},[n("div",{class:g(a(d).e("back")),role:"button",tabindex:"0",onClick:p},[l.icon||l.$slots.icon?(m(),v("div",{key:0,"aria-label":l.title||a(h)("el.pageHeader.title"),class:g(a(d).e("icon"))},[E(l.$slots,"icon",{},()=>[l.icon?(m(),N(a(Ve),{key:0},{default:r(()=>[(m(),N(Ee(l.icon)))]),_:1})):C("v-if",!0)])],10,We)):C("v-if",!0),n("div",{class:g(a(d).e("title"))},[E(l.$slots,"title",{},()=>[_(j(l.title||a(h)("el.pageHeader.title")),1)])],2)],2),o(a(Ke),{direction:"vertical"}),n("div",{class:g(a(d).e("content"))},[E(l.$slots,"content",{},()=>[_(j(l.content),1)])],2)],2),l.$slots.extra?(m(),v("div",{key:0,class:g(a(d).e("extra"))},[E(l.$slots,"extra")],2)):C("v-if",!0)],2),l.$slots.default?(m(),v("div",{key:1,class:g(a(d).e("main"))},[E(l.$slots,"default")],2)):C("v-if",!0)],2))}});var Xe=De(Qe,[["__file","/home/runner/work/element-plus/element-plus/packages/components/page-header/src/page-header.vue"]]);const Ze=Ce(Xe);const et=["title"],tt=F({__name:"copyable-text",props:{val:{}},setup(y){async function $(u){try{await navigator.clipboard.writeText(u),c.success("复制成功")}catch{c.error("复制失败")}}return(u,h)=>(m(),v("div",{title:u.val,class:"copiable-text",onClick:h[0]||(h[0]=d=>$(u.val))},j(u.val),9,et))}});const O=W(tt,[["__scopeId","data-v-a6ced727"]]),V=y=>(Se("data-v-318fda09"),y=y(),He(),y),at={key:0,class:"prj-wrapper"},ot={"w-full":"",class:"prj-list"},lt={class:"prj-title"},st={class:"prj-path"},nt={class:"prj-desc"},it={class:"prj-control"},rt=["onClick"],dt=V(()=>n("i",{class:"i-icon-park-outline-preview-open"},null,-1)),ct=[dt],ut=["onClick"],pt=V(()=>n("i",{class:"i-icon-park-outline-edit-two"},null,-1)),mt=[pt],ft=V(()=>n("div",{class:"prj-control-btn prj-btn-delete"},[n("i",{class:"i-icon-park-outline-delete"})],-1)),_t=V(()=>n("i",{class:"i-icon-park-outline-plus"},null,-1)),vt=[_t],yt={key:1,class:"prj-detail"},ht={class:"prj-meta-wrapper"},bt={class:"prj-meta"},gt=V(()=>n("div",{class:"prj-meta-name"}," 接口根地址 ",-1)),kt={class:"prj-meta"},$t=V(()=>n("div",{class:"prj-meta-name"}," 项目ID ",-1)),wt={class:"prj-data-control"},jt={class:"prj-data-wrapper"},Et={class:"dialog-footer"},Vt={class:"edit-data-wrapper"},Dt={class:"dialog-footer"};function Ct(y){return typeof y=="function"||Object.prototype.toString.call(y)==="[object Object]"&&!Te(y)}const Pt=F({__name:"mock",setup(y){const $=P([]),u=P(null),h=P([]),d=P(!1),b=P(!1),p=q({id:"",name:"",path:"",description:""}),l=q({id:-1,name:"",type:"get",enabled:!0,path:"",description:"",delay:0,response:"",projectId:""}),U=[{title:"名称",key:"name",dataKey:"name",width:300,fixed:Y.LEFT},{title:"请求类型",key:"type",dataKey:"type",width:100,align:"center",cellRenderer:({cellData:e})=>o(L,null,Ct(e)?e:{default:()=>[e]})},{title:"请求状态",key:"enabled",dataKey:"enabled",width:100,align:"center",cellRenderer:({cellData:e})=>o(L,{type:"success"},{default:()=>[e?"开启":"关闭"]})},{title:"接口地址",key:"path",dataKey:"path",width:300,cellRenderer:({cellData:e})=>o(O,{val:e},null)},{title:"接口描述",key:"description",dataKey:"description",width:300},{title:"创建时间",key:"createdAt",dataKey:"createdAt",width:200},{title:"操作",key:"operations",fixed:Y.RIGHT,cellRenderer:({rowData:e})=>o(H,null,[o(T,{size:"small",onClick:()=>ce(e.url??"")},{default:()=>[_("复制")]}),o(T,{size:"small",onClick:()=>oe(e)},{default:()=>[_("编辑")]}),o(G,{title:"确认要删除该数据吗？删除后无法恢复！",onConfirm:()=>re(e)},{reference:()=>o(T,{size:"small",type:"danger"},{default:()=>[_("删除")]})})]),width:200,align:"center"}];Pe(async()=>{await I();const e=Ie("prjId");if(e){const t=$.value.find(f=>f.id===e);t&&A(t)}});function J(){Object.assign(p,{id:"",name:"",path:"",description:""}),d.value=!0}function Q(e){Object.assign(p,{id:e.id??"",name:e.name,path:e.path,description:e.description??""}),d.value=!0}function X(e){e.id?ee(e):Z(e)}function Z(e){i.post(`${i.$apiBase}/mock/api/prj`,{...e,id:void 0}).then(i.getData).then(t=>{t.success?(c.success("创建项目成功"),I(),d.value=!1):c.error("创建项目失败")})}function ee(e){i.put(`${i.$apiBase}/mock/api/prj/${e.id}`,e).then(i.getData).then(t=>{t.success?(c.success("修改项目成功"),I(),d.value=!1):c.error("修改项目失败")})}async function te(e){try{(await i.delete(`${i.$apiBase}/mock/api/prj/${e.id}`).then(i.getData)).success?(c.success("删除项目成功"),await I()):c.error("删除项目失败")}catch{c.error("删除项目失败")}}async function I(){try{const e=await i.get(`${i.$apiBase}/mock/api/prj/list`).then(i.getData);e.success?$.value=e.data||[]:c.error("获取项目列表失败")}catch{c.error("获取项目列表失败")}}function B(e){i.get(`${i.$apiBase}/mock/api/prj/${e.id}/list`).then(i.getData).then(t=>{t.success?h.value=(t.data||[]).map(f=>(f.createdAt=Le(f.createdAt).format("YYYY-MM-DD HH:mm:ss"),f.url=`${i.$apiBase}/mock/${e.id}${e.path}${f.path}`,f)):c.error("获取接口列表失败")})}function A(e){u.value=e,Be("prjId",e.id),B(e)}function ae(){Object.assign(l,{id:-1,name:"",type:"get",enabled:!0,path:"",description:"",delay:0,response:"",projectId:""}),b.value=!0}function oe(e){Object.assign(l,{id:e.id,name:e.name,type:e.type,enabled:e.enabled,path:e.path,description:e.description,delay:e.delay,response:e.response,projectId:e.projectId}),b.value=!0}function le(e){l.response=e}function se(e){e.id>-1?ne(e):ie(e)}async function ne(e){try{(await i.put(`${i.$apiBase}/mock/api/data/${e.id}`,{...e,id:void 0,projectId:void 0}).then(i.getData)).success?(c.success("修改数据成功"),B(u.value),b.value=!1):c.error("修改数据失败")}catch{c.error("修改数据失败")}}async function ie(e){var t;try{(await i.post(`${i.$apiBase}/mock/api/data`,{...e,id:void 0,projectId:(t=u.value)==null?void 0:t.id}).then(i.getData)).success?(c.success("创建数据成功"),B(u.value),b.value=!1):c.error("创建数据失败")}catch{c.error("创建数据失败")}}async function re(e){try{(await i.delete(`${i.$apiBase}/mock/api/data/${e.id}`).then(i.getData)).success?(c.success("删除数据成功"),B(u.value)):c.error("删除数据失败")}catch{c.error("删除数据失败")}}function de(){u.value=null,h.value=[]}async function ce(e){try{await navigator.clipboard.writeText(e),c.success("复制成功")}catch{c.error("复制失败")}}return(e,t)=>{const f=G,ue=Ze,D=T,pe=Ne,me=qe,w=Fe,k=Me,R=ze,M=Re,x=Ue,fe=Ae,_e=Oe,ve=ye;return m(),v(H,null,[a(u)?(m(),v("div",yt,[o(ue,{onBack:de},{content:r(()=>[_(j(a(u).name),1)]),_:1}),n("div",ht,[n("div",bt,[gt,o(O,{val:a(i).$apiBase+"/mock/"+a(u).id+a(u).path,class:"prj-meta-content"},null,8,["val"])]),n("div",kt,[$t,o(O,{val:a(u).id,class:"prj-meta-content"},null,8,["val"])])]),n("div",wt,[o(D,{type:"primary",onClick:ae},{default:r(()=>[_(" 新增接口 ")]),_:1})]),n("div",jt,[o(me,null,{default:r(({height:s,width:S})=>[o(pe,{columns:U,data:a(h),width:S,height:s,fixed:""},null,8,["data","width","height"])]),_:1})])])):(m(),v("div",at,[n("div",ot,[(m(!0),v(H,null,xe(a($),(s,S)=>(m(),v("div",{key:S,class:"prj-item"},[n("div",lt,j(s.name),1),n("div",st,j(s.path),1),n("div",nt,j(s.description),1),n("div",it,[n("div",{class:"prj-control-btn prj-btn-open",onClick:z=>A(s)},ct,8,rt),n("div",{class:"prj-control-btn prj-btn-edit",onClick:z=>Q(s)},mt,8,ut),o(f,{title:"确认要删除该项目吗？删除后无法恢复！",onConfirm:z=>te(s)},{reference:r(()=>[ft]),_:2},1032,["onConfirm"])])]))),128)),n("div",{class:"prj-add",onClick:J},vt)])])),o(M,{modelValue:a(d),"onUpdate:modelValue":t[5]||(t[5]=s=>K(d)?d.value=s:null),title:a(p).id?"修改项目":"添加项目"},{footer:r(()=>[n("span",Et,[o(D,{onClick:t[3]||(t[3]=s=>d.value=!1)},{default:r(()=>[_("取消")]),_:1}),o(D,{type:"primary",onClick:t[4]||(t[4]=s=>X(a(p)))},{default:r(()=>[_(" 提交 ")]),_:1})])]),default:r(()=>[o(R,{model:a(p)},{default:r(()=>[o(k,{label:"项目名称","label-width":120,required:!0},{default:r(()=>[o(w,{modelValue:a(p).name,"onUpdate:modelValue":t[0]||(t[0]=s=>a(p).name=s),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(k,{label:"接口基础路径","label-width":120,required:!0},{default:r(()=>[o(w,{modelValue:a(p).path,"onUpdate:modelValue":t[1]||(t[1]=s=>a(p).path=s),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(k,{label:"项目描述","label-width":120},{default:r(()=>[o(w,{modelValue:a(p).description,"onUpdate:modelValue":t[2]||(t[2]=s=>a(p).description=s),type:"textarea",autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"]),o(M,{modelValue:a(b),"onUpdate:modelValue":t[14]||(t[14]=s=>K(b)?b.value=s:null),fullscreen:"",title:a(l).id>-1?"修改接口":"添加接口","destroy-on-close":""},{footer:r(()=>[n("span",Dt,[o(D,{onClick:t[12]||(t[12]=s=>b.value=!1)},{default:r(()=>[_("取消")]),_:1}),o(D,{type:"primary",onClick:t[13]||(t[13]=s=>se(a(l)))},{default:r(()=>[_(" 提交 ")]),_:1})])]),default:r(()=>[n("div",Vt,[o(R,{model:a(l),class:"edit-data-form"},{default:r(()=>[o(k,{label:"接口名","label-width":120,required:!0},{default:r(()=>[o(w,{modelValue:a(l).name,"onUpdate:modelValue":t[6]||(t[6]=s=>a(l).name=s),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(k,{label:"类型(method)","label-width":120,required:!0},{default:r(()=>[o(fe,{modelValue:a(l).type,"onUpdate:modelValue":t[7]||(t[7]=s=>a(l).type=s)},{default:r(()=>[o(x,{label:"GET",value:"get"}),o(x,{label:"POST",value:"post"}),o(x,{label:"DELETE",value:"delete"}),o(x,{label:"PUT",value:"put"})]),_:1},8,["modelValue"])]),_:1}),o(k,{label:"返回延时(单位毫秒)","label-width":120},{default:r(()=>[o(w,{modelValue:a(l).delay,"onUpdate:modelValue":t[8]||(t[8]=s=>a(l).delay=s),modelModifiers:{number:!0},autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(k,{label:"接口","label-width":120,required:!0},{default:r(()=>[o(w,{modelValue:a(l).path,"onUpdate:modelValue":t[9]||(t[9]=s=>a(l).path=s),autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(k,{label:"接口描述","label-width":120},{default:r(()=>[o(w,{modelValue:a(l).description,"onUpdate:modelValue":t[10]||(t[10]=s=>a(l).description=s),type:"textarea",autocomplete:"off"},null,8,["modelValue"])]),_:1}),o(k,{label:"接口状态","label-width":120},{default:r(()=>[o(_e,{modelValue:a(l).enabled,"onUpdate:modelValue":t[11]||(t[11]=s=>a(l).enabled=s),"inline-prompt":"","active-text":"开","inactive-text":"关"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),o(ve,{class:"edit-data-json",config:{mode:"text"},content:a(l).response,onChange:le},null,8,["content"])])]),_:1},8,["modelValue","title"])],64)}}});const ia=W(Pt,[["__scopeId","data-v-318fda09"]]);export{ia as default};
