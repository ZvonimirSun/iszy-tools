import{F as q,aE as x,t as f,aq as I,aU as z,aV as B,w as C,o as S,J as b,K,ap as u,X as o,a1 as t,u as r,bH as y,ar as U,a2 as F,a$ as g,az as M,as as Q,aA as R,aB as A,aC as H}from"./index-P_dHOoTd.js";import{a as J,E as L}from"./el-form-item-bCU4lDbx.js";import"./castArray-hB-E6EFf.js";const v=n=>(R("data-v-af653077"),n=n(),A(),n),O={class:"login-container"},P={class:"main"},T=v(()=>u("span",{class:"i-icon-park-outline-user"},null,-1)),X=v(()=>u("span",{class:"i-icon-park-outline-lock"},null,-1)),$={class:"btn-wrapper"},j=q({__name:"login",setup(n){const a=x({userName:"",password:""}),i=f(),c=f({}),p=f(!1),h=I(),V=z(),w=B();C(V,s=>{const e=s.query;e&&(typeof e.redirect=="string"&&(i.value=e.redirect),c.value=E(e))},{immediate:!0}),S(()=>{w.logged&&h.push({path:i.value||"/",query:c.value})});async function d(){if(!navigator.onLine){g.warning("已离线！");return}if(a.userName!=null&&a.password!=null){p.value=!0;try{await w.login({userName:a.userName,password:a.password}),g.success("登录成功！"),h.push({path:i.value||"/",query:c.value})}catch(s){s instanceof Error&&g.error(s.message)}p.value=!1}}function E(s){const{redirect:e,...l}=s;return l}return(s,e)=>{const l=M,m=J,N=Q,k=L;return b(),K("div",O,[u("div",P,[o(k,F({layout:"horizontal",model:r(a)},{wrapperCol:{span:24}}),{default:t(()=>[o(m,{required:""},{default:t(()=>[o(l,{modelValue:r(a).userName,"onUpdate:modelValue":e[0]||(e[0]=_=>r(a).userName=_),placeholder:"账户",size:"large",onKeypress:y(d,["enter"])},{prefix:t(()=>[T]),_:1},8,["modelValue"])]),_:1}),o(m,{required:""},{default:t(()=>[o(l,{modelValue:r(a).password,"onUpdate:modelValue":e[1]||(e[1]=_=>r(a).password=_),type:"password",placeholder:"密码",size:"large","show-password":"",onKeypress:y(d,["enter"])},{prefix:t(()=>[X]),_:1},8,["modelValue"])]),_:1}),o(m,null,{default:t(()=>[u("div",$,[o(N,{type:"primary",block:"",size:"large",loading:r(p),onClick:d},{default:t(()=>[U(" 登录 ")]),_:1},8,["loading"])])]),_:1})]),_:1},16,["model"])])])}}}),Y=H(j,[["__scopeId","data-v-af653077"]]);export{Y as default};
