import{_ as v,d as f,k as h,o as s,c as l,w as c,bP as k,m as d,z as n,y as g,q as m,$ as D}from"./index.61660877.js";/* empty css               */import{_ as C}from"./index.9df2c0e8.js";import"./index.78fe3db3.js";import"./index.7b428eca.js";import"./index.7367b15b.js";import"./index.3ccc7e18.js";import"./index.251f8cdf.js";import"./index.70ff9de2.js";import"./index.ac137a8e.js";import"./css.b1edd3c8.js";import"./useState.b0fd22aa.js";import"./toArray.931cf000.js";import"./DownOutlined.dfa35df4.js";import"./useMergedState.f855d8f1.js";import"./index.b17f6a23.js";import"./index.d06bd407.js";import"./Menu.fea6233b.js";import"./shallowequal.0807e7a4.js";import"./_arrayIncludesWith.91d14080.js";import"./_baseFindIndex.10ef1a58.js";import"./Overflow.6394caa6.js";import"./collapseMotion.17ce4c63.js";import"./SearchOutlined.375edd4f.js";import"./index.91d8d1cc.js";import"./Password.3688afcf.js";import"./EyeOutlined.fec9d595.js";import"./Checkbox.a4c99522.js";import"./debounce.976c9443.js";import"./responsiveObserve.511b2fe5.js";import"./isMobile.6491fde5.js";const w=f({name:"PropertyTable",props:{geoJsonLayer:{type:Object,default:void 0}},data:()=>({editableData:{}}),computed:{features(){if(this.geoJsonLayer)try{return this.geoJsonLayer.toGeoJSON().features}catch{return null}return null},propertyList(){return this.features?this.features.map(e=>e.properties):null},tableColumns(){if(this.propertyList&&this.propertyList.length>0){const t=Object.keys(this.propertyList[0]).map(i=>({title:i,dataIndex:i,key:i,slots:{customRender:"property"}}));return t.push({title:"\u64CD\u4F5C",dataIndex:"operation",width:40,fixed:"right",slots:{customRender:"operation"}}),t}else return null}},methods:{saveToEditableData(e,t,i){if(e instanceof InputEvent&&t&&i)try{t[i]=JSON.parse(e.currentTarget.value)}catch{t[i]=e.currentTarget.value}},edit(e){this.editableData[e]=h(this.propertyList[e])},save(e){Object.assign(this.propertyList[e],this.editableData[e]),delete this.editableData[e],this.$eventBus.emit("updateEditor")},cancel(e){delete this.editableData[e]},rowEvents(e,t){return{onClick:()=>{this.$eventBus.emit("locationGeo",this.features[t])}}}}}),I={key:0,class:"editable-cell-input-wrapper"},L={key:1,class:"editable-cell-text-wrapper"},$={key:0},T=["onClick"],E=["onClick"],J={key:1},O=["onClick"];function B(e,t,i,y,N,S){const u=D,_=C,b=k;return e.tableColumns?(s(),l(_,{key:0,class:"ant-table-striped",columns:e.tableColumns,"data-source":e.propertyList,"row-key":(o,a)=>a,pagination:!1,bordered:"",size:"small",scroll:{x:!0},"row-class-name":(o,a)=>a%2===1?"table-striped":null,"custom-row":e.rowEvents},{property:c(({text:o,column:a,index:r})=>[e.editableData[r]?(s(),d("div",I,[typeof e.editableData[r][a.dataIndex]=="string"?(s(),l(u,{key:0,value:e.editableData[r][a.dataIndex],"onUpdate:value":p=>e.editableData[r][a.dataIndex]=p,onClick:t[0]||(t[0]=n(()=>{},["stop"]))},null,8,["value","onUpdate:value"])):typeof e.editableData[r][a.dataIndex]=="number"?(s(),l(u,{key:1,value:e.editableData[r][a.dataIndex],"onUpdate:value":p=>e.editableData[r][a.dataIndex]=p,valueModifiers:{number:!0},onClick:t[1]||(t[1]=n(()=>{},["stop"]))},null,8,["value","onUpdate:value"])):(s(),l(u,{key:2,value:JSON.stringify(e.editableData[r][a.dataIndex]),onClick:t[2]||(t[2]=n(()=>{},["stop"])),onChange:p=>e.saveToEditableData(p,e.editableData[r],a.dataIndex)},null,8,["value","onChange"]))])):(s(),d("div",L,g(typeof o=="object"?JSON.stringify(o):o),1))]),operation:c(({index:o})=>[e.editableData[o]?(s(),d("span",$,[m("a",{onClick:n(a=>e.save(o),["stop"])}," \u4FDD\u5B58\u5C5E\u6027 ",8,T),m("a",{onClick:n(a=>e.cancel(o),["stop"])}," \u53D6\u6D88\u7F16\u8F91 ",8,E)])):(s(),d("span",J,[m("a",{onClick:n(a=>e.edit(o),["stop"])}," \u7F16\u8F91\u5C5E\u6027 ",8,O)]))]),_:1},8,["columns","data-source","row-key","row-class-name","custom-row"])):(s(),l(b,{key:1}))}var me=v(w,[["render",B],["__scopeId","data-v-7ea589a4"]]);export{me as default};
