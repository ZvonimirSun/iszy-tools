import{ba as we,bb as de,bc as Re,bd as Oe,be as $e,bf as xe,bg as Be,bh as ke,bi as Ae,a9 as ae,k as V,ag as Fe,bj as H,T as be,bk as Le,a3 as ze,h as J,m as se,j as q,_ as fe,l as re,bl as ie,u as X,R as T,a7 as D,bm as ne,ab as ve,E as me,r as pe,t as Me,v as he,x as B,aH as le,al as Y,bn as Ve,bo as Ie,n as K,a5 as De,K as m,aP as W,bp as Ke,bq as Ue,aS as F,br as Ge,aJ as He,o as We,s as oe,bs as qe,bt as ge,a8 as ye,I as Ye,bu as Je,bv as ce,a4 as Xe,bw as Qe,ai as Ze,G as je,an as et,b8 as tt,z as at}from"./index-DdH6q6SV.js";import{c as L}from"./strings-Ddq4QAeH.js";import{b as st,l as nt}from"./last-D-rYfuUG.js";function lt(e,a){return a.length<2?e:we(e,st(a,0,-1))}function ot(e,a){return a=de(a,e),e=lt(e,a),e==null||delete e[Re(nt(a))]}function rt(e){return Oe(e)?void 0:e}var it=1,ct=2,ut=4,dt=$e(function(e,a){var l={};if(e==null)return l;var b=!1;a=xe(a,function(n){return n=de(n,e),b||(b=n.length>1),n}),Be(e,ke(e),l),b&&(l=Ae(l,it|ct|ut,rt));for(var s=a.length;s--;)ot(l,a[s]);return l});const bt=(e,a,l)=>Le(e.subTree).filter(n=>{var P;return ze(n)&&((P=n.type)==null?void 0:P.name)===a&&!!n.component}).map(n=>n.component.uid).map(n=>l[n]).filter(n=>!!n),ft=(e,a)=>{const l=ae({}),b=ae([]),s=new WeakMap,n=v=>{l.value[v.uid]=v,H(l),be(()=>{const u=v.getVnode().el,t=u.parentNode;if(!s.has(t)){s.set(t,[]);const d=t.insertBefore.bind(t);t.insertBefore=(y,c)=>(s.get(t).some(N=>y===N||c===N)&&H(l),d(y,c))}s.get(t).push(u)})},P=v=>{delete l.value[v.uid],H(l);const u=v.getVnode().el,t=u.parentNode,d=s.get(t),y=d.indexOf(u);d.splice(y,1)},p=()=>{b.value=bt(e,a,l.value)},g=v=>v.render(),h=V({setup(v,{slots:u}){return()=>(p(),u.default?Fe(g,{render:u.default}):null)}});return{children:b,addChild:n,removeChild:P,ChildrenSorter:h}},Q=Symbol("tabsRootContextKey"),vt=J({tabs:{type:q(Array),default:()=>se([])},tabRefs:{type:q(Object),default:()=>se({})}}),_e="ElTabBar",mt=V({name:_e}),pt=V({...mt,props:vt,setup(e,{expose:a}){const l=e,b=re(Q);b||ie(_e,"<el-tabs><el-tab-bar /></el-tabs>");const s=X("tabs"),n=T(),P=T(),p=()=>{let t=0,d=0;const y=["top","bottom"].includes(b.props.tabPosition)?"width":"height",c=y==="width"?"x":"y",R=c==="x"?"left":"top";return l.tabs.every(N=>{if(le(N.paneName))return!1;const r=l.tabRefs[N.paneName];if(!r)return!1;if(!N.active)return!0;t=r[`offset${L(R)}`],d=r[`client${L(y)}`];const C=window.getComputedStyle(r);return y==="width"&&(d-=Number.parseFloat(C.paddingLeft)+Number.parseFloat(C.paddingRight),t+=Number.parseFloat(C.paddingLeft)),!1}),{[y]:`${d}px`,transform:`translate${L(c)}(${t}px)`}},g=()=>P.value=p(),h=[],v=()=>{h.forEach(t=>t.stop()),h.length=0,Object.values(l.tabRefs).forEach(t=>{h.push(ne(t,g))})};D(()=>l.tabs,async()=>{await Y(),g(),v()},{immediate:!0});const u=ne(n,()=>g());return ve(()=>{h.forEach(t=>t.stop()),h.length=0,u.stop()}),a({ref:n,update:g}),(t,d)=>(pe(),me("div",{ref_key:"barRef",ref:n,class:he([B(s).e("active-bar"),B(s).is(B(b).props.tabPosition)]),style:Me(P.value)},null,6))}});var ht=fe(pt,[["__file","tab-bar.vue"]]);const gt=J({panes:{type:q(Array),default:()=>se([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),yt={tabClick:(e,a,l)=>l instanceof Event,tabRemove:(e,a)=>a instanceof Event},ue="ElTabNav",_t=V({name:ue,props:gt,emits:yt,setup(e,{expose:a,emit:l}){const b=re(Q);b||ie(ue,"<el-tabs><tab-nav /></el-tabs>");const s=X("tabs"),n=Ve(),P=Ie(),p=T(),g=T(),h=T(),v=T({}),u=T(),t=T(!1),d=T(0),y=T(!1),c=T(!0),R=ae(),N=K(()=>["top","bottom"].includes(b.props.tabPosition)?"width":"height"),r=K(()=>({transform:`translate${N.value==="width"?"X":"Y"}(-${d.value}px)`})),C=()=>{if(!p.value)return;const i=p.value[`offset${L(N.value)}`],f=d.value;if(!f)return;const o=f>i?f-i:0;d.value=o},w=()=>{if(!p.value||!g.value)return;const i=g.value[`offset${L(N.value)}`],f=p.value[`offset${L(N.value)}`],o=d.value;if(i-o<=f)return;const E=i-o>f*2?o+f:i-f;d.value=E},k=async()=>{const i=g.value;if(!t.value||!h.value||!p.value||!i)return;await Y();const f=v.value[e.currentName];if(!f)return;const o=p.value,E=["top","bottom"].includes(b.props.tabPosition),_=f.getBoundingClientRect(),S=o.getBoundingClientRect(),U=E?i.offsetWidth-S.width:i.offsetHeight-S.height,A=d.value;let $=A;E?(_.left<S.left&&($=A-(S.left-_.left)),_.right>S.right&&($=A+_.right-S.right)):(_.top<S.top&&($=A-(S.top-_.top)),_.bottom>S.bottom&&($=A+(_.bottom-S.bottom))),$=Math.max($,0),d.value=Math.min($,U)},z=()=>{var i;if(!g.value||!p.value)return;e.stretch&&((i=u.value)==null||i.update());const f=g.value[`offset${L(N.value)}`],o=p.value[`offset${L(N.value)}`],E=d.value;o<f?(t.value=t.value||{},t.value.prev=E,t.value.next=E+o<f,f-E<o&&(d.value=f-o)):(t.value=!1,E>0&&(d.value=0))},I=i=>{let f=0;switch(i.code){case F.left:case F.up:f=-1;break;case F.right:case F.down:f=1;break;default:return}const o=Array.from(i.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)"));let _=o.indexOf(i.target)+f;_<0?_=o.length-1:_>=o.length&&(_=0),o[_].focus({preventScroll:!0}),o[_].click(),M()},M=()=>{c.value&&(y.value=!0)},O=()=>y.value=!1,Z=(i,f)=>{v.value[f]=i},Te=async()=>{await Y();const i=v.value[e.currentName];i?.focus({preventScroll:!0})};return D(n,i=>{i==="hidden"?c.value=!1:i==="visible"&&setTimeout(()=>c.value=!0,50)}),D(P,i=>{i?setTimeout(()=>c.value=!0,50):c.value=!1}),ne(h,z),be(()=>setTimeout(()=>k(),0)),De(()=>z()),a({scrollToActiveTab:k,removeFocus:O,focusActiveTab:Te,tabListRef:g,tabBarRef:u,scheduleRender:()=>H(R)}),()=>{const i=t.value?[m("span",{class:[s.e("nav-prev"),s.is("disabled",!t.value.prev)],onClick:C},[m(W,null,{default:()=>[m(Ke,null,null)]})]),m("span",{class:[s.e("nav-next"),s.is("disabled",!t.value.next)],onClick:w},[m(W,null,{default:()=>[m(Ue,null,null)]})])]:null,f=e.panes.map((o,E)=>{var _,S,U,A;const $=o.uid,j=o.props.disabled,G=(S=(_=o.props.name)!=null?_:o.index)!=null?S:`${E}`,ee=!j&&(o.isClosable||e.editable);o.index=`${E}`;const Pe=ee?m(W,{class:"is-icon-close",onClick:x=>l("tabRemove",o,x)},{default:()=>[m(Ge,null,null)]}):null,Ee=((A=(U=o.slots).label)==null?void 0:A.call(U))||o.props.label,Se=!j&&o.active?0:-1;return m("div",{ref:x=>Z(x,G),class:[s.e("item"),s.is(b.props.tabPosition),s.is("active",o.active),s.is("disabled",j),s.is("closable",ee),s.is("focus",y.value)],id:`tab-${G}`,key:`tab-${$}`,"aria-controls":`pane-${G}`,role:"tab","aria-selected":o.active,tabindex:Se,onFocus:()=>M(),onBlur:()=>O(),onClick:x=>{O(),l("tabClick",o,G,x)},onKeydown:x=>{ee&&(x.code===F.delete||x.code===F.backspace)&&l("tabRemove",o,x)}},[Ee,Pe])});return R.value,m("div",{ref:h,class:[s.e("nav-wrap"),s.is("scrollable",!!t.value),s.is(b.props.tabPosition)]},[i,m("div",{class:s.e("nav-scroll"),ref:p},[e.panes.length>0?m("div",{class:[s.e("nav"),s.is(b.props.tabPosition),s.is("stretch",e.stretch&&["top","bottom"].includes(b.props.tabPosition))],ref:g,style:r.value,role:"tablist",onKeydown:I},[e.type?null:m(ht,{ref:u,tabs:[...e.panes],tabRefs:v.value},null),f]):null])])}}}),Nt=J({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:q(Function),default:()=>!0},stretch:Boolean}),te=e=>He(e)||We(e),Ct={[ge]:e=>te(e),tabClick:(e,a)=>a instanceof Event,tabChange:e=>te(e),edit:(e,a)=>["remove","add"].includes(a),tabRemove:e=>te(e),tabAdd:()=>!0},Tt=V({name:"ElTabs",props:Nt,emits:Ct,setup(e,{emit:a,slots:l,expose:b}){var s;const n=X("tabs"),P=K(()=>["left","right"].includes(e.tabPosition)),{children:p,addChild:g,removeChild:h,ChildrenSorter:v}=ft(ye(),"ElTabPane"),u=T(),t=T((s=e.modelValue)!=null?s:"0"),d=async(r,C=!1)=>{var w,k,z,I;if(!(t.value===r||le(r)))try{let M;if(e.beforeLeave){const O=e.beforeLeave(r,t.value);M=O instanceof Promise?await O:O}else M=!0;if(M!==!1){const O=(w=p.value.find(Z=>Z.paneName===t.value))==null?void 0:w.isFocusInsidePane();t.value=r,C&&(a(ge,r),a("tabChange",r)),(z=(k=u.value)==null?void 0:k.removeFocus)==null||z.call(k),O&&((I=u.value)==null||I.focusActiveTab())}}catch{}},y=(r,C,w)=>{r.props.disabled||(a("tabClick",r,w),d(C,!0))},c=(r,C)=>{r.props.disabled||le(r.props.name)||(C.stopPropagation(),a("edit",r.props.name,"remove"),a("tabRemove",r.props.name))},R=()=>{a("edit",void 0,"add"),a("tabAdd")},N=r=>{const C=r.el.firstChild,w=["bottom","right"].includes(e.tabPosition)?r.children[0].el:r.children[1].el;C!==w&&C.before(w)};return D(()=>e.modelValue,r=>d(r)),D(t,async()=>{var r;await Y(),(r=u.value)==null||r.scrollToActiveTab()}),Ye(Q,{props:e,currentName:t,registerPane:g,unregisterPane:h,nav$:u}),b({currentName:t,get tabNavRef(){return dt(u.value,["scheduleRender"])}}),()=>{const r=l["add-icon"],C=e.editable||e.addable?m("div",{class:[n.e("new-tab"),P.value&&n.e("new-tab-vertical")],tabindex:"0",onClick:R,onKeydown:I=>{[F.enter,F.numpadEnter].includes(I.code)&&R()}},[r?oe(l,"add-icon"):m(W,{class:n.is("icon-plus")},{default:()=>[m(qe,null,null)]})]):null,w=()=>m(_t,{ref:u,currentName:t.value,editable:e.editable,type:e.type,panes:p.value,stretch:e.stretch,onTabClick:y,onTabRemove:c},null),k=m("div",{class:[n.e("header"),P.value&&n.e("header-vertical"),n.is(e.tabPosition)]},[m(v,null,{default:w,$stable:!0}),C]),z=m("div",{class:n.e("content")},[oe(l,"default")]);return m("div",{class:[n.b(),n.m(e.tabPosition),{[n.m("card")]:e.type==="card",[n.m("border-card")]:e.type==="border-card"}],onVnodeMounted:N,onVnodeUpdated:N},[z,k])}}});var Pt=Tt;const Et=J({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),Ne="ElTabPane",St=V({name:Ne}),wt=V({...St,props:Et,setup(e){const a=e,l=ye(),b=Je(),s=re(Q);s||ie(Ne,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const n=X("tab-pane"),P=T(),p=T(),g=K(()=>a.closable||s.props.closable),h=ce(()=>{var c;return s.currentName.value===((c=a.name)!=null?c:p.value)}),v=T(h.value),u=K(()=>{var c;return(c=a.name)!=null?c:p.value}),t=ce(()=>!a.lazy||v.value||h.value),d=()=>{var c;return(c=P.value)==null?void 0:c.contains(document.activeElement)};D(h,c=>{c&&(v.value=!0)});const y=Xe({uid:l.uid,getVnode:()=>l.vnode,slots:b,props:a,paneName:u,active:h,index:p,isClosable:g,isFocusInsidePane:d});return s.registerPane(y),ve(()=>{s.unregisterPane(y)}),Qe(()=>{var c;b.label&&((c=s.nav$.value)==null||c.scheduleRender())}),(c,R)=>B(t)?Ze((pe(),me("div",{key:0,id:`pane-${B(u)}`,ref_key:"paneRef",ref:P,class:he(B(n).b()),role:"tabpanel","aria-hidden":!B(h),"aria-labelledby":`tab-${B(u)}`},[oe(c.$slots,"default")],10,["id","aria-hidden","aria-labelledby"])),[[et,B(h)]]):je("v-if",!0)}});var Ce=fe(wt,[["__file","tab-pane.vue"]]);const xt=at(Pt,{TabPane:Ce}),Bt=tt(Ce);export{Bt as E,xt as a};
