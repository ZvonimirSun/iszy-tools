import{e as $,J as we,g as f,H as Oe,P as j,L as S,$ as Se,b as m,a3 as v,h as Q,a7 as re,af as Ce,Q as k}from"./index.7e728817.js";var ae=Symbol("OverflowContextProviderKey"),J=$({name:"OverflowContextProvider",inheritAttrs:!1,props:{value:{type:Object}},setup:function(e,a){var t=a.slots;return we(ae,f(function(){return e.value})),function(){var r;return(r=t.default)===null||r===void 0?void 0:r.call(t)}}}),xe=function(){return Oe(ae,f(function(){return null}))},_e=globalThis&&globalThis.__rest||function(n,e){var a={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&e.indexOf(t)<0&&(a[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)e.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(a[t[r]]=n[t[r]]);return a},E=void 0,V=$({name:"Item",props:{prefixCls:String,item:j.any,renderItem:Function,responsive:Boolean,itemKey:{type:[String,Number]},registerSize:Function,display:Boolean,order:Number,component:j.any,invalidate:Boolean},setup:function(e,a){var t=a.slots,r=a.expose,c=f(function(){return e.responsive&&!e.display}),h=S();r({itemNodeRef:h});function s(d){e.registerSize(e.itemKey,d)}return Se(function(){s(null)}),function(){var d,I=e.prefixCls,y=e.invalidate,w=e.item,g=e.renderItem,R=e.responsive;e.registerSize,e.itemKey,e.display;var C=e.order,p=e.component,P=p===void 0?"div":p,M=_e(e,["prefixCls","invalidate","item","renderItem","responsive","registerSize","itemKey","display","order","component"]),N=(d=t.default)===null||d===void 0?void 0:d.call(t),T=g&&w!==E?g(w):N,D;y||(D={opacity:c.value?0:1,height:c.value?0:E,overflowY:c.value?"hidden":E,order:R?C:E,pointerEvents:c.value?"none":E,position:c.value?"absolute":E});var x={};return c.value&&(x["aria-hidden"]=!0),m(re,{disabled:!R,onResize:function(z){var L=z.offsetWidth;s(L)}},{default:function(){return m(P,v(v(v({class:Q(!y&&I),style:D},x),M),{},{ref:h}),{default:function(){return[T]}})}})}}}),X=globalThis&&globalThis.__rest||function(n,e){var a={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&e.indexOf(t)<0&&(a[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)e.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(a[t[r]]=n[t[r]]);return a},Re=$({name:"RawItem",inheritAttrs:!1,props:{component:j.any,title:j.any,id:String,onMouseenter:{type:Function},onMouseleave:{type:Function},onClick:{type:Function},onKeydown:{type:Function},onFocus:{type:Function}},setup:function(e,a){var t=a.slots,r=a.attrs,c=xe();return function(){var h;if(!c.value){var s=e.component,d=s===void 0?"div":s,I=X(e,["component"]);return m(d,v(v({},I),r),{default:function(){return[(h=t.default)===null||h===void 0?void 0:h.call(t)]}})}var y=c.value,w=y.className,g=X(y,["className"]),R=r.class,C=X(r,["class"]);return m(J,{value:null},{default:function(){return[m(V,v(v(v({class:Q(w,R)},g),C),e),t)]}})}}}),Ne=globalThis&&globalThis.__rest||function(n,e){var a={};for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&e.indexOf(t)<0&&(a[t]=n[t]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,t=Object.getOwnPropertySymbols(n);r<t.length;r++)e.indexOf(t[r])<0&&Object.prototype.propertyIsEnumerable.call(n,t[r])&&(a[t[r]]=n[t[r]]);return a},ue="responsive",ie="invalidate";function pe(n){return"+ ".concat(n.length," ...")}var Ie=function(){return{id:String,prefixCls:String,data:Array,itemKey:[String,Number,Function],itemWidth:{type:Number,default:10},renderItem:Function,renderRawItem:Function,maxCount:[Number,String],renderRest:Function,renderRawRest:Function,suffix:j.any,component:String,itemComponent:j.any,onVisibleChange:Function,ssr:String,onMousedown:Function}},B=$({name:"Overflow",inheritAttrs:!1,props:Ie(),emits:["visibleChange"],setup:function(e,a){var t=a.attrs,r=a.emit,c=f(function(){return e.ssr==="full"}),h=S(null),s=f(function(){return h.value||0}),d=S(new Map),I=S(0),y=S(0),w=S(0),g=S(null),R=S(null),C=f(function(){return R.value===null&&c.value?Number.MAX_SAFE_INTEGER:R.value||0}),p=S(!1),P=f(function(){return"".concat(e.prefixCls,"-item")}),M=f(function(){return Math.max(I.value,y.value)}),N=f(function(){return!!(e.data.length&&e.maxCount===ue)}),T=f(function(){return e.maxCount===ie}),D=f(function(){return N.value||typeof e.maxCount=="number"&&e.data.length>e.maxCount}),x=f(function(){var u=e.data;return N.value?h.value===null&&c.value?u=e.data:u=e.data.slice(0,Math.min(e.data.length,s.value/e.itemWidth)):typeof e.maxCount=="number"&&(u=e.data.slice(0,e.maxCount)),u}),K=f(function(){return N.value?e.data.slice(C.value+1):e.data.slice(x.value.length)}),z=function(i,l){var o,_;return typeof e.itemKey=="function"?e.itemKey(i):(_=e.itemKey&&((o=i)===null||o===void 0?void 0:o[e.itemKey]))!==null&&_!==void 0?_:l},L=f(function(){return e.renderItem||function(u){return u}}),W=function(i,l){R.value=i,l||(p.value=i<e.data.length-1,r("visibleChange",i))},le=function(i,l){h.value=l.clientWidth},Y=function(i,l){var o=new Map(d.value);l===null?o.delete(i):o.set(i,l),d.value=o},oe=function(i,l){I.value=y.value,y.value=l},ve=function(i,l){w.value=l},G=function(i){return d.value.get(z(x.value[i],i))};return Ce([s,d,y,w,function(){return e.itemKey},x],function(){if(s.value&&M.value&&x.value){var u=w.value,i=x.value.length,l=i-1;if(!i){W(0),g.value=null;return}for(var o=0;o<i;o+=1){var _=G(o);if(_===void 0){W(o-1,!0);break}if(u+=_,l===0&&u<=s.value||o===l-1&&u+G(l)<=s.value){W(l),g.value=null;break}else if(u+M.value>s.value){W(o-1),g.value=u-_-w.value+y.value;break}}e.suffix&&G(0)+w.value>s.value&&(g.value=null)}}),function(){var u=p.value&&!!K.value.length,i=e.itemComponent,l=e.renderRawItem,o=e.renderRawRest,_=e.renderRest,q=e.prefixCls,fe=q===void 0?"rc-overflow":q,Z=e.suffix,ee=e.component,se=ee===void 0?"div":ee,ce=e.id,de=e.onMousedown,me=t.class,ye=t.style,ge=Ne(t,["class","style"]),te={};g.value!==null&&N.value&&(te={position:"absolute",left:"".concat(g.value,"px"),top:0});var A={prefixCls:P.value,responsive:N.value,component:i,invalidate:T.value},be=l?function(O,b){var F=z(O,b);return m(J,{key:F,value:k(k({},A),{order:b,item:O,itemKey:F,registerSize:Y,display:b<=C.value})},{default:function(){return[l(O,b)]}})}:function(O,b){var F=z(O,b);return m(V,v(v({},A),{},{order:b,key:F,item:O,renderItem:L.value,itemKey:F,registerSize:Y,display:b<=C.value}),null)},H=function(){return null},ne={order:u?C.value:Number.MAX_SAFE_INTEGER,className:"".concat(P.value," ").concat(P.value,"-rest"),registerSize:oe,display:u};if(o)o&&(H=function(){return m(J,{value:k(k({},A),ne)},{default:function(){return[o(K.value)]}})});else{var U=_||pe;H=function(){return m(V,v(v({},A),ne),{default:function(){return typeof U=="function"?U(K.value):U}})}}var he=function(){return m(se,v({id:ce,class:Q(!T.value&&fe,me),style:ye,onMousedown:de},ge),{default:function(){return[x.value.map(be),D.value?H():null,Z&&m(V,v(v({},A),{},{order:C.value,class:"".concat(P.value,"-suffix"),registerSize:ve,display:!0,style:te}),{default:function(){return Z}})]}})};return m(re,{disabled:!N.value,onResize:le},{default:he})}}});B.Item=Re;B.RESPONSIVE=ue;B.INVALIDATE=ie;var Fe=B;function Ee(n){var e=typeof n=="function"?n():n,a=S(e);function t(r){a.value=r}return[a,t]}export{Fe as O,Ee as u};
