import{bj as P,bS as O,M as L,bT as A,bU as E,bV as v,bW as I,bX as T,P as _,bY as x,bZ as D}from"./index-d7e38869.js";import{b as C}from"./isEqual-2166999d.js";import{h as F}from"./hasIn-e5176160.js";var w=1,H=2;function b(n,e,t,r){var s=t.length,o=s,u=!r;if(n==null)return!o;for(n=Object(n);s--;){var i=t[s];if(u&&i[2]?i[1]!==n[i[0]]:!(i[0]in n))return!1}for(;++s<o;){i=t[s];var a=i[0],c=n[a],l=i[1];if(u&&i[2]){if(c===void 0&&!(a in n))return!1}else{var d=new P;if(r)var p=r(c,l,a,n,e,d);if(!(p===void 0?C(l,c,w|H,r,d):p))return!1}}return!0}function R(n){return n===n&&!O(n)}function G(n){for(var e=L(n),t=e.length;t--;){var r=e[t],s=n[r];e[t]=[r,s,R(s)]}return e}function y(n,e){return function(t){return t==null?!1:t[n]===e&&(e!==void 0||n in Object(t))}}function S(n){var e=G(n);return e.length==1&&e[0][2]?y(e[0][0],e[0][1]):function(t){return t===n||b(t,n,e)}}var U=1,B=2;function K(n,e){return A(n)&&R(e)?y(E(n),e):function(t){var r=v(t,n);return r===void 0&&r===e?F(t,n):C(e,r,U|B)}}function N(n){return function(e){return e==null?void 0:e[n]}}function $(n){return function(e){return I(e,n)}}function q(n){return A(n)?N(E(n)):$(n)}function Z(n){return typeof n=="function"?n:n==null?T:typeof n=="object"?_(n)?K(n[0],n[1]):S(n):q(n)}const f=new Map;let g;x&&(document.addEventListener("mousedown",n=>g=n),document.addEventListener("mouseup",n=>{for(const e of f.values())for(const{documentHandler:t}of e)t(n,g)}));function m(n,e){let t=[];return Array.isArray(e.arg)?t=e.arg:D(e.arg)&&t.push(e.arg),function(r,s){const o=e.instance.popperRef,u=r.target,i=s==null?void 0:s.target,a=!e||!e.instance,c=!u||!i,l=n.contains(u)||n.contains(i),d=n===u,p=t.length&&t.some(h=>h==null?void 0:h.contains(u))||t.length&&t.includes(i),M=o&&(o.contains(u)||o.contains(i));a||c||l||d||p||M||e.value(r,s)}}const J={beforeMount(n,e){f.has(n)||f.set(n,[]),f.get(n).push({documentHandler:m(n,e),bindingFn:e.value})},updated(n,e){f.has(n)||f.set(n,[]);const t=f.get(n),r=t.findIndex(o=>o.bindingFn===e.oldValue),s={documentHandler:m(n,e),bindingFn:e.value};r>=0?t.splice(r,1,s):t.push(s)},unmounted(n){f.delete(n)}};export{J as C,Z as a,N as b};
