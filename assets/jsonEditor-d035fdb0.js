import{h as Z,y as d,R as ee,k as te,o as C,l as w,T as M,U as z,n as a,m as r,a as l,p as b,ax as F,w as i,H as B,b as _,s as oe,z as I,t as ne,E as ae,B as le,J as se,K as ie,_ as re}from"./index-ce020417.js";import{E as ue}from"./el-dialog-16425afd.js";import"./index-35f17924.js";import{u as ce,S as de,_ as fe,a as pe,b as _e}from"./jsonEditor-fd052b7b.js";import{E as me}from"./el-space-a0cd6b80.js";import{_ as N}from"./VanillaJsonEditor-e97fc260.js";import{_ as ve}from"./Paragraph-75e84ec5.js";import"./refs-66d3db59.js";import"./ResizeObserver.es-0f9f8adb.js";import"./isEqual-16c5a4d0.js";import"./dayjs.min-cfc31a54.js";import"./clamp-a3bca59a.js";import"./el-dropdown-ed185c68.js";import"./el-popper-00cf692b.js";import"./el-scrollbar-02ba1045.js";import"./formatBytes-f3c6eb77.js";import"./createFile-691bd9b5.js";import"./Text-16b50487.js";const v=y=>(se("data-v-18922fed"),y=y(),ie(),y),ge={class:"loadingPanel"},he=v(()=>r("div",{class:"emptySpace"},null,-1)),Ce=v(()=>r("span",{class:"i-icon-park-outline-right"},null,-1)),we=v(()=>r("span",{class:"i-icon-park-outline-left"},null,-1)),ye={class:"dragIcon"},Se={key:0,"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"chevron-right",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},xe=v(()=>r("path",{fill:"currentColor",d:"M96 480c-8.188 0-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L242.8 256L73.38 86.63c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l192 192c12.5 12.5 12.5 32.75 0 45.25l-192 192C112.4 476.9 104.2 480 96 480z"},null,-1)),De=[xe],Ee={key:1,"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"chevron-left",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},ke=v(()=>r("path",{fill:"currentColor",d:"M224 480c-8.188 0-16.38-3.125-22.62-9.375l-192-192c-12.5-12.5-12.5-32.75 0-45.25l192-192c12.5-12.5 32.75-12.5 45.25 0s12.5 32.75 0 45.25L77.25 256l169.4 169.4c12.5 12.5 12.5 32.75 0 45.25C240.4 476.9 232.2 480 224 480z"},null,-1)),be=[ke],Le={key:2,"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"ellipsis-vertical",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 128 512"},Pe=v(()=>r("path",{fill:"currentColor",d:"M64 360C94.93 360 120 385.1 120 416C120 446.9 94.93 472 64 472C33.07 472 8 446.9 8 416C8 385.1 33.07 360 64 360zM64 200C94.93 200 120 225.1 120 256C120 286.9 94.93 312 64 312C33.07 312 8 286.9 8 256C8 225.1 33.07 200 64 200zM64 152C33.07 152 8 126.9 8 96C8 65.07 33.07 40 64 40C94.93 40 120 65.07 120 96C120 126.9 94.93 152 64 152z"},null,-1)),je=[Pe],Re={class:"dialog-footer"},Ve=Z({__name:"jsonEditor",setup(y){const u=d(null),f=d(null),S=d(),x=d(!0),n=d(""),e=ce(),X={array:[1,2,3],boolean:!0,color:"gold",null:null,number:123,object:{a:"b",c:"d"},string:"Hello World"};ee(()=>{$()});async function $(){e.syncCloud&&await e.getSyncData(),x.value=!1,e.leftData&&e.leftData.content?e.leftData.content.json?u.value?.set(e.leftData.content.json):e.leftData.content.text&&u.value?.set(e.leftData.content.text):u.value?.set(X),e.rightData&&e.rightData.content&&(e.rightData.content.json?f.value?.set(e.rightData.content.json):e.rightData.content.text&&f.value?.set(e.rightData.content.text)),n.value=e.fullStatus}function Me(o){}const m=d(!1),p=d(""),g=d("");let L="";const O=te(()=>e.dataList(g.value));function R(o){p.value="",g.value="",L=o,m.value=!0}function T(){if(p.value){const o=e.data(p.value);if(o&&o.content){const t=o.content;L==="left"?(e.saveData({left:!0,id:p.value}),t.json?u.value?.set(t.json):t.text&&u.value?.set(t.text)):L==="right"&&(e.saveData({right:!0,id:p.value}),t.json?f.value?.set(t.json):t.text&&f.value?.set(t.text))}}m.value=!1}function U(){const o=u.value?.get();o!=null&&f.value?.set(o)}function W(){const o=f.value?.get();o!=null&&u.value?.set(o)}let P=0,D=0,j=!1;function V(o){if(o instanceof MouseEvent&&o.button!==0)return;const t=u.value?.container;t&&(j=!1,D=parseFloat(window.getComputedStyle(t).width),isNaN(D)&&(D=0),o instanceof TouchEvent?(P=o.touches[0].clientX,document.addEventListener("touchend",k),document.addEventListener("touchmove",E)):(P=o.clientX,document.addEventListener("mouseup",k),document.addEventListener("mousemove",E)))}function E(o){j=!0;let t=0;o instanceof TouchEvent?t=o.touches[0].clientX:t=o.clientX;const h=D-P+t,c=parseFloat(window.getComputedStyle(S.value).width);h<435?(n.value="right",n.value!==e.fullStatus&&e.setFullStatus("right")):c-100-h<435?(n.value="left",n.value!==e.fullStatus&&e.setFullStatus("left")):(n.value="",e.setSplitter(h/(c-100)),n.value!==e.fullStatus&&e.setFullStatus())}function k(){document.removeEventListener("mousemove",E),document.removeEventListener("touchmove",E),document.removeEventListener("mouseup",k),document.removeEventListener("touchend",k)}function H(){j||(n.value==="left"?(e.setSplitter(1-435/(parseFloat(window.getComputedStyle(S.value).width)-100)),n.value=""):n.value==="right"&&(e.setSplitter(435/(parseFloat(window.getComputedStyle(S.value).width)-100)),n.value=""))}return(o,t)=>{const h=de,c=ae,J=me,A=ve,K=le,q=fe,G=pe,Q=_e,Y=ue;return C(),w(B,null,[M(r("div",ge,[l(h,{tip:"同步中..."})],512),[[z,a(x)]]),M(r("div",{ref_key:"editorPanel",ref:S,class:"editorPanel"},[l(N,{ref_key:"editorPanelContainerLeft",ref:u,"show-menu-bar":"",class:b(["editorPanelContainer editorPanelContainerLeft",{full:a(n)==="left",hide:a(n)==="right"}]),style:F({flex:a(e).splitterValue+" 1 0"}),name:a(e).leftData?.name,config:{mode:"code"},onOpenRecent:t[0]||(t[0]=s=>R("left")),onCreate:t[1]||(t[1]=s=>void 0)},null,8,["class","style","name"]),r("div",{class:b(["controller noShowMobile",{full:a(n)}])},[l(J,{direction:"vertical"},{default:i(()=>[a(n)?oe("",!0):(C(),w(B,{key:0},[he,l(c,{type:"primary",block:"",onClick:U},{default:i(()=>[_(" 复制 "),Ce]),_:1}),l(c,{type:"primary",block:"",onClick:W},{default:i(()=>[we,_(" 复制 ")]),_:1})],64)),r("div",{class:"drag",onMousedown:V,onTouchstart:V,onClick:H},[r("div",ye,[a(n)==="right"?(C(),w("svg",Se,De)):a(n)==="left"?(C(),w("svg",Ee,be)):(C(),w("svg",Le,je))])],32)]),_:1})],2),l(N,{ref_key:"editorPanelContainerRight",ref:f,"show-menu-bar":"",class:b(["editorPanelContainer editorPanelContainerRight noShowMobile",{full:a(n)==="right",hide:a(n)==="left"}]),style:F({flex:1-a(e).splitterValue+" 1 0"}),name:a(e).rightData?.name,config:{mode:"tree"},onOpenRecent:t[2]||(t[2]=s=>R("right")),onCreate:t[3]||(t[3]=s=>void 0)},null,8,["class","style","name"])],512),[[z,!a(x)]]),l(Y,{modelValue:a(m),"onUpdate:modelValue":t[6]||(t[6]=s=>I(m)?m.value=s:null),title:"打开最近"},{footer:i(()=>[r("span",Re,[l(c,{onClick:t[5]||(t[5]=s=>m.value=!1)},{default:i(()=>[_("取消")]),_:1}),l(c,{type:"primary",onClick:T},{default:i(()=>[_(" 确定 ")]),_:1})])]),default:i(()=>[l(A,null,{default:i(()=>[_("搜索")]),_:1}),l(K,{modelValue:a(g),"onUpdate:modelValue":t[4]||(t[4]=s=>I(g)?g.value=s:null),placeholder:"请输入文档名称"},null,8,["modelValue"]),l(Q,{class:"dataList","item-layout":"horizontal","data-source":a(O)},{renderItem:i(({item:s})=>[l(G,{class:b({selected:s._id===a(p)}),onClick:ze=>p.value=s._id},{actions:i(()=>[l(c,{type:"danger"},{default:i(()=>[_(" 删除 ")]),_:1})]),default:i(()=>[l(q,{description:"最后修改: "+s.updated},{title:i(()=>[_(ne(s.name),1)]),_:2},1032,["description"])]),_:2},1032,["class","onClick"])]),_:1},8,["data-source"])]),_:1},8,["modelValue"])],64)}}});const Ze=re(Ve,[["__scopeId","data-v-18922fed"]]);export{Ze as default};
