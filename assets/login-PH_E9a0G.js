import{j as q,B as u,b0 as x,aL as E,q as B,l as I,o as z,c as S,a as i,b as s,ay as t,y as r,bA as y,W as C,bB as K,aa as g,az as L,b3 as U,aA as A,b2 as F,aG as M,aH as Q,a3 as R}from"./vendor-Ru-BxWlB.js";import{u as j}from"./common-K04dNQ2-.js";import"./ant-design-vue-MAwBXcQi.js";import"./vanilla-jsoneditor-_koh3yF9.js";const w=n=>(M("data-v-b5ae9d93"),n=n(),Q(),n),G={class:"login-container"},H={class:"main"},O=w(()=>i("span",{class:"i-icon-park-outline-user"},null,-1)),P=w(()=>i("span",{class:"i-icon-park-outline-lock"},null,-1)),T={class:"btn-wrapper"},W=q({__name:"login",setup(n){const o=u({userName:"",password:""}),c=u(),d=u({}),p=u(!1),h=x(),b=E(),v=j();B(b,function(a){const e=a.query;e&&(typeof e.redirect=="string"&&(c.value=e.redirect),d.value=N(e))},{immediate:!0}),I(()=>{v.isLogged&&h.push({path:c.value||"/",query:d.value})});async function m(){if(!navigator.onLine){g.warning("已离线！");return}if(o.value.userName!=null&&o.value.password!=null){p.value=!0;try{await v.login({userName:o.value.userName,password:o.value.password}),g.success("登录成功！"),h.push({path:c.value||"/",query:d.value})}catch(a){a instanceof Error&&g.error(a.message)}p.value=!1}}function N(a){const{redirect:e,...l}=a;return l}return(a,e)=>{const l=L,_=U,V=A,k=F;return z(),S("div",G,[i("div",H,[s(k,K({layout:"horizontal",model:r(o)},{wrapperCol:{span:24}}),{default:t(()=>[s(_,{required:""},{default:t(()=>[s(l,{modelValue:r(o).userName,"onUpdate:modelValue":e[0]||(e[0]=f=>r(o).userName=f),placeholder:"账户",size:"large",onKeypress:y(m,["enter"])},{prefix:t(()=>[O]),_:1},8,["modelValue"])]),_:1}),s(_,{required:""},{default:t(()=>[s(l,{modelValue:r(o).password,"onUpdate:modelValue":e[1]||(e[1]=f=>r(o).password=f),type:"password",placeholder:"密码",size:"large","show-password":"",onKeypress:y(m,["enter"])},{prefix:t(()=>[P]),_:1},8,["modelValue"])]),_:1}),s(_,null,{default:t(()=>[i("div",T,[s(V,{type:"primary",block:"",size:"large",loading:r(p),onClick:m},{default:t(()=>[C(" 登录 ")]),_:1},8,["loading"])])]),_:1})]),_:1},16,["model"])])])}}}),Z=R(W,[["__scopeId","data-v-b5ae9d93"]]);export{Z as default};
