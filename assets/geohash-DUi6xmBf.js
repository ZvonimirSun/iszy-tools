import{I as E,g as x,w as p,C as i,L as N,M as _,j as g,E as V,D as d,aq as h,o as k}from"./index-5f28A1cg.js";import{E as b}from"./el-space-CVYe8wvK.js";const m=[16,8,4,2,1],v="0123456789bcdefghjkmnpqrstuvwxyz",y=function(l,o,e){o&e?l[0]=(l[0]+l[1])/2:l[1]=(l[0]+l[1])/2};function B(l,o){if(typeof l=="string"){const a=l.split(",");if(a.length>=2){if(l=Number.parseFloat(a[0]),o=Number.parseFloat(a[1]),isNaN(l)||isNaN(o))throw new TypeError("Not Supported")}else throw new Error("Not Supported")}let e=1;const n=[],r=[];let u=0,s=0;const t=12;let c="";for(n[0]=-90,n[1]=90,r[0]=-180,r[1]=180;c.length<t;){if(e){const a=(r[0]+r[1])/2;o>a?(s|=m[u],r[0]=a):r[1]=a}else{const a=(n[0]+n[1])/2;l>a?(s|=m[u],n[0]=a):n[1]=a}e=!e,u<4?u++:(c+=v[s],u=0,s=0)}return c}function C(l){let o=1;const e=[],n=[];e[0]=-90,e[1]=90,n[0]=-180,n[1]=180;for(let r=0;r<l.length;r++){const u=l[r],s=v.indexOf(u);for(let t=0;t<5;t++){const c=m[t];y(o?n:e,s,c),o=!o}}return e[2]=(e[0]+e[1])/2,n[2]=(n[0]+n[1])/2,{latitude:e[2],longitude:n[2]}}const H={__name:"geohash",setup(l){const o=E(""),e=E("");function n(){try{e.value=B(o.value)}catch(s){h.error(`编码失败，${s.message}`)}}function r(){try{const{latitude:s,longitude:t}=C(o.value);e.value=`${s},${t}`}catch(s){h.error(`解码失败，${s.message}`)}}function u(){const s=o.value;o.value=e.value,e.value=s}return(s,t)=>{const c=N,a=V,w=b;return k(),x(w,{direction:"vertical",fill:!0,"w-full":""},{default:p(()=>[i(c,{modelValue:g(o),"onUpdate:modelValue":t[0]||(t[0]=f=>_(o)?o.value=f:null),type:"textarea",rows:5,placeholder:"请输入要进行 GeoHash 编码或解码的字符"},null,8,["modelValue"]),i(w,{style:{"flex-wrap":"wrap"}},{default:p(()=>[i(a,{type:"primary",onClick:n},{default:p(()=>[...t[2]||(t[2]=[d(" 编码 (Encode) ",-1)])]),_:1}),i(a,{onClick:r},{default:p(()=>[...t[3]||(t[3]=[d(" 解码 (Decode) ",-1)])]),_:1}),i(a,{onClick:u},{default:p(()=>[...t[4]||(t[4]=[d(" ↕交换 ",-1)])]),_:1})]),_:1}),i(c,{modelValue:g(e),"onUpdate:modelValue":t[1]||(t[1]=f=>_(e)?e.value=f:null),type:"textarea",rows:5,readonly:"",placeholder:"GeoHash 编码或解码的结果"},null,8,["modelValue"])]),_:1})}}};export{H as default};
