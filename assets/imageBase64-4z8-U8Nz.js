import{c as E}from"./ant-design-vue-oWwqdbYZ.js";import{j as U,B as d,u as C,x as F,o as i,c as m,b as n,az as l,W as c,y as o,ay as h,g as p,X as z,F as N,a as W,n as A,a9 as _,aB as I,a_ as L,aF as P,aA as S,a3 as T}from"./vendor-vjIVktzB.js";import"./common-uzkYpcZ_.js";import"./vanilla-jsoneditor--Y_UqYYL.js";const j={class:"wrapper"},D=["src"],$=U({__name:"imageBase64",setup(H){const e=d(""),f=C("$axios"),r=d(),s=d({width:"",height:""}),g=F(()=>e.value&&(e.value.startsWith("http://")||e.value.startsWith("https://")));function v(a){const t=new FileReader;return t.onloadend=()=>{e.value=t.result},t.readAsDataURL(a),!1}async function w(){try{await window.navigator.clipboard.writeText(e.value),_.success("复制成功")}catch(a){_.error(a==null?void 0:a.message)}}async function y(){try{const a=await f.get(e.value,{responseType:"blob"}),t=new FileReader;t.onloadend=()=>{e.value=t.result},t.readAsDataURL(a.data)}catch(a){_.error(a==null?void 0:a.message)}}function x(){r.value&&(s.value.height=r.value.naturalHeight+"px",s.value.width=r.value.naturalWidth+"px")}return(a,t)=>{const u=I,B=L,k=P,R=S,V=E;return i(),m("div",j,[n(k,null,{default:l(()=>[n(B,{"file-list":[],"show-file-list":!1,accept:"image/*","before-upload":v},{default:l(()=>[n(u,{type:"primary"},{default:l(()=>[c(" 点击上传图片 ")]),_:1})]),_:1}),o(g)?(i(),h(u,{key:0,onClick:y},{default:l(()=>[c(" 转换为Base64 ")]),_:1})):p("",!0),o(e)?(i(),h(u,{key:1,onClick:w},{default:l(()=>[c(" 复制内容 ")]),_:1})):p("",!0)]),_:1}),n(R,{modelValue:o(e),"onUpdate:modelValue":t[0]||(t[0]=b=>z(e)?e.value=b:null),type:"textarea","allow-clear":"",autosize:{minRows:5,maxRows:10},placeholder:"请输入 图片地址 或 Base64格式的图片"},null,8,["modelValue"]),o(e)?(i(),m(N,{key:0},[n(V,{level:4},{default:l(()=>[c(" 预览 ")]),_:1}),W("img",{ref_key:"imgPreview",ref:r,class:"preview",src:o(e),alt:"preview",style:A({width:o(s).width?o(s).width:"",height:o(s).height?o(s).height:""}),onLoad:x},null,44,D)],64)):p("",!0)])}}}),J=T($,[["__scopeId","data-v-a8ea7411"]]);export{J as default};
