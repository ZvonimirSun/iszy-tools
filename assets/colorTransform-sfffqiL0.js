import{a3 as E,j as B,o as L,c as D,a as m,b as a,n as S,aH as H,aI as I,al as Q,be as N,B as _,x as q,l as Z,az as V,y as l,a9 as ee,aB as oe,aM as ne,aF as le,W as U,X as j,aA as se,aL as te,b7 as re}from"./vendor-nejBBORZ.js";import{_ as O}from"./colorTransform-5v-iPVsK.js";import{c as ie}from"./ant-design-vue-Ll8WdPLM.js";import{t as A}from"./tinycolor2-qD0D-p7n.js";const ae=B({name:"AlphaPicker",components:{Checkerboard:O},props:{value:{type:Object,default:void 0}},emits:["change"],data:()=>({checkerboardBackground:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAADBJREFUOE9jfPbs2X8GPEBSUhKfNAPjqAHDIgz+//+PNx08f/4cfzoYNYCBceiHAQC5flV5JzgrxQAAAABJRU5ErkJggg=="}),computed:{colors(){return this.value},gradientColor(){const{rgba:n}=this.colors,t=[n.r,n.g,n.b].join(",");return`linear-gradient(to right, rgba(${t}, 0) 0%, rgba(${t}, 1) 100%)`}},methods:{handleChange(n,t){!t&&n.preventDefault();const{container:f}=this.$refs;if(!f)return;const h=f.clientWidth,u=f.getBoundingClientRect().left+window.pageXOffset,r=(n.pageX||(n.touches?n.touches[0].pageX:0))-u;let d;r<0?d=0:r>h?d=1:d=Math.round(r*100/h)/100,this.colors.a!==d&&this.$emit("change",{h:this.colors.hsl.h,s:this.colors.hsl.s,l:this.colors.hsl.l,a:d,source:"rgba"})},handleMouseDown(n){this.handleChange(n,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}}),ue=n=>(H("data-v-b89967fc"),n=n(),I(),n),de={class:"alphaContainer"},he={class:"alphaCheckerboardWrap"},pe=ue(()=>m("div",{class:"alphaPicker"},null,-1)),me=[pe];function fe(n,t,f,h,u,c){const r=O;return L(),D("div",de,[m("div",he,[a(r)]),m("div",{class:"alphaGradient",style:S({background:n.gradientColor})},null,4),m("div",{ref:"container",class:"alpha",onMousedown:t[0]||(t[0]=(...d)=>n.handleMouseDown&&n.handleMouseDown(...d)),onTouchmove:t[1]||(t[1]=(...d)=>n.handleChange&&n.handleChange(...d)),onTouchstart:t[2]||(t[2]=(...d)=>n.handleChange&&n.handleChange(...d))},[m("div",{class:"alphaPointer",style:S({left:n.colors.a*100+"%"})},me,4)],544)])}const ge=E(ae,[["render",fe],["__scopeId","data-v-b89967fc"]]),ce=B({name:"HuePicker",props:{value:{type:Object,default:void 0}},emits:["change"],data(){return{oldHue:0,pullDirection:""}},computed:{colors(){return this.value},pointerLeft(){return this.colors.hsl.h===0&&this.pullDirection==="right"?"100%":`${this.colors.hsl.h*100/360}%`}},watch:{colors:function(n){const{h:t}=n.hsl;t!==0&&t-this.oldHue>0&&(this.pullDirection="right"),t!==0&&t-this.oldHue<0&&(this.pullDirection="left"),this.oldHue=t}},methods:{handleChange(n,t){!t&&n.preventDefault();const{container:f}=this.$refs;if(!f)return;const h=f.clientWidth,u=f.getBoundingClientRect().left+window.pageXOffset,r=(n.pageX||(n.touches?n.touches[0].pageX:0))-u;let d,k;r<0?d=0:r>h?d=360:(k=r*100/h,d=360*k/100),this.colors.hsl.h!==d&&this.$emit("change",{h:d,s:this.colors.hsl.s,l:this.colors.hsl.l,a:this.colors.hsl.a,source:"hsl"})},handleMouseDown(n){this.handleChange(n,!0),window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}}),ve=n=>(H("data-v-9b07e7eb"),n=n(),I(),n),be={class:"hueContainer"},we=["aria-valuenow"],Ce=ve(()=>m("div",{class:"huePicker"},null,-1)),$e=[Ce];function Ve(n,t,f,h,u,c){return L(),D("div",be,[m("div",{ref:"container",class:"hue","aria-valuemin":"0","aria-valuemax":"360","aria-valuenow":n.colors.hsl.h,onMousedown:t[0]||(t[0]=(...r)=>n.handleMouseDown&&n.handleMouseDown(...r)),onTouchmove:t[1]||(t[1]=(...r)=>n.handleChange&&n.handleChange(...r)),onTouchstart:t[2]||(t[2]=(...r)=>n.handleChange&&n.handleChange(...r))},[m("div",{class:"huePointer",style:S({top:0,left:n.pointerLeft}),role:"presentation"},$e,4)],40,we)])}const xe=E(ce,[["render",Ve],["__scopeId","data-v-9b07e7eb"]]),ye=B({name:"SaturationPicker",props:{value:{type:Object,default:void 0}},emits:["change"],computed:{colors(){return this.value},bgColor(){return`hsl(${this.colors.hsv.h}, 100%, 50%)`},pointerTop(){return`${-(this.colors.hsv.v*100)+1+100}%`},pointerLeft(){return`${this.colors.hsv.s*100}%`}},methods:{throttle:Q((n,t)=>{n(t)},20,{leading:!0,trailing:!1}),handleChange(n,t){!t&&n.preventDefault();const{container:f}=this.$refs;if(!f)return;const h=f.clientWidth,u=f.clientHeight,c=f.getBoundingClientRect().left+window.pageXOffset,r=f.getBoundingClientRect().top+window.pageYOffset,d=n.pageX||(n.touches?n.touches[0].pageX:0),k=n.pageY||(n.touches?n.touches[0].pageY:0),w=N(d-c,0,h),$=N(k-r,0,u),x=w/h,y=N(-($/u)+1,0,1);this.throttle(this.onChange,{h:this.colors.hsv.h,s:x,v:y,a:this.colors.hsv.a,source:"hsva"})},onChange(n){this.$emit("change",n)},handleMouseDown(){window.addEventListener("mousemove",this.handleChange),window.addEventListener("mouseup",this.handleChange),window.addEventListener("mouseup",this.handleMouseUp)},handleMouseUp(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}}}),X=n=>(H("data-v-d7b26fd4"),n=n(),I(),n),Ae={class:"saturationContainer"},_e=X(()=>m("div",{class:"saturationWhite"},null,-1)),ke=X(()=>m("div",{class:"saturationBlack"},null,-1)),Me=X(()=>m("div",{class:"saturationCircle"},null,-1)),Se=[Me];function Ue(n,t,f,h,u,c){return L(),D("div",Ae,[m("div",{ref:"container",class:"saturation",style:S({background:n.bgColor}),onMousedown:t[0]||(t[0]=(...r)=>n.handleMouseDown&&n.handleMouseDown(...r)),onTouchmove:t[1]||(t[1]=(...r)=>n.handleChange&&n.handleChange(...r)),onTouchstart:t[2]||(t[2]=(...r)=>n.handleChange&&n.handleChange(...r))},[_e,ke,m("div",{class:"saturationPointer",style:S({top:n.pointerTop,left:n.pointerLeft})},Se,4)],36)])}const Ee=E(ye,[["render",Ue],["__scopeId","data-v-d7b26fd4"]]),Le={"max-w-full":"","h-full":"","overflow-auto":"",flex:"","flex-row":"","flex-wrap":"","justify-around":"","mx-auto":"","my-0":"",class:"p-3.2 gap-3.2"},De={flex:"","flex-1":"","flex-col":"","h-fit":"","w-xl":"","max-w-full":""},Ne={flex:""},Be={flex:"","w-full":"","justify-between":"","overflow-auto":"",class:"gap-3.2"},He={flex:"","w-full":"","justify-between":"","overflow-auto":"",class:"gap-3.2"},Ie={flex:"","w-full":"","justify-between":"","overflow-auto":"",class:"gap-3.2"},Xe={flex:"","w-full":"","justify-between":"","overflow-auto":"",class:"gap-3.2"},Pe={"w-xl":"","h-fit":"","max-w-full":""},Fe={"w-full":"","h-sm":"","b-2":"","b-solid":""},Re={"w-full":"","h-4":""},je={"w-full":"","h-4":""},Oe={flex:"","flex-col":"","h-fit":"","w-xl":"","max-w-full":""},Te={__name:"colorTransform",setup(n){const t=_("#16b0f6"),f=_(""),h=_({r:void 0,g:void 0,b:void 0,a:void 0}),u=_({c:void 0,m:void 0,y:void 0,k:void 0}),c=_({h:void 0,s:void 0,l:void 0,a:void 0}),r=_({h:void 0,s:void 0,v:void 0,a:void 0}),d=_(R("16b0f6")),k=q(()=>{const{rgba:o}=d.value;return`rgba(${[o.r,o.g,o.b,o.a].join(",")})`});Z(()=>{w({cssString:t.value})});function w(o){if(o)if(o.hex)M(o.hex)&&$({hex:o.hex,from:"hex"});else if(o.rgba)M(o.rgba)&&$({r:o.rgba.r||d.value.rgba.r,g:o.rgba.g||d.value.rgba.g,b:o.rgba.b||d.value.rgba.b,a:o.rgba.a||d.value.rgba.a,from:"rgba"});else if(o.hsla){const e=`hsla(${o.hsla.h},${(o.hsla.s*100).toFixed(0)}%,${(o.hsla.l*100).toFixed(0)}%,${o.hsla.a}`;M(e)&&$({hsl:e,from:"hsla"})}else if(o.hsva){const e=`hsva(${o.hsva.h},${(o.hsva.s*100).toFixed(0)}%,${(o.hsva.v*100).toFixed(0)}%,${o.hsva.a}`;M(e)&&$({hsv:e,from:"hsva"})}else o.cssString?M(o.cssString)&&$({cssString:o.cssString,from:"cssString"}):o.cmyk&&$({cmyk:o.cmyk,from:"cmyk"})}function $(o){if(o.from==="cmyk"){const C=Y(u.value.c,u.value.m,u.value.y,u.value.k);if(C)o.rgba=`rgb(${C[0]},${C[1]},${C[2]})`;else return}const{rgba:e,hex:b,hex8:i,a:v,hsl:g,hsv:p}=d.value=R(o,d.value.hsl.h);if(o.from!=="rgba"&&(h.value.r=e.r,h.value.g=e.g,h.value.b=e.b,h.value.a=e.a),o.from!=="hsla"&&(c.value.h=g.h,c.value.s=g.s,c.value.l=g.l,c.value.a=v),o.from!=="hsva"&&(r.value.h=p.h,r.value.s=p.s,r.value.v=p.v,r.value.a=v),o.from!=="cmyk"){const C=T(e.r,e.g,e.b);C&&(u.value.c=C[0],u.value.m=C[1],u.value.y=C[2],u.value.k=C[3])}v===1?f.value=b.replace("#",""):f.value=i.replace("#",""),o.from!=="cssString"&&(v===1?t.value="#"+f.value.toLowerCase():t.value=`rgba(${e.r}, ${e.g}, ${e.b}, ${e.a})`)}function x(o){return`${(o*100).toFixed(0)}%`}function y(o){return parseFloat((parseInt(o.replace("%",""))/100).toFixed(2))}function P(o){return`${parseFloat(parseFloat(o).toFixed(2))}°`}function F(o){return parseFloat(o.replace("°",""))}function M(o){return A(o).isValid()}function R(o,e){const b=o&&o.a;let i;o&&o.hsl?i=A(o.hsl):o&&o.hex&&o.hex.length>0?i=A(o.hex):o&&o.hsv?i=A(o.hsv):o&&o.rgba?i=A(o.rgba):o&&o.rgb?i=A(o.rgb):o&&o.cssString?i=A(o.cssString):i=A(o),i&&(i._a===void 0||i._a===null)&&i.setAlpha(b||1);const v=i.toHsl(),g=i.toHsv();return v.s===0&&(g.h=v.h=o.h||o.hsl&&o.hsl.h||e||0),{hsl:v,hex:i.toHexString(),hex8:i.toHex8String(),rgba:i.toRgb(),hsv:g,oldHue:o.h||e||v.h,from:o.from,a:o.a||i.getAlpha()}}function T(o,e,b){let i=0,v=0,g=0,p=0;if(o=parseInt((""+o).replace(/\s/g,""),10),e=parseInt((""+e).replace(/\s/g,""),10),b=parseInt((""+b).replace(/\s/g,""),10),o==null||e==null||b==null||isNaN(o)||isNaN(e)||isNaN(b)||o<0||e<0||b<0||o>255||e>255||b>255)return;if(o===0&&e===0&&b===0)return[0,0,0,1];i=1-o/255,v=1-e/255,g=1-b/255;const C=Math.min(i,Math.min(v,g));return i=(i-C)/(1-C),v=(v-C)/(1-C),g=(g-C)/(1-C),p=C,[i,v,g,p]}function Y(o,e,b,i){if(o==null||e==null||b==null||i==null||isNaN(o)||isNaN(e)||isNaN(b)||isNaN(i)||o<0||e<0||b<0||i<0||o>1||e>1||b>1||i>1)return;let v,g,p;return v=255*(1-o)*(1-i),g=255*(1-e)*(1-i),p=255*(1-b)*(1-i),v=Math.round(v),g=Math.round(g),p=Math.round(p),[v,g,p]}function W(){if(!window.EyeDropper){ee.error("你的浏览器不支持屏幕拾色！");return}new EyeDropper().open().then(e=>{M(e.sRGBHex)&&$({cssString:e.sRGBHex,from:"colorPicker"}),document.getElementById("colorPicker").blur()}).catch(e=>{console.log(e)})}return(o,e)=>{const b=ie,i=oe,v=se,g=te,p=re,C=ne,z=Ee,G=xe,K=ge,J=le;return L(),D("div",Le,[m("div",De,[m("div",Ne,[a(b,{level:4},{default:V(()=>[U(" 取色器 ")]),_:1}),a(i,{"ml-5":"",size:"default",type:"primary",onClick:W,id:"colorPicker"},{default:V(()=>[U(" 拾色器 ")]),_:1})]),a(C,{"label-width":100},{default:V(()=>[a(g,{label:"CSS 字符串"},{default:V(()=>[a(v,{modelValue:l(t),"onUpdate:modelValue":e[0]||(e[0]=s=>j(t)?t.value=s:null),onChange:e[1]||(e[1]=s=>w({cssString:l(t)}))},null,8,["modelValue"])]),_:1}),a(g,{label:"HEX",class:"hex"},{default:V(()=>[a(v,{modelValue:l(f),"onUpdate:modelValue":e[2]||(e[2]=s=>j(f)?f.value=s:null),onChange:e[3]||(e[3]=s=>w({hex:l(f)}))},null,8,["modelValue"])]),_:1}),a(g,{label:"RGBA",class:"rgba"},{default:V(()=>[m("div",Be,[a(p,{modelValue:l(h).r,"onUpdate:modelValue":e[4]||(e[4]=s=>l(h).r=s),"controls-position":"right",placeholder:"R",max:255,min:0,step:1,precision:0,onChange:e[5]||(e[5]=s=>w({rgba:l(h)}))},null,8,["modelValue"]),a(p,{modelValue:l(h).g,"onUpdate:modelValue":e[6]||(e[6]=s=>l(h).g=s),"controls-position":"right",placeholder:"G",max:255,min:0,step:1,precision:0,onChange:e[7]||(e[7]=s=>w({rgba:l(h)}))},null,8,["modelValue"]),a(p,{modelValue:l(h).b,"onUpdate:modelValue":e[8]||(e[8]=s=>l(h).b=s),"controls-position":"right",placeholder:"B",max:255,min:0,step:1,precision:0,onChange:e[9]||(e[9]=s=>w({rgba:l(h)}))},null,8,["modelValue"]),a(p,{modelValue:l(h).a,"onUpdate:modelValue":e[10]||(e[10]=s=>l(h).a=s),"controls-position":"right",placeholder:"A",max:1,min:0,step:.01,precision:2,onChange:e[11]||(e[11]=s=>w({rgba:l(h)}))},null,8,["modelValue"])])]),_:1}),a(g,{label:"CMYK",class:"cmyk"},{default:V(()=>[m("div",He,[a(p,{modelValue:l(u).c,"onUpdate:modelValue":e[12]||(e[12]=s=>l(u).c=s),"controls-position":"right",placeholder:"C",max:1,min:0,step:.01,formatter:x,parser:y,precision:2,onChange:e[13]||(e[13]=s=>w({cmyk:l(u)}))},null,8,["modelValue"]),a(p,{modelValue:l(u).m,"onUpdate:modelValue":e[14]||(e[14]=s=>l(u).m=s),"controls-position":"right",placeholder:"M",max:1,min:0,step:.01,formatter:x,parser:y,precision:2,onChange:e[15]||(e[15]=s=>w({cmyk:l(u)}))},null,8,["modelValue"]),a(p,{modelValue:l(u).y,"onUpdate:modelValue":e[16]||(e[16]=s=>l(u).y=s),"controls-position":"right",placeholder:"Y",max:1,min:0,step:.01,formatter:x,parser:y,precision:2,onChange:e[17]||(e[17]=s=>w({cmyk:l(u)}))},null,8,["modelValue"]),a(p,{modelValue:l(u).k,"onUpdate:modelValue":e[18]||(e[18]=s=>l(u).k=s),"controls-position":"right",placeholder:"K",max:1,min:0,step:.01,formatter:x,parser:y,precision:2,onChange:e[19]||(e[19]=s=>w({cmyk:l(u)}))},null,8,["modelValue"])])]),_:1}),a(g,{label:"HSVA",class:"hsva"},{default:V(()=>[m("div",Ie,[a(p,{modelValue:l(r).h,"onUpdate:modelValue":e[20]||(e[20]=s=>l(r).h=s),"controls-position":"right",placeholder:"H",max:360,min:0,step:.01,formatter:P,parser:F,precision:2,onChange:e[21]||(e[21]=s=>w({hsva:l(r)}))},null,8,["modelValue"]),a(p,{modelValue:l(r).s,"onUpdate:modelValue":e[22]||(e[22]=s=>l(r).s=s),"controls-position":"right",placeholder:"S",max:1,min:0,step:.01,formatter:x,parser:y,precision:2,onChange:e[23]||(e[23]=s=>w({hsva:l(r)}))},null,8,["modelValue"]),a(p,{modelValue:l(r).v,"onUpdate:modelValue":e[24]||(e[24]=s=>l(r).v=s),"controls-position":"right",placeholder:"V",max:1,min:0,step:.01,formatter:x,parser:y,precision:2,onChange:e[25]||(e[25]=s=>w({hsva:l(r)}))},null,8,["modelValue"]),a(p,{modelValue:l(r).a,"onUpdate:modelValue":e[26]||(e[26]=s=>l(r).a=s),"controls-position":"right",placeholder:"A",max:1,min:0,step:.01,precision:2,onChange:e[27]||(e[27]=s=>w({hsva:l(r)}))},null,8,["modelValue"])])]),_:1}),a(g,{label:"HSLA",class:"hsla"},{default:V(()=>[m("div",Xe,[a(p,{modelValue:l(c).h,"onUpdate:modelValue":e[28]||(e[28]=s=>l(c).h=s),"controls-position":"right",placeholder:"H",max:360,min:0,step:.01,formatter:P,parser:F,precision:2,onChange:e[29]||(e[29]=s=>w({hsla:l(c)}))},null,8,["modelValue"]),a(p,{modelValue:l(c).s,"onUpdate:modelValue":e[30]||(e[30]=s=>l(c).s=s),"controls-position":"right",placeholder:"S",max:1,min:0,step:.01,formatter:x,parser:y,precision:2,onChange:e[31]||(e[31]=s=>w({hsla:l(c)}))},null,8,["modelValue"]),a(p,{modelValue:l(c).l,"onUpdate:modelValue":e[32]||(e[32]=s=>l(c).l=s),"controls-position":"right",placeholder:"L",max:1,min:0,step:.01,formatter:x,parser:y,precision:2,onChange:e[33]||(e[33]=s=>w({hsla:l(c)}))},null,8,["modelValue"]),a(p,{modelValue:l(c).a,"onUpdate:modelValue":e[34]||(e[34]=s=>l(c).a=s),"controls-position":"right",placeholder:"A",max:1,min:0,step:.01,precision:2,onChange:e[35]||(e[35]=s=>w({hsla:l(c)}))},null,8,["modelValue"])])]),_:1})]),_:1})]),m("div",Pe,[a(b,{level:4},{default:V(()=>[U(" 颜色选择 ")]),_:1}),a(J,{direction:"vertical","w-full":"",fill:!0,gap:8},{default:V(()=>[m("div",Fe,[a(z,{value:l(d),onChange:$},null,8,["value"])]),m("div",Re,[a(G,{value:l(d),onChange:$},null,8,["value"])]),m("div",je,[a(K,{value:l(d),onChange:$},null,8,["value"])])]),_:1})]),m("div",Oe,[a(b,{level:4},{default:V(()=>[U(" 颜色预览 ")]),_:1}),m("div",{"w-full":"","h-sm":"",style:S({background:l(k)})},null,4)])])}}},Ke=E(Te,[["__scopeId","data-v-1522142a"]]);export{Ke as default};
