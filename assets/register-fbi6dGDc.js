import{F as E,t as k,aE as v,aq as F,aV as K,o as q,J as P,K as U,ap as u,X as s,a1 as r,u as l,bH as m,ar as V,a$ as y,az as C,as as I,aA as B,aB as S,aC as A}from"./index-dmkv1gUf.js";import{a as R,E as Z}from"./el-form-item-Ke_-hD1G.js";import"./castArray-XpQvSNvR.js";const f=c=>(B("data-v-c8723c12"),c=c(),S(),c),$={class:"login-container"},M={class:"main"},H=f(()=>u("span",{class:"i-icon-park-outline-user"},null,-1)),J=f(()=>u("span",{class:"i-icon-park-outline-user"},null,-1)),T=f(()=>u("span",{class:"i-icon-park-outline-lock"},null,-1)),X=f(()=>u("span",{class:"i-icon-park-outline-lock"},null,-1)),j=f(()=>u("span",{class:"i-icon-park-outline-phone"},null,-1)),D=f(()=>u("span",{class:"i-icon-park-outline-mail"},null,-1)),G=E({__name:"register",setup(c){const p=k(),a=v({userName:"",nickName:"",password:"",rePassword:"",mobile:"",email:""}),z=v({userName:[{required:!0,message:"请输入用户名",trigger:"blur"}],nickName:[{required:!0,message:"请输入昵称",trigger:"blur"}],password:[{trigger:"blur",validator:(i,e,o)=>{if(e==="")o(new Error("请输入密码"));else{if(a.rePassword!==""){if(!p.value)return;p.value.validateField("rePassword",()=>null)}o()}}}],rePassword:[{trigger:"blur",validator:(i,e,o)=>{e===""?o(new Error("请再次输入密码")):e!==a.password?o("两次输入密码不一致!"):o()}}],mobile:[{trigger:"blur",validator:(i,e,o)=>{e===""||/^1[3-9]\d{9}$/.test(e)?o():o("请输入正确的手机号码")}}],email:[{trigger:"blur",validator:(i,e,o)=>{e===""||/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(e)?o():o("请输入正确的邮箱")}}]}),_=k(!1),g=F(),b=K();q(()=>{b.logged&&g.back()});function n(){p.value&&p.value.validate(i=>{if(i)_.value=!0,b.register(a).then(()=>{y.success("注册成功，请等待管理员审批"),g.push("/")}).catch(e=>{y.error(e.message)}).finally(()=>{_.value=!1});else return!1})}function N(){var i;(i=p.value)==null||i.resetFields()}function x(){g.push("/login")}return(i,e)=>{const o=C,d=R,w=I,h=Z;return P(),U("div",$,[u("div",M,[s(h,{ref_key:"registerFormRef",ref:p,layout:"horizontal",model:l(a),rules:l(z),"status-icon":"","label-width":"auto"},{default:r(()=>[s(d,{required:"",label:"用户名",prop:"userName"},{default:r(()=>[s(o,{modelValue:l(a).userName,"onUpdate:modelValue":e[0]||(e[0]=t=>l(a).userName=t),size:"large",onKeydown:m(n,["enter"])},{prefix:r(()=>[H]),_:1},8,["modelValue"])]),_:1}),s(d,{required:"",label:"昵称",prop:"nickName"},{default:r(()=>[s(o,{modelValue:l(a).nickName,"onUpdate:modelValue":e[1]||(e[1]=t=>l(a).nickName=t),size:"large",onKeydown:m(n,["enter"])},{prefix:r(()=>[J]),_:1},8,["modelValue"])]),_:1}),s(d,{required:"",label:"密码",prop:"password"},{default:r(()=>[s(o,{modelValue:l(a).password,"onUpdate:modelValue":e[2]||(e[2]=t=>l(a).password=t),type:"password",size:"large","show-password":"",autocomplete:"off",onKeydown:m(n,["enter"])},{prefix:r(()=>[T]),_:1},8,["modelValue"])]),_:1}),s(d,{required:"",label:"重复密码",prop:"rePassword"},{default:r(()=>[s(o,{modelValue:l(a).rePassword,"onUpdate:modelValue":e[3]||(e[3]=t=>l(a).rePassword=t),type:"password",size:"large","show-password":"",autocomplete:"off",onKeydown:m(n,["enter"])},{prefix:r(()=>[X]),_:1},8,["modelValue"])]),_:1}),s(d,{label:"手机号",prop:"mobile"},{default:r(()=>[s(o,{modelValue:l(a).mobile,"onUpdate:modelValue":e[4]||(e[4]=t=>l(a).mobile=t),size:"large",onKeydown:m(n,["enter"])},{prefix:r(()=>[j]),_:1},8,["modelValue"])]),_:1}),s(d,{label:"邮箱",prop:"email"},{default:r(()=>[s(o,{modelValue:l(a).email,"onUpdate:modelValue":e[5]||(e[5]=t=>l(a).email=t),size:"large",onKeydown:m(n,["enter"])},{prefix:r(()=>[D]),_:1},8,["modelValue"])]),_:1}),s(d,null,{default:r(()=>[s(w,{type:"primary",block:"",size:"large",loading:l(_),onClick:n},{default:r(()=>[V(" 注册 ")]),_:1},8,["loading"]),s(w,{block:"",size:"large",disabled:l(_),onClick:N},{default:r(()=>[V(" 重置 ")]),_:1},8,["disabled"]),s(w,{block:"",size:"large",disabled:l(_),onClick:x},{default:r(()=>[V(" 返回登录 ")]),_:1},8,["disabled"])]),_:1})]),_:1},8,["model","rules"])])])}}}),W=A(G,[["__scopeId","data-v-c8723c12"]]);export{W as default};
