import{ad as U,aQ as W,o as g,c as v,a as u,t as E,y as o,aR as X,b as l,d as j,aS as Y,j as Z,aT as O,B as ee,l as te,q as N,a8 as P,a3 as C,aU as ae,r as H,aj as m,w as L,f as D,W as h,F as R,g as F,aH as se,aV as ne,aI as oe,aW as ie,aX as re,aY as ce,aZ as le,a_ as ue,aO as de,aP as fe,a$ as x,a9 as me,$ as _e,b0 as pe,b1 as ge,a2 as ye,an as he}from"./vendor-aSCv9gYk.js";import{v as ve,aq as T,an as we,x as ke,w as Se,ar as Ie,as as M}from"./common-OobkMaIb.js";const $e={class:"containerAll"},be={class:"containerTitle"},Ee={class:"typeName"},Ce={class:"main"},Be={__name:"container",props:{fullScreenStatus:{type:Boolean,default:!1}},emits:["fullScreen"],setup(t,{emit:a}){const r=a,s=W();function n(){r("fullScreen")}return(c,i)=>{var y;const w=Y;return g(),v("div",{ref:"container",class:j(["containerBase",{"full-screen":t.fullScreenStatus}])},[u("div",$e,[u("div",be,[u("div",Ee,[u("span",null,E(((y=o(s).meta)==null?void 0:y.title)||o(s).name),1),u("span",{class:"i-icon-park-outline-full-screen fullScreen",title:"全屏",onClick:n})])]),u("div",Ce,[X(c.$slots,"default",{},void 0,!0),l(w,{"visibility-height":100})])])],2)}}},Ne=U(Be,[["__scopeId","data-v-0b517e6e"]]),b=t=>(de("data-v-529518cb"),t=t(),fe(),t),Pe={class:"global-wrapper"},xe=b(()=>u("i",{class:"dark:i-icon-park-outline-moon i-icon-park-outline-sun-one"},null,-1)),Te={class:"header"},je={key:0,class:"desc"},ze={key:1,class:"desc"},Ae=b(()=>u("span",{class:"i-icon-park-outline:return"},null,-1)),Ve={key:0,class:"container"},He=b(()=>u("a",{href:"https://www.iszy.cc",target:"_blank"}," 随遇而安Blog ",-1)),Le=b(()=>u("br",null,null,-1)),De=b(()=>u("a",{href:"https://beian.miit.gov.cn/#/Integrated/recordQuery",target:"_blank"}," 苏ICP备18047890号-2 ",-1)),Re=Z({__name:"App",setup(t){const{offlineReady:a,needRefresh:r,updateServiceWorker:s}=O(),n=W(),c=ve()._user,i=ee(!1);te(()=>{window.addEventListener("keydown",d,!1)}),N(a,function(e){e&&P.success("离线使用已准备好~")}),N(r,function(e){e&&w()}),N(()=>n.path,()=>{i.value=T("fullScreen")});async function w(){let e="";try{const _=await C.get("https://jsdelivr.cdn.iszy.xyz/gh/zvonimirsun/iszy-tools@deploy/CHANGELOG.md",{headers:{"X-BYPASS-CACHE":1},params:{t:Date.now()}}).then(k=>k.data||"");_&&(e=_.split(`
`).filter(f=>f).map((f,I)=>`<p>${I+1}. ${f}</p>`).join(""))}catch{}ae.confirm("有更新内容，请点击 <strong>重载</strong> 更新~"+(e?`<br><br><div style="max-height: 10rem;overflow: auto">${e}</div>`:""),"更新",{confirmButtonText:"重载",cancelButtonText:"取消",type:"info",dangerouslyUseHTMLString:!0}).then(()=>{s()})}function y(){i.value&&T("fullScreen")?ke("fullScreen"):!i.value&&!T("fullScreen")&&Se("fullScreen"),i.value=!i.value,i.value&&P.info("长按Esc以退出全屏")}let S=!1;function d(e){i.value&&e.key==="Escape"&&(e.repeat?y():S||(S=!0,setTimeout(()=>{S=!1},3e3),P.info("长按Esc以退出全屏")))}return(e,_)=>{const k=oe,f=H("router-link"),I=ie,p=Y,$=H("router-view"),B=Ne,Q=re,G=ce,J=le,K=ue;return g(),v("div",Pe,[l(K,{locale:o(ne)},{default:m(()=>[l(J,{class:"main"},{default:m(()=>{var z,A;return[l(k,{type:"primary",class:"dark-mode-trigger",circle:"",onClick:("useStyleStore"in e?e.useStyleStore:o(we))().toggleTheme},{default:m(()=>[xe]),_:1},8,["onClick"]),L(l(I,{class:j(["main-header",{"in-tool":((z=o(n).meta)==null?void 0:z.type)==="tool"}])},{default:m(()=>[u("div",Te,[l(f,{to:"/"},{default:m(()=>[h(" ISZY工具集合 ")]),_:1})]),o(n).path==="/"?(g(),v("div",je,[h(" 一个轻量的工具集合 "),o(c).profile.nickName?(g(),v(R,{key:0},[h(" · "),l(f,{to:"/settings"},{default:m(()=>[h(E(o(c).profile.nickName),1)]),_:1})],64)):F("",!0)])):(g(),v("div",ze,[l(f,{to:"/"},{default:m(()=>[Ae,h("返回首页 ")]),_:1}),o(c).profile.nickName?(g(),v(R,{key:0},[h(" · "),l(f,{to:"/settings"},{default:m(()=>[h(E(o(c).profile.nickName),1)]),_:1})],64)):F("",!0)]))]),_:1},8,["class"]),[[D,!o(i)]]),l(Q,{class:j(["main-content",{"full-screen":o(i)}])},{default:m(()=>{var V;return[l(p,{"visibility-height":100}),((V=o(n).meta)==null?void 0:V.type)!=="tool"?(g(),v("div",Ve,[l($)])):(g(),se(B,{key:1,"full-screen-status":o(i),onFullScreen:y},{default:m(()=>[l($)]),_:1},8,["full-screen-status"]))]}),_:1},8,["class"]),L(l(G,{class:"main-footer"},{default:m(()=>[u("span",null,"© "+E(new Date().getFullYear().toString())+" ",1),He,Le,De]),_:1},512),[[D,!o(i)&&((A=o(n).meta)==null?void 0:A.type)!=="tool"]])]}),_:1})]),_:1},8,["locale"])])}}}),Fe=U(Re,[["__scopeId","data-v-529518cb"]]),q=new Ie;async function Me(t={}){const a=t.name!=null?t.name:"pinia",r=t.storeName!=null?t.storeName:"keyvaluepairs",s=t.version!=null?t.version:1,n=t.debug,c=x.createInstance({name:a,storeName:s!==1?`${r}_${s}`:r}),i=await c.keys();if(!i.length){if(s!==1){const e=x.createInstance({name:a,storeName:s-1!==1?`${r}_${s-1}`:r});(await e.keys()).length&&s===2&&await qe(e,c),await x.dropInstance({name:a,storeName:s-1!==1?`${r}_${s-1}`:r})}await c.getItem("version")==null&&await c.setItem("version",s)}sessionStorage.clear();const w=[];for(const d of i)w.push((async()=>{const e=await c.getItem(d);e!=null&&sessionStorage.setItem(d,JSON.stringify(e))})());await Promise.all(w);const y=(d,e)=>{const _=sessionStorage.getItem(d);return _!=null?(e&&sessionStorage.removeItem(d),JSON.parse(_)):null},S=(d,e)=>c.setItem(d,pe(e));return d=>{const{store:e,options:{persist:_}}=d;if(!_)return;const k=y(e.$id,!0);e.$patch(me({},e.$state,k));let f=!0;const I=_e(function(){var p,$;q.enqueue(S(e.$id,e.$state).catch(B=>{n&&console.log(B)})),e.$id==="user"&&((p=e.$state.settings)!=null&&p.autoSync)&&navigator.onLine&&(f?e.$state.syncing?(e.$state.syncing=!1,f=!1):q.enqueue(($=e.uploadSettings)==null?void 0:$.call(e)):f=!0)},100);e.$subscribe(p=>{if(p.storeId==="main"&&!Array.isArray(p.events)&&p.events.key==="clearOfflineCacheTag"){c.clear().then(()=>{window.location.reload()});return}I()},{detached:!0,deep:!0})}}async function qe(t,a){await a.clear();const r=await t.keys();for(const s of r)switch(s){case"g2048":await a.setItem("2048",await t.getItem("g2048"));break;case"imgHosting":await a.setItem("imgHosting",await t.getItem("imgHosting"));break;case"jsonEditor":await a.setItem("jsonEditor",await t.getItem("jsonEditor"));break;case"linuxCommand":await a.setItem("linuxCommand",await t.getItem("linuxCommand"));break;case"tinyEditor":await a.setItem("tinyEditor",await t.getItem("tinyEditor"));break;case"user":{const n=await t.getItem("user");delete n.profile,delete n.token,n.modules.jsonEditor=n.settings.jsonEditor,delete n.settings.jsonEditor,n.version=2,await a.setItem("user",n);break}}await a.setItem("version",2)}const Ue="https://api.iszy.xyz";(async()=>{const t=ge(),a=ye(Fe);a.config.globalProperties.$axios=C,a.config.globalProperties.$eventBus=M,a.provide("$axios",C),a.provide("$eventBus",M),C.$apiBase=Ue;const r=await Me({name:"iszy_tools",storeName:"state",version:2});t.use(r),a.use(t);const s=(await he(()=>import("./index-IikWXSQV.js"),__vite__mapDeps([0,1,2,3,4]))).default;a.use(s),a.mount("#app")})();
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/index-IikWXSQV.js","assets/vendor-aSCv9gYk.js","assets/vendor-Mb9z6LMl.css","assets/common-OobkMaIb.js","assets/common-VXepMFz0.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
