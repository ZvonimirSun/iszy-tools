import{a3 as K,ar as Q,o as y,c as v,a as d,t as x,y as c,as as ee,b as u,d as T,at as Y,j as te,a8 as se,au as ae,B as L,l as ne,aa as B,q as $,r as F,ae as f,w as M,f as R,W as h,F as H,g as q,ad as oe,av as ie,aw as ce,ag as re,ax as le,ay as ue,az as _e,aA as de,aB as fe,am as me,an as pe,aC as C,ab as ge,$ as ye,aD as he,aE as ve,a2 as we,a4 as N,aF as ke}from"./vendor-c7d095d4.js";import{u as P,h as A,d as Se,s as Ie,S as Ee,E as J}from"./common-bad41c28.js";import"./ant-design-vue-8684357f.js";const be={class:"containerAll"},$e={class:"containerTitle"},xe={class:"typeName"},Be={class:"main"},Ce={__name:"container",props:{fullScreenStatus:{type:Boolean,default:!1}},emits:["fullScreen"],setup(t,{emit:s}){const i=s,a=Q();function o(){i("fullScreen")}return(e,m)=>{var p;const r=Y;return y(),v("div",{ref:"container",class:T(["containerBase",{"full-screen":t.fullScreenStatus}])},[d("div",be,[d("div",$e,[d("div",xe,[d("span",null,x(((p=c(a).meta)==null?void 0:p.title)||c(a).name),1),d("span",{class:"i-icon-park-outline-full-screen fullScreen",title:"全屏",onClick:o})])]),d("div",Be,[ee(e.$slots,"default",{},void 0,!0),u(r,{"visibility-height":100})])])],2)}}},Ne=K(Ce,[["__scopeId","data-v-b5818b4a"]]);async function Pe(t,s="script",i=!1){if(s==="script"){const a=document.getElementsByTagName("script");let o=!1;for(let e=0;e<a.length;e++)o=a[e].src===t,o&&i&&a[e].remove();if(!o||i){const e=document.createElement("script");e.type="text/javascript",e.src=t,e.defer=!0,document.head.appendChild(e)}}else if(s==="style"){const a=document.getElementsByTagName("link");let o=!1;for(let e=0;e<a.length;e++)o=a[e].href===t,o&&i&&a[e].remove();if(!o||i){const e=document.createElement("link");e.rel="stylesheet",e.href=t,document.head.appendChild(e)}}}const S=t=>(me("data-v-1642a113"),t=t(),pe(),t),Ae={class:"global-wrapper"},Te=S(()=>d("i",{class:"dark:i-icon-park-outline-moon i-icon-park-outline-sun-one"},null,-1)),Ve={class:"header"},ze={key:0,class:"desc"},je={key:1,class:"desc"},De=S(()=>d("span",{class:"i-icon-park-outline:return"},null,-1)),Le={key:0,class:"container"},Fe=S(()=>d("a",{href:"https://www.iszy.cc",target:"_blank"}," 随遇而安Blog ",-1)),Me=S(()=>d("br",null,null,-1)),Re=S(()=>d("a",{href:"https://beian.miit.gov.cn/#/Integrated/recordQuery",target:"_blank"}," 苏ICP备18047890号-2 ",-1)),He=te({__name:"App",setup(t){const s=se(),{offlineReady:i,needRefresh:a,updateServiceWorker:o}=ae(),e=Q(),m=P()._user,r=L(!1),p=L("2021"),I=new Date().getFullYear().toString();I!==p.value&&(p.value+=` - ${I}`);let l=!1;ne(()=>{Pe("https://fonts.cdn.iszy.xyz/css2?family=JetBrains+Mono:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&family=Lora:ital,wght@0,400;0,700;1,400;1,700&family=Noto+Serif+SC:wght@300;400;700&display=swap","style"),window.addEventListener("keydown",function(_){r.value&&_.key==="Escape"&&(_.repeat?n():l||(l=!0,setTimeout(()=>{l=!1},3e3),B.info("长按Esc以退出全屏")))},!1)});function n(){r.value&&A("fullScreen")?Se("fullScreen"):!r.value&&!A("fullScreen")&&Ie("fullScreen"),r.value=!r.value,r.value&&B.info("长按Esc以退出全屏")}return $(s,function(){P().setTheme()}),$(i,function(_){_&&B.success("离线使用已准备好~")}),$(a,function(_){_&&ce.confirm("存在新内容，请点击 重载 更新~","更新",{confirmButtonText:"重载",cancelButtonText:"取消",type:"info"}).then(()=>{o()})}),$(()=>e.path,()=>{r.value=A("fullScreen")}),(_,V)=>{const k=re,w=F("router-link"),g=le,E=Y,b=F("router-view"),U=Ne,Z=ue,G=_e,X=de,O=fe;return y(),v("div",Ae,[u(O,{locale:c(ie)},{default:f(()=>[u(X,{class:"main"},{default:f(()=>{var z,j;return[u(k,{type:"primary",class:"dark-mode-trigger",circle:"",onClick:c(P)().toggleTheme},{default:f(()=>[Te]),_:1},8,["onClick"]),M(u(g,{class:T(["main-header",{"in-tool":((z=c(e).meta)==null?void 0:z.type)==="tool"}])},{default:f(()=>[d("div",Ve,[u(w,{to:"/"},{default:f(()=>[h(" ISZY工具集合 ")]),_:1})]),c(e).path==="/"?(y(),v("div",ze,[h(" 一个轻量的工具集合 "),c(m).profile.nickName?(y(),v(H,{key:0},[h(" · "),u(w,{to:"/settings"},{default:f(()=>[h(x(c(m).profile.nickName),1)]),_:1})],64)):q("",!0)])):(y(),v("div",je,[u(w,{to:"/"},{default:f(()=>[De,h("返回首页 ")]),_:1}),c(m).profile.nickName?(y(),v(H,{key:0},[h(" · "),u(w,{to:"/settings"},{default:f(()=>[h(x(c(m).profile.nickName),1)]),_:1})],64)):q("",!0)]))]),_:1},8,["class"]),[[R,!c(r)]]),u(Z,{class:T(["main-content",{"full-screen":c(r)}])},{default:f(()=>{var D;return[u(E,{"visibility-height":100}),((D=c(e).meta)==null?void 0:D.type)!=="tool"?(y(),v("div",Le,[u(b)])):(y(),oe(U,{key:1,"full-screen-status":c(r),onFullScreen:n},{default:f(()=>[u(b)]),_:1},8,["full-screen-status"]))]}),_:1},8,["class"]),M(u(G,{class:"main-footer"},{default:f(()=>[d("span",null,"© "+x(c(p))+" ",1),Fe,Me,Re]),_:1},512),[[R,!c(r)&&((j=c(e).meta)==null?void 0:j.type)!=="tool"]])]}),_:1})]),_:1},8,["locale"])])}}});const qe=K(He,[["__scopeId","data-v-1642a113"]]),W=new Ee;async function Je(t={}){const s=t.name!=null?t.name:"pinia",i=t.storeName!=null?t.storeName:"keyvaluepairs",a=t.version!=null?t.version:1,o=t.debug,e=C.createInstance({name:s,storeName:a!==1?`${i}_${a}`:i}),m=await e.keys();if(!m.length){if(a!==1){const n=C.createInstance({name:s,storeName:a-1!==1?`${i}_${a-1}`:i});(await n.keys()).length&&a===2&&await We(n,e),await C.dropInstance({name:s,storeName:a-1!==1?`${i}_${a-1}`:i})}await e.getItem("version")==null&&await e.setItem("version",a)}sessionStorage.clear();const r=[];for(const l of m)r.push((async()=>{const n=await e.getItem(l);n!=null&&sessionStorage.setItem(l,JSON.stringify(n))})());await Promise.all(r);const p=(l,n)=>{const _=sessionStorage.getItem(l);return _!=null?(n&&sessionStorage.removeItem(l),JSON.parse(_)):null},I=(l,n)=>e.setItem(l,he(n));return l=>{const{store:n,options:{persist:_}}=l;if(!_)return;const V=p(n.$id,!0);n.$patch(ge({},n.$state,V));let k=!0;const w=ye(function(){var g,E;W.enqueue(I(n.$id,n.$state).catch(b=>{o&&console.log(b)})),n.$id==="user"&&((g=n.$state.settings)!=null&&g.autoSync)&&navigator.onLine&&(k?n.$state.syncing?(n.$state.syncing=!1,k=!1):W.enqueue((E=n.uploadSettings)==null?void 0:E.call(n)):k=!0)},100);n.$subscribe(g=>{if(g.storeId==="main"&&!Array.isArray(g.events)&&g.events.key==="clearOfflineCacheTag"){e.clear().then(()=>{window.location.reload()});return}w()},{detached:!0,deep:!0})}}async function We(t,s){await s.clear();const i=await t.keys();for(const a of i)switch(a){case"g2048":await s.setItem("2048",await t.getItem("g2048"));break;case"imgHosting":await s.setItem("imgHosting",await t.getItem("imgHosting"));break;case"jsonEditor":await s.setItem("jsonEditor",await t.getItem("jsonEditor"));break;case"linuxCommand":await s.setItem("linuxCommand",await t.getItem("linuxCommand"));break;case"tinyEditor":await s.setItem("tinyEditor",await t.getItem("tinyEditor"));break;case"user":{const o=await t.getItem("user");delete o.profile,delete o.token,o.modules.jsonEditor=o.settings.jsonEditor,delete o.settings.jsonEditor,o.version=2,await s.setItem("user",o);break}}await s.setItem("version",2)}const Ke="https://api.iszy.xyz";(async()=>{const t=ve(),s=we(qe);s.config.globalProperties.$axios=N,s.config.globalProperties.$eventBus=J,s.provide("$axios",N),s.provide("$eventBus",J),N.$apiBase=Ke;const i=await Je({name:"iszy_tools",storeName:"state",version:2});t.use(i),s.use(t);const a=(await ke(()=>import("./index-96145888.js"),["assets/index-96145888.js","assets/vendor-c7d095d4.js","assets/vendor-525856ec.css","assets/common-bad41c28.js","assets/ant-design-vue-8684357f.js","assets/ant-design-vue-e216bcb0.css","assets/common-a311051a.css"])).default;s.use(a),s.mount("#app")})();
