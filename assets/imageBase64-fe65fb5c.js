import{c as E}from"./ant-design-vue-cea3bdbb.js";import{j as U,B as _,u as C,x as F,o as r,c as m,b as l,ae as n,W as i,y as s,ad as f,g as d,X as I,F as N,a as W,n as z,aa as p,ag as L,aI as P,ak as S,af as T,a3 as j}from"./vendor-2d125fa4.js";import"./common-d4a6585c.js";const A={class:"wrapper"},D=["src"],$=U({__name:"imageBase64",setup(H){const e=_(""),g=C("$axios"),c=_(),o=_({width:"",height:""}),h=F(()=>e.value&&(e.value.startsWith("http://")||e.value.startsWith("https://")));function v(a){const t=new FileReader;return t.onloadend=()=>{e.value=t.result},t.readAsDataURL(a),!1}async function w(){try{await window.navigator.clipboard.writeText(e.value),p.success("复制成功")}catch(a){p.error(a==null?void 0:a.message)}}async function y(){try{const a=await g.get(e.value,{responseType:"blob"}),t=new FileReader;t.onloadend=()=>{e.value=t.result},t.readAsDataURL(a.data)}catch(a){p.error(a==null?void 0:a.message)}}function x(){o.value.height=c.value.naturalHeight+"px",o.value.width=c.value.naturalWidth+"px"}return(a,t)=>{const u=L,B=P,k=S,R=T,V=E;return r(),m("div",A,[l(k,null,{default:n(()=>[l(B,{"file-list":[],"show-file-list":!1,accept:"image/*","before-upload":v},{default:n(()=>[l(u,{type:"primary"},{default:n(()=>[i(" 点击上传图片 ")]),_:1})]),_:1}),s(h)?(r(),f(u,{key:0,onClick:y},{default:n(()=>[i(" 转换为Base64 ")]),_:1})):d("",!0),s(e)?(r(),f(u,{key:1,onClick:w},{default:n(()=>[i(" 复制内容 ")]),_:1})):d("",!0)]),_:1}),l(R,{modelValue:s(e),"onUpdate:modelValue":t[0]||(t[0]=b=>I(e)?e.value=b:null),type:"textarea","allow-clear":"",autosize:{minRows:5,maxRows:10},placeholder:"请输入 图片地址 或 Base64格式的图片"},null,8,["modelValue"]),s(e)?(r(),m(N,{key:0},[l(V,{level:4},{default:n(()=>[i(" 预览 ")]),_:1}),W("img",{ref_key:"imgPreview",ref:c,class:"preview",src:s(e),alt:"preview",style:z({width:s(o).width?s(o).width:"",height:s(o).height?s(o).height:""}),onLoad:x},null,44,D)],64)):d("",!0)])}}});const G=j($,[["__scopeId","data-v-2f24694f"]]);export{G as default};
