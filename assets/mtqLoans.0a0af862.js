import{b3 as j,_ as z,bH as c,k as D,o as k,m as _,a,w as l,F as M,q as C,p as x,b as v,y as w,c as P,n as B,bz as U,bA as H,$ as V,B as Z}from"./index.6b075e9a.js";import{_ as q}from"./index.7b58715b.js";/* empty css              */import"./index.f3cf501b.js";import"./index.9fa1ae3e.js";import"./index.6b3c4fc6.js";import"./index.cca0c5fc.js";import"./index.ca7fa0de.js";import{S,_ as Y}from"./index.edd0b283.js";import"./index.444c9cb5.js";/* empty css              *//* empty css              */import{_ as O}from"./index.9aae888d.js";import{_ as G}from"./index.930a66b8.js";import{D as T}from"./index.163d9f5c.js";import"./index.edeefc8e.js";import{_ as J,a as K}from"./index.af739891.js";import{_ as Q}from"./FormItem.b9ef37ce.js";import{F as W}from"./Form.119ef02f.js";import"./css.b1edd3c8.js";import"./useState.3249211e.js";import"./toArray.9b72b86f.js";import"./DownOutlined.4912edc5.js";import"./index.2cdb8e0f.js";import"./index.bd23536f.js";import"./Menu.720a4ad0.js";import"./shallowequal.fc3219e2.js";import"./_arrayIncludesWith.91d14080.js";import"./_baseFindIndex.10ef1a58.js";import"./Overflow.72920c68.js";import"./collapseMotion.4df58250.js";import"./SearchOutlined.9b969b07.js";import"./index.d856463b.js";import"./Password.6b43943e.js";import"./EyeOutlined.4309515f.js";import"./Checkbox.e7616636.js";import"./debounce.548054c3.js";import"./responsiveObserve.b9846712.js";import"./isMobile.6491fde5.js";import"./useFlexGapSupport.961efcb4.js";import"./Col.a9a9e3f5.js";import"./get.0e345cac.js";import"./hasIn.eadcf762.js";import"./toInteger.8027272a.js";import"./toFinite.24189daa.js";var N={exports:{}};(function(t,e){(function(s,r){t.exports=r()})(j,function(){return function(s,r,p){r.prototype.isBetween=function(n,d,m,u){var o=p(n),h=p(d),y=(u=u||"()")[0]==="(",g=u[1]===")";return(y?this.isAfter(o,m):!this.isBefore(o,m))&&(g?this.isBefore(h,m):!this.isAfter(h,m))||(y?this.isBefore(o,m):!this.isAfter(o,m))&&(g?this.isAfter(h,m):!this.isBefore(h,m))}}})})(N);var X=N.exports;c.extend(X);const $={name:"MtqLoans",data:()=>({loanAmount:15e4,repaymentPeriod:2,loanMonth:24,lendingRates:4.5,repayment:"equalLoan",firstRepaymentDate:c(),prepayment:[],columns:[{title:"\u671F\u6B21",dataIndex:"times",key:"times"},{title:"\u8FD8\u6B3E\u65E5\u671F",dataIndex:"repaymentDate",key:"repaymentDate"},{title:"\u6BCF\u6708\u8FD8\u6B3E",dataIndex:"monthlyAmount",key:"monthlyAmount"},{title:"\u507F\u8FD8\u5229\u606F",dataIndex:"interestRepayment",key:"interestRepayment"},{title:"\u507F\u8FD8\u672C\u91D1",dataIndex:"principalRepayment",key:"principalRepayment"},{title:"\u5269\u4F59\u672C\u91D1",dataIndex:"remainingPrincipal",key:"remainingPrincipal"}],dateFormat:"YYYY/MM/DD"}),computed:{options:function(){const t={};if(!isNaN(parseFloat(this.loanAmount))&&parseFloat(this.loanAmount)>0&&(t.loanAmount=parseFloat(this.loanAmount)),Number.isInteger(parseFloat(this.loanMonth))&&parseFloat(this.loanMonth)>0&&(t.loanMonth=parseInt(this.loanMonth)),!isNaN(parseFloat(this.lendingRates))&&parseFloat(this.lendingRates)>0&&(t.lendingRates=parseFloat(this.lendingRates)),c.isDayjs(this.firstRepaymentDate))if(t.firstRepaymentDate=this.firstRepaymentDate,this.prepayment.length===0)t.prepayment=this.prepayment;else{let e=!0;for(const s in this.prepayment)if(s==="0"){if(!(c.isDayjs(this.prepayment[s].repaymentDate)&&this.prepayment[s].repaymentDate.diff(this.firstRepaymentDate.clone().subtract(1,"M"),"days")>=0)){e=!1;break}}else if(!(c.isDayjs(this.prepayment[s].repaymentDate)&&this.prepayment[s].repaymentDate.diff(this.prepayment[s-1].repaymentDate,"days")>=0)){e=!1;break}e&&(t.prepayment=this.prepayment)}return t},isValidOptions:function(){return Object.keys(this.options).length>=5},originDataSource:function(){if(this.isValidOptions){const t=[];if(t.push({key:0,times:0,remainingPrincipal:this.options.loanAmount}),this.repayment==="equalLoan"){const e={loanAmount:this.options.loanAmount,loanMonth:this.options.loanMonth,lendingRates:this.options.lendingRates};for(let s=1;s<=this.options.loanMonth;s++){const r=Number((-F(e.lendingRates/100/12,e.loanMonth,e.loanAmount)).toFixed(2)),p=Number((e.loanAmount*e.lendingRates/100/12).toFixed(2)),n=Number((r-p).toFixed(2));e.loanAmount-=n,e.loanMonth--,t.push({key:s,times:s,repaymentDate:this.options.firstRepaymentDate.clone().add(s-1,"M").format(this.dateFormat),monthlyAmount:r,interestRepayment:p,principalRepayment:n,remainingPrincipal:Number(e.loanAmount.toFixed(2))})}}if(this.repayment==="equalPrincipal"){const e={loanAmount:this.options.loanAmount,loanMonth:this.options.loanMonth};for(let s=1;s<=this.options.loanMonth;s++){const r=Number((e.loanAmount/e.loanMonth).toFixed(2)),p=Number((e.loanAmount*this.options.lendingRates/100/12).toFixed(2)),n=Number((r+p).toFixed(2));e.loanAmount-=r,e.loanMonth--,t.push({key:s,times:s,repaymentDate:this.options.firstRepaymentDate.clone().add(s-1,"M").format(this.dateFormat),monthlyAmount:n,interestRepayment:p,principalRepayment:r,remainingPrincipal:Number(e.loanAmount.toFixed(2))})}}return t}else return[]},dataSource:function(){if(this.isValidOptions){const t=[];if(t.push({key:0,times:0,remainingPrincipal:this.options.loanAmount}),this.repayment==="equalLoan"){const e={loanAmount:this.options.loanAmount,loanMonth:this.options.loanMonth,lendingRates:this.options.lendingRates};let s=0,r=0;const p=D(this.options.prepayment);for(let n=1;n<=this.options.loanMonth-s;n++){if(n>0)for(;p.length>0&&p[0].repaymentDate.isBetween(this.options.firstRepaymentDate.clone().add(n-2,"M").subtract(1,"days"),this.options.firstRepaymentDate.clone().add(n-1,"M"),"[)");){const o=p.shift();e.loanAmount-=Number(o.repaymentAmount),e.lendingRates=Number(o.lendingRates||0),e.loanMonth-=Number(o.adjustLoanMonth||0),s+=Number(o.adjustLoanMonth||0),t.push({repaymentDate:o.repaymentDate.format(this.dateFormat),principalRepayment:o.repaymentAmount,remainingPrincipal:Number(e.loanAmount.toFixed(2))})}const d=Number((-F(e.lendingRates/100/12,e.loanMonth,e.loanAmount)).toFixed(2));let m=Number((e.loanAmount*e.lendingRates/100/12).toFixed(2));r+=e.loanAmount*e.lendingRates/100/12-m;const u=Number((d-m).toFixed(2));e.loanAmount-=u,e.loanMonth--,e.loanMonth===0&&(m=Number((m+r).toFixed(2))),t.push({key:n,times:n,repaymentDate:this.options.firstRepaymentDate.clone().add(n-1,"M").format(this.dateFormat),monthlyAmount:d,interestRepayment:m,principalRepayment:u,remainingPrincipal:Number(e.loanAmount.toFixed(2))})}}if(this.repayment==="equalPrincipal"){const e={loanAmount:this.options.loanAmount,loanMonth:this.options.loanMonth,lendingRates:this.options.lendingRates};let s=0,r=0;const p=D(this.options.prepayment);for(let n=1;n<=this.options.loanMonth-s;n++){if(p.length>0&&n>1&&p[0].repaymentDate.isBetween(this.options.firstRepaymentDate.clone().add(n-2,"M").subtract(1,"days"),this.options.firstRepaymentDate.clone().add(n-1,"M"),"[)")){const o=p.shift();e.loanAmount-=Number(o.repaymentAmount),e.lendingRates=Number(o.lendingRates||0),e.loanMonth-=Number(o.adjustLoanMonth||0),s+=Number(o.adjustLoanMonth||0),t.push({repaymentDate:o.repaymentDate.format(this.dateFormat),principalRepayment:o.repaymentAmount,remainingPrincipal:Number(e.loanAmount.toFixed(2))})}const d=Number((e.loanAmount/e.loanMonth).toFixed(2));let m=Number((e.loanAmount*e.lendingRates/100/12).toFixed(2));r+=e.loanAmount*e.lendingRates/100/12-m;const u=Number((d+m).toFixed(2));e.loanAmount-=d,e.loanMonth--,e.loanMonth===0&&(m=Number((m+r).toFixed(2))),t.push({key:n,times:n,repaymentDate:this.options.firstRepaymentDate.clone().add(n-1,"M").format(this.dateFormat),monthlyAmount:u,interestRepayment:m,principalRepayment:d,remainingPrincipal:Number(e.loanAmount.toFixed(2))})}}return t}else return[]},originalCumulativeInterestPayment:function(){let t=0;if(this.isValidOptions)for(const e of this.originDataSource)t+=e.interestRepayment||0;return Number(t.toFixed(2))},cumulativeInterestPayment:function(){let t=0;if(this.isValidOptions)for(const e of this.dataSource)t+=e.interestRepayment||0;return Number(t.toFixed(2))},cumulativeRepayment:function(){let t=0;if(this.isValidOptions)for(const e of this.prepayment)t+=Number(e.repaymentAmount||0);return t.toFixed(2)},cumulativeAdjustLoanMonth:function(){let t=0;if(this.isValidOptions)for(const e of this.prepayment)t+=Number(e.adjustLoanMonth||0);return t.toFixed(2)},savedMoney:function(){return(Number(this.originalCumulativeInterestPayment)-Number(this.cumulativeInterestPayment)).toFixed(2)}},watch:{repaymentPeriod(t){t!==0?this.loanMonth=t*12:this.loanMonth=120}},methods:{addPrepayment(){let t,e;this.prepayment.length===0?(t=this.firstRepaymentDate||c(),e=this.lendingRates||0):(t=this.prepayment[this.prepayment.length-1].repaymentDate||c(),e=this.prepayment[this.prepayment.length-1].lendingRates||0),this.prepayment.push({repaymentDate:t,repaymentAmount:0,adjustLoanMonth:0,lendingRates:e})},removePrepayment(){this.prepayment.pop()}}};function F(t,e,s,r,p){if(r=typeof r!="undefined"?r:0,p=typeof p!="undefined"?p:0,t!==0){const n=Math.pow(1+t,e);return-(t*(r+n*s))/((-1+n)*(1+t*p))}else if(e!==0)return-(r+s)/e;return 0}const ee=t=>(U("data-v-2236fa8c"),t=t(),H(),t),te=ee(()=>C("span",{class:"tips"},"\u8BA1\u7B97\u4EC5\u4F9B\u53C2\u8003\uFF0C\u8BF7\u4EE5\u94F6\u884C\u6570\u636E\u4E3A\u51C6!",-1)),ae={class:"panel"},ne=v(" \u81EA\u5B9A\u4E49\u8D37\u6B3E\u671F\u9650 "),oe=v(" \u7B49\u989D\u672C\u606F "),ie=v(" \u7B49\u989D\u672C\u91D1 "),le=v(" \u6DFB\u52A0\u63D0\u524D\u8FD8\u6B3E "),se=v(" \u79FB\u9664 "),re={class:"panel"};function me(t,e,s,r,p,n){const d=K,m=J,u=V,o=Q,h=S,y=Y,g=T,A=G,R=Z,I=O,E=W,L=q;return k(),_(M,null,[a(m,null,{default:l(()=>[a(d,{span:24},{default:l(()=>[te]),_:1})]),_:1}),a(m,null,{default:l(()=>[a(d,{xs:24,lg:6},{default:l(()=>[C("div",ae,[a(E,{layout:"horizontal","label-col":{span:8},"wrapper-col":{span:16},"label-align":"left",colon:!1},{default:l(()=>[a(o,{label:"\u8D37\u6B3E\u91D1\u989D"},{default:l(()=>[a(u,{value:t.loanAmount,"onUpdate:value":e[0]||(e[0]=i=>t.loanAmount=i),"addon-after":"\u5143",type:"number"},null,8,["value"])]),_:1}),a(o,{label:"\u8D37\u6B3E\u671F\u9650"},{default:l(()=>[a(y,{value:t.repaymentPeriod,"onUpdate:value":e[1]||(e[1]=i=>t.repaymentPeriod=i),type:"number"},{default:l(()=>[a(h,{value:0},{default:l(()=>[ne]),_:1}),(k(),_(M,null,x(30,(i,b)=>a(h,{key:"repaymentPeriod"+b,value:i},{default:l(()=>[v(w(i)+"\u5E74("+w(i*12)+"\u6708) ",1)]),_:2},1032,["value"])),64))]),_:1},8,["value"])]),_:1}),a(o,{label:"\u8D37\u6B3E\u6708\u6570"},{default:l(()=>[a(u,{value:t.loanMonth,"onUpdate:value":e[2]||(e[2]=i=>t.loanMonth=i),"addon-after":"\u6708",disabled:t.repaymentPeriod!==0},null,8,["value","disabled"])]),_:1}),a(o,{label:"\u8D37\u6B3E\u5229\u7387"},{default:l(()=>[a(u,{value:t.lendingRates,"onUpdate:value":e[3]||(e[3]=i=>t.lendingRates=i),"addon-after":"%"},null,8,["value"])]),_:1}),a(o,{label:"\u8FD8\u6B3E\u65B9\u5F0F"},{default:l(()=>[a(y,{value:t.repayment,"onUpdate:value":e[4]||(e[4]=i=>t.repayment=i)},{default:l(()=>[a(h,{value:"equalLoan"},{default:l(()=>[oe]),_:1}),a(h,{value:"equalPrincipal"},{default:l(()=>[ie]),_:1})]),_:1},8,["value"])]),_:1}),a(o,{label:"\u9996\u6B21\u8FD8\u6B3E"},{default:l(()=>[a(g,{value:t.firstRepaymentDate,"onUpdate:value":e[5]||(e[5]=i=>t.firstRepaymentDate=i),format:t.dateFormat,style:{width:"100%"}},null,8,["value","format"])]),_:1}),a(A),a(o,null,{default:l(()=>[a(I,null,{default:l(()=>[a(R,{type:"primary",disabled:!t.firstRepaymentDate,onClick:n.addPrepayment},{default:l(()=>[le]),_:1},8,["disabled","onClick"]),t.prepayment.length>0?(k(),P(R,{key:0,onClick:n.removePrepayment},{default:l(()=>[se]),_:1},8,["onClick"])):B("",!0)]),_:1})]),_:1}),(k(!0),_(M,null,x(t.prepayment,(i,b)=>(k(),_(M,{key:b},[a(A,{orientation:"left"},{default:l(()=>[v(" \u7B2C"+w(b+1)+"\u6B21\u63D0\u524D\u8FD8\u6B3E ",1)]),_:2},1024),a(o,{label:"\u8FD8\u6B3E\u65E5\u671F"},{default:l(()=>[a(g,{value:i.repaymentDate,"onUpdate:value":f=>i.repaymentDate=f,format:t.dateFormat,style:{width:"100%"}},null,8,["value","onUpdate:value","format"])]),_:2},1024),a(o,{label:"\u63D0\u524D\u8FD8\u6B3E\u91D1\u989D"},{default:l(()=>[a(u,{value:i.repaymentAmount,"onUpdate:value":f=>i.repaymentAmount=f,"addon-after":"\u5143",type:"number"},null,8,["value","onUpdate:value"])]),_:2},1024),a(o,{label:"\u8C03\u6574\u671F\u6570"},{default:l(()=>[a(u,{value:i.adjustLoanMonth,"onUpdate:value":f=>i.adjustLoanMonth=f,"addon-after":"\u671F",type:"number"},null,8,["value","onUpdate:value"])]),_:2},1024),a(o,{label:"\u8C03\u6574\u5229\u7387"},{default:l(()=>[a(u,{value:i.lendingRates,"onUpdate:value":f=>i.lendingRates=f,"addon-after":"%"},null,8,["value","onUpdate:value"])]),_:2},1024)],64))),128))]),_:1})])]),_:1}),a(d,{xs:24,lg:18},{default:l(()=>[C("div",re,[a(E,{"label-col":{span:6},"wrapper-col":{span:18},"label-align":"left",colon:!1},{default:l(()=>[a(o,{label:"\u7D2F\u8BA1\u63D0\u524D\u8FD8\u6B3E"},{default:l(()=>[a(u,{value:n.cumulativeRepayment,"onUpdate:value":e[6]||(e[6]=i=>n.cumulativeRepayment=i),"addon-after":"\u5143",readonly:""},null,8,["value"])]),_:1}),a(o,{label:"\u7D2F\u8BA1\u8C03\u6574\u671F\u6570"},{default:l(()=>[a(u,{value:n.cumulativeAdjustLoanMonth,"onUpdate:value":e[7]||(e[7]=i=>n.cumulativeAdjustLoanMonth=i),"addon-after":"\u5143",readonly:""},null,8,["value"])]),_:1}),a(o,{label:"\u539F\u7D2F\u8BA1\u5229\u606F"},{default:l(()=>[a(u,{value:n.originalCumulativeInterestPayment,"onUpdate:value":e[8]||(e[8]=i=>n.originalCumulativeInterestPayment=i),"addon-after":"\u5143",readonly:""},null,8,["value"])]),_:1}),a(o,{label:"\u7D2F\u8BA1\u7F34\u606F"},{default:l(()=>[a(u,{value:n.cumulativeInterestPayment,"onUpdate:value":e[9]||(e[9]=i=>n.cumulativeInterestPayment=i),"addon-after":"\u5143",readonly:""},null,8,["value"])]),_:1}),a(o,{label:"\u7D2F\u8BA1\u8282\u7701\u5229\u606F"},{default:l(()=>[a(u,{value:n.savedMoney,"onUpdate:value":e[10]||(e[10]=i=>n.savedMoney=i),"addon-after":"\u5143",readonly:""},null,8,["value"])]),_:1}),a(o,{"wrapper-col":{span:24}},{default:l(()=>[a(L,{"data-source":n.dataSource,columns:t.columns,bordered:"",size:"small",pagination:!1},null,8,["data-source","columns"])]),_:1})]),_:1})])]),_:1})]),_:1})],64)}var tt=z($,[["render",me],["__scopeId","data-v-2236fa8c"]]);export{tt as default};
