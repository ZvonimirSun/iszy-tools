var B=Object.defineProperty;var y=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,R=Object.prototype.propertyIsEnumerable;var k=(e,t,o)=>t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,v=(e,t)=>{for(var o in t||(t={}))L.call(t,o)&&k(e,o,t[o]);if(y)for(var o of y(t))R.call(t,o)&&k(e,o,t[o]);return e};import{q,a6 as A,al as J,am as T,an as U,ao as V,ap as W,aq as M,ar as F,i as E,as as S,at as H,au as P,av as G,r,o as w,c as I,a as g,f as a,w as n,x as z,aw as K,u as Q,A as X,y as c}from"./vendor.db920537.js";import{J as D}from"./jsoneditor.min.40b2780b.js";import{c as Y}from"./createFile.a2da5ab0.js";/* empty css                *//* empty css                */import{_ as Z}from"./index.c26a5e36.js";const{mapGetters:$,mapActions:ee}=q("cache");let i,l,h={Array:[1,2,3],Boolean:!0,Null:null,Number:123,Object:{a:"b",c:"d"},String:"Hello World"},f={Array:[1,2,3],Boolean:!0,Null:null,Number:123,Object:{a:"b",c:"d"},String:"Hello World"};const te={name:"JsonEditor",components:{Button:A,Space:J,Checkbox:T,Right:U,Left:V,CodeDownload:W,Save:M,Clear:F},data:()=>({autoSave:!1,diff:!0}),computed:v({},$(["getData"])),mounted(){this.init()},methods:v({init(){this.getData("jsonEditor")&&(this.autoSave=Boolean(this.getData("jsonEditor").autoSave),this.getData("jsonEditor").left&&(h=this.getData("jsonEditor").left),this.getData("jsonEditor").right&&(f=this.getData("jsonEditor").right)),i=new D(this.$refs.jsonEditorLeft,{mode:"code",modes:["code","tree","text","preview"],onClassName:this.onClassName,onChangeText:e=>{try{h=JSON.parse(e),l.refresh(),this.autoSave&&this.save()}catch{}},autocomplete:{applyTo:["value"],filter:"contain",trigger:"focus",getOptions:(e,t,o,p)=>new Promise((m,s)=>{const d=this.extractUniqueWords(p.get());d.length>0?m(d):s(new Error("noOptions"))})}},h),l=new D(this.$refs.jsonEditorRight,{mode:"tree",modes:["code","tree","text","preview"],onClassName:this.onClassName,onChangeText:e=>{try{f=JSON.parse(e),i.refresh(),this.autoSave&&this.save()}catch{}},autocomplete:{applyTo:["value"],filter:"contain",trigger:"focus",getOptions:(e,t,o,p)=>new Promise((m,s)=>{const d=this.extractUniqueWords(p.get());d.length>0?m(d):s(new Error("noOptions"))})}},f)},copyRight(){f=E(h),l.update(f),i.refresh(),this.autoSave&&this.save()},copyLeft(){h=E(f),i.update(h),l.refresh(),this.autoSave&&this.save()},async save(){if(this.autoSave)try{await this.setData({key:"jsonEditor",val:{autoSave:!0,left:i.get(),right:l.get()}})}catch{this.$msg.warn("JSON\u5B58\u5728\u9519\u8BEF\uFF0C\u4FDD\u5B58\u5931\u8D25"),await this.setData({key:"jsonEditor",val:{autoSave:!0,left:this.getData("jsonEditor").left,right:this.getData("jsonEditor").right}})}else await this.setData({key:"jsonEditor",val:{autoSave:!1,left:this.getData("jsonEditor").left,right:this.getData("jsonEditor").right}})},async clear(){await this.setData({key:"jsonEditor",val:void 0}),this.autoSave=!1,this.$msg.success("\u6E05\u9664\u6210\u529F")},download(){Y(i.getText(),"left.json")},changeDiff(){i.refresh(),l.refresh()},changeAutoSave(){this.save()},onClassName({path:e}){const t=S(h,e),o=S(f,e);return this.diff?H(t,o)?"":"differentElement":""},extractUniqueWords(e){return P(G(e,function(t,o){return K(t)?[o]:[o,String(t)]}))}},ee(["setData"])),beforeUnmount(){i&&i.destroy(),l&&l.destroy()}},oe={class:"editorPanel"},ae={ref:"jsonEditorLeft",class:"jsonEditor jsonEditorLeft"},se={class:"controller noShowMobile"},ne=c(" \u590D\u5236 "),ie=c(" \u590D\u5236 "),re=c(" \u4FDD\u5B58 "),ce=c("\u81EA\u52A8"),le=c(" \u6E05\u9664 "),de=c(" \u4E0B\u8F7D "),he=c("Diff"),fe={ref:"jsonEditorRight",class:"jsonEditor jsonEditorRight noShowMobile"},ue=c(" \u4E0B\u8F7D ");function pe(e,t,o,p,m,s){const d=r("Right"),u=r("Button"),b=r("Left"),x=r("Save"),j=r("Checkbox"),N=r("Clear"),O=r("CodeDownload"),C=r("Space");return w(),I(z,null,[g("div",oe,[g("div",ae,null,512),g("div",se,[a(C,{direction:"vertical"},{default:n(()=>[a(u,{type:"primary",onClick:s.copyRight,block:""},{default:n(()=>[a(d,{theme:"outline"}),ne]),_:1},8,["onClick"]),a(u,{type:"primary",onClick:s.copyLeft,block:""},{default:n(()=>[a(b,{theme:"outline"}),ie]),_:1},8,["onClick"]),a(u,{type:"primary",onClick:s.save,block:""},{default:n(()=>[a(x,{theme:"outline"}),re]),_:1},8,["onClick"]),a(j,{checked:e.autoSave,"onUpdate:checked":t[0]||(t[0]=_=>e.autoSave=_),onChange:s.changeAutoSave},{default:n(()=>[ce]),_:1},8,["checked","onChange"]),e.getData("jsonEditor")?(w(),Q(u,{key:0,type:"primary",onClick:s.clear,block:""},{default:n(()=>[a(N,{theme:"outline"}),le]),_:1},8,["onClick"])):X("",!0),a(u,{type:"primary",onClick:s.download,block:""},{default:n(()=>[a(O,{theme:"outline"}),de]),_:1},8,["onClick"]),a(j,{checked:e.diff,"onUpdate:checked":t[1]||(t[1]=_=>e.diff=_),onChange:s.changeDiff},{default:n(()=>[he]),_:1},8,["checked","onChange"])]),_:1})]),g("div",fe,null,512)]),a(C,{class:"showMobile",align:"center"},{default:n(()=>[a(u,{type:"primary",onClick:s.download},{default:n(()=>[ue]),_:1},8,["onClick"])]),_:1})],64)}var ke=Z(te,[["render",pe],["__scopeId","data-v-3c6abc4c"]]);export{ke as default};
